{"version":3,"file":"kendo.dataviz.chart.js","names":["$","window","kendo","dataviz","Class","isNumber","datavizConstants","constants","MAX_VALUE","MIN_VALUE","VALUE","DATE","CENTER","TOP","BOTTOM","LEFT","WHITE","CIRCLE","X","Y","RIGHT","BLACK","DEFAULT_PRECISION","ARC","defined","getter","isArray","ChartElement","Point","Box","alignPathToPixel","setDefaultOptions","isString","inArray","isFunction","valueOrDefault","isObject","parseDate","deepExtend","last","eventElement","getTemplate","TextBox","ShapeElement","getSpacing","CurveProcessor","append","styleValue","CategoryAxis","BoxElement","Title","round","limitValue","grep","elementStyles","bindEvents","services","unbindEvents","support","drawing","Path","Animation","AnimationFactory","Group","Color","geometry","GeometryPoint","transform","ChartAxis","extend","init","axis","this","_axis","options","value","point","getCategory","getValue","slot","from","to","limit","range","valueRange","findAxisByName","name","axes","idx","length","prepareUserOptions","ChartPane","pane","visual","chartsVisual","chartContainer","_pane","ChartPlotArea","plotArea","_plotArea","backgroundVisual","_bgVisual","countNumbers","values","count","i","num","Aggregates","min","Math","max","sum","sumOrNull","result","avg","first","getField","field","row","get","SeriesBinder","_valueFields","_otherFields","_nullValue","_undefinedValue","register","seriesTypes","valueFields","otherFields","this$1$1","type","_makeValue","undefined","canonicalFields","series","concat","bindPoint","pointIx","item","fields","data","pointData","Array","fieldData","slice","_bindFromArray","srcValueFields","sourceFields","srcPointFields","_bindFromObject","initialValue","array","object","srcFields","fieldName","srcFieldName","sourceFieldName","push","current","percentRegex","standardDeviationRegex","RegExp","ErrorRangeCalculator","errorValue","initGlobalRanges","deviationMatch","exec","valueGetter","createValueGetter","average","getAverage","deviation","getStandardDeviation","multiple","parseFloat","errorRange","low","high","globalRange","indexOf","standardError","getStandardError","binder","index","OBJECT","getErrorRange","pointValue","Error","percentValue","abs","sqrt","isSample","total","squareDifferenceSum","pow","browser","INITIAL_ANIMATION_DURATION","FADEIN","BORDER_BRIGHTNESS","START_SCALE","msie","ERROR_LOW_FIELD","ERROR_HIGH_FIELD","X_ERROR_LOW_FIELD","X_ERROR_HIGH_FIELD","Y_ERROR_LOW_FIELD","Y_ERROR_HIGH_FIELD","ZERO","INTERPOLATE","GAP","ABOVE","BELOW","SMOOTH","STEP","AREA","BAR","BOX_PLOT","BUBBLE","BULLET","CANDLESTICK","COLUMN","DONUT","FUNNEL","PYRAMID","HEATMAP","HORIZONTAL_WATERFALL","LINE","OHLC","PIE","POLAR_AREA","POLAR_LINE","POLAR_SCATTER","RADAR_AREA","RADAR_COLUMN","RADAR_LINE","RANGE_AREA","RANGE_BAR","RANGE_COLUMN","SCATTER","SCATTER_LINE","VERTICAL_AREA","VERTICAL_BOX_PLOT","VERTICAL_BULLET","VERTICAL_LINE","VERTICAL_RANGE_AREA","WATERFALL","EQUALLY_SPACED_SERIES","TRENDLINE_LINEAR","TRENDLINE_MOVING_AVERAGE","TRENDLINE_SERIES","LEGEND_ITEM_CLICK","LEGEND_ITEM_HOVER","LEGEND_ITEM_LEAVE","SERIES_CLICK","SERIES_HOVER","SERIES_OVER","SERIES_LEAVE","PLOT_AREA_CLICK","PLOT_AREA_HOVER","PLOT_AREA_LEAVE","DRAG","DRAG_END","DRAG_START","ZOOM_START","ZOOM","ZOOM_END","SELECT_START","SELECT","SELECT_END","RENDER","SHOW_TOOLTIP","HIDE_TOOLTIP","PANE_RENDER","LOGARITHMIC","CATEGORY","INSIDE_END","INSIDE_BASE","OUTSIDE_END","MOUSEWHEEL","MOUSEWHEEL_DELAY","DRILLDOWN","DRILLDOWN_FIELD","MIN_MOVING_AVERAGE_PERIOD","GLASS","TOOLTIP_OFFSET","LINE_MARKER_SIZE","MOUSEWHEEL_ZOOM_RATE","ErrorBarBase","isVertical","chart","fn","call","reflow","targetBox","linePoints","endCaps","valueBox","getAxis","getSlot","centerBox","center","capsWidth","getCapsWidth","capValue","x","y","capStart","capEnd","y1","y2","box","x1","x2","boxSize","width","height","floor","createVisual","rect","toRect","sender","getSender","color","line","createDefaultVisual","defaultVisual","lineOptions","stroke","dashType","moveTo","lineTo","animation","delay","zIndex","CategoricalErrorBar","seriesValueAxis","anyHasZIndex","elements","appendIfNotNull","element","areNumbers","segmentVisible","visible","pointVisibility","bindSegments","points","categoriesCount","seriesCount","categories","equalsIgnoreCase","a","b","toLowerCase","evalOptions","context","state","dryRun","defaults","depth","needsEval","excluded","property","hasOwnProperty","propValue","filterSeriesByType","types","currentSeries","getDateField","intlService","key","hasGradientOverlay","overlay","gradient","hasValue","isDateAxis","axisOptions","sampleCategory","dateCategory","Date","singleItemOrArray","AREA_REGEX","hasValue$1","convertableToNumber","findNext","ref","pointHasValue","outPoint","start","dir","getter$$1","hasItem","createOutOfRangePoints","hasMinPoint","hasMaxPoint","minPoint","maxPoint","missingValues","test","stack","seriesMissingValues","_outOfRangeMinPoint","_outOfRangeMaxPoint","CategoricalChart","chartService","categoryAxis","seriesCategoryAxis","valueAxisRanges","categoryPoints","seriesPoints","seriesOptions","_evalSeries","render","traverseDataPoints","addValue","bind","pointOptions","seriesIx","pointType","prototype","vertical","invertAxes","plotValue","isStacked100","categoryIx","otherValues","categorySum","other","otherStack","group","plotRange","startValue","isStacked","positive","prevValue","isStackedBar","STRING","otherValue","valueAxis","axisCrossingValue","categoryAxisCrossingValue","stackLimits","axisName","stackName","pIx","isFinite","updateStackRange","chartSeries","limitsCache","limits","errorTotals","negative","sparseArrayLimits","addErrorBar","errorBars","lowValue","highValue","seriesErrorRanges","addPointErrorBar","stackedErrorRange","updateRange","errorBar","createPoint","owner","noteText","dataItem","evalPointOptions","category","_defaults","doEval","axisRange","namedValueAxes","categorySlots","chartPoints","categorySlot","valueSlot","pointSlot","aboveAxis","stackValue","percentage","reflowPoint","reflowCategories","clip","limitPoints","limitPoint","limitedSlot","limitSlot","equals","reverse","axisCrossingValues","axisIndex","slotX","slotY","callback","_outOfRangeCallback","seriesIx$1","currentCategory","categoryAt","seriesIx$2","outOfRangePoint","formatPointValue","format","auto","PointEventsMixin","click","e","trigger","eventArgs","hover","over","out","runningTotal","originalEvent","NoteMixin","createNote","notes","text","label","note","Note","LinePoint","tooltipTracking","markers","labels","_rendered","size","marker","createMarker","labelTemplate","labelText","formatValue","align","vAlign","margin","left","right","markerBorder","background","border","brightness","toHex","rotation","opacity","markerBox","_childBox","childBox","clone","reflowLabel","noteTargetBox","anchor","position","alignTo","createHighlight","highlight","defaultColor","shadow","getElement","highlightVisual","highlightVisualArgs","paddingBox","halfSize","Rect","tooltipAnchor","clipBox","overlaps","verticalAlign","horizontalAlign","horizontal","overlapsBox","unclipElements","noclip","padding","HIGHLIGHT_ZINDEX","LineSegment","toGeometryPoints","customVisual","segmentVisual","fromPoints","closed","close","aliasFor","coords","parent","getNearestPoint","StepLineMixin","calculateStepPoints","justified","stepAxis","stepDir","previousPoint","toGeometryPoint","stepPoint","lintPoint","StepLineSegment","SplineSegment","segments","process","curve","apply","LineChartMixin","renderSegments","lastSegment","_segments","sortedPoints","sortPoints","pointCount","createSegment","_addSegment","children","unshift","segment","nearestPoint","target","allPoints","nearestPointDistance","pointDistance","distanceTo","ClipAnimation","setup","_setEnd","step","pos","interpolateValue","topRight","bottomRight","suspend","setX","resume","duration","ClipAnimationMixin","createAnimation","root","getRoot","transitions","clipPath","fromRect","_setChildrenAnimation","animationPoints","LineChart","style","supportsPointInactiveOpacity","AreaSegment","prevSegment","stackPoints","createFill","fill","createStroke","lineCap","strokeSegments","_strokeSegments","createStrokeSegments","segmentsFromPoints","stackSegments","createStackSegments","map","Segment","hasStackSegment","fillSegments","hasStackSegments","fillToAxes","fillPath","crossingValue","endSlot","firstPoint","lastPoint","end","StepAreaSegment","SplineAreaSegment","curveProcessor","controlOut","controlIn","AreaChart","previousSegment","_gapStackPoints","_stackPoints","stackPoint","startIdx","endIdx","pointOffset","currentSeriesIx","_previousSegmentPoint","gapStackPoint","_createGapStackPoint","segmentIx","seriesIdx","AxisGroupRangeTracker","axisRanges","update","chartAxisRanges","chartRange","reset","query","BarLabel","content","textBox","textOptions","labelBox","contentBox","top","bottom","alignToClipBox","parentBox","Bar","createLabel","rectVisual","createRect","strokeOpacity","path","getBorderColor","lineJoin","createGradientOverlay","baseColor","_brightness","borderColor","forEach","forEachReverse","ClusterLayout","rtl","gap","spacing","slots","slotSize","child","StackWrap","positionAxis","childrenCount","currentChild","snapTo","wrap","BarChart","clusterType","stackType","labelOptions","negativeColor","cluster","getStackWrap","stackWrap","stackGroup","wraps","_stackGroup","zeroSlot","stackAxis","childrenLength","_setAnimationOptions","pointVisual","origin","Candlestick","ocSlot","open","lhSlot","realBody","mid","lines","reflowNote","_mainVisual","mainVisual","createOverlay","createBody","createLines","container","body","set","drawLines","lineStyle","normalColor","tooltip","CandlestickChart","splitValue","downColor","parts","BoxPlot","whiskerSlot","boxSlot","q1","q3","reflowBoxSlot","lower","upper","reflowWhiskerSlot","medianSlot","median","mean","meanSlot","meanPoints","calcMeanPoints","whiskerPoints","calcWhiskerPoints","medianPoints","calcMedianPoints","renderOutliers","outliers","outerFence","outlierValue","extremes","markersBorder","shape","reflowOutliers","move","whiskers","CROSS","VerticalBoxPlot","BoxPlotChart","filterOutliers","items","ScatterErrorBar","seriesAxes","ScatterChart","_initFields","xAxisRanges","yAxisRanges","valueErrorField","lowField","highField","createMissingValue","intl","xAxisName","xAxis","yAxisName","yAxis","xAxisRange","yAxisRange","namedXAxes","axisX","namedYAxes","axisY","ref$1","Bubble","radius","highlightGroup","Circle","createGradient","stops","offset","BubbleChart","_maxSize","negativeValues","updateBubblesSize","pointsCount","animationOptions","minR","minSize","maxR","maxSize","minArea","PI","areaRatio","area","Target","Bullet","targetValueSlot","targetSlotX","targetSlotY","targetSlot","bodyVisual","create","BulletChart","seriesItem","wrapData","bulletOptions","bullet","isNaN","BaseTooltip","getStyle","pointColor","backgroundColor","font","borderWidth","paddingTop","paddingBottom","paddingLeft","paddingRight","show","tooltipOptions","isDark","className","notify","hide","destroy","CrosshairTooltip","crosshair","formatService","initAxisName","showAt","stickyMode","formattedValue","dateFormats","baseUnit","getAnchor","ref_options","lineBox","bbox","bottomLeft","translate","topLeft","Crosshair","moveLine","lineEnd","getBox","dim","lineStart","pointCategoryIndex","axisLineBox","currentAxis","ChartContainer","shouldClip","_clipBox","chartsBox","clipRect","unclipLabels","stackRoot","charts","j","isStackRoot","Pane","id","ID","createTitle","titleOptions","title","buildTitle","appendAxis","appendAxisAt","splice","appendChart","empty","removeAxis","i$1","removeChart","pop","visualStyle","renderComplete","createGridLines","clipRoot","allAxes","vGridLines","hGridLines","gridLines","altAxis","refresh","clear","renderVisual","notifyRender","axisValueField","length$1","idx$1","axis$1","lineBox$1","service","getService","paneIndex","shrinkToFit","PlotAreaBase","initFields","initSeries","legend","crosshairs","originalOptions","originalSeries","_bindCache","WeakMap","createPanes","createCrosshairs","cached","paneDefaults","paneOptions","panes","panesLength","currentPane","crosshairOptions","currentCrosshair","removeCrosshairs","hideCrosshairs","findPane","matchingPane","findPointPane","containsPoint","axisToRemove","filteredAxes","chartToRemove","filteredCharts","addToLegend","inactiveItems","inactiveItemsLabels","seriesVisible","visibleInLegend","itemLabelOptions","markerColor","active","groupAxes","xAxes","yAxes","paneIx","paneAxes","axisIx","any","groupSeriesByPane","seriesByPane","seriesPaneName","filterVisibleSeries","unpad","reflowPanes","detachLabels","reflowAxes","reflowCharts","redraw","panesArray","cleanGradients","crossingAxes","crossingValues","valuesToAdd","defaultValue","alignAxisTo","targetAxis","targetCrossingValue","slotEdge","targetEdge","axisBox","alignAxes","xAnchor","yAnchor","xAnchorCrossings","yAnchorCrossings","leftAnchors","rightAnchors","topAnchors","bottomAnchors","paneId","paneAnchor","anchorCrossings","_overlap","_mirrored","mirror","pane$1","paneId$1","visible$1","anchor$1","anchorCrossings$1","COORD_PRECISION","shrinkAxisWidth","axisGroupBox","overflowX","shrink","shrinkAxisHeight","shrinked","overflowY","fitAxes","offsetX","paneBox","offsetY","currentAxis$1","reflowPaneAxes","autoRotateAxisLabels","groupedAxes","rotated","allPaneAxes","autoRotateLabels","chartPane","remainingHeight","autoHeightPanes","percents","parseInt","currentPane$1","i$2","currentPane$2","backgroundBox","axesCount","axisA","axisB","chartsBoxes","boxes","addBackgroundPaths","multipath","paths","backgroundContainsPoint","bg","MultiPath","appendVisual","pointsByCategoryIndex","categoryIndex","pointsBySeriesIndex","seriesIndex","filterPoints","pointsBySeriesName","findPoint","paneByPoint","detachAxisGroupLabels","labelAxisCount","labelAxis","createLabelAxis","onAxis","END","START","edge","plotBands","isTrendline","trendlineFactory","createTrendlineSeries","modifiedSeries","forSeries","seriesByName","for","trendlineSeries","INHERIT","filter","find","isSingleAxis","some","reduce","acc","PlotAreaEventsMixin","_dispatchEvent","SeriesAggregator","defaultAggregates","seriesFields","_seriesFields","rootAggregate","aggregate","_series","_binder","fieldAggregate","canonicalName","aggregatePoints","srcPoints","_bindPoints","firstDataItem","dataItems","srcValues","_bindField","setValue","parentObj","split","shift","DefaultAggregates","aggregates","seriesType","RangeBar","fromOptions","toOptions","labelFrom","_createLabel","labelTo","RangeBarChart","plotLimits","RangeLinePoint","AUTO","RangeAreaPoint","initLabelsFormat","fromPoint","toPoint","copyFields","fromBox","toBox","positionLabels","fromLabelPosition","toLabelPosition","RangeAreaSegment","toPoints","fromSegments","toPath","fromPath","SplineRangeAreaSegment","createCurveSegments","StepRangeAreaSegment","RangeAreaChart","fromSlot","toSlot","OHLCPoint","oPoints","cPoints","lhPoints","oSlot","cSlot","OHLCChart","WaterfallSegment","WaterfallChart","createSegments","totalCategories","summary","prevPoint","registry","impl","String","calculateSlope","sourceValues","slope","intercept","xy","xMin","Number","xMax","xValue","yValue","calculateMovingAverage","period","averagePoints","lastValue","valueGetter$1","seriesValues","totalRange","totalRangeIndices","currentRange","currentRangeIndices","ceil","getData","categoryField","trendline","calculatePoints","getData$1","AREA_SERIES","OUT_OF_RANGE_SERIES","CategoricalPlotArea","namedCategoryAxes","valueAxisRangeTracker","_seriesPointsCache","_currentPointsCache","stack100","createCategoryAxes","aggregateCategories","createCategoryAxesLabels","createCharts","createValueAxes","filterSeries","trendlineAggregateForecast","forecast","before","after","srcSeries","aggregateSeries","paneSeries","visibleSeries","groups","groupSeriesByCategoryAxis","groupIx","createChartGroup","createAreaChart","createRangeAreaChart","createBarChart","createRangeBarChart","createBulletChart","createCandlestickChart","createBoxPlotChart","createOHLCChart","createWaterfallChart","createLineChart","processedSeries","axisPane","dataLength","_seriesMax","outOfRangePoints","clearSeriesPointsCache","seriesSourcePoints","categoriesHash","srcCategories","dateAxis","srcData","getFn","mapCategories","totalIndex","aggregator","categoryItem","categoryIdx","totalCount","categoriesToAdd","defaultPaneName","stackableChartOptions","firstSeries","categoryAxes","unique","axisSeries","groupSeries","barChart","rangeColumnChart","bulletChart","lineChart","areaChart","rangeAreaChart","waterfallChart","axisRequiresRounding","categoryAxisName","categoryAxisIndex","centeredSeries","seriesAxis","aggregatedAxis","createLabels","definitions","isJustified","_forecast","DateCategoryAxis","primaryAxis","tracker","defaultRange","baseOptions","roundToMajorUnit","defaultAxisRange","LogarithmicAxis","NumericAxis","eventType","_eventCoordinates","pointPane","updateAxisOptions","targetOptions","axesOptions","s","Highlight","_points","arrayPoints","toggleHighlight","hasHighlight","togglePointHighlight","toggleHandler","toggle","preventDefault","_defaultPrevented","isHighlighted","acceptKey","mouseKey","event","ctrlKey","shiftKey","altKey","toChartAxisRanges","ranges","Pannable","_active","_panAxes","pan","delta","lock","updatedAxes","limitRange","ZoomSelection","createElement","marquee","_marquee","document","marqueeColor","appendChild","removeElement","parentNode","removeChild","setStyles","styles","zoomPane","_zoomPane","_elementOffset","_zoomPaneClipBox","pageX","pageY","chartElement","elementOffset","_selectionPosition","elementOffset$$1","selectionPosition","_updateAxisRanges","zoom","pointsRange","startLocation","location","limitValue$1","util","MousewheelZoom","rate","updateRanges","zoomRange","LegendLayout","Layout","lineSpacing","orientation","alignItems","legendItem","clippedBBox","rectToBox","addVisual","LegendItem","createContainer","FloatElement","markerOptions","cursor","eventSink","_itemOverlay","widget","args","_legendItemHover","pointIndex","_unsetActivePoint","renderChildren","HORIZONTAL","CUSTOM","Legend","createContainers","createLegendTitle","createItems","userAlign","hasTitle","itemsContainer","innerElement","hasItems","legendBox","containerCustomReflow","containerReflow","alignTarget","containerBox","createTitleLayout","appendTitleLayoutContent","layout","Boolean","PlotAreaFactory","_registry","match","entry","trendlines","createDiv","classNames","closestHandle","hasClasses","Selection","observer","_dateAxis","initOptions","offsetHeight","createElements","_index","onPane","wrapper","direction","selection","leftMask","rightMask","leftHandle","rightHandle","selectionStyles","leftHandleHeight","rightHandleHeight","borderLeftWidth","borderRightWidth","cssText","obj","mousewheel","_mousewheelHandler","_mousewheel","_domEvents","DomEventsBuilder","stopPropagation","_start","_move","_end","tap","_tap","press","_press","gesturestart","_gesturestart","gesturechange","_gesturechange","gestureend","_gestureend","clearTimeout","_mwTimeout","_state","_rangeEventArgs","_value","_pointInPane","modelCoords","_toModelCoordinates","eventCoordinates","handle","bodyRect","getBoundingClientRect","inBody","moveTarget","addClass","oldRange","span","scale","removeClass","rightClick","which","mousewheelDelta","expand","setTimeout","touch","touches","p0","p1","_slot","leftMaskWidth","rightMaskWidth","distance","fromValue","toValue","zDir","relative","minDelta","maxDelta","Tooltip","_current","SharedTooltip","tooltipPoints","_slotAnchor","_defaultAnchor","shared","categoryText","categoryFormat","slotCenter","BarChartAnimation","fromScale","abort","scaleX","scaleY","BubbleAnimation","easing","FadeInAnimation","fadeTo","PieAnimation","ScatterLineChart","missingValue","scatterValueGetter","scatterRegistry","samplingInterval","diff","log","relativeValue","autoMajorUnit","getData$2","getData$3","XYPlotArea","xAxisRangeTracker","yAxisRangeTracker","filteredSeries","createScatterChart","createScatterLineChart","createBubbleChart","createAxes","xAxisOptions","yAxisOptions","createXYAxis","inferredDate","namedAxes","isLog","typeSamples","seriesAxisName","firstPointValue","DateValueAxis","xAxesOptions","yAxesOptions","axisPane$1","xValues","yValues","currentValue","updateAxisOptions$1","PieSegment","sector","autoTextColor","themeLabels","theme","seriesDefaults","animationDelay","labelsOptions","labelsDistance","angle","middle","lp","labelHeight","labelWidth","startAngle","innerRadius","endAngle","createSegmentVisual","borderOptions","fallbackFill","userSpace","singleSegment","ShapeBuilder","createRing","midAndle","tooltipAlignment","RAD_30","rad","RAD_60","radians","sine","sin","cosine","cos","DEFAULT_FONT","PieChartMixin","createLegendItem","legendOptions","pointVisible","legendItems","PieChart","seriesColors","colorsCount","anglePerValue","constantAngle","currentAngle","explode","Ring","evalSegmentOptions","segmentOptions","seriesConfigs","minWidth","halfMinWidth","defaultPadding","newBox","newBoxCenter","boxCenter","leftSideLabels","rightSideLabels","seriesConfig","setRadius","sort","labelComparator","leftLabelsReflow","rightLabelsReflow","distances","distanceBetweenLabels","distributeLabels","lr","firstBox","secondBox","remaining","_takeDistance","reflowLabels","amount","available","boxX","labelsCount","labelDistance","boxY","hAlignLabel","connectors","_connectorLines","connectorsColor","connectorLine","centerPoint","sr","crossing","intersection","pointInCircle","space","autoFit","pieCenter","bboxBottom","reverseValue","originalX","sector_center","cx","cy","t","a1","a2","b1","b2","uat","ub","ua","PiePlotArea","createPieChart","pieChart","DonutSegment","DonutChart","holeSize","totalSize","seriesWithoutSize","currentSeries$1","DonutPlotArea","createDonutChart","donutChart","PolarPlotAreaBase","createPolarAxis","createValueAxis","polarAxis","axisType","axisDefaultRange","valueAxisOptions","RadarLogarithmicAxis","RadarNumericAxis","valueAxisBox","heightDiff","PolarScatterChart","valueRadius","onCircle","PolarLineChart","SplinePolarAreaSegment","_polarAxisCenter","PolarAreaSegment","centerSegment","PolarAreaChart","_hasMissingValuesGap","xComparer","PolarPlotArea","PolarAxis","majorGridLines","minorGridLines","scatterChart","RadarLineChart","seriesSegments","groupBySeriesIx","isFirstDataPoint","isLastDataPoint","SplineRadarAreaSegment","RadarAreaSegment","RadarAreaChart","RadarSegment","RadarClusterLayout","slotAngle","slotSector","RadarStackLayout","childSector","RadarBarChart","RadarPlotArea","RadarCategoryAxis","_hasBarCharts","_isStacked100","chartOptions","FunnelSegment","chartBox","createPath","FunnelChart","labelPadding","dynamicSlopeReflow","totalHeight","firstSegment","maxSegment","lastUpperSide","previousOffset","previousHeight","nextSegment","nextPercentage","segmentSpacing","constantSlopeReflow","decreasingWidth","neckRatio","finalNarrow","dynamicSlope","dynamicHeight","PyramidChart","FunnelPlotArea","createChart","chartType","HeatmapPoint","labelColor","isRoundRect","ROUNDED_RECT","halfBorderWidth","borderRadius","HeatmapChart","setRange","minLightnessOffset","parseColor","hsl","toHSL","l","toCss","colorScale","indexX","indexY","xRange","yRange","ref$2","xIndex","yIndex","xIn","yIn","HeatmapPlotArea","bindCategories","createAxisLabels","xCategories","createHashSet","yCategories","has","add","createHeatmapChart","firstCategory","updateAxisOptions$2","COLOR","FIRST","MAX","MIN","NOTE_TEXT","errorLow","errorHigh","AXIS_NAMES","MOUSEMOVE","CONTEXTMENU","MOUSELEAVE","Chart","userOptions","themeOptions","observers","addObserver","ChartService","_initElement","_originalOptions","_theme","_initTheme","_initHandlers","_initSurface","FontLoader","preloadFonts","fontLoaded","_destroyed","_redraw","_attachEvents","_setElementClass","firstChild","seriesCopies","aliases","alias","resolveAxisAliases","applyDefaults","applySeriesColors","getSize","chartArea","offsetWidth","resize","force","currentSize","_size","hasSize","_resize","_selections","_destroySelections","_setupSelection","_noTransitionsRedraw","paneName","_model","findPaneByName","findPaneByIndex","seriesName","categoryName","pointByCategoryName","togglePointsHighlight","_highlight","showTooltip","_sharedTooltip","_tooltip","hideTooltip","surface","_surfaceWrap","elementSize","renderAs","_destroySurface","Surface","_surfaceMouseenterHandler","_surfaceMouseleaveHandler","model","_getModel","_destroyView","traverse","draw","play","_createTooltip","_createPannable","_createZoomSelection","_createMousewheelZoom","triggerPaneRender","_navState","_cancelDomEvents","exportVisual","exportOptions","currentOptions","clearMissingValues","pannable","_pannable","zoomable","_zoomSelection","_mousewheelZoom","_toggleDragZoomEvents","allowDrag","requiresHandlers","allowZoom","_dragZoomEnabled","touchAction","_touchAction","_toggleDomEvents","drag","domEvents","toggleDrag","toggleZoom","_createSharedTooltip","axisDefaults","themeAxisDefaults","mapAxisOptions","axisColor","applyAxisDefaults","seriesLength","commonDefaults","themeSeriesDefaults","commonThemeDefaults","cleanupNestedSeriesDefaults","applySeriesDefaults","colors","seriesColor","_createPlotArea","RootElement","_modelOptions","subtitle","orderTitles","DEFAULT_WIDTH","DEFAULT_HEIGHT","skipSeries","selections","select","_selectStart","_select","_selectEnd","_clickHandler","_click","_mouseleaveHandler","_mouseleave","_mouseover","_mouseout","_mousemove","throttle","removeObserver","eventNames","_toDocumentCoordinates","_updateDrilldownPoint","_resetDrilldownPoint","_startDrilldown","isDefaultPrevented","obj$1","_shouldAttachMouseMove","_hoveredPoint","_plotAreaHovered","_hasInactiveOpacity","_activeChartInstance","_applySeriesOpacity","_updateSeriesOpacity","cancel","_stopChartHandlers","_gestureDistance","suspendTracking","_zooming","resumeTracking","mousewheelZoom","previousGestureDistance","scaleDelta","_drawingChartElement","leave","_startNavigation","_suppressHover","panning","ranges$1","translateRange","_endNavigation","_mousewheelZoomRate","totalDelta","scaleRange","chartEvent","_getChartElement","eventTarget","closest","coordinates","_elementPadding","_padding","clientX","clientY","inverseTransform","elementScale","invert","drawingElement","sharedTooltip","_startHover","_trackSharedTooltip","_propagateClick","handlingTap","_showInactiveOpacity","_displayTooltip","_displayInactiveOpacity","activePoint","multipleSeries","highlightPoints","chartInstance","_chartInstanceFromPoint","inactivePoints","_getInactivePoints","_getInactiveOpacityForSeries","_getAllPointsOfType","constructor","_updateHoveredPoint","hoveredPoint","drilldown","_drilldownState","resetOpacity","currSeries","defaultOpacity","_getDefaultOpacityForSeries","inactiveOpacity","activeSeries","_activePoint","hasInactiveOpacity","_hideInactiveOpacity","hasDefaultInactiveOpacity","defaultInactiveOpacity","DEFAULT_SERIES_OPACITY","_mouseMoveTrackHandler","_mouseMoveTracking","seriesPoint","_trackCrosshairs","overPlotArea","_tooltipCategoryIx","_sharedHighlight","pointArgs","hoverArgs","hideElements","keepTooltipOpen","_deferRedraw","_clearRedrawTimeout","_redrawTimeout","clearInterval","autoBind","bindCategoryAxisFromSeries","uniqueCategories","HashMap","bindable","dataIx","dataRow","srcDates","comparer","dateComparer","dates","sortDates","uniqueDates","rows","rowCount","rowIx","colCount","colIx","transpose","_isBindable","transitionsState","updateMouseMoveHandler","applyOptions","setOptions","setDirection","setIntlService","noTransitionsRedraw","unbind","bar","column","rangeColumn","verticalLine","pie","donut","verticalArea","scatter","scatterLine","bubble","candlestick","ohlc","boxPlot","verticalBullet","polarArea","polarLine","radarArea","radarLine","waterfall","DATA_FIELDS","fieldValue","originalValue","nullValue","jQuery","undefined$1","Widget","ui","ChartBreadcrumb","_attachChartEvents","_renderBreadcrumb","events","rootItem","icon","showIcon","breadcrumb","_onChartDrilldown","_onChartDrilldownLevelChange","deferred","resetDrilldownLevel","getKendoChart","breadcrumbElement","Breadcrumb","_onBreadcrumbClick","level","findIndex","plugin","NS","outerWidth","_outerWidth","outerHeight","_outerHeight","KendoChart","DataSource","InstanceObserver","template","encode","htmlEncode","MOUSELEAVE_NS","AXIS_LABEL_CLICK","DRILLDOWN_LEVEL_CHANGE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","DOCUMENT_ELEMENT","documentElement","CHANGE","DATABOUND","LEAVE","Observable","UserEvents","global","multiTouch","fastTap","ChartInstanceObserver","handlerMap","legendItemClick","dataSource","_seriesVisibility","SeriesVisibilityState","_initDataSource","_showWatermarkOverlay","instance","_instance","_bindSeries","_bindCategories","dimensions","_setEvents","_getThemeOptions","_sourceSeries","setDataSource","_hasDataSource","_onDataChanged","_dataChangeHandler","_hasData","fetch","off","_destroyCrosshairTooltips","findSeries","ChartSeries","findSeriesByName","_createSeries","findSeriesByIndex","originalChartArea","_seriesOptions","on","relatedTarget","autoHide","themeName","SASS_THEMES","autoTheme","themes","_initChart","_createChart","_isRtl","_onInit","_initTooltip","tooltips","_crosshairTooltips","_getCrosshairTooltip","_showTooltip","_hideTooltip","_onRender","_copyMembers","names","_events","_tooltipleave","_onLegendItemClick","_legendItemClick","save","_onDrilldown","drilldownSeriesFactory","Promise","then","resolved","_onDrilldownData","drilldownSeries","Object","assign","_bindData","groupedSeries","view","grouped","seriesVisibility","read","applyByGroup","applyByIndex","seriesData","_groupIx","categoriesData","_bindCategoryAxis","isRtl","css","proxyMembers","createProxyMember","arguments","nameTemplate","seriesClone","legacyTemplate","groupNameTemplate","logToConsole","_groupValue","ExportMixin","PDFMixin","action","persistSeriesVisibility","saveState","geom","attr","applyStylesFromKendoAttributes","mobileScrollerSelector","_mobileScroller","downEvent","applyEventMap","guid","_closeTooltipHandler","_closeTooltip","_clearShowTimeout","remove","sharedTemplate","colspan","colorMarker","nameColumn","sharedTemplateIterator","_offset","_ensureElement","stop","animate","showTimeout","_measure","zoomLevel","viewport","scrollTop","pageYOffset","scrollLeft","pageXOffset","movable","_fit","fakeContainer","normalizeStyle","toggleClass","_sharedContent","_pointContent","html","forceHide","_hideElement","is","appendTo","contains","fadeOut","always","toString","tooltipTemplate","xLow","xHigh","yLow","yHigh","viewPortSize","output","_chart","_options","_filterPoints","_clearFields","toggleVisibility","_filterData","__meta__","description","depends","features","kendo$1"],"sources":["kendo.dataviz.chart.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\nimport './kendo.color.js';\nimport './kendo.drawing.js';\nimport './kendo.dataviz.core.js';\nimport './kendo.breadcrumb.js';\nimport './kendo.data.js';\nimport './kendo.dataviz.themes.js';\nimport './kendo.userevents.js';\nimport './kendo.icons.js';\n\n/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-charts` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n\n(function($) {\n/* eslint-disable */\n\nwindow.kendo.dataviz = window.kendo.dataviz || {};\nvar dataviz = kendo.dataviz;\nvar Class = dataviz.Class;\nvar isNumber = dataviz.isNumber;\nvar datavizConstants = dataviz.constants;\nvar MAX_VALUE = datavizConstants.MAX_VALUE;\nvar MIN_VALUE = datavizConstants.MIN_VALUE;\nvar VALUE = datavizConstants.VALUE;\nvar DATE = datavizConstants.DATE;\nvar CENTER = datavizConstants.CENTER;\nvar TOP = datavizConstants.TOP;\nvar BOTTOM = datavizConstants.BOTTOM;\nvar LEFT = datavizConstants.LEFT;\nvar WHITE = datavizConstants.WHITE;\nvar CIRCLE = datavizConstants.CIRCLE;\nvar X = datavizConstants.X;\nvar Y = datavizConstants.Y;\nvar RIGHT = datavizConstants.RIGHT;\nvar BLACK = datavizConstants.BLACK;\nvar DEFAULT_PRECISION = datavizConstants.DEFAULT_PRECISION;\nvar ARC = datavizConstants.ARC;\nvar defined = dataviz.defined;\nvar getter = dataviz.getter;\nvar isArray = dataviz.isArray;\nvar ChartElement = dataviz.ChartElement;\nvar Point = dataviz.Point;\nvar Box = dataviz.Box;\nvar alignPathToPixel = dataviz.alignPathToPixel;\nvar setDefaultOptions = dataviz.setDefaultOptions;\nvar isString = dataviz.isString;\nvar inArray = dataviz.inArray;\nvar isFunction = dataviz.isFunction;\nvar valueOrDefault = dataviz.valueOrDefault;\nvar isObject = dataviz.isObject;\nvar parseDate = dataviz.parseDate;\nvar deepExtend = dataviz.deepExtend;\nvar last = dataviz.last;\nvar eventElement = dataviz.eventElement;\nvar getTemplate = dataviz.getTemplate;\nvar TextBox = dataviz.TextBox;\nvar ShapeElement = dataviz.ShapeElement;\nvar getSpacing = dataviz.getSpacing;\nvar CurveProcessor = dataviz.CurveProcessor;\nvar append = dataviz.append;\nvar styleValue = dataviz.styleValue;\nvar CategoryAxis = dataviz.CategoryAxis;\nvar BoxElement = dataviz.BoxElement;\nvar Title = dataviz.Title;\nvar round = dataviz.round;\nvar limitValue = dataviz.limitValue;\nvar grep = dataviz.grep;\nvar elementStyles = dataviz.elementStyles;\nvar bindEvents = dataviz.bindEvents;\nvar services = dataviz.services;\nvar unbindEvents = dataviz.unbindEvents;\nvar support = kendo.support;\nvar drawing = kendo.drawing;\nvar Path = drawing.Path;\nvar Animation = drawing.Animation;\nvar AnimationFactory = drawing.AnimationFactory;\nvar Group = drawing.Group;\nvar Color = kendo.Color;\nvar geometry = kendo.geometry;\nvar GeometryPoint = geometry.Point;\nvar transform = geometry.transform;\n\nvar ChartAxis = Class.extend({\n    init: function(axis) {\n\n        this._axis = axis;\n        this.options = axis.options;\n    },\n\n    value: function(point) {\n        var axis = this._axis;\n        var value = axis.getCategory ? axis.getCategory(point) : axis.getValue(point);\n\n        return value;\n    },\n\n    slot: function(from, to, limit) {\n        if (limit === void 0) { limit = true; }\n\n        return this._axis.slot(from, to, limit);\n    },\n\n    range: function() {\n        return this._axis.range();\n    },\n\n    valueRange: function() {\n        return this._axis.valueRange();\n    }\n});\n\nfunction findAxisByName(name, axes) {\n    for (var idx = 0; idx < axes.length; idx++) {\n        if (axes[idx].options.name === name) {\n            axes[idx].prepareUserOptions();\n            return new ChartAxis(axes[idx]);\n        }\n    }\n}\n\nvar ChartPane = kendo.Class.extend({\n    init: function(pane) {\n        this.visual = pane.visual;\n        this.chartsVisual = pane.chartContainer.visual;\n        this._pane = pane;\n    },\n\n    findAxisByName: function(name) {\n        return findAxisByName(name, this._pane.axes);\n    }\n});\n\nvar ChartPlotArea = Class.extend({\n    init: function(plotArea) {\n\n        this._plotArea = plotArea;\n        this.visual = plotArea.visual;\n        this.backgroundVisual = plotArea._bgVisual;\n    }\n});\n\nfunction countNumbers(values) {\n    var length = values.length;\n    var count = 0;\n\n    for (var i = 0; i < length; i++) {\n        var num = values[i];\n        if (isNumber(num)) {\n            count++;\n        }\n    }\n\n    return count;\n}\n\nvar Aggregates = {\n    min: function(values) {\n        var length = values.length;\n        var min = MAX_VALUE;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                min = Math.min(min, value);\n            }\n        }\n\n        return min === MAX_VALUE ? values[0] : min;\n    },\n\n    max: function(values) {\n        var length = values.length;\n        var max = MIN_VALUE;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                max = Math.max(max, value);\n            }\n        }\n\n        return max === MIN_VALUE ? values[0] : max;\n    },\n\n    sum: function(values) {\n        var length = values.length;\n        var sum = 0;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                sum += value;\n            }\n        }\n\n        return sum;\n    },\n\n    sumOrNull: function(values) {\n        var result = null;\n\n        if (countNumbers(values)) {\n            result = Aggregates.sum(values);\n        }\n\n        return result;\n    },\n\n    count: function(values) {\n        var length = values.length;\n        var count = 0;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (value !== null && defined(value)) {\n                count++;\n            }\n        }\n\n        return count;\n    },\n\n    avg: function(values) {\n        var count = countNumbers(values);\n        var result = values[0];\n\n        if (count > 0) {\n            result = Aggregates.sum(values) / count;\n        }\n\n        return result;\n    },\n\n    first: function(values) {\n        var length = values.length;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (value !== null && defined(value)) {\n                return value;\n            }\n        }\n\n        return values[0];\n    }\n};\n\nfunction getField(field, row) {\n    if (row === null) {\n        return row;\n    }\n\n    var get = getter(field, true);\n    return get(row);\n}\n\nvar SeriesBinder = Class.extend({\n    init: function() {\n\n        this._valueFields = {};\n        this._otherFields = {};\n        this._nullValue = {};\n        this._undefinedValue = {};\n    },\n\n    register: function(seriesTypes, valueFields, otherFields) {\n        var this$1$1 = this;\n        if (valueFields === void 0) { valueFields = [ VALUE ]; }\n        if (otherFields === void 0) { otherFields = {}; }\n\n        for (var i = 0; i < seriesTypes.length; i++) {\n            var type = seriesTypes[i];\n\n            this$1$1._valueFields[type] = valueFields;\n            this$1$1._otherFields[type] = otherFields;\n            this$1$1._nullValue[type] = this$1$1._makeValue(valueFields, null);\n            this$1$1._undefinedValue[type] = this$1$1._makeValue(valueFields, undefined);\n        }\n    },\n\n    canonicalFields: function(series) {\n        return this.valueFields(series).concat(this.otherFields(series));\n    },\n\n    valueFields: function(series) {\n        return this._valueFields[series.type] || [ VALUE ];\n    },\n\n    otherFields: function(series) {\n        return this._otherFields[series.type] || [ VALUE ];\n    },\n\n    bindPoint: function(series, pointIx, item) {\n        var data = series.data;\n        var pointData = defined(item) ? item : data[pointIx];\n        var result = { valueFields: { value: pointData } };\n        var valueFields = this.valueFields(series);\n        var otherFields = this._otherFields[series.type];\n        var fields, value;\n\n        if (pointData === null) {\n            value = this._nullValue[series.type];\n        } else if (!defined(pointData)) {\n            value = this._undefinedValue[series.type];\n        } else if (Array.isArray(pointData)) {\n            var fieldData = pointData.slice(valueFields.length);\n            value = this._bindFromArray(pointData, valueFields);\n            fields = this._bindFromArray(fieldData, otherFields);\n        } else if (typeof pointData === \"object\") {\n            var srcValueFields = this.sourceFields(series, valueFields);\n            var srcPointFields = this.sourceFields(series, otherFields);\n\n            value = this._bindFromObject(pointData, valueFields, srcValueFields);\n            fields = this._bindFromObject(pointData, otherFields, srcPointFields);\n        }\n\n        if (defined(value)) {\n            if (valueFields.length === 1) {\n                result.valueFields.value = value[valueFields[0]];\n            } else {\n                result.valueFields = value;\n            }\n        }\n\n        result.fields = fields || {};\n\n        return result;\n    },\n\n    _makeValue: function(fields, initialValue) {\n        var value = {};\n        var length = fields.length;\n\n        for (var i = 0; i < length; i++) {\n            var fieldName = fields[i];\n            value[fieldName] = initialValue;\n        }\n\n        return value;\n    },\n\n    _bindFromArray: function(array, fields) {\n        var value = {};\n\n        if (fields) {\n            var length = Math.min(fields.length, array.length);\n\n            for (var i = 0; i < length; i++) {\n                value[fields[i]] = array[i];\n            }\n        }\n\n        return value;\n    },\n\n    _bindFromObject: function(object, fields, srcFields) {\n        if (srcFields === void 0) { srcFields = fields; }\n\n        var value = {};\n\n        if (fields) {\n            var length = fields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = fields[i];\n                var srcFieldName = srcFields[i];\n                if (srcFieldName !== null) {\n                    value[fieldName] = getField(srcFieldName, object);\n                }\n            }\n        }\n\n        return value;\n    },\n\n    sourceFields: function(series, canonicalFields) {\n        var sourceFields = [];\n\n        if (canonicalFields) {\n            var length = canonicalFields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = canonicalFields[i];\n                var sourceFieldName = fieldName === VALUE ? \"field\" : fieldName + \"Field\";\n\n                sourceFields.push(series[sourceFieldName] !== null ? (series[sourceFieldName] || fieldName) : null);\n            }\n        }\n\n        return sourceFields;\n    }\n});\n\nSeriesBinder.current = new SeriesBinder();\n\nvar STD_ERR = \"stderr\";\nvar STD_DEV = \"stddev\";\nvar percentRegex = /percent(?:\\w*)\\((\\d+)\\)/;\nvar standardDeviationRegex = new RegExp(\"^\" + STD_DEV + \"(?:\\\\((\\\\d+(?:\\\\.\\\\d+)?)\\\\))?$\");\n\nvar ErrorRangeCalculator = Class.extend({\n    init: function(errorValue, series, field) {\n\n        this.initGlobalRanges(errorValue, series, field);\n    },\n\n    initGlobalRanges: function(errorValue, series, field) {\n        var data = series.data;\n        var deviationMatch = standardDeviationRegex.exec(errorValue);\n\n        if (deviationMatch) {\n            this.valueGetter = this.createValueGetter(series, field);\n\n            var average = this.getAverage(data);\n            var deviation = this.getStandardDeviation(data, average, false);\n            var multiple = deviationMatch[1] ? parseFloat(deviationMatch[1]) : 1;\n            var errorRange = { low: average.value - deviation * multiple, high: average.value + deviation * multiple };\n\n            this.globalRange = function() {\n                return errorRange;\n            };\n        } else if (errorValue.indexOf && errorValue.indexOf(STD_ERR) >= 0) {\n            this.valueGetter = this.createValueGetter(series, field);\n            var standardError = this.getStandardError(data, this.getAverage(data));\n\n            this.globalRange = function(value) {\n                return { low: value - standardError, high: value + standardError };\n            };\n        }\n    },\n\n    createValueGetter: function(series, field) {\n        var data = series.data;\n        var binder = SeriesBinder.current;\n        var valueFields = binder.valueFields(series);\n        var item = defined(data[0]) ? data[0] : {};\n        var valueGetter;\n\n        if (isArray(item)) {\n            var index = field ? valueFields.indexOf(field) : 0;\n            valueGetter = getter(\"[\" + index + \"]\");\n        } else if (isNumber(item)) {\n            valueGetter = getter();\n        } else if (typeof item === datavizConstants.OBJECT) {\n            var srcValueFields = binder.sourceFields(series, valueFields);\n            valueGetter = getter(srcValueFields[valueFields.indexOf(field)]);\n        }\n\n        return valueGetter;\n    },\n\n    getErrorRange: function(pointValue, errorValue) {\n        var low, high, value;\n\n        if (!defined(errorValue)) {\n            return null;\n        }\n\n        if (this.globalRange) {\n            return this.globalRange(pointValue);\n        }\n\n        if (isArray(errorValue)) {\n            low = pointValue - errorValue[0];\n            high = pointValue + errorValue[1];\n        } else if (isNumber(value = parseFloat(errorValue))) {\n            low = pointValue - value;\n            high = pointValue + value;\n        } else if ((value = percentRegex.exec(errorValue))) {\n            var percentValue = pointValue * (parseFloat(value[1]) / 100);\n            low = pointValue - Math.abs(percentValue);\n            high = pointValue + Math.abs(percentValue);\n        } else {\n            throw new Error(\"Invalid ErrorBar value: \" + errorValue);\n        }\n\n        return { low: low, high: high };\n    },\n\n    getStandardError: function(data, average) {\n        return this.getStandardDeviation(data, average, true) / Math.sqrt(average.count);\n    },\n\n    getStandardDeviation: function(data, average, isSample) {\n        var this$1$1 = this;\n\n        var length = data.length;\n        var total = isSample ? average.count - 1 : average.count;\n        var squareDifferenceSum = 0;\n\n        for (var idx = 0; idx < length; idx++) {\n            var value = this$1$1.valueGetter(data[idx]);\n            if (isNumber(value)) {\n                squareDifferenceSum += Math.pow(value - average.value, 2);\n            }\n        }\n\n        return Math.sqrt(squareDifferenceSum / total);\n    },\n\n    getAverage: function(data) {\n        var this$1$1 = this;\n\n        var length = data.length;\n        var sum = 0;\n        var count = 0;\n\n        for (var idx = 0; idx < length; idx++) {\n            var value = this$1$1.valueGetter(data[idx]);\n            if (isNumber(value)) {\n                sum += value;\n                count++;\n            }\n        }\n\n        return {\n            value: sum / count,\n            count: count\n        };\n    }\n});\n\nvar browser = support.browser || {};\n\nvar INITIAL_ANIMATION_DURATION = 600;\nvar FADEIN = \"fadeIn\";\n\nvar GLASS = \"glass\";\nvar BORDER_BRIGHTNESS = 0.8;\nvar TOOLTIP_OFFSET = 5;\nvar START_SCALE = browser.msie ? 0.001 : 0;\nvar ERROR_LOW_FIELD = \"errorLow\";\nvar ERROR_HIGH_FIELD = \"errorHigh\";\nvar X_ERROR_LOW_FIELD = \"xErrorLow\";\nvar X_ERROR_HIGH_FIELD = \"xErrorHigh\";\nvar Y_ERROR_LOW_FIELD = \"yErrorLow\";\nvar Y_ERROR_HIGH_FIELD = \"yErrorHigh\";\nvar LINE_MARKER_SIZE = 8;\nvar ZERO = \"zero\";\nvar INTERPOLATE = \"interpolate\";\nvar GAP = \"gap\";\nvar ABOVE = \"above\";\nvar BELOW = \"below\";\n\nvar SMOOTH = \"smooth\";\nvar STEP = \"step\";\n\nvar AREA = \"area\";\nvar BAR = \"bar\";\nvar BOX_PLOT = \"boxPlot\";\nvar BUBBLE = \"bubble\";\nvar BULLET = \"bullet\";\nvar CANDLESTICK = \"candlestick\";\nvar COLUMN = \"column\";\nvar DONUT = \"donut\";\nvar FUNNEL = \"funnel\";\nvar PYRAMID = \"pyramid\";\nvar HEATMAP = \"heatmap\";\nvar HORIZONTAL_WATERFALL = \"horizontalWaterfall\";\nvar LINE = \"line\";\nvar OHLC = \"ohlc\";\nvar PIE = \"pie\";\nvar POLAR_AREA = \"polarArea\";\nvar POLAR_LINE = \"polarLine\";\nvar POLAR_SCATTER = \"polarScatter\";\nvar RADAR_AREA = \"radarArea\";\nvar RADAR_COLUMN = \"radarColumn\";\nvar RADAR_LINE = \"radarLine\";\nvar RANGE_AREA = \"rangeArea\";\nvar RANGE_BAR = \"rangeBar\";\nvar RANGE_COLUMN = \"rangeColumn\";\nvar SCATTER = \"scatter\";\nvar SCATTER_LINE = \"scatterLine\";\nvar VERTICAL_AREA = \"verticalArea\";\nvar VERTICAL_BOX_PLOT = \"verticalBoxPlot\";\nvar VERTICAL_BULLET = \"verticalBullet\";\nvar VERTICAL_LINE = \"verticalLine\";\nvar VERTICAL_RANGE_AREA = \"verticalRangeArea\";\nvar WATERFALL = \"waterfall\";\nvar EQUALLY_SPACED_SERIES = [\n    BAR, COLUMN, OHLC, CANDLESTICK, BOX_PLOT, VERTICAL_BOX_PLOT,\n    BULLET, RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL\n];\n\nvar TRENDLINE_LINEAR = 'linearTrendline';\nvar TRENDLINE_MOVING_AVERAGE = 'movingAverageTrendline';\nvar TRENDLINE_SERIES = [\n    TRENDLINE_LINEAR, TRENDLINE_MOVING_AVERAGE\n];\n\nvar LEGEND_ITEM_CLICK = \"legendItemClick\";\nvar LEGEND_ITEM_HOVER = \"legendItemHover\";\nvar LEGEND_ITEM_LEAVE = \"legendItemLeave\";\nvar SERIES_CLICK = \"seriesClick\";\nvar SERIES_HOVER = \"seriesHover\";\nvar SERIES_OVER = \"seriesOver\";\nvar SERIES_LEAVE = \"seriesLeave\";\nvar PLOT_AREA_CLICK = \"plotAreaClick\";\nvar PLOT_AREA_HOVER = \"plotAreaHover\";\nvar PLOT_AREA_LEAVE = \"plotAreaLeave\";\nvar DRAG = \"drag\";\nvar DRAG_END = \"dragEnd\";\nvar DRAG_START = \"dragStart\";\nvar ZOOM_START = \"zoomStart\";\nvar ZOOM = \"zoom\";\nvar ZOOM_END = \"zoomEnd\";\nvar SELECT_START = \"selectStart\";\nvar SELECT = \"select\";\nvar SELECT_END = \"selectEnd\";\nvar RENDER = \"render\";\nvar SHOW_TOOLTIP = \"showTooltip\";\nvar HIDE_TOOLTIP = \"hideTooltip\";\nvar PANE_RENDER = \"paneRender\";\n\nvar LOGARITHMIC = \"log\";\nvar CATEGORY = \"category\";\n\nvar INSIDE_END = \"insideEnd\";\nvar INSIDE_BASE = \"insideBase\";\nvar OUTSIDE_END = \"outsideEnd\";\n\nvar MOUSEWHEEL = \"wheel\";\nvar MOUSEWHEEL_DELAY = 150;\nvar MOUSEWHEEL_ZOOM_RATE = 0.3;\n\nvar DRILLDOWN = \"drilldown\";\nvar DRILLDOWN_FIELD = \"drilldown\";\n\nvar MIN_MOVING_AVERAGE_PERIOD = 2;\n\nvar constants = {\n\tINITIAL_ANIMATION_DURATION: INITIAL_ANIMATION_DURATION,\n\tFADEIN: FADEIN,\n\tLEGEND_ITEM_CLICK: LEGEND_ITEM_CLICK,\n\tLEGEND_ITEM_HOVER: LEGEND_ITEM_HOVER,\n\tLEGEND_ITEM_LEAVE: LEGEND_ITEM_LEAVE,\n\tSERIES_CLICK: SERIES_CLICK,\n\tSERIES_HOVER: SERIES_HOVER,\n\tSERIES_OVER: SERIES_OVER,\n\tSERIES_LEAVE: SERIES_LEAVE,\n\tGLASS: GLASS,\n\tBORDER_BRIGHTNESS: BORDER_BRIGHTNESS,\n\tTOOLTIP_OFFSET: TOOLTIP_OFFSET,\n\tSTART_SCALE: START_SCALE,\n\tERROR_LOW_FIELD: ERROR_LOW_FIELD,\n\tERROR_HIGH_FIELD: ERROR_HIGH_FIELD,\n\tX_ERROR_LOW_FIELD: X_ERROR_LOW_FIELD,\n\tX_ERROR_HIGH_FIELD: X_ERROR_HIGH_FIELD,\n\tY_ERROR_LOW_FIELD: Y_ERROR_LOW_FIELD,\n\tY_ERROR_HIGH_FIELD: Y_ERROR_HIGH_FIELD,\n\tLINE_MARKER_SIZE: LINE_MARKER_SIZE,\n\tINTERPOLATE: INTERPOLATE,\n\tZERO: ZERO,\n\tSMOOTH: SMOOTH,\n\tSTEP: STEP,\n\tCATEGORY: CATEGORY,\n\tFUNNEL: FUNNEL,\n\tPYRAMID: PYRAMID,\n\tBAR: BAR,\n\tCANDLESTICK: CANDLESTICK,\n\tPIE: PIE,\n\tCOLUMN: COLUMN,\n\tAREA: AREA,\n\tVERTICAL_BULLET: VERTICAL_BULLET,\n\tBOX_PLOT: BOX_PLOT,\n\tOHLC: OHLC,\n\tWATERFALL: WATERFALL,\n\tLINE: LINE,\n\tBULLET: BULLET,\n\tVERTICAL_LINE: VERTICAL_LINE,\n\tVERTICAL_AREA: VERTICAL_AREA,\n\tRANGE_AREA: RANGE_AREA,\n\tVERTICAL_RANGE_AREA: VERTICAL_RANGE_AREA,\n\tRANGE_COLUMN: RANGE_COLUMN,\n\tVERTICAL_BOX_PLOT: VERTICAL_BOX_PLOT,\n\tRANGE_BAR: RANGE_BAR,\n\tHORIZONTAL_WATERFALL: HORIZONTAL_WATERFALL,\n\tSCATTER: SCATTER,\n\tSCATTER_LINE: SCATTER_LINE,\n\tBUBBLE: BUBBLE,\n\tRADAR_AREA: RADAR_AREA,\n\tRADAR_LINE: RADAR_LINE,\n\tRADAR_COLUMN: RADAR_COLUMN,\n\tPOLAR_LINE: POLAR_LINE,\n\tPOLAR_AREA: POLAR_AREA,\n\tPOLAR_SCATTER: POLAR_SCATTER,\n\tRENDER: RENDER,\n\tPLOT_AREA_CLICK: PLOT_AREA_CLICK,\n\tPLOT_AREA_HOVER: PLOT_AREA_HOVER,\n\tPLOT_AREA_LEAVE: PLOT_AREA_LEAVE,\n\tLOGARITHMIC: LOGARITHMIC,\n\tDRAG: DRAG,\n\tDRAG_START: DRAG_START,\n\tDRAG_END: DRAG_END,\n\tZOOM_START: ZOOM_START,\n\tZOOM: ZOOM,\n\tZOOM_END: ZOOM_END,\n\tSELECT_START: SELECT_START,\n\tSELECT: SELECT,\n\tSELECT_END: SELECT_END,\n\tPANE_RENDER: PANE_RENDER,\n\tGAP: GAP,\n\tDONUT: DONUT,\n\tINSIDE_END: INSIDE_END,\n\tINSIDE_BASE: INSIDE_BASE,\n\tOUTSIDE_END: OUTSIDE_END,\n\tMOUSEWHEEL: MOUSEWHEEL,\n\tMOUSEWHEEL_DELAY: MOUSEWHEEL_DELAY,\n\tMOUSEWHEEL_ZOOM_RATE: MOUSEWHEEL_ZOOM_RATE,\n\tSHOW_TOOLTIP: SHOW_TOOLTIP,\n\tHIDE_TOOLTIP: HIDE_TOOLTIP,\n\tEQUALLY_SPACED_SERIES: EQUALLY_SPACED_SERIES,\n\tABOVE: ABOVE,\n\tBELOW: BELOW,\n\tHEATMAP: HEATMAP,\n\tDRILLDOWN: DRILLDOWN,\n\tDRILLDOWN_FIELD: DRILLDOWN_FIELD,\n\tMIN_MOVING_AVERAGE_PERIOD: MIN_MOVING_AVERAGE_PERIOD,\n\tTRENDLINE_SERIES: TRENDLINE_SERIES,\n\tTRENDLINE_LINEAR: TRENDLINE_LINEAR,\n\tTRENDLINE_MOVING_AVERAGE: TRENDLINE_MOVING_AVERAGE\n};\n\nvar DEFAULT_ERROR_BAR_WIDTH = 4;\n\nvar ErrorBarBase = ChartElement.extend({\n    init: function(low, high, isVertical, chart, series, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.low = low;\n        this.high = high;\n        this.isVertical = isVertical;\n        this.chart = chart;\n        this.series = series;\n    },\n\n    reflow: function(targetBox) {\n        var endCaps = this.options.endCaps;\n        var isVertical = this.isVertical;\n        var axis = this.getAxis();\n        var valueBox = axis.getSlot(this.low, this.high);\n        var centerBox = targetBox.center();\n        var capsWidth = this.getCapsWidth(targetBox, isVertical);\n        var capValue = isVertical ? centerBox.x : centerBox.y;\n        var capStart = capValue - capsWidth;\n        var capEnd = capValue + capsWidth;\n        var linePoints;\n\n        if (isVertical) {\n            linePoints = [\n                new Point(centerBox.x, valueBox.y1),\n                new Point(centerBox.x, valueBox.y2)\n            ];\n            if (endCaps) {\n                linePoints.push(new Point(capStart, valueBox.y1),\n                    new Point(capEnd, valueBox.y1),\n                    new Point(capStart, valueBox.y2),\n                    new Point(capEnd, valueBox.y2));\n            }\n            this.box = new Box(capStart, valueBox.y1, capEnd, valueBox.y2);\n        } else {\n            linePoints = [\n                new Point(valueBox.x1, centerBox.y),\n                new Point(valueBox.x2, centerBox.y)\n            ];\n            if (endCaps) {\n                linePoints.push(new Point(valueBox.x1, capStart),\n                    new Point(valueBox.x1, capEnd),\n                    new Point(valueBox.x2, capStart),\n                    new Point(valueBox.x2, capEnd));\n            }\n            this.box = new Box(valueBox.x1, capStart, valueBox.x2, capEnd);\n        }\n\n        this.linePoints = linePoints;\n    },\n\n    getCapsWidth: function(box, isVertical) {\n        var boxSize = isVertical ? box.width() : box.height();\n        var capsWidth = Math.min(Math.floor(boxSize / 2), DEFAULT_ERROR_BAR_WIDTH) || DEFAULT_ERROR_BAR_WIDTH;\n\n        return capsWidth;\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var visual = options.visual;\n\n        if (visual) {\n            this.visual = visual({\n                low: this.low,\n                high: this.high,\n                rect: this.box.toRect(),\n                sender: this.getSender(),\n                options: {\n                    endCaps: options.endCaps,\n                    color: options.color,\n                    line: options.line\n                },\n                createVisual: function () {\n                    this$1$1.createDefaultVisual();\n                    var defaultVisual = this$1$1.visual;\n                    delete this$1$1.visual;\n                    return defaultVisual;\n                }\n            });\n        } else {\n            this.createDefaultVisual();\n        }\n    },\n\n    createDefaultVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var linePoints = ref.linePoints;\n        var lineOptions = {\n            stroke: {\n                color: options.color,\n                width: options.line.width,\n                dashType: options.line.dashType\n            }\n        };\n\n        ChartElement.fn.createVisual.call(this);\n\n        for (var idx = 0; idx < linePoints.length; idx += 2) {\n            var line = new Path(lineOptions)\n                .moveTo(linePoints[idx].x, linePoints[idx].y)\n                .lineTo(linePoints[idx + 1].x, linePoints[idx + 1].y);\n\n            alignPathToPixel(line);\n            this$1$1.visual.append(line);\n        }\n    }\n});\n\nsetDefaultOptions(ErrorBarBase, {\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    },\n    endCaps: true,\n    line: {\n        width: 2\n    },\n    zIndex: 1\n});\n\nvar CategoricalErrorBar = ErrorBarBase.extend({\n    getAxis: function() {\n        var axis = this.chart.seriesValueAxis(this.series);\n\n        return axis;\n    }\n});\n\nfunction anyHasZIndex(elements) {\n    for (var idx = 0; idx < elements.length; idx++) {\n        if (defined(elements[idx].zIndex)) {\n            return true;\n        }\n    }\n}\n\nfunction appendIfNotNull(array, element) {\n    if (element !== null) {\n        array.push(element);\n    }\n}\n\nfunction areNumbers(values) {\n    return countNumbers(values) === values.length;\n}\n\nfunction segmentVisible(series, fields, index) {\n    var visible = fields.visible;\n    if (defined(visible)) {\n        return visible;\n    }\n\n    var pointVisibility = series.pointVisibility;\n    if (pointVisibility) {\n        return pointVisibility[index];\n    }\n}\n\nfunction bindSegments(series) {\n    var data = series.data;\n    var points = [];\n    var sum = 0;\n    var count = 0;\n\n    for (var idx = 0; idx < data.length; idx++) {\n        var pointData = SeriesBinder.current.bindPoint(series, idx);\n        var value = pointData.valueFields.value;\n\n        if (isString(value)) {\n            value = parseFloat(value);\n        }\n\n        if (isNumber(value)) {\n            pointData.visible = segmentVisible(series, pointData.fields, idx) !== false;\n\n            pointData.value = Math.abs(value);\n            points.push(pointData);\n\n            if (pointData.visible) {\n                sum += pointData.value;\n            }\n\n            if (value !== 0) {\n                count++;\n            }\n        } else {\n            points.push(null);\n        }\n    }\n\n    return {\n        total: sum,\n        points: points,\n        count: count\n    };\n}\n\nfunction categoriesCount(series) {\n    var seriesCount = series.length;\n    var categories = 0;\n\n    for (var i = 0; i < seriesCount; i++) {\n        categories = Math.max(categories, series[i].data.length);\n    }\n\n    return categories;\n}\n\nfunction equalsIgnoreCase(a, b) {\n    if (a && b) {\n        return a.toLowerCase() === b.toLowerCase();\n    }\n\n    return a === b;\n}\n\nvar MAX_EXPAND_DEPTH = 5;\n\nfunction evalOptions(options, context, state, dryRun) {\n    if (state === void 0) { state = {}; }\n    if (dryRun === void 0) { dryRun = false; }\n\n    var defaults = state.defaults = state.defaults || {};\n    var depth = state.depth = state.depth || 0;\n    var needsEval = false;\n\n    state.excluded = state.excluded || [];\n\n    if (depth > MAX_EXPAND_DEPTH) {\n        return null;\n    }\n\n    for (var property in options) {\n        if (!inArray(property, state.excluded) && options.hasOwnProperty(property)) {\n            var propValue = options[property];\n            if (isFunction(propValue)) {\n                needsEval = true;\n                if (!dryRun) {\n                    options[property] = valueOrDefault(propValue(context), defaults[property]);\n                }\n            } else if (isObject(propValue)) {\n                if (!dryRun) {\n                    state.defaults = defaults[property];\n                }\n                state.depth++;\n                needsEval = evalOptions(propValue, context, state, dryRun) || needsEval;\n                state.depth--;\n            }\n        }\n    }\n\n    return needsEval;\n}\n\nfunction filterSeriesByType(series, types) {\n    var result = [];\n\n    var seriesTypes = [].concat(types);\n    for (var idx = 0; idx < series.length; idx++) {\n        var currentSeries = series[idx];\n        if (inArray(currentSeries.type, seriesTypes)) {\n            result.push(currentSeries);\n        }\n    }\n\n    return result;\n}\n\nfunction getDateField(field, row, intlService) {\n    if (row === null) {\n        return row;\n    }\n\n    var key = \"_date_\" + field;\n    var value = row[key];\n\n    if (!value) {\n        value = parseDate(intlService, getter(field, true)(row));\n        row[key] = value;\n    }\n\n    return value;\n}\n\nfunction hasGradientOverlay(options) {\n    var overlay = options.overlay;\n\n    return overlay && overlay.gradient && overlay.gradient !== \"none\";\n}\n\nfunction hasValue(value) {\n    return defined(value) && value !== null;\n}\n\nfunction isDateAxis(axisOptions, sampleCategory) {\n    var type = axisOptions.type;\n    var dateCategory = sampleCategory instanceof Date;\n\n    return (!type && dateCategory) || equalsIgnoreCase(type, DATE);\n}\n\nfunction singleItemOrArray(array) {\n    return array.length === 1 ? array[0] : array;\n}\n\nvar AREA_REGEX = /area/i;\n\nfunction seriesMissingValues(series) {\n    if (series.missingValues) {\n        return series.missingValues;\n    }\n\n    return AREA_REGEX.test(series.type) || series.stack ? ZERO : INTERPOLATE;\n}\n\nfunction hasValue$1(series, item) {\n    var fields = SeriesBinder.current.bindPoint(series, null, item);\n    var valueFields = fields.valueFields;\n\n    for (var field in valueFields) {\n        if (dataviz.convertableToNumber(valueFields[field])) {\n            return true;\n        }\n    }\n}\n\nfunction findNext(ref) {\n    var start = ref.start;\n    var dir = ref.dir;\n    var min = ref.min;\n    var max = ref.max;\n    var getter$$1 = ref.getter;\n    var hasItem = ref.hasItem;\n    var series = ref.series;\n\n    var pointHasValue, outPoint;\n    var idx = start;\n    do {\n        idx += dir;\n        //aggregating and binding the item takes too much time for large number of categories\n        //will assume that if the aggregation does not create value for a missing item for one it will not create for others\n        if (hasItem(idx)) {\n            outPoint = getter$$1(idx);\n            pointHasValue = hasValue$1(series, outPoint.item);\n        }\n    } while (min <= idx && idx <= max && !pointHasValue);\n\n    if (pointHasValue) {\n        return outPoint;\n    }\n}\n\nfunction createOutOfRangePoints(series, range, count, getter$$1, hasItem) {\n    var min = range.min;\n    var max = range.max;\n    var hasMinPoint = min > 0 && min < count;\n    var hasMaxPoint = max + 1 < count;\n\n    if (hasMinPoint || hasMaxPoint) {\n        var missingValues = seriesMissingValues(series);\n        var minPoint, maxPoint;\n        if (missingValues !== INTERPOLATE) {\n            if (hasMinPoint) {\n                minPoint = getter$$1(min - 1);\n            }\n\n            if (hasMaxPoint) {\n                maxPoint = getter$$1(max + 1);\n            }\n        } else {\n            var outPoint, pointHasValue;\n            if (hasMinPoint) {\n                outPoint = getter$$1(min - 1);\n                pointHasValue = hasValue$1(series, outPoint.item);\n                if (!pointHasValue) {\n                    minPoint = findNext({\n                        start: min,\n                        dir: -1,\n                        min: 0,\n                        max: count - 1,\n                        getter: getter$$1,\n                        hasItem: hasItem,\n                        series: series\n                    });\n                } else {\n                    minPoint = outPoint;\n                }\n            }\n\n            if (hasMaxPoint) {\n                outPoint = getter$$1(max + 1);\n                pointHasValue = hasValue$1(series, outPoint.item);\n                if (!pointHasValue) {\n                    maxPoint = findNext({\n                        start: max,\n                        dir: 1,\n                        min: 0,\n                        max: count - 1,\n                        getter: getter$$1,\n                        hasItem: hasItem,\n                        series: series\n                    });\n                } else {\n                    maxPoint = outPoint;\n                }\n            }\n        }\n\n        if (minPoint) {\n            series._outOfRangeMinPoint = minPoint;\n        }\n\n        if (maxPoint) {\n            series._outOfRangeMaxPoint = maxPoint;\n        }\n    }\n}\n\nvar CategoricalChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.categoryAxis = plotArea.seriesCategoryAxis(options.series[0]);\n\n        // Value axis ranges grouped by axis name, e.g.:\n        // primary: { min: 0, max: 1 }\n        this.valueAxisRanges = {};\n\n        this.points = [];\n        this.categoryPoints = [];\n        this.seriesPoints = [];\n        this.seriesOptions = [];\n        this._evalSeries = [];\n\n        this.render();\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({ }, defaults, {\n                vertical: !this.options.invertAxes\n            }, series);\n        }\n\n        return options;\n    },\n\n    plotValue: function(point) {\n        if (!point) {\n            return 0;\n        }\n\n        if (this.options.isStacked100 && isNumber(point.value)) {\n            var categoryIx = point.categoryIx;\n            var categoryPoints = this.categoryPoints[categoryIx];\n            var otherValues = [];\n            var categorySum = 0;\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n                if (other) {\n                    var stack = point.series.stack;\n                    var otherStack = other.series.stack;\n\n                    if ((stack && otherStack) && stack.group !== otherStack.group) {\n                        continue;\n                    }\n\n                    if (isNumber(other.value)) {\n                        categorySum += Math.abs(other.value);\n                        otherValues.push(Math.abs(other.value));\n                    }\n                }\n            }\n\n            if (categorySum > 0) {\n                return point.value / categorySum;\n            }\n        }\n\n        return point.value;\n    },\n\n    plotRange: function(point, startValue) {\n        var this$1$1 = this;\n        if (startValue === void 0) { startValue = 0; }\n\n        var categoryPoints = this.categoryPoints[point.categoryIx];\n\n        if (this.options.isStacked) {\n            var plotValue = this.plotValue(point);\n            var positive = plotValue >= 0;\n            var prevValue = startValue;\n            var isStackedBar = false;\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n\n                if (point === other) {\n                    break;\n                }\n\n                var stack = point.series.stack;\n                var otherStack = other.series.stack;\n                if (stack && otherStack) {\n                    if (typeof stack === datavizConstants.STRING && stack !== otherStack) {\n                        continue;\n                    }\n\n                    if (stack.group && stack.group !== otherStack.group) {\n                        continue;\n                    }\n                }\n\n                var otherValue = this$1$1.plotValue(other);\n                if ((otherValue >= 0 && positive) ||\n                    (otherValue < 0 && !positive)) {\n                    prevValue += otherValue;\n                    plotValue += otherValue;\n                    isStackedBar = true;\n\n                    if (this$1$1.options.isStacked100) {\n                        plotValue = Math.min(plotValue, 1);\n                    }\n                }\n            }\n\n            if (isStackedBar) {\n                prevValue -= startValue;\n            }\n\n            return [ prevValue, plotValue ];\n        }\n\n        var series = point.series;\n        var valueAxis = this.seriesValueAxis(series);\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n        return [ axisCrossingValue, dataviz.convertableToNumber(point.value) ? point.value : axisCrossingValue ];\n    },\n\n    stackLimits: function(axisName, stackName) {\n        var this$1$1 = this;\n\n        var min = MAX_VALUE;\n        var max = MIN_VALUE;\n\n        for (var i = 0; i < this.categoryPoints.length; i++) {\n            var categoryPoints = this$1$1.categoryPoints[i];\n            if (!categoryPoints) {\n                continue;\n            }\n\n            for (var pIx = 0; pIx < categoryPoints.length; pIx++) {\n                var point = categoryPoints[pIx];\n                if (point) {\n                    if (point.series.stack === stackName || point.series.axis === axisName) {\n                        var to = this$1$1.plotRange(point, 0)[1];\n                        if (defined(to) && isFinite(to)) {\n                            max = Math.max(max, to);\n                            min = Math.min(min, to);\n                        }\n                    }\n                }\n            }\n        }\n\n        return { min: min, max: max };\n    },\n\n    updateStackRange: function() {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var isStacked = ref.isStacked;\n        var chartSeries = ref.series;\n        var limitsCache = {};\n\n        if (isStacked) {\n            for (var i = 0; i < chartSeries.length; i++) {\n                var series = chartSeries[i];\n                var axisName = series.axis;\n                var key = axisName + series.stack;\n\n                var limits = limitsCache[key];\n                if (!limits) {\n                    limits = this$1$1.stackLimits(axisName, series.stack);\n\n                    var errorTotals = this$1$1.errorTotals;\n                    if (errorTotals) {\n                        if (errorTotals.negative.length) {\n                            limits.min = Math.min(limits.min, dataviz.sparseArrayLimits(errorTotals.negative).min);\n                        }\n                        if (errorTotals.positive.length) {\n                            limits.max = Math.max(limits.max, dataviz.sparseArrayLimits(errorTotals.positive).max);\n                        }\n                    }\n\n                    if (limits.min !== MAX_VALUE || limits.max !== MIN_VALUE) {\n                        limitsCache[key] = limits;\n                    } else {\n                        limits = null;\n                    }\n                }\n\n                if (limits) {\n                    this$1$1.valueAxisRanges[axisName] = limits;\n                }\n            }\n        }\n    },\n\n    addErrorBar: function(point, data, categoryIx) {\n        var value = point.value;\n        var series = point.series;\n        var seriesIx = point.seriesIx;\n        var errorBars = point.options.errorBars;\n        var lowValue = data.fields[ERROR_LOW_FIELD];\n        var highValue = data.fields[ERROR_HIGH_FIELD];\n        var errorRange;\n\n        if (isNumber(lowValue) && isNumber(highValue)) {\n            errorRange = { low: lowValue, high: highValue };\n        } else if (errorBars && defined(errorBars.value)) {\n            this.seriesErrorRanges = this.seriesErrorRanges || [];\n            this.seriesErrorRanges[seriesIx] = this.seriesErrorRanges[seriesIx] ||\n                new ErrorRangeCalculator(errorBars.value, series, VALUE);\n\n            errorRange = this.seriesErrorRanges[seriesIx].getErrorRange(value, errorBars.value);\n        }\n\n        if (errorRange) {\n            point.low = errorRange.low;\n            point.high = errorRange.high;\n            this.addPointErrorBar(point, categoryIx);\n        }\n    },\n\n    addPointErrorBar: function(point, categoryIx) {\n        var isVertical = !this.options.invertAxes;\n        var options = point.options.errorBars;\n        var series = point.series;\n        var low = point.low;\n        var high = point.high;\n\n        if (this.options.isStacked) {\n            var stackedErrorRange = this.stackedErrorRange(point, categoryIx);\n            low = stackedErrorRange.low;\n            high = stackedErrorRange.high;\n        } else {\n            var fields = { categoryIx: categoryIx, series: series };\n            this.updateRange({ value: low }, fields);\n            this.updateRange({ value: high }, fields);\n        }\n\n        var errorBar = new CategoricalErrorBar(low, high, isVertical, this, series, options);\n        point.errorBars = [ errorBar ];\n        point.append(errorBar);\n    },\n\n    stackedErrorRange: function(point, categoryIx) {\n        var plotValue = this.plotRange(point, 0)[1] - point.value;\n        var low = point.low + plotValue;\n        var high = point.high + plotValue;\n\n        this.errorTotals = this.errorTotals || { positive: [], negative: [] };\n\n        if (low < 0) {\n            this.errorTotals.negative[categoryIx] = Math.min(this.errorTotals.negative[categoryIx] || 0, low);\n        }\n\n        if (high > 0) {\n            this.errorTotals.positive[categoryIx] = Math.max(this.errorTotals.positive[categoryIx] || 0, high);\n        }\n\n        return { low: low, high: high };\n    },\n\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n\n        var categoryPoints = this.categoryPoints[categoryIx];\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        var seriesPoints = this.seriesPoints[seriesIx];\n        if (!seriesPoints) {\n            this.seriesPoints[seriesIx] = seriesPoints = [];\n        }\n\n        var point = this.createPoint(data, fields);\n        if (point) {\n            $.extend(point, fields);\n\n            point.owner = this;\n            point.noteText = data.fields.noteText;\n            if (!defined(point.dataItem)) {\n                point.dataItem = series.data[categoryIx];\n            }\n            this.addErrorBar(point, data, categoryIx);\n        }\n\n        this.points.push(point);\n        seriesPoints.push(point);\n        categoryPoints.push(point);\n\n        this.updateRange(data.valueFields, fields);\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"aggregate\", \"_events\", \"tooltip\", \"content\", \"template\",\n                \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                \"drilldownSeriesFactory\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, pointOptions);\n            evalOptions(pointOptions, {\n                value: value,\n                category: category,\n                index: categoryIx,\n                series: series,\n                dataItem: series.data[categoryIx]\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    updateRange: function(data, fields) {\n        var axisName = fields.series.axis;\n        var value = data.value;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (isFinite(value) && value !== null) {\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, value);\n            axisRange.max = Math.max(axisRange.max, value);\n        }\n    },\n\n    seriesValueAxis: function(series) {\n        var plotArea = this.plotArea;\n        var axisName = series.axis;\n        var axis = axisName ? plotArea.namedValueAxes[axisName] : plotArea.valueAxis;\n\n        if (!axis) {\n            throw new Error(\"Unable to locate value axis with name \" + axisName);\n        }\n\n        return axis;\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var categorySlots = this.categorySlots = [];\n        var chartPoints = this.points;\n        var categoryAxis = this.categoryAxis;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (data, fields) {\n            var categoryIx = fields.categoryIx;\n            var currentSeries = fields.series;\n\n            var valueAxis = this$1$1.seriesValueAxis(currentSeries);\n            var point = chartPoints[pointIx++];\n\n            var categorySlot = categorySlots[categoryIx];\n            if (!categorySlot) {\n                categorySlots[categoryIx] = categorySlot =\n                    this$1$1.categorySlot(categoryAxis, categoryIx, valueAxis);\n            }\n\n            if (point) {\n                var plotRange = this$1$1.plotRange(point, valueAxis.startValue());\n                var valueSlot = this$1$1.valueSlot(valueAxis, plotRange);\n                if (valueSlot) {\n                    var pointSlot = this$1$1.pointSlot(categorySlot, valueSlot);\n\n                    point.aboveAxis = this$1$1.aboveAxis(point, valueAxis);\n                    point.stackValue = plotRange[1];\n\n                    if (this$1$1.options.isStacked100) {\n                        point.percentage = this$1$1.plotValue(point);\n                    }\n\n                    this$1$1.reflowPoint(point, pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.reflowCategories(categorySlots);\n        if (!this.options.clip && this.options.limitPoints && this.points.length) {\n            this.limitPoints();\n        }\n\n        this.box = targetBox;\n    },\n\n    valueSlot: function(valueAxis, plotRange) {\n        return valueAxis.getSlot(plotRange[0], plotRange[1], !this.options.clip);\n    },\n\n    limitPoints: function() {\n        var this$1$1 = this;\n\n        var categoryPoints = this.categoryPoints;\n        var points = categoryPoints[0].concat(last(categoryPoints));\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx]) {\n                this$1$1.limitPoint(points[idx]);\n            }\n        }\n    },\n\n    limitPoint: function(point) {\n        var limitedSlot = this.categoryAxis.limitSlot(point.box);\n        if (!limitedSlot.equals(point.box)) {\n            point.reflow(limitedSlot);\n        }\n    },\n\n    aboveAxis: function(point, valueAxis) {\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n        var value = point.value;\n\n        return valueAxis.options.reverse ?\n            value < axisCrossingValue : value >= axisCrossingValue;\n    },\n\n    categoryAxisCrossingValue: function(valueAxis) {\n        var categoryAxis = this.categoryAxis;\n        var options = valueAxis.options;\n        var crossingValues = [].concat(\n            options.axisCrossingValues || options.axisCrossingValue\n        );\n\n        return crossingValues[categoryAxis.axisIndex || 0] || 0;\n    },\n\n    reflowPoint: function(point, pointSlot) {\n        point.reflow(pointSlot);\n    },\n\n    reflowCategories: function() { },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var options = this.options;\n        var invertAxes = options.invertAxes;\n        var slotX = invertAxes ? valueSlot : categorySlot;\n        var slotY = invertAxes ? categorySlot : valueSlot;\n\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    categorySlot: function(categoryAxis, categoryIx) {\n        return categoryAxis.getSlot(categoryIx);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var count = categoriesCount(series);\n        var seriesCount = series.length;\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            this$1$1._outOfRangeCallback(series[seriesIx], \"_outOfRangeMinPoint\", seriesIx, callback);\n        }\n\n        for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n            for (var seriesIx$1 = 0; seriesIx$1 < seriesCount; seriesIx$1++) {\n                var currentSeries = series[seriesIx$1];\n                var currentCategory = this$1$1.categoryAxis.categoryAt(categoryIx);\n                var pointData = this$1$1.plotArea.bindPoint(currentSeries, categoryIx);\n\n                callback(pointData, {\n                    category: currentCategory,\n                    categoryIx: categoryIx,\n                    categoriesCount: count,\n                    series: currentSeries,\n                    seriesIx: seriesIx$1\n                });\n            }\n        }\n\n        for (var seriesIx$2 = 0; seriesIx$2 < seriesCount; seriesIx$2++) {\n            this$1$1._outOfRangeCallback(series[seriesIx$2], \"_outOfRangeMaxPoint\", seriesIx$2, callback);\n        }\n    },\n\n    _outOfRangeCallback: function(series, field, seriesIx, callback) {\n        var outOfRangePoint = series[field];\n        if (outOfRangePoint) {\n            var categoryIx = outOfRangePoint.categoryIx;\n            var pointData = this.plotArea.bindPoint(series, categoryIx, outOfRangePoint.item);\n\n            callback(pointData, {\n                category: outOfRangePoint.category,\n                categoryIx: categoryIx,\n                series: series,\n                seriesIx: seriesIx,\n                dataItem: outOfRangePoint.item\n            });\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        if (point.value === null) {\n            return \"\";\n        }\n\n        return this.chartService.format.auto(format, point.value);\n    },\n\n    pointValue: function(data) {\n        return data.valueFields.value;\n    }\n});\n\nsetDefaultOptions(CategoricalChart, {\n    series: [],\n    invertAxes: false,\n    isStacked: false,\n    clip: true,\n    limitPoints: true\n});\n\nvar PointEventsMixin = {\n    click: function(chart, e) {\n        return chart.trigger(\n            SERIES_CLICK,\n            this.eventArgs(e)\n        );\n    },\n\n    hover: function(chart, e) {\n        return chart.trigger(\n            SERIES_HOVER,\n            this.eventArgs(e)\n        );\n    },\n\n    over: function(chart, e) {\n        return chart.trigger(\n            SERIES_OVER,\n            this.eventArgs(e)\n        );\n    },\n\n    out: function(chart, e) {\n        return chart.trigger(\n            SERIES_LEAVE,\n            this.eventArgs(e)\n        );\n    },\n\n    eventArgs: function(e) {\n        return {\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            category: this.category,\n            series: this.series,\n            dataItem: this.dataItem,\n            runningTotal: this.runningTotal,\n            total: this.total,\n            element: eventElement(e),\n            originalEvent: e,\n            point: this\n        };\n    }\n};\n\nvar NoteMixin = {\n    createNote: function() {\n        var options = this.options.notes;\n        var text = this.noteText || options.label.text;\n\n        if (options.visible !== false && defined(text) && text !== null) {\n            this.note = new dataviz.Note({\n                value: this.value,\n                text: text,\n                dataItem: this.dataItem,\n                category: this.category,\n                series: this.series\n            }, this.options.notes, this.owner.chartService);\n\n            this.append(this.note);\n        }\n    }\n};\n\nvar LinePoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n    },\n\n    render: function() {\n        var ref = this.options;\n        var markers = ref.markers;\n        var labels = ref.labels;\n\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        if (markers.visible && markers.size) {\n            this.marker = this.createMarker();\n            this.append(this.marker);\n        }\n\n        if (labels.visible) {\n            var labelTemplate = getTemplate(labels);\n            var pointData = this.pointData();\n            var labelText = this.value;\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else if (labels.format) {\n                labelText = this.formatValue(labels.format);\n            }\n            this.label = new TextBox(labelText,\n                deepExtend({\n                    align: CENTER,\n                    vAlign: CENTER,\n                    margin: {\n                        left: 5,\n                        right: 5\n                    },\n                    zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                }, labels),\n                pointData\n            );\n            this.append(this.label);\n        }\n\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    },\n\n    markerBorder: function() {\n        var options = this.options.markers;\n        var background = options.background;\n        var border = deepExtend({ color: this.color }, options.border);\n\n        if (!defined(border.color)) {\n            border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n        }\n\n        return border;\n    },\n\n    createVisual: function() {},\n\n    createMarker: function() {\n        var options = this.options.markers;\n        var marker = new ShapeElement({\n            type: options.type,\n            width: options.size,\n            height: options.size,\n            rotation: options.rotation,\n            background: options.background,\n            border: this.markerBorder(),\n            opacity: options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        return marker;\n    },\n\n    markerBox: function() {\n        if (!this.marker) {\n            this.marker = this.createMarker();\n            this.marker.reflow(this._childBox);\n        }\n\n        return this.marker.box;\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var aboveAxis = ref.aboveAxis;\n        var vertical = options.vertical;\n\n        this.render();\n\n        this.box = targetBox;\n        var childBox = targetBox.clone();\n\n        if (vertical) {\n            if (aboveAxis) {\n                childBox.y1 -= childBox.height();\n            } else {\n                childBox.y2 += childBox.height();\n            }\n        } else {\n            if (aboveAxis) {\n                childBox.x1 += childBox.width();\n            } else {\n                childBox.x2 -= childBox.width();\n            }\n        }\n\n        this._childBox = childBox;\n        if (this.marker) {\n            this.marker.reflow(childBox);\n        }\n\n        this.reflowLabel(childBox);\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1$1.errorBars[i].reflow(childBox);\n            }\n        }\n\n        if (this.note) {\n            var noteTargetBox = this.markerBox();\n\n            if (!(options.markers.visible && options.markers.size)) {\n                var center = noteTargetBox.center();\n                noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n            }\n\n            this.note.reflow(noteTargetBox);\n        }\n    },\n\n    reflowLabel: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var label = ref.label;\n        var anchor = options.labels.position;\n\n        if (label) {\n            anchor = anchor === ABOVE ? TOP : anchor;\n            anchor = anchor === BELOW ? BOTTOM : anchor;\n\n            label.reflow(box);\n            label.box.alignTo(this.markerBox(), anchor);\n            label.reflow(label.box);\n        }\n    },\n\n    createHighlight: function() {\n        var markers = this.options.highlight.markers;\n        var defaultColor = this.markerBorder().color;\n        var options = this.options.markers;\n        var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n\n        var shadow = new ShapeElement({\n            type: options.type,\n            width: size,\n            height: size,\n            rotation: options.rotation,\n            background: markers.color || defaultColor,\n            border: {\n                color: markers.border.color,\n                width: markers.border.width,\n                opacity: valueOrDefault(markers.border.opacity, 1)\n            },\n            opacity: valueOrDefault(markers.opacity, 1)\n        });\n        shadow.reflow(this._childBox);\n\n        return shadow.getElement();\n    },\n\n    highlightVisual: function() {\n        return (this.marker || {}).visual;\n    },\n\n    highlightVisualArgs: function() {\n        var marker = this.marker;\n        var visual, rect;\n\n        if (marker) {\n            rect = marker.paddingBox.toRect();\n            visual = marker.visual;\n        } else {\n            var size = this.options.markers.size;\n            var halfSize = size / 2;\n            var center = this.box.center();\n            rect = new geometry.Rect([ center.x - halfSize, center.y - halfSize ], [ size, size ]);\n        }\n\n        return {\n            options: this.options,\n            rect: rect,\n            visual: visual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var markerBox = this.markerBox();\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n        if (showTooltip) {\n            var x = markerBox.x2 + TOOLTIP_OFFSET;\n            var horizontalAlign = LEFT;\n            var y, verticalAlign;\n\n            if (this.aboveAxis) {\n                y = markerBox.y1;\n                verticalAlign = BOTTOM;\n            } else {\n                y = markerBox.y2;\n                verticalAlign = TOP;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        var markerBox = this.markerBox();\n        return markerBox.overlaps(box);\n    },\n\n    unclipElements: function() {\n        if (this.label) {\n            this.label.options.noclip = true;\n        }\n\n        if (this.note) {\n            this.note.options.noclip = true;\n        }\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            series: this.series\n        };\n    }\n});\n\nLinePoint.prototype.defaults = {\n    vertical: true,\n    markers: {\n        visible: true,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        position: ABOVE,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        }\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: \"#fff\",\n                width: 2\n            }\n        },\n        zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n    },\n    errorBars: {\n        line: {\n            width: 1\n        }\n    }\n};\n\ndeepExtend(LinePoint.prototype, PointEventsMixin);\ndeepExtend(LinePoint.prototype, NoteMixin);\n\nvar LineSegment = ChartElement.extend({\n    init: function(linePoints, series, seriesIx) {\n        ChartElement.fn.init.call(this);\n\n        this.linePoints = linePoints;\n        this.series = series;\n        this.seriesIx = seriesIx;\n    },\n\n    points: function() {\n        return this.toGeometryPoints(this.linePoints);\n    },\n\n    toGeometryPoints: function(points) {\n        var result = [];\n        for (var i = 0, length = points.length; i < length; i++) {\n            if (points[i] && points[i].visible !== false) {\n                result.push(points[i]._childBox.toRect().center());\n            }\n        }\n\n        return result;\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var customVisual = this.series.visual;\n        if (customVisual) {\n            this.visual = customVisual({\n                points: this.toGeometryPoints(this.linePoints),\n                series: this.series,\n                sender: this.getSender(),\n                createVisual: function () {\n                    this$1$1.segmentVisual();\n\n                    return this$1$1.visual;\n                }\n            });\n            if (this.visual && !defined(this.visual.options.zIndex)) {\n                this.visual.options.zIndex = this.series.zIndex;\n            }\n        } else {\n            this.segmentVisual();\n        }\n    },\n\n    segmentVisual: function() {\n        var ref = this;\n        var options = ref.options;\n        var series = ref.series;\n        var color = series.color;\n        var defaults = series._defaults;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        var line = Path.fromPoints(this.points(), {\n            stroke: {\n                color: color,\n                width: series.width,\n                opacity: series.opacity,\n                dashType: series.dashType\n            },\n            zIndex: series.zIndex\n        });\n\n        if (options.closed) {\n            line.close();\n        }\n\n        this.visual = line;\n    },\n\n    aliasFor: function(e, coords) {\n        return this.parent.getNearestPoint(coords.x, coords.y, this.seriesIx);\n    }\n});\n\nsetDefaultOptions(LineSegment, {\n    closed: false\n});\n\nvar StepLineMixin = {\n    calculateStepPoints: function(points) {\n        var categoryAxis = this.parent.plotArea.seriesCategoryAxis(this.series);\n        var ref = categoryAxis.options;\n        var justified = ref.justified;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n\n        var stepAxis = vertical ? X : Y;\n        var axis = vertical ? Y : X;\n        var stepDir = reverse ? 2 : 1;\n        var dir = stepDir;\n\n        var previousPoint = toGeometryPoint(points[0], stepAxis, stepDir, axis, dir);\n        var result = [ previousPoint ];\n\n        for (var idx = 1; idx < points.length; idx++) {\n            var point = toGeometryPoint(points[idx], stepAxis, stepDir, axis, dir);\n\n            if (previousPoint[stepAxis] !== point[stepAxis]) {\n                var stepPoint = new GeometryPoint();\n                stepPoint[stepAxis] = previousPoint[stepAxis];\n                stepPoint[axis] = point[axis];\n\n                result.push(stepPoint, point);\n            }\n\n            previousPoint = point;\n        }\n\n        if (!justified) {\n            result.push(toGeometryPoint(last(points), stepAxis, stepDir, axis, reverse ? 1 : 2));\n        } else if (previousPoint !== last(result)) {\n            result.push(previousPoint);\n        }\n\n        return result;\n\n    }\n};\n\nfunction toGeometryPoint(lintPoint, stepAxis, stepDir, axis, dir) {\n    var box = lintPoint.box;\n    var result = new GeometryPoint();\n\n    result[stepAxis] = box[stepAxis + stepDir];\n    result[axis] = box[axis + dir];\n\n    return result;\n}\n\nvar StepLineSegment = LineSegment.extend({\n    points: function() {\n        return this.calculateStepPoints(this.linePoints);\n    }\n});\n\ndeepExtend(StepLineSegment.prototype, StepLineMixin);\n\nvar SplineSegment = LineSegment.extend({\n    segmentVisual: function() {\n        var series = this.series;\n        var defaults = series._defaults;\n        var color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        var curveProcessor = new CurveProcessor(this.options.closed);\n        var segments = curveProcessor.process(this.points());\n        var curve = new Path({\n            stroke: {\n                color: color,\n                width: series.width,\n                opacity: series.opacity,\n                dashType: series.dashType\n            },\n            zIndex: series.zIndex\n        });\n\n        curve.segments.push.apply(curve.segments, segments);\n\n        this.visual = curve;\n    }\n});\n\nvar LineChartMixin = {\n    renderSegments: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesPoints = ref.seriesPoints;\n        var series = options.series;\n        var seriesCount = seriesPoints.length;\n        var lastSegment;\n\n        this._segments = [];\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var sortedPoints = this$1$1.sortPoints(seriesPoints[seriesIx]);\n            var pointCount = sortedPoints.length;\n            var linePoints = [];\n\n            for (var pointIx = 0; pointIx < pointCount; pointIx++) {\n                var point = sortedPoints[pointIx];\n                if (point) {\n                    linePoints.push(point);\n                } else if (this$1$1.seriesMissingValues(currentSeries) !== INTERPOLATE) {\n                    if (linePoints.length > 1) {\n                        lastSegment = this$1$1.createSegment(\n                            linePoints, currentSeries, seriesIx, lastSegment\n                        );\n                        this$1$1._addSegment(lastSegment);\n                    }\n                    linePoints = [];\n                }\n            }\n\n            if (linePoints.length > 1) {\n                lastSegment = this$1$1.createSegment(\n                    linePoints, currentSeries, seriesIx, lastSegment\n                );\n                this$1$1._addSegment(lastSegment);\n            }\n        }\n\n        this.children.unshift.apply(this.children, this._segments);\n    },\n\n    _addSegment: function(segment) {\n        this._segments.push(segment);\n        segment.parent = this;\n    },\n\n    sortPoints: function(points) {\n        return points;\n    },\n\n    seriesMissingValues: function(series) {\n        var missingValues = series.missingValues;\n        var assumeZero = !missingValues && this.options.isStacked;\n\n        return assumeZero ? ZERO : missingValues || INTERPOLATE;\n    },\n\n    getNearestPoint: function(x, y, seriesIx) {\n        var target = new Point(x, y);\n        var allPoints = this.seriesPoints[seriesIx];\n        var nearestPointDistance = MAX_VALUE;\n        var nearestPoint;\n\n        for (var i = 0; i < allPoints.length; i++) {\n            var point = allPoints[i];\n\n            if (point && defined(point.value) && point.value !== null && point.visible !== false) {\n                var pointBox = point.box;\n                var pointDistance = pointBox.center().distanceTo(target);\n\n                if (pointDistance < nearestPointDistance) {\n                    nearestPoint = point;\n                    nearestPointDistance = pointDistance;\n                }\n            }\n        }\n\n        return nearestPoint;\n    }\n};\n\nvar ClipAnimation = Animation.extend({\n    setup: function() {\n        this._setEnd(this.options.box.x1);\n    },\n\n    step: function(pos) {\n        var box = this.options.box;\n        this._setEnd(dataviz.interpolateValue(box.x1, box.x2, pos));\n    },\n\n    _setEnd: function(x) {\n        var element = this.element;\n        var segments = element.segments;\n        var topRight = segments[1].anchor();\n        var bottomRight = segments[2].anchor();\n\n        element.suspend();\n        topRight.setX(x);\n        element.resume();\n        bottomRight.setX(x);\n    }\n});\n\nsetDefaultOptions(ClipAnimation, {\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(\"clip\", ClipAnimation);\n\nvar ClipAnimationMixin = {\n    createAnimation: function() {\n        var root = this.getRoot();\n        if (root && (root.options || {}).transitions !== false) {\n            var box = root.size();\n            var clipPath = Path.fromRect(box.toRect());\n            this.visual.clip(clipPath);\n            this.animation = new ClipAnimation(clipPath, {\n                box: box\n            });\n            if (anyHasZIndex(this.options.series)) {\n                this._setChildrenAnimation(clipPath);\n            }\n        }\n    },\n\n    _setChildrenAnimation: function(clipPath) {\n        var points = this.animationPoints();\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            if (point && point.visual && defined(point.visual.options.zIndex)) {\n                point.visual.clip(clipPath);\n            }\n        }\n    }\n};\n\nvar LineChart = CategoricalChart.extend({\n    render: function() {\n\n        CategoricalChart.fn.render.call(this);\n\n        this.updateStackRange();\n        this.renderSegments();\n    },\n\n    pointType: function() {\n        return LinePoint;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var missingValues = this.seriesMissingValues(series);\n        var value = data.valueFields.value;\n\n        if (!defined(value) || value === null) {\n            if (missingValues === ZERO) {\n                value = 0;\n            } else {\n                return null;\n            }\n        }\n\n        var pointOptions = this.pointOptions(series, seriesIx);\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        var color = data.fields.color || series.color;\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new LinePoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    plotRange: function(point) {\n        var this$1$1 = this;\n\n        var plotValue = this.plotValue(point);\n\n        if (this.options.isStacked) {\n            var categoryIx = point.categoryIx;\n            var categoryPoints = this.categoryPoints[categoryIx];\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n\n                if (point === other) {\n                    break;\n                }\n\n                plotValue += this$1$1.plotValue(other);\n\n                if (this$1$1.options.isStacked100) {\n                    plotValue = Math.min(plotValue, 1);\n                }\n            }\n\n        }\n\n        return [ plotValue, plotValue ];\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === STEP) {\n            pointType = StepLineSegment;\n        } else if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result.concat(this._segments);\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\ndeepExtend(LineChart.prototype, LineChartMixin, ClipAnimationMixin);\n\nvar AreaSegment = LineSegment.extend({\n    init: function(linePoints, currentSeries, seriesIx, prevSegment, stackPoints) {\n        LineSegment.fn.init.call(this, linePoints, currentSeries, seriesIx);\n\n        this.prevSegment = prevSegment;\n        this.stackPoints = stackPoints;\n    },\n\n    createVisual: function() {\n        var series = this.series;\n        var defaults = series._defaults;\n        var lineOptions = series.line || {};\n        var color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        this.visual = new Group({\n            zIndex: series.zIndex\n        });\n\n        this.createFill({\n            fill: {\n                color: color,\n                opacity: series.opacity\n            },\n            stroke: null\n        });\n\n        if (lineOptions.width > 0 && lineOptions.visible !== false) {\n            this.createStroke({\n                stroke: deepExtend({\n                    color: color,\n                    opacity: series.opacity,\n                    lineCap: \"butt\"\n                }, lineOptions)\n            });\n        }\n    },\n\n    strokeSegments: function() {\n        var segments = this._strokeSegments;\n\n        if (!segments) {\n            segments = this._strokeSegments = this.createStrokeSegments();\n        }\n\n        return segments;\n    },\n\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.points());\n    },\n\n    stackSegments: function() {\n        if (this.prevSegment) {\n            return this.prevSegment.createStackSegments(this.stackPoints);\n        }\n\n        return this.createStackSegments(this.stackPoints);\n    },\n\n    createStackSegments: function(stackPoints) {\n        return this.segmentsFromPoints(this.toGeometryPoints(stackPoints)).reverse();\n    },\n\n    segmentsFromPoints: function(points) {\n        return points.map(function (point) { return new geometry.Segment(point); });\n    },\n\n    createStroke: function(style) {\n        var stroke = new Path(style);\n        stroke.segments.push.apply(stroke.segments, this.strokeSegments());\n\n        this.visual.append(stroke);\n    },\n\n    hasStackSegment: function() {\n        return this.prevSegment || (this.stackPoints && this.stackPoints.length);\n    },\n\n    createFill: function(style) {\n        var strokeSegments = this.strokeSegments();\n        var fillSegments = strokeSegments.slice(0);\n        var hasStackSegments = this.hasStackSegment();\n\n        if (hasStackSegments) {\n            var stackSegments = this.stackSegments();\n\n            append(fillSegments, stackSegments);\n        }\n\n        var fill = new Path(style);\n        fill.segments.push.apply(fill.segments, fillSegments);\n\n        if (!hasStackSegments && strokeSegments.length > 1) {\n            this.fillToAxes(fill);\n        }\n\n        this.visual.append(fill);\n    },\n\n    fillToAxes: function(fillPath) {\n        var chart = this.parent;\n        var invertAxes = chart.options.invertAxes;\n        var valueAxis = chart.seriesValueAxis(this.series);\n        var crossingValue = chart.categoryAxisCrossingValue(valueAxis);\n        var endSlot = valueAxis.getSlot(crossingValue, crossingValue, true);\n        var segments = this.strokeSegments();\n        var firstPoint = segments[0].anchor();\n        var lastPoint = last(segments).anchor();\n        var end = invertAxes ? endSlot.x1 : endSlot.y1;\n\n        if (invertAxes) {\n            fillPath.lineTo(end, lastPoint.y)\n                    .lineTo(end, firstPoint.y);\n        } else {\n            fillPath.lineTo(lastPoint.x, end)\n                    .lineTo(firstPoint.x, end);\n        }\n    }\n});\n\nvar StepAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints));\n    },\n\n    createStackSegments: function(stackPoints) {\n        return this.segmentsFromPoints(this.calculateStepPoints(stackPoints)).reverse();\n    }\n});\n\ndeepExtend(StepAreaSegment.prototype, StepLineMixin);\n\nvar SplineAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        var curveProcessor = new CurveProcessor(this.options.closed);\n        var linePoints = this.points();\n\n        return curveProcessor.process(linePoints);\n    },\n\n    createStackSegments: function() {\n        var strokeSegments = this.strokeSegments();\n        var stackSegments = [];\n        for (var idx = strokeSegments.length - 1; idx >= 0; idx--) {\n            var segment = strokeSegments[idx];\n            stackSegments.push(new geometry.Segment(\n                segment.anchor(),\n                segment.controlOut(),\n                segment.controlIn()\n            ));\n        }\n\n        return stackSegments;\n    }\n});\n\nvar AreaChart = LineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n        var isStacked = this.options.isStacked;\n        var style = (currentSeries.line || {}).style;\n        var previousSegment;\n\n        var stackPoints;\n        if (isStacked && seriesIx > 0 && prevSegment) {\n            var missingValues = this.seriesMissingValues(currentSeries);\n            if (missingValues !== \"gap\") {\n                stackPoints = prevSegment.linePoints;\n                previousSegment = prevSegment;\n            } else {\n                stackPoints = this._gapStackPoints(linePoints, seriesIx, style);\n            }\n        }\n\n        var pointType;\n        if (style === STEP) {\n            pointType = StepAreaSegment;\n        } else if (style === SMOOTH) {\n            pointType = SplineAreaSegment;\n        } else {\n            pointType = AreaSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        LineChart.fn.reflow.call(this, targetBox);\n\n        var stackPoints = this._stackPoints;\n        if (stackPoints) {\n            for (var idx = 0; idx < stackPoints.length; idx++) {\n                var stackPoint = stackPoints[idx];\n                var pointSlot = this$1$1.categoryAxis.getSlot(stackPoint.categoryIx);\n                stackPoint.reflow(pointSlot);\n            }\n        }\n    },\n\n    _gapStackPoints: function(linePoints, seriesIx, style) {\n        var this$1$1 = this;\n\n        var seriesPoints = this.seriesPoints;\n        var startIdx = linePoints[0].categoryIx;\n        var length = linePoints.length;\n        if (startIdx < 0) {\n            startIdx = 0;\n            length--;\n        }\n\n        var endIdx = startIdx + length;\n        var pointOffset = this.seriesOptions[0]._outOfRangeMinPoint ? 1 : 0;\n        var stackPoints = [];\n\n        this._stackPoints = this._stackPoints || [];\n        for (var categoryIx = startIdx; categoryIx < endIdx; categoryIx++) {\n            var pointIx = categoryIx + pointOffset;\n            var currentSeriesIx = seriesIx;\n            var point = (void 0);\n\n            do {\n                currentSeriesIx--;\n                point = seriesPoints[currentSeriesIx][pointIx];\n            } while (currentSeriesIx > 0 && !point);\n\n            if (point) {\n                if (style !== STEP && categoryIx > startIdx && !seriesPoints[currentSeriesIx][pointIx - 1]) {\n                    stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx - 1, currentSeriesIx));\n                }\n\n                stackPoints.push(point);\n\n                if (style !== STEP && categoryIx + 1 < endIdx && !seriesPoints[currentSeriesIx][pointIx + 1]) {\n                    stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx + 1, currentSeriesIx));\n                }\n            } else {\n                var gapStackPoint = this$1$1._createGapStackPoint(categoryIx);\n                this$1$1._stackPoints.push(gapStackPoint);\n                stackPoints.push(gapStackPoint);\n            }\n        }\n\n        return stackPoints;\n    },\n\n    _previousSegmentPoint: function(categoryIx, pointIx, segmentIx, seriesIdx) {\n        var seriesPoints = this.seriesPoints;\n        var index = seriesIdx;\n        var point;\n\n        while (index > 0 && !point) {\n            index--;\n            point = seriesPoints[index][segmentIx];\n        }\n\n        if (!point) {\n            point = this._createGapStackPoint(categoryIx);\n            this._stackPoints.push(point);\n        } else {\n            point = seriesPoints[index][pointIx];\n        }\n\n        return point;\n    },\n\n    _createGapStackPoint: function(categoryIx) {\n        var options = this.pointOptions({}, 0);\n        var point = new LinePoint(0, options);\n        point.categoryIx = categoryIx;\n        point.series = {};\n\n        return point;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\nvar AxisGroupRangeTracker = Class.extend({\n    init: function() {\n\n        this.axisRanges = {};\n    },\n\n    update: function(chartAxisRanges) {\n        var axisRanges = this.axisRanges;\n\n        for (var axisName in chartAxisRanges) {\n            var chartRange = chartAxisRanges[axisName];\n            var range = axisRanges[axisName];\n            axisRanges[axisName] = range = range || { min: MAX_VALUE, max: MIN_VALUE };\n\n            range.min = Math.min(range.min, chartRange.min);\n            range.max = Math.max(range.max, chartRange.max);\n        }\n    },\n\n    reset: function(axisName) {\n        this.axisRanges[axisName] = undefined;\n    },\n\n    query: function(axisName) {\n        return this.axisRanges[axisName];\n    }\n});\n\nvar BarLabel = ChartElement.extend({\n    init: function(content, options, pointData) {\n        ChartElement.fn.init.call(this, options);\n\n        this.textBox = new TextBox(content, this.options, pointData);\n        this.append(this.textBox);\n    },\n\n    createVisual: function() {\n        this.textBox.options.noclip = this.options.noclip;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var vertical = options.vertical;\n        var aboveAxis = options.aboveAxis;\n        var text = this.children[0];\n        var textOptions = text.options;\n        var box = text.box;\n        var padding = text.options.padding;\n        var labelBox = targetBox;\n\n        textOptions.align = vertical ? CENTER : LEFT;\n        textOptions.vAlign = vertical ? TOP : CENTER;\n\n        if (options.position === INSIDE_END) {\n            if (vertical) {\n                textOptions.vAlign = TOP;\n\n                if (!aboveAxis && box.height() < targetBox.height()) {\n                    textOptions.vAlign = BOTTOM;\n                }\n            } else {\n                textOptions.align = aboveAxis ? RIGHT : LEFT;\n            }\n        } else if (options.position === CENTER) {\n            textOptions.vAlign = CENTER;\n            textOptions.align = CENTER;\n        } else if (options.position === INSIDE_BASE) {\n            if (vertical) {\n                textOptions.vAlign = aboveAxis ? BOTTOM : TOP;\n            } else {\n                textOptions.align = aboveAxis ? LEFT : RIGHT;\n            }\n        } else if (options.position === OUTSIDE_END) {\n            if (vertical) {\n                if (aboveAxis) {\n                    labelBox = new Box(\n                        targetBox.x1, targetBox.y1 - box.height(),\n                        targetBox.x2, targetBox.y1\n                    );\n                } else {\n                    labelBox = new Box(\n                        targetBox.x1, targetBox.y2,\n                        targetBox.x2, targetBox.y2 + box.height()\n                    );\n                }\n            } else {\n                textOptions.align = CENTER;\n                if (aboveAxis) {\n                    labelBox = new Box(\n                        targetBox.x2, targetBox.y1,\n                        targetBox.x2 + box.width(), targetBox.y2\n                    );\n                } else {\n                    labelBox = new Box(\n                        targetBox.x1 - box.width(), targetBox.y1,\n                        targetBox.x1, targetBox.y2\n                    );\n                }\n            }\n        }\n\n        if (!options.rotation) {\n            if (vertical) {\n                padding.left = padding.right =\n                    (labelBox.width() - text.contentBox.width()) / 2;\n            } else {\n                padding.top = padding.bottom =\n                    (labelBox.height() - text.contentBox.height()) / 2;\n            }\n        }\n\n        text.reflow(labelBox);\n    },\n\n    alignToClipBox: function(clipBox) {\n        var vertical = this.options.vertical;\n        var field = vertical ? Y : X;\n        var start = field + \"1\";\n        var end = field + \"2\";\n        var text = this.children[0];\n        var parentBox = this.parent.box;\n\n        if (parentBox[start] < clipBox[start] || clipBox[end] < parentBox[end]) {\n            var targetBox = text.paddingBox.clone();\n            targetBox[start] = Math.max(parentBox[start], clipBox[start]);\n            targetBox[end] = Math.min(parentBox[end], clipBox[end]);\n\n            this.reflow(targetBox);\n        }\n    }\n});\n\nsetDefaultOptions(BarLabel, {\n    position: OUTSIDE_END,\n    margin: getSpacing(3),\n    padding: getSpacing(4),\n    color: BLACK,\n    background: \"\",\n    border: {\n        width: 1,\n        color: \"\"\n    },\n    aboveAxis: true,\n    vertical: false,\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    },\n    zIndex: 2\n});\n\nvar BAR_ALIGN_MIN_WIDTH = 6;\n\nvar Bar = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.value = value;\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createLabel();\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            this.label = new BarLabel(labelText,\n                deepExtend({\n                    vertical: options.vertical\n                },\n                labels\n            ), pointData);\n            this.append(this.label);\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.options.aboveAxis = this.aboveAxis;\n            label.reflow(targetBox);\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1$1.errorBars[i].reflow(targetBox);\n            }\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var options = ref.options;\n        var customVisual = options.visual;\n\n        if (this.visible !== false) {\n            ChartElement.fn.createVisual.call(this);\n\n            if (customVisual) {\n                var visual = this.rectVisual = customVisual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    sender: this.getSender(),\n                    series: this.series,\n                    percentage: this.percentage,\n                    stackValue: this.stackValue,\n                    runningTotal: this.runningTotal,\n                    total: this.total,\n                    rect: box.toRect(),\n                    createVisual: function () {\n                        var group = new Group();\n                        this$1$1.createRect(group);\n                        return group;\n                    },\n                    options: options\n                });\n\n                if (visual) {\n                    this.visual.append(visual);\n                }\n            } else if (box.width() > 0 && box.height() > 0) {\n                this.createRect(this.visual);\n            }\n        }\n    },\n\n    createRect: function(visual) {\n        var options = this.options;\n        var border = options.border;\n        var strokeOpacity = defined(border.opacity) ? border.opacity : options.opacity;\n        var rect = this.box.toRect();\n\n        rect.size.width = Math.round(rect.size.width);\n\n        var path = this.rectVisual = Path.fromRect(rect, {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: this.getBorderColor(),\n                width: border.width,\n                opacity: strokeOpacity,\n                dashType: border.dashType\n            }\n        });\n\n        var width = this.box.width();\n        var height = this.box.height();\n\n        var size = options.vertical ? width : height;\n\n        if (size > BAR_ALIGN_MIN_WIDTH) {\n            alignPathToPixel(path);\n\n            // Fixes lineJoin issue in firefox when the joined lines are parallel\n            if (width < 1 || height < 1) {\n                path.options.stroke.lineJoin = \"round\";\n            }\n        }\n\n        visual.append(path);\n\n        if (hasGradientOverlay(options)) {\n            var overlay = this.createGradientOverlay(path, { baseColor: this.color }, deepExtend({\n                end: !options.vertical ? [ 0, 1 ] : undefined\n            }, options.overlay));\n\n            visual.append(overlay);\n        }\n    },\n\n    createHighlight: function(style) {\n        var highlight = Path.fromRect(this.box.toRect(), style);\n\n        return alignPathToPixel(highlight);\n    },\n\n    highlightVisual: function() {\n        return this.rectVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    },\n\n    getBorderColor: function() {\n        var color = this.color;\n        var border = this.options.border;\n        var brightness = border._brightness || BORDER_BRIGHTNESS;\n        var borderColor = border.color;\n\n        if (!defined(borderColor)) {\n            borderColor = new Color(color).brightness(brightness).toHex();\n        }\n\n        return borderColor;\n    },\n\n    tooltipAnchor: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var aboveAxis = ref.aboveAxis;\n        var clipBox = this.owner.pane.clipBox() || box;\n        var horizontalAlign = LEFT;\n        var verticalAlign = TOP;\n        var x, y;\n\n        if (options.vertical) {\n            x = Math.min(box.x2, clipBox.x2) + TOOLTIP_OFFSET;\n            if (aboveAxis) {\n                y = Math.max(box.y1, clipBox.y1);\n            } else {\n                y = Math.min(box.y2, clipBox.y2);\n                verticalAlign = BOTTOM;\n            }\n        } else {\n            var x1 = Math.max(box.x1, clipBox.x1);\n            var x2 = Math.min(box.x2, clipBox.x2);\n\n            if (options.isStacked) {\n                verticalAlign = BOTTOM;\n                if (aboveAxis) {\n                    horizontalAlign = RIGHT;\n                    x = x2;\n                } else {\n                    x = x1;\n                }\n                y = Math.max(box.y1, clipBox.y1) - TOOLTIP_OFFSET;\n            } else {\n                if (aboveAxis) {\n                    x = x2 + TOOLTIP_OFFSET;\n                } else {\n                    x = x1 - TOOLTIP_OFFSET;\n                    horizontalAlign = RIGHT;\n                }\n                y = Math.max(box.y1, clipBox.y1);\n            }\n        }\n\n        return {\n            point: new Point(x, y),\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            runningTotal: this.runningTotal,\n            total: this.total,\n            series: this.series\n        };\n    }\n});\n\ndeepExtend(Bar.prototype, PointEventsMixin);\ndeepExtend(Bar.prototype, NoteMixin);\n\nBar.prototype.defaults = {\n    border: {\n        width: 1\n    },\n    vertical: true,\n    overlay: {\n        gradient: \"glass\"\n    },\n    labels: {\n        visible: false,\n        format: \"{0}\"\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    }\n};\n\nfunction forEach(elements, callback) {\n    elements.forEach(callback);\n}\n\nfunction forEachReverse(elements, callback) {\n    var length = elements.length;\n\n    for (var idx = length - 1; idx >= 0; idx--) {\n        callback(elements[idx], idx - length - 1);\n    }\n}\n\nvar ClusterLayout = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    },\n\n    reflow: function(box) {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var gap = ref.gap;\n        var spacing = ref.spacing;\n        var children = this.children;\n        var count = children.length;\n        var axis = vertical ? Y : X;\n        var slots = count + gap + (spacing * (count - 1));\n        var slotSize = (vertical ? box.height() : box.width()) / slots;\n        var position = box[axis + 1] + slotSize * (gap / 2);\n\n        this.forEach(children, function (child, idx) {\n            var childBox = (child.box || box).clone();\n\n            childBox[axis + 1] = position;\n            childBox[axis + 2] = position + slotSize;\n\n            child.reflow(childBox);\n            if (idx < count - 1) {\n                position += (slotSize * spacing);\n            }\n\n            position += slotSize;\n        });\n    }\n});\n\nsetDefaultOptions(ClusterLayout, {\n    vertical: false,\n    gap: 0,\n    spacing: 0\n});\n\nvar StackWrap = ChartElement.extend({\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var positionAxis = this.options.vertical ? X : Y;\n        var children = this.children;\n        var childrenCount = children.length;\n        var box = this.box = new Box();\n\n        for (var i = 0; i < childrenCount; i++) {\n            var currentChild = children[i];\n\n            if (currentChild.visible !== false) {\n                var childBox = currentChild.box.clone();\n                childBox.snapTo(targetBox, positionAxis);\n\n                if (i === 0) {\n                    box = this$1$1.box = childBox.clone();\n                }\n\n                currentChild.reflow(childBox);\n                box.wrap(childBox);\n            }\n        }\n    }\n});\n\nsetDefaultOptions(StackWrap, {\n    vertical: true\n});\n\nvar BarChart = CategoricalChart.extend({\n    render: function() {\n        CategoricalChart.fn.render.call(this);\n        this.updateStackRange();\n    },\n\n    pointType: function() {\n        return Bar;\n    },\n\n    clusterType: function() {\n        return ClusterLayout;\n    },\n\n    stackType: function() {\n        return StackWrap;\n    },\n\n    stackLimits: function(axisName, stackName) {\n        var limits = CategoricalChart.fn.stackLimits.call(this, axisName, stackName);\n\n        return limits;\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var isStacked = options.isStacked;\n        var value = this.pointValue(data);\n        var pointOptions = this.pointOptions(series, seriesIx);\n\n        var labelOptions = pointOptions.labels;\n        if (isStacked) {\n            if (labelOptions.position === OUTSIDE_END) {\n                labelOptions.position = INSIDE_END;\n            }\n        }\n\n        pointOptions.isStacked = isStacked;\n\n        var color = data.fields.color || series.color;\n        if (value < 0 && pointOptions.negativeColor) {\n            color = pointOptions.negativeColor;\n        }\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var pointType = this.pointType();\n        var point = new pointType(value, pointOptions);\n        point.color = color;\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            var clusterType = this.clusterType();\n            cluster = new clusterType({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (isStacked) {\n            var stackWrap = this.getStackWrap(series, cluster);\n            stackWrap.append(point);\n        } else {\n            cluster.append(point);\n        }\n\n        return point;\n    },\n\n    getStackWrap: function(series, cluster) {\n        var stack = series.stack;\n        var stackGroup = stack ? stack.group || stack : stack;\n        var wraps = cluster.children;\n        var stackWrap;\n\n        if (typeof stackGroup === datavizConstants.STRING) {\n            for (var i = 0; i < wraps.length; i++) {\n                if (wraps[i]._stackGroup === stackGroup) {\n                    stackWrap = wraps[i];\n                    break;\n                }\n            }\n        } else {\n            stackWrap = wraps[0];\n        }\n\n        if (!stackWrap) {\n            var stackType = this.stackType();\n            stackWrap = new stackType({\n                vertical: !this.options.invertAxes\n            });\n            stackWrap._stackGroup = stackGroup;\n            cluster.append(stackWrap);\n        }\n\n        return stackWrap;\n    },\n\n    categorySlot: function(categoryAxis, categoryIx, valueAxis) {\n        var options = this.options;\n        var categorySlot = categoryAxis.getSlot(categoryIx);\n        var startValue = valueAxis.startValue();\n\n        if (options.isStacked) {\n            var zeroSlot = valueAxis.getSlot(startValue, startValue, true);\n            var stackAxis = options.invertAxes ? X : Y;\n            categorySlot[stackAxis + 1] = categorySlot[stackAxis + 2] = zeroSlot[stackAxis + 1];\n        }\n\n        return categorySlot;\n    },\n\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    createAnimation: function() {\n        this._setAnimationOptions();\n        CategoricalChart.fn.createAnimation.call(this);\n\n        if (anyHasZIndex(this.options.series)) {\n            this._setChildrenAnimation();\n        }\n    },\n\n    _setChildrenAnimation: function() {\n        var this$1$1 = this;\n\n        var points = this.points;\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            var pointVisual = point.visual;\n            if (pointVisual && defined(pointVisual.options.zIndex)) {\n                point.options.animation = this$1$1.options.animation;\n                point.createAnimation();\n            }\n        }\n    },\n\n    _setAnimationOptions: function() {\n        var options = this.options;\n        var animation = options.animation || {};\n        var origin;\n\n        if (options.isStacked) {\n            var valueAxis = this.seriesValueAxis(options.series[0]);\n            origin = valueAxis.getSlot(valueAxis.startValue());\n        } else {\n            origin = this.categoryAxis.getSlot(0);\n        }\n\n        animation.origin = new GeometryPoint(origin.x1, origin.y1);\n        animation.vertical = !options.invertAxes;\n    }\n});\n\nsetDefaultOptions(BarChart, {\n    animation: {\n        type: BAR\n    }\n});\n\nvar Candlestick = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this, options);\n        this.value = value;\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var ocSlot = valueAxis.getSlot(value.open, value.close);\n        var lhSlot = valueAxis.getSlot(value.low, value.high);\n\n        ocSlot.x1 = lhSlot.x1 = box.x1;\n        ocSlot.x2 = lhSlot.x2 = box.x2;\n\n        this.realBody = ocSlot;\n\n        var mid = lhSlot.center().x;\n        var points = [];\n\n        points.push([ [ mid, lhSlot.y1 ], [ mid, ocSlot.y1 ] ]);\n        points.push([ [ mid, ocSlot.y2 ], [ mid, lhSlot.y2 ] ]);\n\n        this.lines = points;\n\n        this.box = lhSlot.clone().wrap(ocSlot);\n\n        if (!this._rendered) {\n            this._rendered = true;\n            this.createNote();\n        }\n\n        this.reflowNote();\n    },\n\n    reflowNote: function() {\n        if (this.note) {\n            this.note.reflow(this.box);\n        }\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n        this._mainVisual = this.mainVisual(this.options);\n        this.visual.append(\n            this._mainVisual\n        );\n\n        this.createOverlay();\n    },\n\n    mainVisual: function(options) {\n        var group = new Group();\n\n        this.createBody(group, options);\n        this.createLines(group, options);\n\n        return group;\n    },\n\n    createBody: function(container, options) {\n        var body = Path.fromRect(this.realBody.toRect(), {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: null\n        });\n\n        if (options.border.width > 0) {\n            body.options.set(\"stroke\", {\n                color: this.getBorderColor(),\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: valueOrDefault(options.border.opacity, options.opacity)\n            });\n        }\n\n        alignPathToPixel(body);\n        container.append(body);\n\n        if (hasGradientOverlay(options)) {\n            container.append(this.createGradientOverlay(body, { baseColor: this.color }, deepExtend({\n                end: !options.vertical ? [ 0, 1 ] : undefined\n            }, options.overlay)));\n        }\n    },\n\n    createLines: function(container, options) {\n        this.drawLines(container, options, this.lines, options.line);\n    },\n\n    drawLines: function(container, options, lines, lineOptions) {\n        if (!lines) {\n            return;\n        }\n\n        var lineStyle = {\n            stroke: {\n                color: lineOptions.color || this.color,\n                opacity: valueOrDefault(lineOptions.opacity, options.opacity),\n                width: lineOptions.width,\n                dashType: lineOptions.dashType,\n                lineCap: \"butt\"\n            }\n        };\n\n        for (var i = 0; i < lines.length; i++) {\n            var line = Path.fromPoints(lines[i], lineStyle);\n            alignPathToPixel(line);\n            container.append(line);\n        }\n    },\n\n    getBorderColor: function() {\n        var border = this.options.border;\n        var borderColor = border.color;\n\n        if (!defined(borderColor)) {\n            borderColor = new Color(this.color).brightness(border._brightness).toHex();\n        }\n\n        return borderColor;\n    },\n\n    createOverlay: function() {\n        var overlay = Path.fromRect(this.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null\n        });\n\n        this.visual.append(overlay);\n    },\n\n    createHighlight: function() {\n        var highlight = this.options.highlight;\n        var normalColor = this.color;\n\n        this.color = highlight.color || this.color;\n        var overlay = this.mainVisual(\n            deepExtend({}, this.options, {\n                line: {\n                    color: this.getBorderColor()\n                }\n            }, highlight)\n        );\n        this.color = normalColor;\n\n        return overlay;\n    },\n\n    highlightVisual: function() {\n        return this._mainVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this._mainVisual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var box = this.box;\n        var clipBox = this.owner.pane.clipBox() || box;\n\n        return {\n            point: new Point(box.x2 + TOOLTIP_OFFSET, Math.max(box.y1, clipBox.y1) + TOOLTIP_OFFSET),\n            align: {\n                horizontal: LEFT,\n                vertical: TOP\n            }\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    }\n});\n\nsetDefaultOptions(Candlestick, {\n    vertical: true,\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{4:d}</th></tr>\" +\n                    \"<tr><td>Open:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>High:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Low:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Close:</td><td>{3:C}</td></tr>\" +\n                \"</table>\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    }\n});\n\ndeepExtend(Candlestick.prototype, PointEventsMixin);\ndeepExtend(Candlestick.prototype, NoteMixin);\n\nvar CandlestickChart = CategoricalChart.extend({\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var value = data.valueFields;\n        var valueParts = this.splitValue(value);\n        var hasValue = areNumbers(valueParts);\n        var dataItem = series.data[categoryIx];\n        var categoryPoints = this.categoryPoints[categoryIx];\n        var point;\n\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        if (hasValue) {\n            point = this.createPoint(data, fields);\n        }\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (point) {\n            this.updateRange(value, fields);\n\n            cluster.append(point);\n\n            point.categoryIx = categoryIx;\n            point.category = category;\n            point.series = series;\n            point.seriesIx = seriesIx;\n            point.owner = this;\n            point.dataItem = dataItem;\n            point.noteText = data.fields.noteText;\n        }\n\n        this.points.push(point);\n        categoryPoints.push(point);\n    },\n\n    pointType: function() {\n        return Candlestick;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var pointType = this.pointType();\n        var value = data.valueFields;\n        var pointOptions = deepExtend({}, series);\n        var color = data.fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (series.type === CANDLESTICK) {\n            if (value.open > value.close) {\n                color = data.fields.downColor || series.downColor || series.color;\n            }\n        }\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        pointOptions.vertical = !this.options.invertAxes;\n\n        var point = new pointType(value, pointOptions);\n        point.color = color;\n\n        return point;\n    },\n\n    splitValue: function(value) {\n        return [ value.low, value.open, value.close, value.high ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var parts = this.splitValue(value);\n        var axisRange = this.valueAxisRanges[axisName];\n\n        axisRange = this.valueAxisRanges[axisName] =\n            axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n        axisRange = this.valueAxisRanges[axisName] = {\n            min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n            max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n        };\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format,\n            value.open, value.high,\n            value.low, value.close, point.category\n        );\n    },\n\n    animationPoints: function() {\n        return this.points;\n    }\n});\n\ndeepExtend(CandlestickChart.prototype, ClipAnimationMixin);\n\nvar BoxPlot = Candlestick.extend({\n    init: function(value, options) {\n        Candlestick.fn.init.call(this, value, options);\n\n        this.createNote();\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var whiskerSlot, boxSlot;\n\n        this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n        this.realBody = boxSlot;\n        this.reflowBoxSlot(box);\n\n        this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n        this.reflowWhiskerSlot(box);\n\n        var medianSlot = valueAxis.getSlot(value.median);\n\n        if (value.mean) {\n            var meanSlot = valueAxis.getSlot(value.mean);\n            this.meanPoints = this.calcMeanPoints(box, meanSlot);\n        }\n\n        this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n        this.medianPoints = this.calcMedianPoints(box, medianSlot);\n\n        this.box = whiskerSlot.clone().wrap(boxSlot);\n        this.reflowNote();\n    },\n\n    reflowBoxSlot: function(box) {\n        this.boxSlot.x1 = box.x1;\n        this.boxSlot.x2 = box.x2;\n    },\n\n    reflowWhiskerSlot: function(box) {\n        this.whiskerSlot.x1 = box.x1;\n        this.whiskerSlot.x2 = box.x2;\n    },\n\n    calcMeanPoints: function(box, meanSlot) {\n        return [\n            [ [ box.x1, meanSlot.y1 ], [ box.x2, meanSlot.y1 ] ]\n        ];\n    },\n\n    calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().x;\n        return [ [\n            [ mid - 5, whiskerSlot.y1 ], [ mid + 5, whiskerSlot.y1 ],\n            [ mid, whiskerSlot.y1 ], [ mid, boxSlot.y1 ]\n        ], [\n            [ mid - 5, whiskerSlot.y2 ], [ mid + 5, whiskerSlot.y2 ],\n            [ mid, whiskerSlot.y2 ], [ mid, boxSlot.y2 ]\n        ] ];\n    },\n\n    calcMedianPoints: function(box, medianSlot) {\n        return [\n            [ [ box.x1, medianSlot.y1 ], [ box.x2, medianSlot.y1 ] ]\n        ];\n    },\n\n    renderOutliers: function(options) {\n        var this$1$1 = this;\n\n        var value = this.value;\n        var outliers = value.outliers || [];\n        var outerFence = Math.abs(value.q3 - value.q1) * 3;\n        var elements = [];\n        var markers = options.markers || {};\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i];\n            if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n                markers = options.outliers;\n            } else {\n                markers = options.extremes;\n            }\n            var markersBorder = deepExtend({}, markers.border);\n\n            if (!defined(markersBorder.color)) {\n                if (defined(this$1$1.color)) {\n                    markersBorder.color = this$1$1.color;\n                } else {\n                    markersBorder.color =\n                        new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n                }\n            }\n\n            var shape = new ShapeElement({\n                type: markers.type,\n                width: markers.size,\n                height: markers.size,\n                rotation: markers.rotation,\n                background: markers.background,\n                border: markersBorder,\n                opacity: markers.opacity\n            });\n\n            shape.value = outlierValue;\n\n            elements.push(shape);\n        }\n\n        this.reflowOutliers(elements);\n        return elements;\n    },\n\n    reflowOutliers: function(outliers) {\n        var this$1$1 = this;\n\n        var valueAxis = this.owner.seriesValueAxis(this.options);\n        var center = this.box.center();\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i].value;\n            var markerBox = valueAxis.getSlot(outlierValue);\n\n            if (this$1$1.options.vertical) {\n                markerBox.move(center.x);\n            } else {\n                markerBox.move(undefined, center.y);\n            }\n\n            this$1$1.box = this$1$1.box.wrap(markerBox);\n            outliers[i].reflow(markerBox);\n        }\n    },\n\n    mainVisual: function(options) {\n        var group = Candlestick.fn.mainVisual.call(this, options);\n        var outliers = this.renderOutliers(options);\n\n        for (var i = 0; i < outliers.length; i++) {\n            var element = outliers[i].getElement();\n            if (element) {\n                group.append(element);\n            }\n        }\n\n        return group;\n    },\n\n    createLines: function(container, options) {\n        this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n        this.drawLines(container, options, this.medianPoints, options.median);\n        this.drawLines(container, options, this.meanPoints, options.mean);\n    },\n\n    getBorderColor: function() {\n        if ((this.options.border || {}).color) {\n            return this.options.border.color;\n        }\n\n        if (this.color) {\n            return this.color;\n        }\n\n        return Candlestick.fn.getBorderColor.call(this);\n    }\n});\n\nsetDefaultOptions(BoxPlot, {\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    median: {\n        color: \"#f6f6f6\"\n    },\n    mean: {\n        width: 2,\n        dashType: \"dash\",\n        color: \"#f6f6f6\"\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{6:d}</th></tr>\" +\n                    \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Median:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" +\n                    \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" +\n                    \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" +\n                \"</table>\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    },\n    outliers: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: datavizConstants.CROSS,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    },\n    extremes: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    }\n});\n\ndeepExtend(BoxPlot.prototype, PointEventsMixin);\n\nvar VerticalBoxPlot = BoxPlot.extend({\n    reflowBoxSlot: function(box) {\n        this.boxSlot.y1 = box.y1;\n        this.boxSlot.y2 = box.y2;\n    },\n\n    reflowWhiskerSlot: function(box) {\n        this.whiskerSlot.y1 = box.y1;\n        this.whiskerSlot.y2 = box.y2;\n    },\n\n    calcMeanPoints: function(box, meanSlot) {\n        return [\n            [ [ meanSlot.x1, box.y1 ], [ meanSlot.x1, box.y2 ] ]\n        ];\n    },\n\n    calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().y;\n        return [ [\n            [ whiskerSlot.x1, mid - 5 ], [ whiskerSlot.x1, mid + 5 ],\n            [ whiskerSlot.x1, mid ], [ boxSlot.x1, mid ]\n        ], [\n            [ whiskerSlot.x2, mid - 5 ], [ whiskerSlot.x2, mid + 5 ],\n            [ whiskerSlot.x2, mid ], [ boxSlot.x2, mid ]\n        ] ];\n    },\n\n    calcMedianPoints: function(box, medianSlot) {\n        return [\n            [ [ medianSlot.x1, box.y1 ], [ medianSlot.x1, box.y2 ] ]\n        ];\n    }\n});\n\nvar BoxPlotChart = CandlestickChart.extend({\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var value = data.valueFields;\n        var valueParts = this.splitValue(value);\n        var hasValue = areNumbers(valueParts);\n        var dataItem = series.data[categoryIx];\n        var categoryPoints = this.categoryPoints[categoryIx];\n        var point;\n\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        if (hasValue) {\n            point = this.createPoint(data, fields);\n        }\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (point) {\n            this.updateRange(value, fields);\n\n            cluster.append(point);\n\n            point.categoryIx = categoryIx;\n            point.category = category;\n            point.series = series;\n            point.seriesIx = seriesIx;\n            point.owner = this;\n            point.dataItem = dataItem;\n        }\n\n        this.points.push(point);\n        categoryPoints.push(point);\n    },\n\n    pointType: function() {\n        if (this.options.invertAxes) {\n            return VerticalBoxPlot;\n        }\n\n        return BoxPlot;\n    },\n\n    splitValue: function(value) {\n        return [\n            value.lower, value.q1, value.median,\n            value.q3, value.upper\n        ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var axisRange = this.valueAxisRanges[axisName];\n        var parts = this.splitValue(value).concat(this.filterOutliers(value.outliers));\n\n        if (defined(value.mean)) {\n            parts = parts.concat(value.mean);\n        }\n\n        axisRange = this.valueAxisRanges[axisName] =\n            axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n        axisRange = this.valueAxisRanges[axisName] = {\n            min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n            max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n        };\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format,\n            value.lower, value.q1, value.median,\n            value.q3, value.upper, value.mean, point.category\n        );\n    },\n\n    filterOutliers: function(items) {\n        var length = (items || []).length;\n        var result = [];\n\n        for (var i = 0; i < length; i++) {\n            var item = items[i];\n            if (defined(item) && item !== null) {\n                result.push(item);\n            }\n        }\n\n        return result;\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\nvar ScatterErrorBar = ErrorBarBase.extend({\n    getAxis: function() {\n        var axes = this.chart.seriesAxes(this.series);\n        var axis = this.isVertical ? axes.y : axes.x;\n\n        return axis;\n    }\n});\n\nvar ScatterChart = ChartElement.extend({\n    init: function(plotArea, options) {\n\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this._initFields();\n\n        this.render();\n    },\n\n    _initFields: function() {\n        // X and Y axis ranges grouped by name, e.g.:\n        // primary: { min: 0, max: 1 }\n        this.xAxisRanges = {};\n        this.yAxisRanges = {};\n\n        this.points = [];\n        this.seriesPoints = [];\n        this.seriesOptions = [];\n        this._evalSeries = [];\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    addErrorBar: function(point, field, fields) {\n        var value = point.value[field];\n        var valueErrorField = field + \"Value\";\n        var lowField = field + \"ErrorLow\";\n        var highField = field + \"ErrorHigh\";\n        var seriesIx = fields.seriesIx;\n        var series = fields.series;\n        var errorBars = point.options.errorBars;\n        var lowValue = fields[lowField];\n        var highValue = fields[highField];\n\n        if (isNumber(value)) {\n            var errorRange;\n            if (isNumber(lowValue) && isNumber(highValue)) {\n                errorRange = { low: lowValue, high: highValue };\n            }\n\n            if (errorBars && defined(errorBars[valueErrorField])) {\n                this.seriesErrorRanges = this.seriesErrorRanges || { x: [], y: [] };\n                this.seriesErrorRanges[field][seriesIx] = this.seriesErrorRanges[field][seriesIx] ||\n                    new ErrorRangeCalculator(errorBars[valueErrorField], series, field);\n\n                errorRange = this.seriesErrorRanges[field][seriesIx].getErrorRange(value, errorBars[valueErrorField]);\n            }\n\n            if (errorRange) {\n                this.addPointErrorBar(errorRange, point, field);\n            }\n        }\n    },\n\n    addPointErrorBar: function(errorRange, point, field) {\n        var low = errorRange.low;\n        var high = errorRange.high;\n        var series = point.series;\n        var options = point.options.errorBars;\n        var isVertical = field === Y;\n        var item = {};\n\n        point[field + \"Low\"] = low;\n        point[field + \"High\"] = high;\n\n        point.errorBars = point.errorBars || [];\n        var errorBar = new ScatterErrorBar(low, high, isVertical, this, series, options);\n        point.errorBars.push(errorBar);\n        point.append(errorBar);\n\n        item[field] = low;\n        this.updateRange(item, series);\n        item[field] = high;\n        this.updateRange(item, series);\n    },\n\n    addValue: function(value, fields) {\n        var x = value.x;\n        var y = value.y;\n        var seriesIx = fields.seriesIx;\n        var series = this.options.series[seriesIx];\n        var missingValues = this.seriesMissingValues(series);\n        var seriesPoints = this.seriesPoints[seriesIx];\n\n        var pointValue = value;\n        if (!(hasValue(x) && hasValue(y))) {\n            pointValue = this.createMissingValue(pointValue, missingValues);\n        }\n\n        var point;\n        if (pointValue) {\n            point = this.createPoint(pointValue, fields);\n            if (point) {\n                $.extend(point, fields);\n                this.addErrorBar(point, X, fields);\n                this.addErrorBar(point, Y, fields);\n            }\n            this.updateRange(pointValue, fields.series);\n        }\n\n        this.points.push(point);\n        seriesPoints.push(point);\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues;\n    },\n\n    createMissingValue: function() {},\n\n    updateRange: function(value, series) {\n        var intlService = this.chartService.intl;\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var x = value.x;\n        var y = value.y;\n        var xAxisRange = this.xAxisRanges[xAxisName];\n        var yAxisRange = this.yAxisRanges[yAxisName];\n\n        if (hasValue(x)) {\n            xAxisRange = this.xAxisRanges[xAxisName] =\n                xAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            if (isString(x)) {\n                x = parseDate(intlService, x);\n            }\n\n            xAxisRange.min = Math.min(xAxisRange.min, x);\n            xAxisRange.max = Math.max(xAxisRange.max, x);\n        }\n\n        if (hasValue(y)) {\n            yAxisRange = this.yAxisRanges[yAxisName] =\n                yAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            if (isString(y)) {\n                y = parseDate(intlService, y);\n            }\n\n            yAxisRange.min = Math.min(yAxisRange.min, y);\n            yAxisRange.max = Math.max(yAxisRange.max, y);\n        }\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\",\n                \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                \"drilldownSeriesFactory\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, options);\n            evalOptions(pointOptions, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    pointType: function() {\n        return LinePoint;\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                markers: {\n                    opacity: series.opacity\n                },\n                tooltip: {\n                    format: this.options.tooltip.format\n                },\n                labels: {\n                    format: this.options.labels.format\n                }\n            }, series);\n        }\n\n        return options;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointOptions = this.pointOptions(series, fields.seriesIx);\n        var color = fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new LinePoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    seriesAxes: function(series) {\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var plotArea = this.plotArea;\n        var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n        var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return {\n            x: xAxis,\n            y: yAxis\n        };\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var chartPoints = this.points;\n        var limit = !this.options.clip;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (value, fields) {\n            var point = chartPoints[pointIx++];\n            var seriesAxes = this$1$1.seriesAxes(fields.series);\n            var slotX = seriesAxes.x.getSlot(value.x, value.x, limit);\n            var slotY = seriesAxes.y.getSlot(value.y, value.y, limit);\n\n            if (point) {\n                if (slotX && slotY) {\n                    var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.box = targetBox;\n    },\n\n    pointSlot: function(slotX, slotY) {\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n        var seriesPoints = ref.seriesPoints;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var currentSeriesPoints = seriesPoints[seriesIx];\n            if (!currentSeriesPoints) {\n                seriesPoints[seriesIx] = [];\n            }\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$1 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                var value = ref$1.valueFields;\n                var fields = ref$1.fields;\n\n                callback(value, deepExtend({\n                    pointIx: pointIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: currentSeries.data[pointIx],\n                    owner: this$1$1\n                }, fields));\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result;\n    }\n});\nsetDefaultOptions(ScatterChart, {\n    series: [],\n    tooltip: {\n        format: \"{0}, {1}\"\n    },\n    labels: {\n        format: \"{0}, {1}\"\n    },\n    clip: true\n});\ndeepExtend(ScatterChart.prototype, ClipAnimationMixin);\n\nvar Bubble = LinePoint.extend({\n    init: function(value, options) {\n        LinePoint.fn.init.call(this, value, options);\n\n        this.category = value.category;\n    },\n\n    createHighlight: function() {\n        var highlight = this.options.highlight;\n        var border = highlight.border;\n        var markers = this.options.markers;\n        var center = this.box.center();\n        var radius = (markers.size + markers.border.width + border.width) / 2;\n        var highlightGroup = new Group();\n        var shadow = new drawing.Circle(new geometry.Circle([ center.x, center.y + radius / 5 + border.width / 2 ], radius + border.width / 2), {\n            stroke: {\n                color: 'none'\n            },\n            fill: this.createGradient({\n                gradient: 'bubbleShadow',\n                color: markers.background,\n                stops: [ {\n                    offset: 0,\n                    color: markers.background,\n                    opacity: 0.3\n                }, {\n                    offset: 1,\n                    color: markers.background,\n                    opacity: 0\n                } ]\n            })\n        });\n        var overlay = new drawing.Circle(new geometry.Circle([ center.x, center.y ], radius), {\n            stroke: {\n                color: border.color ||\n                    new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex(),\n                width: border.width,\n                opacity: border.opacity\n            },\n            fill: {\n                color: markers.background,\n                opacity: highlight.opacity\n            }\n        });\n\n        highlightGroup.append(shadow, overlay);\n\n        return highlightGroup;\n    }\n});\n\nBubble.prototype.defaults = deepExtend({}, Bubble.prototype.defaults, {\n    labels: {\n        position: CENTER\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            color: \"#fff\",\n            width: 2,\n            opacity: 1\n        }\n    }\n});\n\nBubble.prototype.defaults.highlight.zIndex = undefined;\n\nvar BubbleChart = ScatterChart.extend({\n    _initFields: function() {\n        this._maxSize = MIN_VALUE;\n        ScatterChart.fn._initFields.call(this);\n    },\n\n    addValue: function(value, fields) {\n        if (value.size !== null && (value.size > 0 || (value.size < 0 && fields.series.negativeValues.visible))) {\n            this._maxSize = Math.max(this._maxSize, Math.abs(value.size));\n            ScatterChart.fn.addValue.call(this, value, fields);\n        } else {\n            this.points.push(null);\n            this.seriesPoints[fields.seriesIx].push(null);\n        }\n    },\n\n    reflow: function(box) {\n        this.updateBubblesSize(box);\n        ScatterChart.fn.reflow.call(this, box);\n    },\n\n    pointType: function() {\n        return Bubble;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointsCount = series.data.length;\n        var delay = fields.pointIx * (INITIAL_ANIMATION_DURATION / pointsCount);\n        var animationOptions = {\n            delay: delay,\n            duration: INITIAL_ANIMATION_DURATION - delay,\n            type: BUBBLE\n        };\n\n        var color = fields.color || series.color;\n        if (value.size < 0 && series.negativeValues.visible) {\n            color = valueOrDefault(\n                series.negativeValues.color, color\n            );\n        }\n\n        var pointOptions = deepExtend({\n            labels: {\n                animation: {\n                    delay: delay,\n                    duration: INITIAL_ANIMATION_DURATION - delay\n                }\n            }\n        }, this.pointOptions(series, fields.seriesIx), {\n            markers: {\n                type: CIRCLE,\n                border: series.border,\n                opacity: series.opacity,\n                animation: animationOptions\n            }\n        });\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        pointOptions.markers.background = color;\n\n        var point = new Bubble(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    updateBubblesSize: function(box) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n        var boxSize = Math.min(box.width(), box.height());\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesPoints = this$1$1.seriesPoints[seriesIx];\n            var minSize = currentSeries.minSize || Math.max(boxSize * 0.02, 10);\n            var maxSize = currentSeries.maxSize || boxSize * 0.2;\n            var minR = minSize / 2;\n            var maxR = maxSize / 2;\n            var minArea = Math.PI * minR * minR;\n            var maxArea = Math.PI * maxR * maxR;\n            var areaRange = maxArea - minArea;\n            var areaRatio = areaRange / this$1$1._maxSize;\n\n            for (var pointIx = 0; pointIx < seriesPoints.length; pointIx++) {\n                var point = seriesPoints[pointIx];\n                if (point) {\n                    var area = Math.abs(point.value.size) * areaRatio;\n                    var radius = Math.sqrt((minArea + area) / Math.PI);\n                    var baseZIndex = valueOrDefault(point.options.zIndex, 0);\n                    var zIndex = baseZIndex + (1 - radius / maxR);\n\n                    deepExtend(point.options, {\n                        zIndex: zIndex,\n                        markers: {\n                            size: radius * 2,\n                            zIndex: zIndex\n                        },\n                        labels: {\n                            zIndex: zIndex + 1\n                        }\n                    });\n                }\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y, value.size, point.category);\n    },\n\n    createAnimation: function() {},\n\n    createVisual: function() {}\n});\n\nsetDefaultOptions(BubbleChart, {\n    tooltip: {\n        format: \"{3}\"\n    },\n    labels: {\n        format: \"{3}\"\n    }\n});\n\nvar Target = ShapeElement.extend({\n\n});\n\ndeepExtend(Target.prototype, PointEventsMixin);\n\nvar Bullet = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.aboveAxis = this.options.aboveAxis;\n        this.color = options.color || WHITE;\n        this.value = value;\n    },\n\n    render: function() {\n        var options = this.options;\n\n        if (!this._rendered) {\n            this._rendered = true;\n\n            if (defined(this.value.target)) {\n                this.target = new Target({\n                    type: options.target.shape,\n                    background: options.target.color || this.color,\n                    opacity: options.opacity,\n                    zIndex: options.zIndex,\n                    border: options.target.border,\n                    vAlign: TOP,\n                    align: RIGHT\n                });\n\n                this.target.value = this.value;\n                this.target.dataItem = this.dataItem;\n                this.target.series = this.series;\n\n                this.append(this.target);\n            }\n\n            this.createLabel();\n            this.createNote();\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            this.label = new BarLabel(labelText, labels, pointData);\n            this.append(this.label);\n        }\n    },\n\n    reflow: function(box) {\n        this.render();\n\n        var ref = this;\n        var options = ref.options;\n        var target = ref.target;\n        var chart = ref.owner;\n        var invertAxes = options.invertAxes;\n        var valueAxis = chart.seriesValueAxis(this.options);\n        var categorySlot = chart.categorySlot(chart.categoryAxis, options.categoryIx, valueAxis);\n        var targetValueSlot = valueAxis.getSlot(this.value.target);\n        var targetSlotX = invertAxes ? targetValueSlot : categorySlot;\n        var targetSlotY = invertAxes ? categorySlot : targetValueSlot;\n\n        if (target) {\n            var targetSlot = new Box(\n                targetSlotX.x1, targetSlotY.y1,\n                targetSlotX.x2, targetSlotY.y2\n            );\n            target.options.height = invertAxes ? targetSlot.height() : options.target.line.width;\n            target.options.width = invertAxes ? options.target.line.width : targetSlot.width();\n            target.reflow(targetSlot);\n        }\n\n        var label = this.label;\n        if (label) {\n            label.options.aboveAxis = this.aboveAxis;\n            label.reflow(box);\n        }\n\n        if (this.note) {\n            this.note.reflow(box);\n        }\n\n        this.box = box;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        var body = Path.fromRect(this.box.toRect(), {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: null\n        });\n\n        if (options.border.width > 0) {\n            body.options.set(\"stroke\", {\n                color: options.border.color || this.color,\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: valueOrDefault(options.border.opacity, options.opacity)\n            });\n        }\n\n        this.bodyVisual = body;\n\n        alignPathToPixel(body);\n        this.visual.append(body);\n    },\n\n    createAnimation: function() {\n        if (this.bodyVisual) {\n            this.animation = Animation.create(\n                this.bodyVisual, this.options.animation\n            );\n        }\n    },\n\n    createHighlight: function(style) {\n        return Path.fromRect(this.box.toRect(), style);\n    },\n\n    highlightVisual: function() {\n        return this.bodyVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            rect: this.box.toRect(),\n            visual: this.bodyVisual,\n            options: this.options\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            series: this.series\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    }\n});\n\nBullet.prototype.tooltipAnchor = Bar.prototype.tooltipAnchor;\n\nsetDefaultOptions(Bullet, {\n    border: {\n        width: 1\n    },\n    vertical: false,\n    opacity: 1,\n    target: {\n        shape: \"\",\n        border: {\n            width: 0,\n            color: \"green\"\n        },\n        line: {\n            width: 2\n        }\n    },\n    labels: {\n        visible: false\n    },\n    tooltip: {\n        format: \"Current: {0}<br />Target: {1}\"\n    },\n    notes: {\n        label: {}\n    }\n});\n\ndeepExtend(Bullet.prototype, PointEventsMixin);\ndeepExtend(Bullet.prototype, NoteMixin);\n\nvar BulletChart = CategoricalChart.extend({\n    init: function(plotArea, options) {\n\n        wrapData(options);\n\n        CategoricalChart.fn.init.call(this, plotArea, options);\n    },\n\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    plotRange: function(point) {\n        var series = point.series;\n        var valueAxis = this.seriesValueAxis(series);\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n        return [ axisCrossingValue, point.value.current || axisCrossingValue ];\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var value = data.valueFields;\n\n        var bulletOptions = deepExtend({\n            vertical: !options.invertAxes,\n            overlay: series.overlay,\n            categoryIx: categoryIx,\n            invertAxes: options.invertAxes\n        }, series);\n\n        var color = data.fields.color || series.color;\n        bulletOptions = this.evalPointOptions(bulletOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = bulletOptions.color;\n        }\n\n        var bullet = new Bullet(value, bulletOptions);\n        bullet.color = color;\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        cluster.append(bullet);\n\n        return bullet;\n    },\n\n    updateRange: function(value, fields) {\n        var current = value.current;\n        var target = value.target;\n        var axisName = fields.series.axis;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (defined(current) && !isNaN(current) && defined(target && !isNaN(target))) {\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, current, target);\n            axisRange.max = Math.max(axisRange.max, current, target);\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format, point.value.current, point.value.target);\n    },\n\n    pointValue: function(data) {\n        return data.valueFields.current;\n    },\n\n    aboveAxis: function(point) {\n        var value = point.value.current;\n\n        return value > 0;\n    },\n\n    createAnimation: function() {\n        var this$1$1 = this;\n\n        var points = this.points;\n\n        this._setAnimationOptions();\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            point.options.animation = this$1$1.options.animation;\n            point.createAnimation();\n        }\n    }\n});\n\nBulletChart.prototype._setAnimationOptions = BarChart.prototype._setAnimationOptions;\n\nsetDefaultOptions(BulletChart, {\n    animation: {\n        type: BAR\n    }\n});\n\nfunction wrapData(options) {\n    var series = options.series;\n\n    for (var i = 0; i < series.length; i++) {\n        var seriesItem = series[i];\n        var data = seriesItem.data;\n        if (data && !isArray(data[0]) && !isObject(data[0])) {\n            seriesItem.data = [ data ];\n        }\n    }\n}\n\nvar BaseTooltip = Class.extend({\n    init: function(chartService, options) {\n\n        this.chartService = chartService;\n        this.options = deepExtend({}, this.options, options);\n    },\n\n    getStyle: function(options, point) {\n        var background = options.background;\n        var border = options.border.color;\n\n        if (point) {\n            var pointColor = point.color || point.options.color;\n            background = valueOrDefault(background, pointColor);\n            border = valueOrDefault(border, pointColor);\n        }\n\n        var padding = getSpacing(options.padding || {}, \"auto\");\n\n        return {\n            backgroundColor: background,\n            borderColor: border,\n            font: options.font,\n            color: options.color,\n            opacity: options.opacity,\n            borderWidth: styleValue(options.border.width),\n            paddingTop: styleValue(padding.top),\n            paddingBottom: styleValue(padding.bottom),\n            paddingLeft: styleValue(padding.left),\n            paddingRight: styleValue(padding.right)\n        };\n    },\n\n    show: function(options, tooltipOptions, point) {\n        options.format = tooltipOptions.format;\n\n        var style = this.getStyle(tooltipOptions, point);\n        options.style = style;\n\n        var background = new Color(style.backgroundColor);\n        if (!defined(tooltipOptions.color) && !background.isDark()) {\n            options.className = \"k-chart-tooltip-inverse\";\n        }\n\n        this.chartService.notify(SHOW_TOOLTIP, options);\n\n        this.visible = true;\n    },\n\n    hide: function() {\n        if (this.chartService) {\n            this.chartService.notify(HIDE_TOOLTIP);\n        }\n\n        this.visible = false;\n    },\n\n    destroy: function() {\n        delete this.chartService;\n    }\n});\n\nsetDefaultOptions(BaseTooltip, {\n    border: {\n        width: 1\n    },\n    opacity: 1\n});\n\nvar CrosshairTooltip = BaseTooltip.extend({\n    init: function(chartService, crosshair, options) {\n        BaseTooltip.fn.init.call(this, chartService, options);\n\n        this.crosshair = crosshair;\n        this.formatService = chartService.format;\n        this.initAxisName();\n    },\n\n    initAxisName: function() {\n        var axis = this.crosshair.axis;\n        var plotArea = axis.plotArea;\n        var name;\n        if (plotArea.categoryAxis) {\n            name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n        } else {\n            name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n        }\n        this.axisName = name;\n    },\n\n    showAt: function(point) {\n        var ref = this;\n        var axis = ref.crosshair.axis;\n        var options = ref.options;\n        var value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n        var formattedValue = value;\n\n        if (options.format) {\n            formattedValue = this.formatService.auto(options.format, value);\n        } else if (axis.options.type === DATE) {\n            formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n        }\n\n        this.show({\n            point: point,\n            anchor: this.getAnchor(),\n            crosshair: this.crosshair,\n            value: formattedValue,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        }, this.options);\n    },\n\n    hide: function() {\n        this.chartService.notify(HIDE_TOOLTIP, {\n            crosshair: this.crosshair,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        });\n    },\n\n    getAnchor: function() {\n        var ref = this;\n        var crosshair = ref.crosshair;\n        var ref_options = ref.options;\n        var position = ref_options.position;\n        var padding = ref_options.padding;\n        var vertical = !crosshair.axis.options.vertical;\n        var lineBox = crosshair.line.bbox();\n        var horizontalAlign, verticalAlign, point;\n\n        if (vertical) {\n            horizontalAlign = CENTER;\n            if (position === BOTTOM) {\n                verticalAlign = TOP;\n                point = lineBox.bottomLeft().translate(0, padding);\n            } else {\n                verticalAlign = BOTTOM;\n                point = lineBox.topLeft().translate(0, -padding);\n            }\n        } else {\n            verticalAlign = CENTER;\n            if (position === LEFT) {\n                horizontalAlign = RIGHT;\n                point = lineBox.topLeft().translate(-padding, 0);\n            } else {\n                horizontalAlign = LEFT;\n                point = lineBox.topRight().translate(padding, 0);\n            }\n        }\n\n        return {\n            point: point,\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    }\n});\n\nsetDefaultOptions(CrosshairTooltip, {\n    padding: 10\n});\n\nvar Crosshair = ChartElement.extend({\n    init: function(chartService, axis, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.axis = axis;\n        this.stickyMode = axis instanceof CategoryAxis;\n\n        var tooltipOptions = this.options.tooltip;\n\n        if (tooltipOptions.visible) {\n            this.tooltip = new CrosshairTooltip(chartService, this,\n                deepExtend({}, tooltipOptions, { stickyMode: this.stickyMode })\n            );\n        }\n    },\n\n    showAt: function(point) {\n        this.point = point;\n        this.moveLine();\n        this.line.visible(true);\n\n        if (this.tooltip) {\n            this.tooltip.showAt(point);\n        }\n    },\n\n    hide: function() {\n        this.line.visible(false);\n\n        if (this.tooltip) {\n            this.tooltip.hide();\n        }\n    },\n\n    moveLine: function() {\n        var ref = this;\n        var axis = ref.axis;\n        var point = ref.point;\n        var vertical = axis.options.vertical;\n        var box = this.getBox();\n        var dim = vertical ? Y : X;\n        var lineStart = new GeometryPoint(box.x1, box.y1);\n        var lineEnd;\n\n        if (vertical) {\n            lineEnd = new GeometryPoint(box.x2, box.y1);\n        } else {\n            lineEnd = new GeometryPoint(box.x1, box.y2);\n        }\n\n        if (point) {\n            if (this.stickyMode) {\n                var slot = axis.getSlot(axis.pointCategoryIndex(point));\n                lineStart[dim] = lineEnd[dim] = slot.center()[dim];\n            } else {\n                lineStart[dim] = lineEnd[dim] = point[dim];\n            }\n        }\n\n        this.box = box;\n\n        this.line.moveTo(lineStart).lineTo(lineEnd);\n    },\n\n    getBox: function() {\n        var axis = this.axis;\n        var axes = axis.pane.axes;\n        var length = axes.length;\n        var vertical = axis.options.vertical;\n        var box = axis.lineBox().clone();\n        var dim = vertical ? X : Y;\n        var axisLineBox;\n\n        for (var i = 0; i < length; i++) {\n            var currentAxis = axes[i];\n            if (currentAxis.options.vertical !== vertical) {\n                if (!axisLineBox) {\n                    axisLineBox = currentAxis.lineBox().clone();\n                } else {\n                    axisLineBox.wrap(currentAxis.lineBox());\n                }\n            }\n        }\n\n        box[dim + 1] = axisLineBox[dim + 1];\n        box[dim + 2] = axisLineBox[dim + 2];\n\n        return box;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        this.line = new Path({\n            stroke: {\n                color: options.color,\n                width: options.width,\n                opacity: options.opacity,\n                dashType: options.dashType\n            },\n            visible: false\n        });\n\n        this.moveLine();\n        this.visual.append(this.line);\n    },\n\n    destroy: function() {\n        if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n\n        ChartElement.fn.destroy.call(this);\n    }\n});\n\nsetDefaultOptions(Crosshair, {\n    color: BLACK,\n    width: 2,\n    zIndex: -1,\n    tooltip: {\n        visible: false\n    }\n});\n\nvar ChartContainer = ChartElement.extend({\n    init: function(options, pane) {\n        ChartElement.fn.init.call(this, options);\n        this.pane = pane;\n    },\n\n    shouldClip: function() {\n        var children = this.children;\n        var length = children.length;\n\n        for (var i = 0; i < length; i++) {\n            if (children[i].options.clip === true) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _clipBox: function() {\n        return this.pane.chartsBox();\n    },\n\n    createVisual: function() {\n        this.visual = new Group({\n            zIndex: 0\n        });\n\n        if (this.shouldClip()) {\n            var clipBox = this.clipBox = this._clipBox();\n            var clipRect = clipBox.toRect();\n            var clipPath = Path.fromRect(clipRect);\n            alignPathToPixel(clipPath);\n\n            this.visual.clip(clipPath);\n            this.unclipLabels();\n        }\n    },\n\n    stackRoot: function() {\n        return this;\n    },\n\n    unclipLabels: function() {\n        var ref = this;\n        var charts = ref.children;\n        var clipBox = ref.clipBox;\n\n        for (var i = 0; i < charts.length; i++) {\n            var points = charts[i].points || {};\n            var length = points.length;\n\n            for (var j = 0; j < length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && point.overlapsBox && point.overlapsBox(clipBox)) {\n                    if (point.unclipElements) {\n                        point.unclipElements();\n                    } else {\n                        var label = point.label;\n                        var note = point.note;\n\n                        if (label && label.options.visible) {\n                            if (label.alignToClipBox) {\n                                label.alignToClipBox(clipBox);\n                            }\n                            label.options.noclip = true;\n                        }\n\n                        if (note && note.options.visible) {\n                            note.options.noclip = true;\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    destroy: function() {\n        ChartElement.fn.destroy.call(this);\n\n        delete this.parent;\n    }\n});\n\nChartContainer.prototype.isStackRoot = true;\n\nvar Pane = BoxElement.extend({\n    init: function(options) {\n        BoxElement.fn.init.call(this, options);\n\n        this.id = paneID();\n\n        this.createTitle();\n\n        this.content = new ChartElement();\n\n        this.chartContainer = new ChartContainer({}, this);\n        this.append(this.content);\n\n        this.axes = [];\n        this.charts = [];\n    },\n\n    createTitle: function() {\n        var titleOptions = this.options.title;\n        if (isObject(titleOptions)) {\n            titleOptions = deepExtend({}, titleOptions, {\n                align: titleOptions.position,\n                position: TOP\n            });\n        }\n\n        this.title = Title.buildTitle(titleOptions, Pane.prototype.options.title);\n        if (this.title) {\n            this.append(this.title);\n        }\n    },\n\n    appendAxis: function(axis) {\n        this.content.append(axis);\n        this.axes.push(axis);\n        axis.pane = this;\n    },\n\n    appendAxisAt: function(axis, pos) {\n        this.content.append(axis);\n        this.axes.splice(pos, 0, axis);\n        axis.pane = this;\n    },\n\n    appendChart: function(chart) {\n        if (this.chartContainer.parent !== this.content) {\n            this.content.append(this.chartContainer);\n        }\n\n        this.charts.push(chart);\n        this.chartContainer.append(chart);\n        chart.pane = this;\n    },\n\n    empty: function() {\n        var this$1$1 = this;\n\n        var plotArea = this.parent;\n\n        if (plotArea) {\n            for (var i = 0; i < this.axes.length; i++) {\n                plotArea.removeAxis(this$1$1.axes[i]);\n            }\n\n            for (var i$1 = 0; i$1 < this.charts.length; i$1++) {\n                plotArea.removeChart(this$1$1.charts[i$1]);\n            }\n        }\n\n        this.axes = [];\n        this.charts = [];\n\n        this.content.destroy();\n        this.content.children = [];\n        this.chartContainer.children = [];\n    },\n\n    reflow: function(targetBox) {\n        // Content (such as charts) is rendered, but excluded from reflows\n        var content;\n        if (last(this.children) === this.content) {\n            content = this.children.pop();\n        }\n\n        BoxElement.fn.reflow.call(this, targetBox);\n\n        if (content) {\n            this.children.push(content);\n        }\n\n        if (this.title) {\n            this.contentBox.y1 += this.title.box.height();\n        }\n    },\n\n    visualStyle: function() {\n        var style = BoxElement.fn.visualStyle.call(this);\n        style.zIndex = -10;\n\n        return style;\n    },\n\n    renderComplete: function() {\n        if (this.options.visible) {\n            this.createGridLines();\n        }\n    },\n\n    stackRoot: function() {\n        return this;\n    },\n\n    clipRoot: function() {\n        return this;\n    },\n\n    createGridLines: function() {\n        var axes = this.axes;\n        var allAxes = axes.concat(this.parent.axes);\n        var vGridLines = [];\n        var hGridLines = [];\n\n        // TODO\n        // Is full combination really necessary?\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var vertical = axis.options.vertical;\n            var gridLines = vertical ? vGridLines : hGridLines;\n            for (var j = 0; j < allAxes.length; j++) {\n                if (gridLines.length === 0) {\n                    var altAxis = allAxes[j];\n                    if (vertical !== altAxis.options.vertical) {\n                        append(gridLines, axis.createGridLines(altAxis));\n                    }\n                }\n            }\n        }\n    },\n\n    refresh: function() {\n        this.visual.clear();\n\n        this.content.parent = null;\n        this.content.createGradient = this.createGradient.bind(this);\n        this.content.renderVisual();\n        this.content.parent = this;\n\n        if (this.title) {\n            this.visual.append(this.title.visual);\n        }\n\n        this.visual.append(this.content.visual);\n\n        this.renderComplete();\n        this.notifyRender();\n    },\n\n    chartsBox: function() {\n        var axes = this.axes;\n        var length = axes.length;\n        var chartsBox = new Box();\n\n        for (var idx = 0; idx < length; idx++) {\n            var axis = axes[idx];\n            var axisValueField = axis.options.vertical ? Y : X;\n            var lineBox = axis.lineBox();\n            chartsBox[axisValueField + 1] = lineBox[axisValueField + 1];\n            chartsBox[axisValueField + 2] = lineBox[axisValueField + 2];\n        }\n\n        if (chartsBox.x2 === 0) {\n            var allAxes = this.parent.axes;\n            var length$1 = allAxes.length;\n\n            for (var idx$1 = 0; idx$1 < length$1; idx$1++) {\n                var axis$1 = allAxes[idx$1];\n                if (!axis$1.options.vertical) {\n                    var lineBox$1 = axis$1.lineBox();\n                    chartsBox.x1 = lineBox$1.x1;\n                    chartsBox.x2 = lineBox$1.x2;\n                }\n            }\n        }\n        return chartsBox;\n    },\n\n    clipBox: function() {\n        return this.chartContainer.clipBox;\n    },\n\n    notifyRender: function() {\n        var service = this.getService();\n        if (service) {\n            service.notify(PANE_RENDER, {\n                pane: new ChartPane(this),\n                index: this.paneIndex,\n                name: this.options.name\n            });\n        }\n    }\n});\n\nvar ID = 1;\n\nfunction paneID() {\n    return \"pane\" + ID++;\n}\n\nPane.prototype.isStackRoot = true;\n\nsetDefaultOptions(Pane, {\n    zIndex: -1,\n    shrinkToFit: true,\n    title: {\n        align: LEFT\n    },\n    visible: true\n});\n\nvar PlotAreaBase = ChartElement.extend({\n    init: function(series, options, chartService) {\n        ChartElement.fn.init.call(this, options);\n\n        this.initFields(series, options);\n        this.series = series;\n        this.initSeries();\n        this.charts = [];\n        this.options.legend = this.options.legend || {};\n        this.options.legend.items = [];\n        this.axes = [];\n        this.crosshairs = [];\n        this.chartService = chartService;\n        this.originalOptions = options;\n        this.originalSeries = series;\n        this._bindCache = new WeakMap();\n\n        this.createPanes();\n        this.render();\n        this.createCrosshairs();\n    },\n\n    initFields: function() { },\n\n    initSeries: function() {\n        var series = this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            series[i].index = i;\n        }\n    },\n\n    bindPoint: function(series, pointIx, item) {\n        var cached = this._bindCache.get(series);\n        if (!cached) {\n            cached = [];\n            this._bindCache.set(series, cached);\n        }\n\n        var data = cached[pointIx];\n        if (!data) {\n            data = cached[pointIx] = SeriesBinder.current.bindPoint(series, pointIx, item);\n        }\n\n        return data;\n    },\n\n    createPanes: function() {\n        var this$1$1 = this;\n\n        var titleOptions = this.options.title || {};\n        var paneDefaults = this.options.paneDefaults;\n        var paneOptions = this.options.panes || [];\n        var panesLength = Math.max(paneOptions.length, 1);\n        var panes = [];\n\n        var defaults = deepExtend({\n            title: {\n                color: titleOptions.color\n            }\n        }, paneDefaults);\n\n        for (var i = 0; i < panesLength; i++) {\n            var options = deepExtend({}, defaults, paneOptions[i]);\n            if (isString(options.title)) {\n                options.title = deepExtend({ text: options.title }, defaults.title);\n            }\n\n            var currentPane = new Pane(options);\n            currentPane.paneIndex = i;\n\n            panes.push(currentPane);\n            this$1$1.append(currentPane);\n        }\n\n        this.panes = panes;\n    },\n\n    crosshairOptions: function(axis) {\n        return axis.options.crosshair;\n    },\n\n    createCrosshairs: function(panes) {\n        var this$1$1 = this;\n        if (panes === void 0) { panes = this.panes; }\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            for (var j = 0; j < pane.axes.length; j++) {\n                var axis = pane.axes[j];\n                var options = this$1$1.crosshairOptions(axis);\n                if (options && options.visible) {\n                    var currentCrosshair = new Crosshair(this$1$1.chartService, axis, options);\n\n                    this$1$1.crosshairs.push(currentCrosshair);\n                    pane.content.append(currentCrosshair);\n                }\n            }\n        }\n    },\n\n    removeCrosshairs: function(pane) {\n        var crosshairs = this.crosshairs;\n        var axes = pane.axes;\n\n        for (var i = crosshairs.length - 1; i >= 0; i--) {\n            for (var j = 0; j < axes.length; j++) {\n                if (crosshairs[i].axis === axes[j]) {\n                    crosshairs.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    },\n\n    hideCrosshairs: function() {\n        var crosshairs = this.crosshairs;\n        for (var idx = 0; idx < crosshairs.length; idx++) {\n            crosshairs[idx].hide();\n        }\n    },\n\n    findPane: function(name) {\n        var panes = this.panes;\n        var matchingPane;\n\n        for (var i = 0; i < panes.length; i++) {\n            if (panes[i].options.name === name) {\n                matchingPane = panes[i];\n                break;\n            }\n        }\n\n        return matchingPane || panes[0];\n    },\n\n    findPointPane: function(point) {\n        var panes = this.panes;\n        var matchingPane;\n\n        for (var i = 0; i < panes.length; i++) {\n            if (panes[i].box.containsPoint(point)) {\n                matchingPane = panes[i];\n                break;\n            }\n        }\n\n        return matchingPane;\n    },\n\n    appendAxis: function(axis) {\n        var pane = this.findPane(axis.options.pane);\n\n        pane.appendAxis(axis);\n        this.axes.push(axis);\n        axis.plotArea = this;\n    },\n\n    removeAxis: function(axisToRemove) {\n        var this$1$1 = this;\n\n        var filteredAxes = [];\n\n        for (var i = 0; i < this.axes.length; i++) {\n            var axis = this$1$1.axes[i];\n            if (axisToRemove !== axis) {\n                filteredAxes.push(axis);\n            } else {\n                axis.destroy();\n            }\n        }\n\n        this.axes = filteredAxes;\n    },\n\n    appendChart: function(chart, pane) {\n        this.charts.push(chart);\n        if (pane) {\n            pane.appendChart(chart);\n        } else {\n            this.append(chart);\n        }\n    },\n\n    removeChart: function(chartToRemove) {\n        var this$1$1 = this;\n\n        var filteredCharts = [];\n\n        for (var i = 0; i < this.charts.length; i++) {\n            var chart = this$1$1.charts[i];\n            if (chart !== chartToRemove) {\n                filteredCharts.push(chart);\n            } else {\n                chart.destroy();\n            }\n        }\n\n        this.charts = filteredCharts;\n    },\n\n    addToLegend: function(series) {\n        var count = series.length;\n        var legend = this.options.legend;\n        var labels = legend.labels || {};\n        var inactiveItems = legend.inactiveItems || {};\n        var inactiveItemsLabels = inactiveItems.labels || {};\n        var data = [];\n\n        for (var i = 0; i < count; i++) {\n            var currentSeries = series[i];\n            var seriesVisible = currentSeries.visible !== false;\n            if (currentSeries.visibleInLegend === false) {\n                continue;\n            }\n\n            var text = currentSeries.name;\n            var labelTemplate = seriesVisible ? getTemplate(labels) : getTemplate(inactiveItemsLabels) || getTemplate(labels);\n            if (labelTemplate) {\n                text = labelTemplate({\n                    text: hasValue(text) ? text : \"\",\n                    series: currentSeries\n                });\n            }\n\n            var defaults = currentSeries._defaults;\n            var color = currentSeries.color;\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            var itemLabelOptions = (void 0), markerColor = (void 0);\n            if (seriesVisible) {\n                itemLabelOptions = {};\n                markerColor = color;\n            } else {\n                itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                };\n                markerColor = inactiveItems.markers.color;\n            }\n\n            if (hasValue(text) && text !== \"\") {\n                data.push({\n                    text: text,\n                    labels: itemLabelOptions,\n                    markerColor: markerColor,\n                    series: currentSeries,\n                    active: seriesVisible\n                });\n            }\n        }\n\n        append(legend.items, data);\n    },\n\n    groupAxes: function(panes) {\n        var xAxes = [];\n        var yAxes = [];\n\n        for (var paneIx = 0; paneIx < panes.length; paneIx++) {\n            var paneAxes = panes[paneIx].axes;\n            for (var axisIx = 0; axisIx < paneAxes.length; axisIx++) {\n                var axis = paneAxes[axisIx];\n                if (axis.options.vertical) {\n                    yAxes.push(axis);\n                } else {\n                    xAxes.push(axis);\n                }\n            }\n        }\n\n        return { x: xAxes, y: yAxes, any: xAxes.concat(yAxes) };\n    },\n\n    groupSeriesByPane: function() {\n        var this$1$1 = this;\n\n        var series = this.series;\n        var seriesByPane = {};\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var pane = this$1$1.seriesPaneName(currentSeries);\n\n            if (seriesByPane[pane]) {\n                seriesByPane[pane].push(currentSeries);\n            } else {\n                seriesByPane[pane] = [ currentSeries ];\n            }\n        }\n\n        return seriesByPane;\n    },\n\n    filterVisibleSeries: function(series) {\n        var result = [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            if (currentSeries.visible !== false) {\n                result.push(currentSeries);\n            }\n        }\n\n        return result;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options.plotArea;\n        var panes = this.panes;\n        var margin = getSpacing(options.margin);\n\n        this.box = targetBox.clone().unpad(margin);\n        this.reflowPanes();\n\n        this.detachLabels();\n        this.reflowAxes(panes);\n        this.reflowCharts(panes);\n    },\n\n    redraw: function(panes) {\n        var this$1$1 = this;\n\n        var panesArray = [].concat(panes);\n        this.initSeries();\n\n        //prevents leak during partial redraws. the cached gradients observers retain reference to the destroyed elements.\n        var root = this.getRoot();\n        if (root) {\n            root.cleanGradients();\n        }\n\n        for (var i = 0; i < panesArray.length; i++) {\n            this$1$1.removeCrosshairs(panesArray[i]);\n            panesArray[i].empty();\n        }\n\n        this._bindCache = new WeakMap();\n\n        this.render(panesArray);\n        this.detachLabels();\n        this.reflowAxes(this.panes);\n        this.reflowCharts(panesArray);\n\n        this.createCrosshairs(panesArray);\n\n        for (var i$1 = 0; i$1 < panesArray.length; i$1++) {\n            panesArray[i$1].refresh();\n        }\n    },\n\n    axisCrossingValues: function(axis, crossingAxes) {\n        var options = axis.options;\n        var crossingValues = [].concat(\n            options.axisCrossingValues || options.axisCrossingValue\n        );\n        var valuesToAdd = crossingAxes.length - crossingValues.length;\n        var defaultValue = crossingValues[0] || 0;\n\n        for (var i = 0; i < valuesToAdd; i++) {\n            crossingValues.push(defaultValue);\n        }\n\n        return crossingValues;\n    },\n\n    alignAxisTo: function(axis, targetAxis, crossingValue, targetCrossingValue) {\n        var slot = axis.getSlot(crossingValue, crossingValue, true);\n        var slotEdge = axis.options.reverse ? 2 : 1;\n        var targetSlot = targetAxis.getSlot(targetCrossingValue, targetCrossingValue, true);\n        var targetEdge = targetAxis.options.reverse ? 2 : 1;\n        var axisBox = axis.box.translate(\n            targetSlot[X + targetEdge] - slot[X + slotEdge],\n            targetSlot[Y + targetEdge] - slot[Y + slotEdge]\n        );\n\n        if (axis.pane !== targetAxis.pane) {\n            axisBox.translate(0, axis.pane.box.y1 - targetAxis.pane.box.y1);\n        }\n\n        axis.reflow(axisBox);\n    },\n\n    alignAxes: function(xAxes, yAxes) {\n        var this$1$1 = this;\n\n        var xAnchor = xAxes[0];\n        var yAnchor = yAxes[0];\n        var xAnchorCrossings = this.axisCrossingValues(xAnchor, yAxes);\n        var yAnchorCrossings = this.axisCrossingValues(yAnchor, xAxes);\n        var leftAnchors = {};\n        var rightAnchors = {};\n        var topAnchors = {};\n        var bottomAnchors = {};\n\n        for (var i = 0; i < yAxes.length; i++) {\n            var axis = yAxes[i];\n            var pane = axis.pane;\n            var paneId = pane.id;\n            var visible = axis.options.visible !== false;\n\n            // Locate pane anchor, if any, and use its axisCrossingValues\n            var anchor = paneAnchor(xAxes, pane) || xAnchor;\n            var anchorCrossings = xAnchorCrossings;\n\n            if (anchor !== xAnchor) {\n                anchorCrossings = this$1$1.axisCrossingValues(anchor, yAxes);\n            }\n\n            this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n            if (axis.options._overlap) {\n                continue;\n            }\n\n            if (round(axis.lineBox().x1) === round(anchor.lineBox().x1)) {\n                // Push the axis to the left the previous y-axis so they don't overlap\n                if (leftAnchors[paneId]) {\n                    axis.reflow(axis.box\n                        .alignTo(leftAnchors[paneId].box, LEFT)\n                        .translate(-axis.options.margin, 0)\n                    );\n                }\n\n                if (visible) {\n                    leftAnchors[paneId] = axis;\n                }\n            }\n\n            if (round(axis.lineBox().x2) === round(anchor.lineBox().x2)) {\n                // Flip the labels on the right if we're at the right end of the pane\n                if (!axis._mirrored) {\n                    axis.options.labels.mirror = !axis.options.labels.mirror;\n                    axis._mirrored = true;\n                }\n\n                this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                // Push the axis to the right the previous y-axis so they don't overlap\n                if (rightAnchors[paneId]) {\n                    axis.reflow(axis.box\n                        .alignTo(rightAnchors[paneId].box, RIGHT)\n                        .translate(axis.options.margin, 0)\n                    );\n                }\n\n                if (visible) {\n                    rightAnchors[paneId] = axis;\n                }\n            }\n\n            if (i !== 0 && yAnchor.pane === axis.pane) {\n                axis.alignTo(yAnchor);\n                axis.reflow(axis.box);\n            }\n        }\n\n        for (var i$1 = 0; i$1 < xAxes.length; i$1++) {\n            var axis$1 = xAxes[i$1];\n            var pane$1 = axis$1.pane;\n            var paneId$1 = pane$1.id;\n            var visible$1 = axis$1.options.visible !== false;\n\n            // Locate pane anchor and use its axisCrossingValues\n            var anchor$1 = paneAnchor(yAxes, pane$1) || yAnchor;\n            var anchorCrossings$1 = yAnchorCrossings;\n            if (anchor$1 !== yAnchor) {\n                anchorCrossings$1 = this$1$1.axisCrossingValues(anchor$1, xAxes);\n            }\n\n            this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n            if (axis$1.options._overlap) {\n                continue;\n            }\n\n            if (round(axis$1.lineBox().y1) === round(anchor$1.lineBox().y1)) {\n                // Flip the labels on top if we're at the top of the pane\n                if (!axis$1._mirrored) {\n                    axis$1.options.labels.mirror = !axis$1.options.labels.mirror;\n                    axis$1._mirrored = true;\n                }\n                this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                // Push the axis above the previous x-axis so they don't overlap\n                if (topAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box\n                        .alignTo(topAnchors[paneId$1].box, TOP)\n                        .translate(0, -axis$1.options.margin)\n                    );\n                }\n\n                if (visible$1) {\n                    topAnchors[paneId$1] = axis$1;\n                }\n            }\n\n            if (round(axis$1.lineBox().y2, datavizConstants.COORD_PRECISION) === round(anchor$1.lineBox().y2, datavizConstants.COORD_PRECISION)) {\n                // Push the axis below the previous x-axis so they don't overlap\n                if (bottomAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box\n                        .alignTo(bottomAnchors[paneId$1].box, BOTTOM)\n                        .translate(0, axis$1.options.margin)\n                    );\n                }\n\n                if (visible$1) {\n                    bottomAnchors[paneId$1] = axis$1;\n                }\n            }\n\n            if (i$1 !== 0) {\n                axis$1.alignTo(xAnchor);\n                axis$1.reflow(axis$1.box);\n            }\n        }\n    },\n\n    shrinkAxisWidth: function(panes) {\n        var axes = this.groupAxes(panes).any;\n        var axisBox = axisGroupBox(axes);\n        var overflowX = 0;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n\n            if (currentPane.axes.length > 0) {\n                overflowX = Math.max(\n                    overflowX,\n                    axisBox.width() - currentPane.contentBox.width()\n                );\n            }\n        }\n\n        if (overflowX !== 0) {\n            for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                var currentAxis = axes[i$1];\n\n                if (!currentAxis.options.vertical) {\n                    currentAxis.reflow(currentAxis.box.shrink(overflowX, 0));\n                }\n            }\n        }\n    },\n\n    shrinkAxisHeight: function(panes) {\n        var shrinked;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            var axes = currentPane.axes;\n            var overflowY = Math.max(0, axisGroupBox(axes).height() - currentPane.contentBox.height());\n\n            if (overflowY !== 0) {\n                for (var j = 0; j < axes.length; j++) {\n                    var currentAxis = axes[j];\n\n                    if (currentAxis.options.vertical) {\n                        currentAxis.reflow(\n                            currentAxis.box.shrink(0, overflowY)\n                        );\n                    }\n                }\n                shrinked = true;\n            }\n        }\n\n        return shrinked;\n    },\n\n    fitAxes: function(panes) {\n        var axes = this.groupAxes(panes).any;\n        var offsetX = 0;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            var paneAxes = currentPane.axes;\n            var paneBox = currentPane.contentBox;\n\n            if (paneAxes.length > 0) {\n                var axisBox = axisGroupBox(paneAxes);\n                // OffsetY is calculated and applied per pane\n                var offsetY = Math.max(paneBox.y1 - axisBox.y1, paneBox.y2 - axisBox.y2);\n\n                // OffsetX is calculated and applied globally\n                offsetX = Math.max(offsetX, paneBox.x1 - axisBox.x1);\n\n                for (var j = 0; j < paneAxes.length; j++) {\n                    var currentAxis = paneAxes[j];\n\n                    currentAxis.reflow(\n                        currentAxis.box.translate(0, offsetY)\n                    );\n                }\n            }\n        }\n\n        for (var i$1 = 0; i$1 < axes.length; i$1++) {\n            var currentAxis$1 = axes[i$1];\n\n            currentAxis$1.reflow(\n                currentAxis$1.box.translate(offsetX, 0)\n            );\n        }\n    },\n\n    reflowAxes: function(panes) {\n        var this$1$1 = this;\n\n        var axes = this.groupAxes(panes);\n\n        for (var i = 0; i < panes.length; i++) {\n            this$1$1.reflowPaneAxes(panes[i]);\n        }\n\n        if (axes.x.length > 0 && axes.y.length > 0) {\n            this.alignAxes(axes.x, axes.y);\n            this.shrinkAxisWidth(panes);\n\n            this.autoRotateAxisLabels(axes);\n\n            this.alignAxes(axes.x, axes.y);\n            if (this.shrinkAxisWidth(panes)) {\n                this.alignAxes(axes.x, axes.y);\n            }\n\n            this.shrinkAxisHeight(panes);\n            this.alignAxes(axes.x, axes.y);\n\n            if (this.shrinkAxisHeight(panes)) {\n                this.alignAxes(axes.x, axes.y);\n            }\n\n            this.fitAxes(panes);\n        }\n    },\n\n    autoRotateAxisLabels: function(groupedAxes) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var panes = ref.panes;\n        var axes = allPaneAxes(panes);\n        var rotated;\n\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            if (axis.autoRotateLabels()) {\n                rotated = true;\n            }\n        }\n\n        if (rotated) {\n            for (var idx$1 = 0; idx$1 < panes.length; idx$1++) {\n                this$1$1.reflowPaneAxes(panes[idx$1]);\n            }\n\n            if (groupedAxes.x.length > 0 && groupedAxes.y.length > 0) {\n                this.alignAxes(groupedAxes.x, groupedAxes.y);\n                this.shrinkAxisWidth(panes);\n            }\n        }\n    },\n\n    reflowPaneAxes: function(pane) {\n        var axes = pane.axes;\n        var length = axes.length;\n\n        if (length > 0) {\n            for (var i = 0; i < length; i++) {\n                axes[i].reflow(pane.contentBox);\n            }\n        }\n    },\n\n    reflowCharts: function(panes) {\n        var charts = this.charts;\n        var count = charts.length;\n        var box = this.box;\n\n        for (var i = 0; i < count; i++) {\n            var chartPane = charts[i].pane;\n            if (!chartPane || inArray(chartPane, panes)) {\n                charts[i].reflow(box);\n            }\n        }\n    },\n\n    reflowPanes: function() {\n        var ref = this;\n        var box = ref.box;\n        var panes = ref.panes;\n        var panesLength = panes.length;\n        var remainingHeight = box.height();\n        var remainingPanes = panesLength;\n        var autoHeightPanes = 0;\n        var top = box.y1;\n\n        for (var i = 0; i < panesLength; i++) {\n            var currentPane = panes[i];\n            var height = currentPane.options.height;\n\n            currentPane.options.width = box.width();\n\n            if (!currentPane.options.height) {\n                autoHeightPanes++;\n            } else {\n                if (height.indexOf && height.indexOf(\"%\")) {\n                    var percents = parseInt(height, 10) / 100;\n                    currentPane.options.height = percents * box.height();\n                }\n\n                currentPane.reflow(box.clone());\n\n                remainingHeight -= currentPane.options.height;\n            }\n        }\n\n        for (var i$1 = 0; i$1 < panesLength; i$1++) {\n            var currentPane$1 = panes[i$1];\n\n            if (!currentPane$1.options.height) {\n                currentPane$1.options.height = remainingHeight / autoHeightPanes;\n            }\n        }\n\n        for (var i$2 = 0; i$2 < panesLength; i$2++) {\n            var currentPane$2 = panes[i$2];\n            var paneBox = box\n                .clone()\n                .move(box.x1, top);\n\n            currentPane$2.reflow(paneBox);\n\n            remainingPanes--;\n            top += currentPane$2.options.height;\n        }\n    },\n\n    backgroundBox: function() {\n        var axes = this.axes;\n        var axesCount = axes.length;\n        var box;\n\n        for (var i = 0; i < axesCount; i++) {\n            var axisA = axes[i];\n\n            for (var j = 0; j < axesCount; j++) {\n                var axisB = axes[j];\n\n                if (axisA.options.vertical !== axisB.options.vertical) {\n                    var lineBox = axisA.lineBox().clone().wrap(axisB.lineBox());\n\n                    if (!box) {\n                        box = lineBox;\n                    } else {\n                        box = box.wrap(lineBox);\n                    }\n                }\n            }\n        }\n\n        return box || this.box;\n    },\n\n    chartsBoxes: function() {\n        var panes = this.panes;\n        var boxes = [];\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            boxes.push(panes[idx].chartsBox());\n        }\n\n        return boxes;\n    },\n\n    addBackgroundPaths: function(multipath) {\n        var boxes = this.chartsBoxes();\n        for (var idx = 0; idx < boxes.length; idx++) {\n            multipath.paths.push(Path.fromRect(boxes[idx].toRect()));\n        }\n    },\n\n    backgroundContainsPoint: function(point) {\n        var boxes = this.chartsBoxes();\n        for (var idx = 0; idx < boxes.length; idx++) {\n            if (boxes[idx].containsPoint(point)) {\n                return true;\n            }\n        }\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options.plotArea;\n        var opacity = options.opacity;\n        var background = options.background;\n        var border = options.border; if (border === void 0) { border = {}; }\n        if (isTransparent(background)) {\n            background = WHITE;\n            opacity = 0;\n        }\n\n        var bg = this._bgVisual = new drawing.MultiPath({\n            fill: {\n                color: background,\n                opacity: opacity\n            },\n            stroke: {\n                color: border.width ? border.color : \"\",\n                width: border.width,\n                dashType: border.dashType\n            },\n            zIndex: -1\n        });\n\n        this.addBackgroundPaths(bg);\n\n        this.appendVisual(bg);\n    },\n\n    pointsByCategoryIndex: function(categoryIndex) {\n        var charts = this.charts;\n        var result = [];\n\n        if (categoryIndex !== null) {\n            for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                if (chart.pane.options.name === \"_navigator\") {\n                    continue;\n                }\n\n                var points = charts[i].categoryPoints[categoryIndex];\n                if (points && points.length) {\n                    for (var j = 0; j < points.length; j++) {\n                        var point = points[j];\n                        if (point && defined(point.value) && point.value !== null) {\n                            result.push(point);\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    },\n\n    pointsBySeriesIndex: function(seriesIndex) {\n        return this.filterPoints(function(point) {\n            return point.series.index === seriesIndex;\n        });\n    },\n\n    pointsBySeriesName: function(name) {\n        return this.filterPoints(function(point) {\n            return point.series.name === name;\n        });\n    },\n\n    filterPoints: function(callback) {\n        var charts = this.charts;\n        var result = [];\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n            var points = chart.points;\n            for (var j = 0; j < points.length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && callback(point)) {\n                    result.push(point);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    findPoint: function(callback) {\n        var charts = this.charts;\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n            var points = chart.points;\n            for (var j = 0; j < points.length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && callback(point)) {\n                    return point;\n                }\n            }\n        }\n    },\n\n    paneByPoint: function(point) {\n        var panes = this.panes;\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            if (pane.box.containsPoint(point)) {\n                return pane;\n            }\n        }\n    },\n\n    detachLabels: function() {\n        var axes = this.groupAxes(this.panes);\n        var xAxes = axes.x;\n        var yAxes = axes.y;\n\n        this.detachAxisGroupLabels(yAxes, xAxes);\n        this.detachAxisGroupLabels(xAxes, yAxes);\n    },\n\n    detachAxisGroupLabels: function(axes, crossingAxes) {\n        var this$1$1 = this;\n\n        var labelAxisCount = 0;\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var pane = axis.pane;\n            var anchor = paneAnchor(crossingAxes, pane) || crossingAxes[0];\n            var axisIndex = i + labelAxisCount;\n            var labelAxis = this$1$1.createLabelAxis(axis, axisIndex, anchor);\n\n            if (labelAxis) {\n                labelAxisCount++;\n\n                var pos = pane.axes.indexOf(axis) + labelAxisCount;\n                pane.appendAxisAt(labelAxis, pos);\n            }\n        }\n    },\n\n    createLabelAxis: function(axis, axisIndex, anchor) {\n        var labelOptions = axis.options.labels;\n        var position = labelOptions.position;\n        var onAxis = position !== datavizConstants.END && position !== datavizConstants.START;\n        var visible = labelOptions.visible;\n\n        if (onAxis || visible === false) {\n            return null;\n        }\n\n        var allAxes = this.groupAxes(this.panes);\n        var crossingAxes = anchor.options.vertical ? allAxes.x : allAxes.y;\n        var anchorCrossings = this.axisCrossingValues(anchor, crossingAxes);\n        var end = position === datavizConstants.END;\n        var range = anchor.range();\n        var edge = end ? range.max : range.min;\n        var crossingValue = limitValue(anchorCrossings[axisIndex], range.min, range.max);\n\n        if (crossingValue - edge === 0) {\n            return null;\n        }\n\n        anchorCrossings.splice(axisIndex + 1, 0, edge);\n        anchor.options.axisCrossingValues = anchorCrossings;\n\n        var labelAxis = axis.clone();\n        axis.clear();\n\n        labelAxis.options.name = undefined;\n        labelAxis.options.line.visible = false;\n\n        labelAxis.options.crosshair = undefined;\n        labelAxis.options.notes = undefined;\n        labelAxis.options.plotBands = undefined;\n\n        return labelAxis;\n    },\n\n    isTrendline: function(series) {\n        return series && inArray(series.type, TRENDLINE_SERIES);\n    },\n\n    trendlineFactory: function() { /* abstract */ },\n\n    createTrendlineSeries: function() {\n        var this$1$1 = this;\n\n        var modifiedSeries = [];\n\n        this.series = this.series.map(function (series) {\n            if (!this$1$1.isTrendline(series)) {\n                return series;\n            }\n\n            var forSeries = this$1$1.seriesByName(series.for);\n            if (!forSeries) {\n                throw new Error('Invalid Configuration: Unable to locate linked series ' +\n                    \"\\\"\" + (series.for) + \"\\\" for trendline \\\"\" + (series.name) + \"\\\".\");\n            }\n\n            var valueFields = SeriesBinder.current.valueFields(forSeries);\n            var field = last(valueFields); // Use the last field for multi-field series\n\n            var trendlineSeries = this$1$1.trendlineFactory($.extend({}, {field: field}, series), forSeries);\n            if (trendlineSeries) {\n                if (forSeries.visible === false) {\n                    trendlineSeries.visible = false;\n                }\n\n                if (trendlineSeries.color === datavizConstants.INHERIT) {\n                    trendlineSeries.color = forSeries.color;\n                }\n\n                modifiedSeries.push(trendlineSeries);\n            }\n\n            return trendlineSeries;\n        }).filter(function (series) { return series !== null; });\n\n        return modifiedSeries;\n    },\n\n    seriesByName: function(name) {\n        return this.series.find(function (series) { return series.name === name; });\n    }\n});\n\nfunction isSingleAxis(axis) {\n    return !axis.pane.axes.some(function (a) { return a.options.vertical === axis.options.vertical && a !== axis && a.options.visible !== false; }\n    );\n}\n\nfunction axisGroupBox(axes) {\n    var length = axes.length;\n    var box;\n\n    for (var i = 0; i < length; i++) {\n        var axis = axes[i];\n        var visible = axis.options.visible !== false;\n        if (visible || isSingleAxis(axis)) {\n            var axisBox = visible ? axis.contentBox() : axis.lineBox();\n\n            if (!box) {\n                box = axisBox.clone();\n            } else {\n                box.wrap(axisBox);\n            }\n        }\n    }\n\n    return box || new Box();\n}\n\nfunction paneAnchor(axes, pane) {\n    for (var i = 0; i < axes.length; i++) {\n        var anchor = axes[i];\n        if (anchor && anchor.pane === pane) {\n            return anchor;\n        }\n    }\n}\n\nfunction isTransparent(color) {\n    return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n}\n\nvar allPaneAxes = function (panes) { return panes.reduce(function (acc, pane) { return acc.concat(pane.axes); }, []); };\n\nsetDefaultOptions(PlotAreaBase, {\n    series: [],\n    plotArea: {\n        margin: {}\n    },\n    background: \"\",\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    paneDefaults: {\n        title: {}\n    },\n    legend: {\n        inactiveItems: {\n            labels: {\n                color: \"#919191\"\n            },\n            markers: {\n                color: \"#919191\"\n            }\n        }\n    }\n});\n\nvar PlotAreaEventsMixin = {\n    hover: function(chart, e) {\n        this._dispatchEvent(chart, e, PLOT_AREA_HOVER);\n    },\n\n    click: function(chart, e) {\n        this._dispatchEvent(chart, e, PLOT_AREA_CLICK);\n    }\n};\n\nvar SeriesAggregator = Class.extend({\n    init: function(series, binder, defaultAggregates) {\n\n        var canonicalFields = binder.canonicalFields(series);\n        var valueFields = binder.valueFields(series);\n        var sourceFields = binder.sourceFields(series, canonicalFields);\n        var seriesFields = this._seriesFields = [];\n        var defaults = defaultAggregates.query(series.type);\n        var rootAggregate = series.aggregate || defaults;\n\n        this._series = series;\n        this._binder = binder;\n\n        for (var i = 0; i < canonicalFields.length; i++) {\n            var field = canonicalFields[i];\n            var fieldAggregate = (void 0);\n\n            if (isObject(rootAggregate)) {\n                fieldAggregate = rootAggregate[field];\n            } else if (i === 0 || inArray(field, valueFields)) {\n                fieldAggregate = rootAggregate;\n            } else {\n                break;\n            }\n\n            if (fieldAggregate) {\n                seriesFields.push({\n                    canonicalName: field,\n                    name: sourceFields[i],\n                    transform: isFunction(fieldAggregate) ? fieldAggregate : Aggregates[fieldAggregate]\n                });\n            }\n        }\n    },\n\n    aggregatePoints: function(srcPoints, group) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref._series;\n        var seriesFields = ref._seriesFields;\n        var data = this._bindPoints(srcPoints || []);\n        var firstDataItem = data.dataItems[0];\n        var result = {};\n\n        if (firstDataItem && !isNumber(firstDataItem) && !isArray(firstDataItem)) {\n            var fn = function() {};\n            fn.prototype = firstDataItem;\n            result = new fn();\n        }\n\n        for (var i = 0; i < seriesFields.length; i++) {\n            var field = seriesFields[i];\n            var srcValues = this$1$1._bindField(data.values, field.canonicalName);\n            var value = field.transform(srcValues, series, data.dataItems, group);\n\n            if (value !== null && isObject(value) && !defined(value.length) && !(value instanceof Date)) {\n                result = value;\n                break;\n            } else {\n                if (defined(value)) {\n                    setValue(field.name, result, value);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    _bindPoints: function(points) {\n        var ref = this;\n        var binder = ref._binder;\n        var series = ref._series;\n        var values = [];\n        var dataItems = [];\n\n        for (var i = 0; i < points.length; i++) {\n            var pointIx = points[i];\n\n            values.push(binder.bindPoint(series, pointIx));\n            dataItems.push(series.data[pointIx]);\n        }\n\n        return {\n            values: values,\n            dataItems: dataItems\n        };\n    },\n\n    _bindField: function(data, field) {\n        var values = [];\n        var count = data.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = data[i];\n            var valueFields = item.valueFields;\n            var value = (void 0);\n\n            if (defined(valueFields[field])) {\n                value = valueFields[field];\n            } else {\n                value = item.fields[field];\n            }\n\n            values.push(value);\n        }\n\n        return values;\n    }\n});\n\nfunction setValue(fieldName, target, value) {\n    var parentObj = target;\n    var field = fieldName;\n\n    if (fieldName.indexOf(\".\") > -1) {\n        var parts = fieldName.split(\".\");\n\n        while (parts.length > 1) {\n            field = parts.shift();\n            if (!defined(parentObj[field])) {\n                parentObj[field] = {};\n            }\n            parentObj = parentObj[field];\n        }\n        field = parts.shift();\n    }\n\n    parentObj[field] = value;\n}\n\nvar DefaultAggregates = Class.extend({\n    init: function() {\n\n        this._defaults = {};\n    },\n\n    register: function(seriesTypes, aggregates) {\n        var this$1$1 = this;\n\n        for (var i = 0; i < seriesTypes.length; i++) {\n            this$1$1._defaults[seriesTypes[i]] = aggregates;\n        }\n    },\n\n    query: function(seriesType) {\n        return this._defaults[seriesType];\n    }\n});\n\nDefaultAggregates.current = new DefaultAggregates();\n\nvar RangeBar = Bar.extend({\n    createLabel: function() {\n        var labels = this.options.labels;\n        var fromOptions = deepExtend({}, labels, labels.from);\n        var toOptions = deepExtend({}, labels, labels.to);\n\n        if (fromOptions.visible) {\n            this.labelFrom = this._createLabel(fromOptions);\n            this.append(this.labelFrom);\n        }\n\n        if (toOptions.visible) {\n            this.labelTo = this._createLabel(toOptions);\n            this.append(this.labelTo);\n        }\n    },\n\n    _createLabel: function(options) {\n        var labelTemplate = getTemplate(options);\n        var pointData = this.pointData();\n\n        var labelText;\n\n        if (labelTemplate) {\n            labelText = labelTemplate(pointData);\n        } else {\n            labelText = this.formatValue(options.format);\n        }\n\n        return new BarLabel(labelText,\n            deepExtend({\n                vertical: this.options.vertical\n            },\n            options\n        ), pointData);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var ref = this;\n        var labelFrom = ref.labelFrom;\n        var labelTo = ref.labelTo;\n        var value = ref.value;\n\n        this.box = targetBox;\n\n        if (labelFrom) {\n            labelFrom.options.aboveAxis = value.from > value.to;\n            labelFrom.reflow(targetBox);\n        }\n\n        if (labelTo) {\n            labelTo.options.aboveAxis = value.to > value.from;\n            labelTo.reflow(targetBox);\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n    }\n});\n\nRangeBar.prototype.defaults = deepExtend({}, RangeBar.prototype.defaults, {\n    labels: {\n        format: \"{0} - {1}\"\n    },\n    tooltip: {\n        format: \"{1}\"\n    }\n});\n\nvar RangeBarChart = BarChart.extend({\n    pointType: function() {\n        return RangeBar;\n    },\n\n    pointValue: function(data) {\n        return data.valueFields;\n    },\n\n    formatPointValue: function(point, format) {\n        if (point.value.from === null && point.value.to === null) {\n            return \"\";\n        }\n\n        return this.chartService.format.auto(format, point.value.from, point.value.to);\n    },\n\n    plotRange: function(point) {\n        if (!point) {\n            return 0;\n        }\n\n        return [ point.value.from, point.value.to ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var from = value.from;\n        var to = value.to;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (value !== null && isNumber(from) && isNumber(to)) {\n            axisRange = this.valueAxisRanges[axisName] = axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, from);\n            axisRange.max = Math.max(axisRange.max, from);\n\n            axisRange.min = Math.min(axisRange.min, to);\n            axisRange.max = Math.max(axisRange.max, to);\n        }\n    },\n\n    aboveAxis: function(point) {\n        var value = point.value;\n        return value.from < value.to;\n    }\n});\n\nRangeBarChart.prototype.plotLimits = CategoricalChart.prototype.plotLimits;\n\nvar RangeLinePoint = LinePoint.extend({\n    aliasFor: function() {\n        return this.parent;\n    }\n});\n\nvar AUTO = 'auto';\nvar DEFAULT_FROM_FORMAT = '{0}';\nvar DEFAULT_TO_FORMAT = '{1}';\n\nvar RangeAreaPoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n        this.initLabelsFormat();\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        var ref = this.options;\n        var markers = ref.markers;\n        var labels = ref.labels;\n        var value = this.value;\n\n        var fromPoint = this.fromPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n            labels: labels.from,\n            markers: markers.from\n        }));\n\n        var toPoint = this.toPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n            labels: labels.to,\n            markers: markers.to\n        }));\n\n        this.copyFields(fromPoint);\n        this.copyFields(toPoint);\n\n        this.append(fromPoint);\n        this.append(toPoint);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var fromBox = targetBox.from;\n        var toBox = targetBox.to;\n\n        this.positionLabels(fromBox, toBox);\n\n        this.fromPoint.reflow(fromBox);\n        this.toPoint.reflow(toBox);\n\n        this.box = this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox());\n    },\n\n    createHighlight: function() {\n        var group = new Group();\n        group.append(this.fromPoint.createHighlight());\n        group.append(this.toPoint.createHighlight());\n\n        return group;\n    },\n\n    highlightVisual: function() {\n        return this.visual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            from: this.fromPoint.highlightVisualArgs(),\n            to: this.toPoint.highlightVisualArgs()\n        };\n    },\n\n    tooltipAnchor: function() {\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(this.box);\n\n        if (showTooltip) {\n            var box = this.box;\n            var center = box.center();\n            var horizontalAlign = LEFT;\n            var x, y, verticalAlign;\n\n            if (this.options.vertical) {\n                x = center.x;\n                y = box.y1 - TOOLTIP_OFFSET;\n                verticalAlign = BOTTOM;\n            } else {\n                x = box.x2 + TOOLTIP_OFFSET;\n                y = center.y;\n                verticalAlign = CENTER;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    unclipElements: function() {\n        this.fromPoint.unclipElements();\n        this.toPoint.unclipElements();\n    },\n\n    initLabelsFormat: function() {\n        var labels = this.options.labels;\n        if (!labels.format) {\n            if (!labels.from || !labels.from.format) {\n                labels.from = $.extend({}, labels.from, {\n                    format: DEFAULT_FROM_FORMAT\n                });\n            }\n\n            if (!labels.to || !labels.to.format) {\n                labels.to = $.extend({}, labels.to, {\n                    format: DEFAULT_TO_FORMAT\n                });\n            }\n        }\n    },\n\n    positionLabels: function(fromBox, toBox) {\n        var ref = this.options;\n        var labels = ref.labels;\n        var vertical = ref.vertical;\n\n        if (labels.position === AUTO) {\n            var fromLabelPosition, toLabelPosition;\n            if (vertical) {\n                if (toBox.y1 <= fromBox.y1) {\n                    toLabelPosition = ABOVE;\n                    fromLabelPosition = BELOW;\n                } else {\n                    toLabelPosition = BELOW;\n                    fromLabelPosition = ABOVE;\n                }\n            } else {\n                if (toBox.x1 <= fromBox.x1) {\n                    toLabelPosition = LEFT;\n                    fromLabelPosition = RIGHT;\n                } else {\n                    toLabelPosition = RIGHT;\n                    fromLabelPosition = LEFT;\n                }\n            }\n\n            if (!labels.from || !labels.from.position) {\n                this.fromPoint.options.labels.position = fromLabelPosition;\n            }\n\n            if (!labels.to || !labels.to.position) {\n                this.toPoint.options.labels.position = toLabelPosition;\n            }\n        }\n    },\n\n    copyFields: function(point) {\n        point.dataItem = this.dataItem;\n        point.category = this.category;\n        point.series = this.series;\n        point.color = this.color;\n        point.owner = this.owner;\n    }\n});\n\ndeepExtend(RangeAreaPoint.prototype, PointEventsMixin);\ndeepExtend(RangeAreaPoint.prototype, NoteMixin);\n\nRangeAreaPoint.prototype.defaults = {\n    markers: {\n        visible: false,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        },\n        position: AUTO\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: WHITE,\n                width: 2\n            }\n        },\n        zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n    },\n    tooltip: {\n        format: '{0} - {1}'\n    }\n};\n\nvar RangeAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()));\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));\n        }\n\n        return fromSegments;\n    },\n\n    createStroke: function(style) {\n        var toPath = new Path(style);\n        var fromPath = new Path(style);\n\n        toPath.segments.push.apply(toPath.segments, this.strokeSegments());\n        fromPath.segments.push.apply(fromPath.segments, this.stackSegments());\n\n        this.visual.append(toPath);\n        this.visual.append(fromPath);\n    },\n\n    hasStackSegment: function() {\n        return true;\n    },\n\n    fromPoints: function() {\n        return this.linePoints.map(function (point) { return point.fromPoint; });\n    },\n\n    toPoints: function() {\n        return this.linePoints.map(function (point) { return point.toPoint; });\n    }\n});\n\nvar SplineRangeAreaSegment = RangeAreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.createCurveSegments(this.toPoints());\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.createCurveSegments(this.fromPoints().reverse());\n        }\n\n        return fromSegments;\n    },\n\n    createCurveSegments: function(points) {\n        var curveProcessor = new CurveProcessor();\n\n        return curveProcessor.process(this.toGeometryPoints(points));\n    }\n});\n\nvar StepRangeAreaSegment = RangeAreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()));\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));\n            fromSegments.reverse();\n        }\n\n        return fromSegments;\n    }\n});\n\ndeepExtend(StepRangeAreaSegment.prototype, StepLineMixin);\n\nvar RangeAreaChart = CategoricalChart.extend({\n    render: function() {\n        CategoricalChart.fn.render.call(this);\n\n        this.renderSegments();\n    },\n\n    pointType: function() {\n        return RangeAreaPoint;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var value = data.valueFields;\n\n        if (!hasValue(value.from) && !hasValue(value.to)) {\n            if (this.seriesMissingValues(series) === ZERO) {\n                value = {\n                    from: 0,\n                    to: 0\n                };\n            } else {\n                return null;\n            }\n        }\n\n        var pointOptions = this.pointOptions(series, seriesIx);\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        var color = data.fields.color || series.color;\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new RangeAreaPoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = (currentSeries.line || {}).style;\n        var segmentType;\n        if (style === \"smooth\") {\n            segmentType = SplineRangeAreaSegment;\n        } else if (style === \"step\") {\n            segmentType = StepRangeAreaSegment;\n        } else {\n            segmentType = RangeAreaSegment;\n        }\n\n        return new segmentType(linePoints, currentSeries, seriesIx);\n    },\n\n    plotRange: function(point, startValue) {\n        if (!point) {\n            return [ startValue, startValue ];\n        }\n\n        return [ point.value.from, point.value.to ];\n    },\n\n    valueSlot: function(valueAxis, plotRange) {\n        var fromSlot = valueAxis.getSlot(plotRange[0], plotRange[0], !this.options.clip);\n        var toSlot = valueAxis.getSlot(plotRange[1], plotRange[1], !this.options.clip);\n        if (fromSlot && toSlot) {\n            return {\n                from: fromSlot,\n                to: toSlot\n            };\n        }\n    },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var from = valueSlot.from;\n        var to = valueSlot.to;\n        var fromSlot, toSlot;\n\n        if (this.options.invertAxes) {\n            fromSlot = new Box(from.x1, categorySlot.y1, from.x2, categorySlot.y2);\n            toSlot = new Box(to.x1, categorySlot.y1, to.x2, categorySlot.y2);\n        } else {\n            fromSlot = new Box(categorySlot.x1, from.y1, categorySlot.x2, from.y2);\n            toSlot = new Box(categorySlot.x1, to.y1, categorySlot.x2, to.y2);\n        }\n\n        return {\n            from: fromSlot,\n            to: toSlot\n        };\n    },\n\n    addValue: function(data, fields) {\n        var valueFields = data.valueFields;\n        if (!isNumber(valueFields.from)) {\n            valueFields.from = valueFields.to;\n        }\n\n        if (!isNumber(valueFields.to)) {\n            valueFields.to = valueFields.from;\n        }\n\n        CategoricalChart.fn.addValue.call(this, data, fields);\n    },\n\n    updateRange: function(value, fields) {\n        if (value !== null && isNumber(value.from) && isNumber(value.to)) {\n            var axisName = fields.series.axis;\n            var axisRange = this.valueAxisRanges[axisName] = this.valueAxisRanges[axisName] || { min: MAX_VALUE, max: MIN_VALUE };\n            var from = value.from;\n            var to = value.to;\n\n            axisRange.min = Math.min(axisRange.min, from, to);\n            axisRange.max = Math.max(axisRange.max, from, to);\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format, value.from, value.to);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            if (point) {\n                result.push((point.fromPoint || {}).marker);\n                result.push((point.toPoint || {}).marker);\n            }\n        }\n\n        return result.concat(this._segments);\n    }\n});\n\ndeepExtend(RangeAreaChart.prototype, LineChartMixin, ClipAnimationMixin);\n\nvar OHLCPoint = Candlestick.extend({\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var oPoints = [];\n        var cPoints = [];\n        var lhPoints = [];\n\n        var lhSlot = valueAxis.getSlot(value.low, value.high);\n        var oSlot = valueAxis.getSlot(value.open, value.open);\n        var cSlot = valueAxis.getSlot(value.close, value.close);\n\n        oSlot.x1 = cSlot.x1 = lhSlot.x1 = box.x1;\n        oSlot.x2 = cSlot.x2 = lhSlot.x2 = box.x2;\n\n        var mid = lhSlot.center().x;\n\n        oPoints.push([ oSlot.x1, oSlot.y1 ]);\n        oPoints.push([ mid, oSlot.y1 ]);\n        cPoints.push([ mid, cSlot.y1 ]);\n        cPoints.push([ cSlot.x2, cSlot.y1 ]);\n        lhPoints.push([ mid, lhSlot.y1 ]);\n        lhPoints.push([ mid, lhSlot.y2 ]);\n\n        this.lines = [\n            oPoints, cPoints, lhPoints\n        ];\n\n        this.box = lhSlot.clone().wrap(oSlot.clone().wrap(cSlot));\n\n        this.reflowNote();\n    },\n\n    createBody: function() {}\n});\n\nvar OHLCChart = CandlestickChart.extend({\n    pointType: function() {\n        return OHLCPoint;\n    }\n});\n\nvar WaterfallSegment = ChartElement.extend({\n    init: function(from, to, series) {\n        ChartElement.fn.init.call(this);\n\n        this.from = from;\n        this.to = to;\n        this.series = series;\n    },\n\n    linePoints: function() {\n        var from = this.from;\n        var ref = this;\n        var fromBox = ref.from.box;\n        var toBox = ref.to.box;\n        var points = [];\n\n        if (from.isVertical) {\n            var y = from.aboveAxis ? fromBox.y1 : fromBox.y2;\n            points.push(\n                [ fromBox.x1, y ],\n                [ toBox.x2, y ]\n            );\n        } else {\n            var x = from.aboveAxis ? fromBox.x2 : fromBox.x1;\n            points.push(\n                [ x, fromBox.y1 ],\n                [ x, toBox.y2 ]\n            );\n        }\n\n        return points;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var line = this.series.line || {};\n\n        var path = Path.fromPoints(this.linePoints(), {\n            stroke: {\n                color: line.color,\n                width: line.width,\n                opacity: line.opacity,\n                dashType: line.dashType\n            }\n        });\n\n        alignPathToPixel(path);\n        this.visual.append(path);\n    }\n});\n\nsetDefaultOptions(WaterfallSegment, {\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    }\n});\n\nvar WaterfallChart = BarChart.extend({\n    render: function() {\n        BarChart.fn.render.call(this);\n        this.createSegments();\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var totalCategories = categoriesCount(series);\n        var isVertical = !this.options.invertAxes;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var total = 0;\n            var runningTotal = 0;\n\n            for (var categoryIx = 0; categoryIx < totalCategories; categoryIx++) {\n                var data = SeriesBinder.current.bindPoint(currentSeries, categoryIx);\n                var value = data.valueFields.value;\n                var summary = data.fields.summary;\n                var from = total;\n                var to = (void 0);\n\n                if (summary) {\n                    if (summary.toLowerCase() === \"total\") {\n                        data.valueFields.value = total;\n                        from = 0;\n                        to = total;\n                    } else {\n                        data.valueFields.value = runningTotal;\n                        to = from - runningTotal;\n                        runningTotal = 0;\n                    }\n                } else if (isNumber(value)) {\n                    runningTotal += value;\n                    total += value;\n                    to = total;\n                }\n\n                callback(data, {\n                    category: this$1$1.categoryAxis.categoryAt(categoryIx),\n                    categoryIx: categoryIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    total: total,\n                    runningTotal: runningTotal,\n                    from: from,\n                    to: to,\n                    isVertical: isVertical\n                });\n            }\n        }\n    },\n\n    updateRange: function(value, fields) {\n        BarChart.fn.updateRange.call(this, { value: fields.to }, fields);\n    },\n\n    aboveAxis: function(point) {\n        return point.value >= 0;\n    },\n\n    plotRange: function(point) {\n        return [ point.from, point.to ];\n    },\n\n    createSegments: function() {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var seriesPoints = this.seriesPoints;\n        var segments = this.segments = [];\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var points = seriesPoints[seriesIx];\n\n            if (points) {\n                var prevPoint = (void 0);\n                for (var pointIx = 0; pointIx < points.length; pointIx++) {\n                    var point = points[pointIx];\n\n                    if (point && prevPoint) {\n                        var segment = new WaterfallSegment(prevPoint, point, currentSeries);\n                        segments.push(segment);\n                        this$1$1.append(segment);\n                    }\n\n                    prevPoint = point;\n                }\n            }\n        }\n    }\n});\n\nfunction trendlineFactory(registry, type, context) {\n    var impl = registry[String(type)];\n    if (impl) {\n        return impl(context);\n    }\n\n    return null;\n}\n\nfunction calculateSlope(sourceValues, valueGetter) {\n    var x = 0;\n    var y = 0;\n    var x2 = 0;\n    var xy = 0;\n    var count = 0;\n    var slope, intercept;\n    var xMin = Number.MAX_VALUE;\n    var xMax = Number.MIN_VALUE;\n\n    for (var i = 0; i < sourceValues.length; i++) {\n        var value = sourceValues[i];\n        var ref = valueGetter(value);\n        var xValue = ref.xValue;\n        var yValue = ref.yValue;\n\n        if (isFinite(xValue) && xValue !== null && isFinite(yValue) && yValue !== null) {\n            xMin = Math.min(xValue, xMin);\n            xMax = Math.max(xValue, xMax);\n\n            count++;\n            x += xValue;\n            y += yValue;\n            x2 += Math.pow(xValue, 2);\n            xy += xValue * yValue;\n        }\n    }\n\n    if (count > 0) {\n        slope = (count * xy - x * y) / (count * x2 - Math.pow(x, 2));\n        intercept = (y - slope * x) / count;\n    }\n\n    return { slope: slope, intercept: intercept, count: count, xMin: xMin, xMax: xMax };\n}\n\nfunction linearTrendline(context) {\n    var options = context.options;\n    var categoryAxis = context.categoryAxis;\n    var seriesValues = context.seriesValues;\n\n    var ref = getData({ seriesValues: seriesValues, categoryAxis: categoryAxis, options: options });\n    var data = ref.data;\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'line',\n            data: data,\n            categoryField: 'category',\n            field: 'value'});\n    }\n\n    return null;\n}\n\nvar valueGetter = function (fieldName) { return function (ref) {\n        var categoryIx = ref.categoryIx;\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: categoryIx + 1, yValue: valueFields[fieldName] });\n }    };\n\nfunction getData(ref) {\n    var seriesValues = ref.seriesValues;\n    var categoryAxis = ref.categoryAxis;\n    var options = ref.options;\n\n    var ref$1 = calculateSlope(seriesValues(), valueGetter(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n\n    if (count > 0) {\n        var data = [];\n        var totalRange = categoryAxis.totalRangeIndices();\n        var currentRange = categoryAxis.currentRangeIndices();\n        var range = {\n            min: Math.floor(Math.max(currentRange.min - 1, totalRange.min)),\n            max: Math.ceil(Math.min(currentRange.max + 2, totalRange.max))\n        };\n\n        for (var i = range.min; i < range.max; i++) {\n            data[i] = {\n                category: categoryAxis.categoryAt(i, true),\n                value: slope * (i + 1) + intercept\n            };\n        }\n\n        return { data: data };\n    }\n\n    return { data: null };\n}\n\nfunction calculateMovingAverage(sourceValues, valueGetter, period) {\n    var averagePoints = [];\n    var values = [];\n    var start = Math.max(MIN_MOVING_AVERAGE_PERIOD, period) - 1;\n\n    var end = 0;\n    var sum = 0;\n\n    for (var i = 0; i < sourceValues.length; i++) {\n        var value = sourceValues[i];\n        var ref = valueGetter(value);\n        var xValue = ref.xValue;\n        var yValue = ref.yValue;\n\n        if (isFinite(yValue) && yValue !== null) {\n            values.push(yValue);\n            sum += yValue;\n            end = Math.max(i, end);\n        } else {\n            values.push(null);\n        }\n\n        if (i >= start) {\n            var count = values.filter(function (value) { return value !== null; }).length;\n            var lastValue = values.shift() || 0;\n\n            if (count > 0) {\n                var average = sum / count;\n                averagePoints.push([xValue, average]);\n\n                sum -= lastValue;\n                continue;\n            }\n        }\n\n        averagePoints.push([xValue, null]);\n    }\n\n    return averagePoints.slice(0, end + 1);\n}\n\nfunction movingAverageTrendline(context) {\n    var options = context.options;\n\n    var ref = getData$1(context);\n    var data = ref.data;\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'line',\n            data: data,\n            categoryField: 'category',\n            field: 'value'});\n    }\n\n    return null;\n}\n\nvar valueGetter$1 = function (fieldName) { return function (ref) {\n        var categoryIx = ref.categoryIx;\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: categoryIx, yValue: valueFields[fieldName] });\n }    };\n\nfunction calculatePoints(ref) {\n    var options = ref.options;\n    var categoryAxis = ref.categoryAxis;\n    var seriesValues = ref.seriesValues;\n\n    var period = (options.trendline || {}).period || MIN_MOVING_AVERAGE_PERIOD;\n    var totalRange = categoryAxis.totalRangeIndices();\n    var currentRange = categoryAxis.currentRangeIndices();\n    var range = {\n        min: Math.floor(Math.max(currentRange.min - period, totalRange.min)),\n        max: Math.ceil(Math.min(currentRange.max + period + 2, totalRange.max))\n    };\n\n    return calculateMovingAverage(seriesValues(range), valueGetter$1(options.field), period);\n}\n\nfunction getData$1(context) {\n    var categoryAxis = context.categoryAxis;\n    var points = calculatePoints(context);\n    var data = [];\n    points.forEach(function (ref) {\n        var categoryIx = ref[0];\n        var value = ref[1];\n\n        data[categoryIx] = {\n            category: categoryAxis.categoryAt(categoryIx, true),\n            value: value\n        };\n    });\n\n    if (data.length > 0) {\n        return { data: data };\n    }\n\n    return { data: null };\n}\n\nvar registry = {};\nregistry[TRENDLINE_LINEAR] = linearTrendline;\nregistry[TRENDLINE_MOVING_AVERAGE] = movingAverageTrendline;\n\nvar AREA_SERIES = [ AREA, VERTICAL_AREA, RANGE_AREA, VERTICAL_RANGE_AREA ];\nvar OUT_OF_RANGE_SERIES = [ LINE, VERTICAL_LINE ].concat(AREA_SERIES);\n\nvar CategoricalPlotArea = PlotAreaBase.extend({\n    initFields: function(series) {\n        var this$1$1 = this;\n\n        this.namedCategoryAxes = {};\n        this.namedValueAxes = {};\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n        this._seriesPointsCache = {};\n        this._currentPointsCache = {};\n\n        if (series.length > 0) {\n            this.invertAxes = inArray(\n                series[0].type, [ BAR, BULLET, VERTICAL_LINE, VERTICAL_AREA, VERTICAL_RANGE_AREA,\n                                 RANGE_BAR, HORIZONTAL_WATERFALL, VERTICAL_BOX_PLOT ]\n            );\n\n            for (var i = 0; i < series.length; i++) {\n                var stack = series[i].stack;\n                if (stack && stack.type === \"100%\") {\n                    this$1$1.stack100 = true;\n                    break;\n                }\n            }\n        }\n    },\n\n    render: function(panes) {\n        if (panes === void 0) { panes = this.panes; }\n\n        this.series = [].concat( this.originalSeries );\n        this.createCategoryAxes(panes);\n\n        this.aggregateCategories(panes);\n        this.createTrendlineSeries(panes);\n\n        this.createCategoryAxesLabels(panes);\n        this.createCharts(panes);\n        this.createValueAxes(panes);\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis instanceof CategoryAxis) {\n            delete this.namedCategoryAxes[axisName];\n        } else {\n            this.valueAxisRangeTracker.reset(axisName);\n            delete this.namedValueAxes[axisName];\n        }\n\n        if (axis === this.categoryAxis) {\n            delete this.categoryAxis;\n        }\n\n        if (axis === this.valueAxis) {\n            delete this.valueAxis;\n        }\n    },\n\n    trendlineFactory: function(options, series) {\n        var categoryAxis = this.seriesCategoryAxis(options);\n        var seriesValues = this.seriesValues.bind(this, series.index);\n\n        var trendline = trendlineFactory(registry, options.type, {\n            options: options,\n            categoryAxis: categoryAxis,\n            seriesValues: seriesValues\n        });\n\n        if (trendline) {\n            // Inherit settings\n            trendline.categoryAxis = series.categoryAxis;\n            trendline.valueAxis = series.valueAxis;\n\n            return this.filterSeries(trendline, categoryAxis);\n        }\n\n        return trendline;\n    },\n\n    trendlineAggregateForecast: function() {\n        return this.series\n            .map(function (series) { return (series.trendline || {}).forecast; })\n            .filter(function (forecast) { return forecast !== undefined; })\n            .reduce(function (result, forecast) { return ({\n                before: Math.max(result.before, forecast.before || 0),\n                after: Math.max(result.after, forecast.after || 0)\n            }); }, { before: 0, after: 0 });\n    },\n\n    seriesValues: function(seriesIx, range) {\n        var this$1$1 = this;\n\n        var result = [];\n\n        var series = this.srcSeries[seriesIx];\n        var categoryAxis = this.seriesCategoryAxis(series);\n        var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n        if (dateAxis) {\n            this._seriesPointsCache = {};\n            this._currentPointsCache = {};\n            categoryAxis.options.dataItems = [];\n            series = this.aggregateSeries(series, categoryAxis, categoryAxis.totalRangeIndices());\n        }\n\n        var min = range ? range.min : 0;\n        var max = range ? range.max : series.data.length;\n        for (var categoryIx = min; categoryIx < max; categoryIx++) {\n            var data = this$1$1.bindPoint(series, categoryIx);\n            result.push({ categoryIx: categoryIx, category: data.fields.category, valueFields: data.valueFields });\n        }\n\n        return result;\n    },\n\n    createCharts: function(panes) {\n        var this$1$1 = this;\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n\n            var visibleSeries = this$1$1.filterVisibleSeries(paneSeries);\n            if (!visibleSeries) {\n                continue;\n            }\n\n            var groups = this$1$1.groupSeriesByCategoryAxis(visibleSeries);\n            for (var groupIx = 0; groupIx < groups.length; groupIx++) {\n                this$1$1.createChartGroup(groups[groupIx], pane);\n            }\n        }\n    },\n\n    createChartGroup: function(series, pane) {\n        this.createAreaChart(\n            filterSeriesByType(series, [ AREA, VERTICAL_AREA ]), pane\n        );\n\n        this.createRangeAreaChart(\n            filterSeriesByType(series, [ RANGE_AREA, VERTICAL_RANGE_AREA ]), pane\n        );\n\n        this.createBarChart(\n            filterSeriesByType(series, [ COLUMN, BAR ]), pane\n        );\n\n        this.createRangeBarChart(\n            filterSeriesByType(series, [ RANGE_COLUMN, RANGE_BAR ]), pane\n        );\n\n        this.createBulletChart(\n            filterSeriesByType(series, [ BULLET, VERTICAL_BULLET ]), pane\n        );\n\n        this.createCandlestickChart(\n            filterSeriesByType(series, CANDLESTICK), pane\n        );\n\n        this.createBoxPlotChart(\n            filterSeriesByType(series, [ BOX_PLOT, VERTICAL_BOX_PLOT ]), pane\n        );\n\n        this.createOHLCChart(\n            filterSeriesByType(series, OHLC), pane\n        );\n\n        this.createWaterfallChart(\n            filterSeriesByType(series, [ WATERFALL, HORIZONTAL_WATERFALL ]), pane\n        );\n\n        this.createLineChart(\n            filterSeriesByType(series, [ LINE, VERTICAL_LINE ]), pane\n        );\n    },\n\n    aggregateCategories: function(panes) {\n        var this$1$1 = this;\n\n        var series = [].concat( this.series );\n        var processedSeries = [];\n        this._currentPointsCache = {};\n        this._seriesPointsCache = this._seriesPointsCache || {};\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n\n            if (!this$1$1.isTrendline(currentSeries)) {\n                var categoryAxis = this$1$1.seriesCategoryAxis(currentSeries);\n                var axisPane = this$1$1.findPane(categoryAxis.options.pane);\n                var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n\n                if ((dateAxis || currentSeries.categoryField) && inArray(axisPane, panes)) {\n                    currentSeries = this$1$1.aggregateSeries(currentSeries, categoryAxis, categoryAxis.currentRangeIndices());\n                } else {\n                    currentSeries = this$1$1.filterSeries(currentSeries, categoryAxis);\n                }\n            }\n\n            processedSeries.push(currentSeries);\n        }\n\n        this._seriesPointsCache = this._currentPointsCache;\n        this._currentPointsCache = null;\n\n        this.srcSeries = series;\n        this.series = processedSeries;\n    },\n\n    filterSeries: function(series, categoryAxis) {\n        var dataLength = (series.data || {}).length;\n        categoryAxis._seriesMax = Math.max(categoryAxis._seriesMax || 0, dataLength);\n\n        if (!(defined(categoryAxis.options.min) || defined(categoryAxis.options.max))) {\n            return series;\n        }\n\n        var range = categoryAxis.currentRangeIndices();\n        var outOfRangePoints = inArray(series.type, OUT_OF_RANGE_SERIES);\n        var currentSeries = deepExtend({}, series);\n\n        currentSeries.data = (currentSeries.data || []).slice(range.min, range.max + 1);\n\n        if (outOfRangePoints) {\n            createOutOfRangePoints(currentSeries, range, dataLength, function (idx) { return ({\n                item: series.data[idx],\n                category: categoryAxis.categoryAt(idx, true),\n                categoryIx: idx - range.min\n            }); }, function (idx) { return defined(series.data[idx]); });\n        }\n\n        return currentSeries;\n    },\n\n    clearSeriesPointsCache: function() {\n        this._seriesPointsCache = {};\n    },\n\n    seriesSourcePoints: function(series, categoryAxis) {\n        var this$1$1 = this;\n\n        var key = (series.index) + \";\" + (categoryAxis.categoriesHash());\n        if (this._seriesPointsCache && this._seriesPointsCache[key]) {\n            this._currentPointsCache[key] = this._seriesPointsCache[key];\n            return this._seriesPointsCache[key];\n        }\n\n        var axisOptions = categoryAxis.options;\n        var srcCategories = axisOptions.srcCategories;\n        var dateAxis = equalsIgnoreCase(axisOptions.type, DATE);\n        var srcData = series.data;\n        var getFn = dateAxis ? getDateField : getField;\n        var result = [];\n        if (!dateAxis) {\n            categoryAxis.mapCategories(); //fixes major performance issue caused by searching for the index for large data\n        }\n\n        for (var idx = 0; idx < srcData.length; idx++) {\n            var category = (void 0);\n            if (series.categoryField) {\n                category = getFn(series.categoryField, srcData[idx], this$1$1.chartService.intl);\n            } else {\n                category = srcCategories[idx];\n            }\n\n            if (defined(category) && category !== null) {\n                var categoryIx = categoryAxis.totalIndex(category);\n                result[categoryIx] = result[categoryIx] || { items: [], category: category };\n                result[categoryIx].items.push(idx);\n            }\n        }\n\n        this._currentPointsCache[key] = result;\n\n        return result;\n    },\n\n    aggregateSeries: function(series, categoryAxis, range) {\n        var srcData = series.data;\n        if (!srcData.length) {\n            return series;\n        }\n\n        var srcPoints = this.seriesSourcePoints(series, categoryAxis);\n        var result = deepExtend({}, series);\n        var aggregator = new SeriesAggregator(deepExtend({}, series), SeriesBinder.current, DefaultAggregates.current);\n        var data = result.data = [];\n\n        var dataItems = categoryAxis.options.dataItems || [];\n\n        var categoryItem = function (idx) {\n            var categoryIdx = idx - range.min;\n            var point = srcPoints[idx];\n            if (!point) {\n                point = srcPoints[idx] = {};\n            }\n\n            point.categoryIx = categoryIdx;\n\n            if (!point.item) {\n                var category = categoryAxis.categoryAt(idx, true);\n                point.category = category;\n                point.item = aggregator.aggregatePoints(point.items, category);\n            }\n\n            return point;\n        };\n\n        for (var idx = range.min; idx <= range.max; idx++) {\n            var point = categoryItem(idx);\n            data[point.categoryIx] = point.item;\n\n            if (point.items && point.items.length) {\n                dataItems[point.categoryIx] = point.item;\n            }\n        }\n\n        if (inArray(result.type, OUT_OF_RANGE_SERIES)) {\n            createOutOfRangePoints(result, range, categoryAxis.totalCount(), categoryItem, function (idx) { return srcPoints[idx]; });\n        }\n\n        categoryAxis.options.dataItems = dataItems;\n\n        return result;\n    },\n\n    appendChart: function(chart, pane) {\n        var series = chart.options.series;\n        var categoryAxis = this.seriesCategoryAxis(series[0]);\n        var categories = categoryAxis.options.categories;\n        var categoriesToAdd = Math.max(0, categoriesCount(series) - categories.length);\n\n        if (categoriesToAdd > 0) {//consider setting an option to axis instead of adding fake categories\n            categories = categoryAxis.options.categories = categoryAxis.options.categories.slice(0);\n            while (categoriesToAdd--) {\n                categories.push(\"\");\n            }\n        }\n\n        this.valueAxisRangeTracker.update(chart.valueAxisRanges);\n\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var axisName = series.axis;\n        var axisOptions = [].concat(options.valueAxis);\n        var axis = grep(axisOptions, function(a) { return a.name === axisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = (panes[0] || {}).name || \"default\";\n        var paneName = (axis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    seriesCategoryAxis: function(series) {\n        var axisName = series.categoryAxis;\n        var axis = axisName ? this.namedCategoryAxes[axisName] : this.categoryAxis;\n\n        if (!axis) {\n            throw new Error(\"Unable to locate category axis with name \" + axisName);\n        }\n\n        return axis;\n    },\n\n    stackableChartOptions: function(firstSeries, pane) {\n        var stack = firstSeries.stack;\n        var isStacked100 = stack && stack.type === \"100%\";\n        var clip = pane.options.clip;\n\n        return {\n            isStacked: stack,\n            isStacked100: isStacked100,\n            clip: clip\n        };\n    },\n\n    groupSeriesByCategoryAxis: function(series) {\n        var categoryAxes = [];\n        var unique = {};\n        for (var idx = 0; idx < series.length; idx++) {\n            var name = series[idx].categoryAxis || \"$$default$$\";\n            if (!unique.hasOwnProperty(name)) {\n                unique[name] = true;\n                categoryAxes.push(name);\n            }\n        }\n\n        var groups = [];\n        for (var axisIx = 0; axisIx < categoryAxes.length; axisIx++) {\n            var axis = categoryAxes[axisIx];\n            var axisSeries = groupSeries(series, axis, axisIx);\n            if (axisSeries.length === 0) {\n                continue;\n            }\n\n            groups.push(axisSeries);\n        }\n\n        return groups;\n    },\n\n    createBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var barChart = new BarChart(this, $.extend({\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(barChart, pane);\n    },\n\n    createRangeBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var rangeColumnChart = new RangeBarChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        });\n\n        this.appendChart(rangeColumnChart, pane);\n    },\n\n    createBulletChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var bulletChart = new BulletChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(bulletChart, pane);\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var lineChart = new LineChart(this, $.extend({\n            invertAxes: this.invertAxes,\n            series: series\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(lineChart, pane);\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var areaChart = new AreaChart(this, $.extend({\n            invertAxes: this.invertAxes,\n            series: series\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(areaChart, pane);\n    },\n\n    createRangeAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var rangeAreaChart = new RangeAreaChart(this, {\n            invertAxes: this.invertAxes,\n            series: series,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(rangeAreaChart, pane);\n    },\n\n    createOHLCChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new OHLCChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createCandlestickChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new CandlestickChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createBoxPlotChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new BoxPlotChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createWaterfallChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var waterfallChart = new WaterfallChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        });\n\n        this.appendChart(waterfallChart, pane);\n    },\n\n    axisRequiresRounding: function(categoryAxisName, categoryAxisIndex) {\n        var this$1$1 = this;\n\n        var centeredSeries = filterSeriesByType(this.series, EQUALLY_SPACED_SERIES);\n\n        for (var seriesIx = 0; seriesIx < this.series.length; seriesIx++) {\n            var currentSeries = this$1$1.series[seriesIx];\n            if (inArray(currentSeries.type, AREA_SERIES)) {\n                var line = currentSeries.line;\n                if (line && line.style === STEP) {\n                    centeredSeries.push(currentSeries);\n                }\n            }\n        }\n\n        for (var seriesIx$1 = 0; seriesIx$1 < centeredSeries.length; seriesIx$1++) {\n            var seriesAxis = centeredSeries[seriesIx$1].categoryAxis || \"\";\n            if (seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) {\n                return true;\n            }\n        }\n    },\n\n    aggregatedAxis: function(categoryAxisName, categoryAxisIndex) {\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var seriesAxis = series[seriesIx].categoryAxis || \"\";\n            if ((seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) && series[seriesIx].categoryField) {\n                return true;\n            }\n        }\n    },\n\n    createCategoryAxesLabels: function() {\n        var axes = this.axes;\n        for (var i = 0; i < axes.length; i++) {\n            if (axes[i] instanceof CategoryAxis) {\n                axes[i].createLabels();\n            }\n        }\n    },\n\n    createCategoryAxes: function(panes) {\n        var this$1$1 = this;\n\n        var invertAxes = this.invertAxes;\n        var definitions = [].concat(this.options.categoryAxis);\n        var axes = [];\n\n        for (var i = 0; i < definitions.length; i++) {\n            var axisOptions = definitions[i];\n            var axisPane = this$1$1.findPane(axisOptions.pane);\n\n            if (inArray(axisPane, panes)) {\n                var name = axisOptions.name;\n                var categories = axisOptions.categories; if (categories === void 0) { categories = []; }\n                axisOptions = deepExtend({\n                    vertical: invertAxes,\n                    reverse: !invertAxes && this$1$1.chartService.rtl,\n                    axisCrossingValue: invertAxes ? MAX_VALUE : 0\n                }, axisOptions);\n\n                if (!defined(axisOptions.justified)) {\n                    axisOptions.justified = this$1$1.isJustified();\n                }\n\n                if (this$1$1.axisRequiresRounding(name, i)) {\n                    axisOptions.justified = false;\n                }\n\n                var categoryAxis = (void 0);\n\n                if (isDateAxis(axisOptions, categories[0])) {\n                    axisOptions._forecast = this$1$1.trendlineAggregateForecast();\n                    categoryAxis = new dataviz.DateCategoryAxis(axisOptions, this$1$1.chartService);\n                } else {\n                    categoryAxis = new CategoryAxis(axisOptions, this$1$1.chartService);\n                }\n\n                definitions[i].categories = categoryAxis.options.srcCategories;\n\n                if (name) {\n                    if (this$1$1.namedCategoryAxes[name]) {\n                        throw new Error((\"Category axis with name \" + name + \" is already defined\"));\n                    }\n                    this$1$1.namedCategoryAxes[name] = categoryAxis;\n                }\n\n                categoryAxis.axisIndex = i;\n                axes.push(categoryAxis);\n                this$1$1.appendAxis(categoryAxis);\n            }\n        }\n\n        var primaryAxis = this.categoryAxis || axes[0];\n        this.categoryAxis = primaryAxis;\n\n        if (invertAxes) {\n            this.axisY = primaryAxis;\n        } else {\n            this.axisX = primaryAxis;\n        }\n    },\n\n    isJustified: function() {\n        var series = this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            if (!inArray(currentSeries.type, AREA_SERIES)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    createValueAxes: function(panes) {\n        var this$1$1 = this;\n\n        var tracker = this.valueAxisRangeTracker;\n        var defaultRange = tracker.query();\n        var definitions = [].concat(this.options.valueAxis);\n        var invertAxes = this.invertAxes;\n        var baseOptions = { vertical: !invertAxes, reverse: invertAxes && this.chartService.rtl };\n        var axes = [];\n\n        if (this.stack100) {\n            baseOptions.roundToMajorUnit = false;\n            baseOptions.labels = { format: \"P0\" };\n        }\n\n        for (var i = 0; i < definitions.length; i++) {\n            var axisOptions = definitions[i];\n            var axisPane = this$1$1.findPane(axisOptions.pane);\n\n            if (inArray(axisPane, panes)) {\n                var name = axisOptions.name;\n                var defaultAxisRange = equalsIgnoreCase(axisOptions.type, LOGARITHMIC) ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n                var range = tracker.query(name) || defaultRange || defaultAxisRange;\n\n                if (i === 0 && range && defaultRange) {\n                    range.min = Math.min(range.min, defaultRange.min);\n                    range.max = Math.max(range.max, defaultRange.max);\n                }\n\n                var axisType = (void 0);\n                if (equalsIgnoreCase(axisOptions.type, LOGARITHMIC)) {\n                    axisType = dataviz.LogarithmicAxis;\n                } else {\n                    axisType = dataviz.NumericAxis;\n                }\n\n                var valueAxis = new axisType(range.min, range.max,\n                    deepExtend({}, baseOptions, axisOptions),\n                    this$1$1.chartService\n                );\n\n                if (name) {\n                    if (this$1$1.namedValueAxes[name]) {\n                        throw new Error((\"Value axis with name \" + name + \" is already defined\"));\n                    }\n                    this$1$1.namedValueAxes[name] = valueAxis;\n                }\n                valueAxis.axisIndex = i;\n\n                axes.push(valueAxis);\n                this$1$1.appendAxis(valueAxis);\n            }\n        }\n\n        var primaryAxis = this.valueAxis || axes[0];\n        this.valueAxis = primaryAxis;\n\n        if (invertAxes) {\n            this.axisX = primaryAxis;\n        } else {\n            this.axisY = primaryAxis;\n        }\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var pane = this.pointPane(point);\n        var categories = [];\n        var values = [];\n\n        if (!pane) {\n            return;\n        }\n\n        var allAxes = pane.axes;\n        for (var i = 0; i < allAxes.length; i++) {\n            var axis = allAxes[i];\n            if (axis.getValue) {\n                appendIfNotNull(values, axis.getValue(point));\n            } else {\n                appendIfNotNull(categories, axis.getCategory(point));\n            }\n        }\n\n        if (categories.length === 0) {\n            appendIfNotNull(categories, this.categoryAxis.getCategory(point));\n        }\n\n        if (categories.length > 0 && values.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                category: singleItemOrArray(categories),\n                value: singleItemOrArray(values)\n            });\n        }\n    },\n\n    pointPane: function(point) {\n        var panes = this.panes;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            if (currentPane.contentBox.containsPoint(point)) {\n                return currentPane;\n            }\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        updateAxisOptions(this.options, axis, options);\n        updateAxisOptions(this.originalOptions, axis, options);\n    }\n});\n\nfunction updateAxisOptions(targetOptions, axis, options) {\n    var axesOptions = axis instanceof CategoryAxis ? [].concat(targetOptions.categoryAxis) : [].concat(targetOptions.valueAxis);\n    deepExtend(axesOptions[axis.axisIndex], options);\n}\n\nfunction groupSeries(series, axis, axisIx) {\n    return grep(series, function(s) {\n        return (axisIx === 0 && !s.categoryAxis) || (s.categoryAxis === axis);\n    });\n}\n\nsetDefaultOptions(CategoricalPlotArea, {\n    categoryAxis: {},\n    valueAxis: {}\n});\n\ndeepExtend(CategoricalPlotArea.prototype, PlotAreaEventsMixin);\n\nvar Highlight = Class.extend({\n    init: function() {\n\n        this._points = [];\n    },\n\n    destroy: function() {\n        this._points = [];\n    },\n\n    show: function(points, opacity) {\n        var this$1$1 = this;\n\n        var arrayPoints = [].concat(points);\n        this.hide();\n\n        for (var i = 0; i < arrayPoints.length; i++) {\n            var point = arrayPoints[i];\n            if (point && point.toggleHighlight && point.hasHighlight()) {\n                this$1$1.togglePointHighlight(point, true, opacity);\n                this$1$1._points.push(point);\n            }\n        }\n    },\n\n    togglePointHighlight: function(point, show, opacity) {\n        var toggleHandler = (point.options.highlight || {}).toggle;\n        if (toggleHandler) {\n            var eventArgs = {\n                category: point.category,\n                series: point.series,\n                dataItem: point.dataItem,\n                value: point.value,\n                stackValue: point.stackValue,\n                preventDefault: preventDefault,\n                visual: point.highlightVisual(),\n                show: show\n            };\n            toggleHandler(eventArgs);\n            if (!eventArgs._defaultPrevented) {\n                point.toggleHighlight(show, opacity);\n            }\n        } else {\n            point.toggleHighlight(show, opacity);\n        }\n    },\n\n    hide: function() {\n        var this$1$1 = this;\n\n        var points = this._points;\n        while (points.length) {\n            this$1$1.togglePointHighlight(points.pop(), false);\n        }\n    },\n\n    isHighlighted: function(element) {\n        var points = this._points;\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            if (element === point) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n});\n\nfunction preventDefault() {\n    this._defaultPrevented = true;\n}\n\nfunction acceptKey(e, mouseKey) {\n    var key = (mouseKey || \"\").toLowerCase();\n    var event = e.event;\n    var accept = (key === \"none\" && !(event.ctrlKey || event.shiftKey || event.altKey)) || event[key + \"Key\"];\n\n    return accept;\n}\n\nfunction toChartAxisRanges(axisRanges) {\n    var ranges = {};\n    for (var idx = 0; idx < axisRanges.length; idx++) {\n        var axisRange = axisRanges[idx];\n        if (axisRange.axis.options.name) {\n            ranges[axisRange.axis.options.name] = {\n                min: axisRange.range.min,\n                max: axisRange.range.max\n            };\n        }\n    }\n    return ranges;\n}\n\nvar Pannable = Class.extend({\n    init: function(plotArea, options) {\n\n        this.plotArea = plotArea;\n        this.options = deepExtend({}, this.options, options);\n    },\n\n    start: function(e) {\n        this._active = acceptKey(e, this.options.key);\n        return this._active;\n    },\n\n    move: function(e) {\n        if (this._active) {\n            var axisRanges = this.axisRanges = this._panAxes(e, X).concat(this._panAxes(e, Y));\n            if (axisRanges.length) {\n                this.axisRanges = axisRanges;\n                return toChartAxisRanges(axisRanges);\n            }\n        }\n    },\n\n    end: function() {\n        var active = this._active;\n        this._active = false;\n\n        return active;\n    },\n\n    pan: function() {\n        var ref = this;\n        var plotArea = ref.plotArea;\n        var axisRanges = ref.axisRanges;\n        if (axisRanges.length) {\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var range = axisRanges[idx];\n                plotArea.updateAxisOptions(range.axis, range.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        delete this.plotArea;\n    },\n\n    _panAxes: function(e, position) {\n        var plotArea = this.plotArea;\n        var delta = -e[position].delta;\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var updatedAxes = [];\n\n        if (delta !== 0 && (lock || \"\").toLowerCase() !== position) {\n            var axes = plotArea.axes;\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n\n                if (position === X && !axis.options.vertical || position === Y && axis.options.vertical) {\n                    var range = axis.pan(delta);\n\n                    if (range) {\n                        range.limitRange = true;\n                        updatedAxes.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n        }\n\n        return updatedAxes;\n    }\n});\n\nPannable.prototype.options = {\n    key: \"none\",\n    lock: \"none\"\n};\n\nvar ZoomSelection = Class.extend({\n    init: function(chart, options) {\n\n        this.chart = chart;\n        this.options = deepExtend({}, this.options, options);\n        this.createElement();\n    },\n\n    createElement: function() {\n        var marquee = this._marquee = document.createElement(\"div\");\n        marquee.className = \"k-marquee\";\n        var marqueeColor = document.createElement(\"div\");\n        marqueeColor.className = \"k-marquee-color\";\n        marquee.appendChild(marqueeColor);\n    },\n\n    removeElement: function() {\n        if (this._marquee.parentNode) {\n            this._marquee.parentNode.removeChild(this._marquee);\n        }\n    },\n\n    setStyles: function(styles) {\n        elementStyles(this._marquee, styles);\n    },\n\n    start: function(e) {\n        if (acceptKey(e, this.options.key)) {\n            var chart = this.chart;\n            var point = chart._eventCoordinates(e);\n            var zoomPane = this._zoomPane = chart._plotArea.paneByPoint(point);\n            var clipBox = zoomPane ? zoomPane.chartsBox().clone() : null;\n\n            if (zoomPane && clipBox) {\n                var offset = this._elementOffset();\n\n                clipBox.translate(offset.left, offset.top);\n                this._zoomPaneClipBox = clipBox;\n\n                document.body.appendChild(this._marquee);\n                this.setStyles({\n                    left: e.pageX + 1,\n                    top: e.pageY + 1,\n                    width: 0,\n                    height: 0\n                });\n\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _elementOffset: function() {\n        var chartElement = this.chart.element;\n        var ref = elementStyles(chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref.paddingLeft;\n        var paddingTop = ref.paddingTop;\n        var offset = dataviz.elementOffset(chartElement);\n\n        return {\n            left: paddingLeft + offset.left,\n            top: paddingTop + offset.top\n        };\n    },\n\n    move: function(e) {\n        var zoomPane = this._zoomPane;\n        if (zoomPane) {\n            this.setStyles(this._selectionPosition(e));\n        }\n    },\n\n    end: function(e) {\n        var zoomPane = this._zoomPane;\n        if (zoomPane) {\n            var elementOffset$$1 = this._elementOffset();\n            var selectionPosition = this._selectionPosition(e);\n            selectionPosition.left -= elementOffset$$1.left;\n            selectionPosition.top -= elementOffset$$1.top;\n\n            var start = { x: selectionPosition.left, y: selectionPosition.top };\n            var end = { x: selectionPosition.left + selectionPosition.width, y: selectionPosition.top + selectionPosition.height };\n            this._updateAxisRanges(start, end);\n\n            this.removeElement();\n            delete this._zoomPane;\n\n            return toChartAxisRanges(this.axisRanges);\n        }\n    },\n\n    zoom: function() {\n        var axisRanges = this.axisRanges;\n        if (axisRanges && axisRanges.length) {\n            var plotArea = this.chart._plotArea;\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var axisRange = axisRanges[idx];\n                plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        this.removeElement();\n        delete this._marquee;\n        delete this.chart;\n    },\n\n    _updateAxisRanges: function(start, end) {\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var axisRanges = [];\n\n        var axes = this._zoomPane.axes;\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            var vertical = axis.options.vertical;\n            if (!(lock === X && !vertical) && !(lock === Y && vertical) && defined(axis.axisIndex)) {\n                var range = axis.pointsRange(start, end);\n                if (range) {\n                    axisRanges.push({\n                        axis: axis,\n                        range: range\n                    });\n                }\n            }\n        }\n\n        this.axisRanges = axisRanges;\n    },\n\n    _selectionPosition: function(e) {\n        var clipBox = this._zoomPaneClipBox;\n        var startLocation = {\n            x: e.x.startLocation,\n            y: e.y.startLocation\n        };\n        var pageX = e.x.location;\n        var pageY = e.y.location;\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var left = Math.min(startLocation.x, pageX);\n        var top = Math.min(startLocation.y, pageY);\n        var width = Math.abs(startLocation.x - pageX);\n        var height = Math.abs(startLocation.y - pageY);\n\n        if (lock === X) {\n            left = clipBox.x1;\n            width = clipBox.width();\n        }\n        if (lock === Y) {\n            top = clipBox.y1;\n            height = clipBox.height();\n        }\n\n        if (pageX > clipBox.x2) {\n            width = clipBox.x2 - startLocation.x;\n        }\n\n        if (pageX < clipBox.x1) {\n            width = startLocation.x - clipBox.x1;\n        }\n\n        if (pageY > clipBox.y2) {\n            height = clipBox.y2 - startLocation.y;\n        }\n\n        if (pageY < clipBox.y1) {\n            height = startLocation.y - clipBox.y1;\n        }\n\n        return {\n            left: Math.max(left, clipBox.x1),\n            top: Math.max(top, clipBox.y1),\n            width: width,\n            height: height\n        };\n    }\n});\n\nZoomSelection.prototype.options = {\n    key: \"shift\",\n    lock: \"none\"\n};\n\nvar ref = drawing.util;\nvar limitValue$1 = ref.limitValue;\n\n// Limit the zoom rate between 1% and 90% per mousewheel event.\n// At zoom rates close to 100% the axis range quickly becomes 0.\nvar MIN_RATE = 0.01;\nvar MAX_RATE = 0.9;\nvar DEFAULT_RATE = 0.3;\n\nvar MousewheelZoom = Class.extend({\n    init: function(chart, options) {\n\n        this.chart = chart;\n        this.options = deepExtend({\n            rate: DEFAULT_RATE\n        }, this.options, options);\n    },\n\n    updateRanges: function(delta, coords) {\n        var this$1$1 = this;\n\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var axisRanges = [];\n        var axes = this.chart._plotArea.axes;\n\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            var vertical = axis.options.vertical;\n\n            if (!(lock === X && !vertical) && !(lock === Y && vertical) && axis.zoomRange) {\n                var rate = limitValue$1(this$1$1.options.rate, MIN_RATE, MAX_RATE);\n                var range = axis.zoomRange(-delta * rate, coords);\n\n                if (range) {\n                    axisRanges.push({\n                        axis: axis,\n                        range: range\n                    });\n                }\n            }\n        }\n\n        this.axisRanges = axisRanges;\n        return toChartAxisRanges(axisRanges);\n    },\n\n    zoom: function() {\n        var axisRanges = this.axisRanges;\n        var plotArea = this.chart._plotArea;\n\n        if (axisRanges && axisRanges.length && plotArea.updateAxisOptions) {\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var axisRange = axisRanges[idx];\n                plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        delete this.chart;\n    }\n});\n\nvar LegendLayout = ChartElement.extend({\n    init: function(options, chartService) {\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n    },\n\n    render: function() {\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var vertical = options.vertical;\n\n        this.visual = new drawing.Layout(null, {\n            spacing: vertical ? 0 : options.spacing,\n            lineSpacing: vertical ? options.spacing : 0,\n            orientation: vertical ? \"vertical\" : \"horizontal\",\n            reverse: options.rtl,\n            alignItems: vertical ? \"start\" : \"center\"\n        });\n\n        for (var idx = 0; idx < children.length; idx++) {\n            var legendItem = children[idx];\n            legendItem.reflow(new Box());\n            legendItem.renderVisual();\n        }\n    },\n\n    reflow: function(box) {\n        this.visual.rect(box.toRect());\n        this.visual.reflow();\n        var bbox = this.visual.clippedBBox();\n\n        if (bbox) {\n            this.box = dataviz.rectToBox(bbox);\n        } else {\n            this.box = new Box();\n        }\n    },\n\n    renderVisual: function() {\n        this.addVisual();\n    },\n\n    createVisual: function() {}\n});\n\nvar LegendItem = BoxElement.extend({\n    init: function(options) {\n        BoxElement.fn.init.call(this, options);\n\n        this.createContainer();\n        if (!options.rtl) {\n            this.createMarker();\n            this.createLabel();\n        } else {\n            this.createLabel();\n            this.createMarker();\n        }\n    },\n\n    createContainer: function() {\n        this.container = new dataviz.FloatElement({ vertical: false, wrap: false, align: CENTER, spacing: this.options.spacing });\n        this.append(this.container);\n    },\n\n    createMarker: function() {\n        this.container.append(new ShapeElement(this.markerOptions()));\n    },\n\n    markerOptions: function() {\n        var options = this.options;\n        var markerColor = options.markerColor;\n        return deepExtend({}, options.markers, {\n            background: markerColor,\n            border: {\n                color: markerColor\n            }\n        });\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labelOptions = deepExtend({}, options.labels);\n\n        this.container.append(new TextBox(options.text, labelOptions));\n    },\n\n    renderComplete: function() {\n        BoxElement.fn.renderComplete.call(this);\n\n        var cursor = this.options.cursor || {};\n        var eventSink = this._itemOverlay = Path.fromRect(this.container.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null,\n            cursor: cursor.style || cursor\n        });\n\n        this.appendVisual(eventSink);\n    },\n\n    click: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_CLICK, args) && e && e.type === 'contextmenu') {\n            e.preventDefault();\n        }\n    },\n\n    over: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_HOVER, args)) {\n            widget._legendItemHover(args.seriesIndex, args.pointIndex);\n        }\n\n        // Don't trigger point hover for legend items\n        return true;\n    },\n\n    out: function(widget, e) {\n        widget._unsetActivePoint();\n\n        widget.trigger(LEGEND_ITEM_LEAVE, this.eventArgs(e));\n    },\n\n    eventArgs: function(e) {\n        var options = this.options;\n\n        return {\n            element: eventElement(e),\n            text: options.text,\n            series: options.series,\n            seriesIndex: options.series.index,\n            pointIndex: options.pointIndex\n        };\n    },\n\n    renderVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var customVisual = options.visual;\n\n        if (customVisual) {\n            this.visual = customVisual({\n                active: options.active,\n                series: options.series,\n                sender: this.getSender(),\n                pointIndex: options.pointIndex,\n                options: {\n                    markers: this.markerOptions(),\n                    labels: options.labels\n                },\n                createVisual: function () {\n                    this$1$1.createVisual();\n                    this$1$1.renderChildren();\n                    this$1$1.renderComplete();\n\n                    var defaultVisual = this$1$1.visual;\n\n                    delete this$1$1.visual;\n\n                    return defaultVisual;\n                }\n            });\n            this.addVisual();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    }\n});\n\nvar HORIZONTAL = \"horizontal\";\nvar POINTER = \"pointer\";\nvar CUSTOM = \"custom\";\n\nvar Legend = ChartElement.extend({\n    init: function(options, chartService) {\n        if (chartService === void 0) { chartService = {}; }\n\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!inArray(this.options.position, [ TOP, RIGHT, BOTTOM, LEFT, CUSTOM ])) {\n            this.options.position = RIGHT;\n        }\n\n        this.createContainers();\n\n        this.createLegendTitle(options.title);\n\n        this.createItems();\n    },\n\n    createContainers: function() {\n        var options = this.options;\n        var position = options.position;\n        var userAlign = options.align;\n        var align = position;\n        var vAlign = CENTER;\n\n        if (position === CUSTOM) {\n            align = LEFT;\n        } else if (inArray(position, [ TOP, BOTTOM ])) {\n            if (userAlign === \"start\") {\n                align = LEFT;\n            } else if (userAlign === \"end\") {\n                align = RIGHT;\n            } else {\n                align = CENTER;\n            }\n            vAlign = position;\n        } else if (userAlign) {\n            if (userAlign === \"start\") {\n                vAlign = TOP;\n            } else if (userAlign === \"end\") {\n                vAlign = BOTTOM;\n            }\n        }\n\n        this.container = new BoxElement({\n            margin: options.margin,\n            padding: options.padding,\n            background: options.background,\n            border: options.border,\n            vAlign: vAlign,\n            align: align,\n            zIndex: options.zIndex,\n            shrinkToFit: true\n        });\n\n        if (this.hasTitle()) {\n            this.itemsContainer = new BoxElement({\n                vAlign: vAlign,\n                align: align,\n                zIndex: options.zIndex,\n                shrinkToFit: true\n            });\n        } else {\n            this.itemsContainer = this.container;\n        }\n\n        this.append(this.container);\n    },\n\n    createItems: function() {\n        var chartService = this.getService();\n        var options = this.options;\n        var vertical = this.isVertical();\n        var innerElement = new LegendLayout({\n            vertical: vertical,\n            spacing: options.spacing,\n            rtl: chartService.rtl\n        }, chartService);\n        var items = options.items;\n\n        if (options.reverse) {\n            items = items.slice(0).reverse();\n        }\n\n        var count = items.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = items[i];\n\n            innerElement.append(new LegendItem(deepExtend({}, {\n                markers: options.markers,\n                labels: options.labels,\n                rtl: chartService.rtl\n            }, options.item, item)));\n        }\n\n        innerElement.render();\n        this.itemsContainer.append(innerElement);\n    },\n\n    isVertical: function() {\n        var ref = this.options;\n        var orientation = ref.orientation;\n        var position = ref.position;\n        var vertical = (position === CUSTOM && orientation !== HORIZONTAL) ||\n               (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [ LEFT, RIGHT ]));\n\n        return vertical;\n    },\n\n    hasItems: function() {\n        return this.container.children[0].children.length > 0;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var legendBox = targetBox.clone();\n\n        if (!this.hasItems()) {\n            this.box = legendBox;\n            return;\n        }\n\n        if (options.position === CUSTOM) {\n            this.containerCustomReflow(legendBox);\n            this.box = legendBox;\n        } else {\n            this.containerReflow(legendBox);\n        }\n\n        if (this.hasTitle()) {\n            this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n        }\n    },\n\n    containerReflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var position = options.position;\n        var width = options.width;\n        var height = options.height;\n        var pos = position === TOP || position === BOTTOM ? X : Y;\n        var vertical = this.isVertical();\n        var alignTarget = targetBox.clone();\n        var containerBox = targetBox.clone();\n\n        if (position === LEFT || position === RIGHT) {\n            containerBox.y1 = alignTarget.y1 = 0;\n        }\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n            containerBox.align(alignTarget, Y, container.options.vAlign);\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n            containerBox.align(alignTarget, X, container.options.align);\n        }\n\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        var box = containerBox.clone();\n\n        if (options.offsetX || options.offsetY) {\n            containerBox.translate(options.offsetX, options.offsetY);\n            container.reflow(containerBox);\n        }\n\n        box[pos + 1] = targetBox[pos + 1];\n        box[pos + 2] = targetBox[pos + 2];\n\n        this.box = box;\n    },\n\n    containerCustomReflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var offsetX = options.offsetX;\n        var offsetY = options.offsetY;\n        var width = options.width;\n        var height = options.height;\n        var vertical = this.isVertical();\n        var containerBox = targetBox.clone();\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n        }\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        container.reflow(new Box(\n            offsetX, offsetY,\n            offsetX + containerBox.width(), offsetY + containerBox.height()\n        ));\n    },\n\n    renderVisual: function() {\n        if (this.hasItems()) {\n            ChartElement.fn.renderVisual.call(this);\n        }\n    },\n\n    createLegendTitle: function(title) {\n        var titleOptions = deepExtend({}, {\n            color: BLACK,\n            position: TOP,\n            align: CENTER\n        }, title);\n        var text = titleOptions.text;\n\n        if (!title || title.visible === false) {\n            return;\n        }\n\n        if (defined(titleOptions) && titleOptions.visible) {\n            var labelTemplate = getTemplate(titleOptions);\n            if (labelTemplate) {\n                text = labelTemplate({ text: text });\n            } else if (titleOptions.format) {\n                text = this.chartService.format.auto(titleOptions.format, text);\n            }\n        }\n\n        this.title = new TextBox(text, titleOptions);\n\n        this.createTitleLayout();\n\n        this.appendTitleLayoutContent();\n    },\n\n    createTitleLayout: function() {\n        this.layout = new dataviz.FloatElement({\n            vertical: true,\n            wrap: false\n        });\n\n        this.container.append(this.layout);\n    },\n\n    hasTitle: function() {\n        return Boolean(this.options.title && this.options.title.visible !== false);\n    },\n\n    appendTitleLayoutContent: function() {\n        var options = this.options;\n\n        if (options.title.position === BOTTOM) {\n            this.layout.append(this.itemsContainer);\n            this.layout.append(this.title);\n        } else {\n            this.layout.append(this.title);\n            this.layout.append(this.itemsContainer);\n        }\n    }\n});\n\nsetDefaultOptions(Legend, {\n    position: RIGHT,\n    items: [],\n    offsetX: 0,\n    offsetY: 0,\n    margin: getSpacing(5),\n    padding: getSpacing(5),\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    item: {\n        cursor: POINTER,\n        spacing: 6\n    },\n    spacing: 6,\n    background: \"\",\n    zIndex: 1,\n    markers: {\n        border: {\n            width: 0\n        },\n        width: 15,\n        height: 3,\n        type: \"rect\",\n        align: LEFT,\n        vAlign: CENTER\n    }\n});\n\nvar PlotAreaFactory = Class.extend({\n    init: function() {\n\n        this._registry = [];\n    },\n\n    register: function(type, seriesTypes) {\n        this._registry.push({\n            type: type,\n            seriesTypes: seriesTypes\n        });\n    },\n\n    create: function(srcSeries, options, chartService) {\n        var registry = this._registry;\n        var match = registry[0];\n        var series;\n\n        for (var idx = 0; idx < registry.length; idx++) {\n            var entry = registry[idx];\n            series = filterSeriesByType(srcSeries, entry.seriesTypes);\n            var trendlines = filterSeriesByType(srcSeries, TRENDLINE_SERIES);\n\n            if ((series.length - trendlines.length) > 0) {\n                match = entry;\n                break;\n            }\n        }\n\n        return new match.type(series, options, chartService);\n    }\n});\n\nPlotAreaFactory.current = new PlotAreaFactory();\n\nvar ZOOM_ACCELERATION = 3;\nvar SELECTOR_HEIGHT_ADJUST = 0.1;\n\nfunction createDiv(classNames) {\n    var element = document.createElement(\"div\");\n    if (classNames) {\n        element.className = classNames;\n    }\n\n    return element;\n}\n\nfunction closestHandle(element) {\n    var current = element;\n    while (current && !dataviz.hasClasses(current, \"k-handle\")) {\n        current = current.parentNode;\n    }\n\n    return current;\n}\n\nvar Selection = Class.extend({\n    init: function(chart, categoryAxis, options, observer) {\n\n        var chartElement = chart.element;\n\n        this.options = deepExtend({}, this.options, options);\n        this.chart = chart;\n        this.observer = observer;\n        this.chartElement = chartElement;\n        this.categoryAxis = categoryAxis;\n        this._dateAxis = this.categoryAxis instanceof dataviz.DateCategoryAxis;\n\n        this.initOptions();\n\n        this.visible = this.options.visible && chartElement.offsetHeight;\n\n        if (this.visible) {\n            this.createElements();\n\n            this.set(this._index(this.options.from), this._index(this.options.to));\n\n            this.bindEvents();\n        }\n    },\n\n    onPane: function(pane) {\n        return this.categoryAxis.pane === pane;\n    },\n\n    createElements: function() {\n        var options = this.options;\n        var wrapper = this.wrapper = createDiv(\"k-selector k-pointer-events-none\");\n        elementStyles(wrapper, {\n            top: options.offset.top,\n            left: options.offset.left,\n            width: options.width,\n            height: options.height,\n            direction: 'ltr'\n        });\n\n        var selection = this.selection = createDiv(\"k-selection k-pointer-events-none\");\n\n        this.leftMask = createDiv(\"k-mask k-pointer-events-none\");\n        this.rightMask = createDiv(\"k-mask k-pointer-events-none\");\n\n        wrapper.appendChild(this.leftMask);\n        wrapper.appendChild(this.rightMask);\n        wrapper.appendChild(selection);\n\n        var body = this.body = createDiv(\"k-selection-bg k-pointer-events-none\");\n        selection.appendChild(body);\n\n        var leftHandle = this.leftHandle = createDiv(\"k-handle k-left-handle k-pointer-events-auto\");\n        var rightHandle = this.rightHandle = createDiv(\"k-handle k-right-handle k-pointer-events-auto\");\n        leftHandle.appendChild(createDiv());\n        rightHandle.appendChild(createDiv());\n\n        selection.appendChild(leftHandle);\n        selection.appendChild(rightHandle);\n\n        this.chartElement.appendChild(wrapper);\n        var selectionStyles = elementStyles(selection, [ \"borderLeftWidth\", \"borderRightWidth\", \"height\" ]);\n        var leftHandleHeight = elementStyles(leftHandle, \"height\").height;\n        var rightHandleHeight = elementStyles(rightHandle, \"height\").height;\n\n        options.selection = {\n            border: {\n                left: selectionStyles.borderLeftWidth,\n                right: selectionStyles.borderRightWidth\n            }\n        };\n\n        elementStyles(leftHandle, {\n            top: (selectionStyles.height - leftHandleHeight) / 2\n        });\n\n        elementStyles(rightHandle, {\n            top: (selectionStyles.height - rightHandleHeight) / 2\n        });\n\n        /* eslint no-self-assign: \"off\" */\n        wrapper.style.cssText = wrapper.style.cssText;\n    },\n\n    bindEvents: function() {\n        if (this.options.mousewheel !== false) {\n            this._mousewheelHandler = this._mousewheel.bind(this);\n            var obj;\n            bindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n        }\n\n        this._domEvents = services.DomEventsBuilder.create(this.chartElement, {\n            stopPropagation: true, // applicable for the jQuery UserEvents\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            press: this._press.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n    },\n\n    initOptions: function() {\n        var ref = this;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var box = categoryAxis.pane.chartsBox();\n        var intlService = this.chart.chartService.intl;\n\n        if (this._dateAxis) {\n            deepExtend(options, {\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                from: parseDate(intlService, options.from),\n                to: parseDate(intlService, options.to)\n            });\n        }\n\n        var ref$1 = elementStyles(this.chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref$1.paddingLeft;\n        var paddingTop = ref$1.paddingTop;\n\n        this.options = deepExtend({}, {\n            width: box.width(),\n            height: box.height() + SELECTOR_HEIGHT_ADJUST, //workaround for sub-pixel hover on the paths in chrome\n            padding: {\n                left: paddingLeft,\n                top: paddingTop\n            },\n            offset: {\n                left: box.x1 + paddingLeft,\n                top: box.y1 + paddingTop\n            },\n            from: options.min,\n            to: options.max\n        }, options);\n    },\n\n    destroy: function() {\n        if (this._domEvents) {\n            this._domEvents.destroy();\n            delete this._domEvents;\n        }\n\n        clearTimeout(this._mwTimeout);\n        this._state = null;\n\n        if (this.wrapper) {\n            if (this._mousewheelHandler) {\n                var obj;\n                unbindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n                this._mousewheelHandler = null;\n            }\n\n            this.chartElement.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    },\n\n    _rangeEventArgs: function(range) {\n\n        return {\n            axis: this.categoryAxis.options,\n            from: this._value(range.from),\n            to: this._value(range.to)\n        };\n    },\n\n    _pointInPane: function(x, y) {\n        var paneBox = this.categoryAxis.pane.box;\n        var modelCoords = this.chart._toModelCoordinates(x, y);\n        return paneBox.containsPoint(modelCoords);\n    },\n\n    _start: function(e) {\n        var options = this.options;\n        var target = eventElement(e);\n        if (this._state || !target) {\n            return;\n        }\n\n        var coords = dataviz.eventCoordinates(e);\n        var inPane = this._pointInPane(coords.x, coords.y);\n        if (!inPane) {\n            return;\n        }\n\n        var handle = closestHandle(target);\n        var bodyRect = this.body.getBoundingClientRect();\n        var inBody = !handle && coords.x >= bodyRect.x && coords.x <= bodyRect.x + bodyRect.width &&\n                       coords.y >= bodyRect.y && coords.y <= bodyRect.y + bodyRect.height;\n\n        this.chart._unsetActivePoint();\n        this._state = {\n            moveTarget: handle,\n            startLocation: e.x ? e.x.location : 0,\n            inBody: inBody,\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n\n        var args = this._rangeEventArgs({\n            from: this._index(options.from),\n            to: this._index(options.to)\n        });\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        }\n    },\n\n    _press: function(e) {\n        var handle;\n        if (this._state) {\n            handle = this._state.moveTarget;\n        } else {\n            handle = closestHandle(eventElement(e));\n        }\n        if (handle) {\n            dataviz.addClass(handle, \"k-handle-active\");\n        }\n    },\n\n    _move: function(e) {\n        if (!this._state) {\n            return;\n        }\n\n        var ref = this;\n        var state = ref._state;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var range = state.range;\n        var target = state.moveTarget;\n        var reverse = categoryAxis.options.reverse;\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var delta = state.startLocation - e.x.location;\n        var oldRange = { from: range.from, to: range.to };\n        var span = range.to - range.from;\n        var scale = elementStyles(this.wrapper, \"width\").width / (categoryAxis.categoriesCount() - 1);\n        var offset = Math.round(delta / scale) * (reverse ? -1 : 1);\n\n        if (!target && !state.inBody) {\n            return;\n        }\n\n        var leftHandle = target && dataviz.hasClasses(target, \"k-left-handle\");\n        var rightHandle = target && dataviz.hasClasses(target, \"k-right-handle\");\n\n        if (state.inBody) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - span\n            );\n            range.to = Math.min(\n                range.from + span,\n                max\n            );\n        } else if ((leftHandle && !reverse) || (rightHandle && reverse)) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - 1\n            );\n            range.to = Math.max(range.from + 1, range.to);\n        } else if ((leftHandle && reverse) || (rightHandle && !reverse)) {\n            range.to = Math.min(\n                Math.max(min + 1, to - offset),\n                max\n            );\n            range.from = Math.min(range.to - 1, range.from);\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.move(range.from, range.to);\n            this.trigger(SELECT, this._rangeEventArgs(range));\n        }\n    },\n\n    _end: function() {\n        if (this._state) {\n            var moveTarget = this._state.moveTarget;\n            if (moveTarget) {\n                dataviz.removeClass(moveTarget, \"k-handle-active\");\n            }\n\n            var range = this._state.range;\n            this.set(range.from, range.to);\n            this.trigger(SELECT_END, this._rangeEventArgs(range));\n\n            delete this._state;\n        }\n    },\n\n    _tap: function(e) {\n        var ref = this;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var coords = this.chart._eventCoordinates(e);\n        var categoryIx = categoryAxis.pointCategoryIndex(new Point(coords.x, categoryAxis.box.y1));\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var span = to - from;\n        var mid = from + span / 2;\n        var range = {};\n        var rightClick = e.event.which === 3;\n        var offset = Math.round(mid - categoryIx);\n\n        if (this._state || rightClick) {\n            return;\n        }\n\n        this.chart._unsetActivePoint();\n\n        if (!categoryAxis.options.justified) {\n            offset--;\n        }\n\n        range.from = Math.min(\n            Math.max(min, from - offset),\n            max - span\n        );\n\n        range.to = Math.min(range.from + span, max);\n\n        this._start(e);\n\n        if (this._state) {\n            this._state.range = range;\n            this.trigger(SELECT, this._rangeEventArgs(range));\n            this._end();\n        }\n    },\n\n    _mousewheel: function(e) {\n        var this$1$1 = this;\n\n        var delta = dataviz.mousewheelDelta(e);\n\n        this._start(e);\n\n        if (this._state) {\n            var range = this._state.range;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (Math.abs(delta) > 1) {\n                delta *= ZOOM_ACCELERATION;\n            }\n\n            if (this.options.mousewheel.reverse) {\n                delta *= -1;\n            }\n\n            if (this.expand(delta)) {\n                this.trigger(SELECT, {\n                    axis: this.categoryAxis.options,\n                    delta: delta,\n                    originalEvent: e,\n                    from: this._value(range.from),\n                    to: this._value(range.to)\n                });\n            }\n\n            if (this._mwTimeout) {\n                clearTimeout(this._mwTimeout);\n            }\n\n            this._mwTimeout = setTimeout(function () {\n                this$1$1._end();\n            }, MOUSEWHEEL_DELAY);\n        }\n    },\n\n    _gesturestart: function(e) {\n        var options = this.options;\n        var touch = e.touches[0];\n        var inPane = this._pointInPane(touch.pageX, touch.pageY);\n\n        if (!inPane) {\n            return;\n        }\n\n        this._state = {\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n        var args = this._rangeEventArgs(this._state.range);\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        } else {\n            e.preventDefault();\n        }\n    },\n\n    _gestureend: function() {\n        if (this._state) {\n            this.trigger(SELECT_END, this._rangeEventArgs(this._state.range));\n            delete this._state;\n        }\n    },\n\n    _gesturechange: function(e) {\n        if (!this._state) {\n            return;\n        }\n\n        var ref = this;\n        var chart = ref.chart;\n        var state = ref._state;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var range = state.range;\n        var p0 = chart._toModelCoordinates(e.touches[0].x.location).x;\n        var p1 = chart._toModelCoordinates(e.touches[1].x.location).x;\n        var left = Math.min(p0, p1);\n        var right = Math.max(p0, p1);\n\n        e.preventDefault();\n\n        range.from = categoryAxis.pointCategoryIndex(new Point(left)) || options.min;\n\n        range.to = categoryAxis.pointCategoryIndex(new Point(right)) || options.max;\n\n        this.move(range.from, range.to);\n\n        this.trigger(SELECT, this._rangeEventArgs(range));\n    },\n\n    _index: function(value) {\n        var index = value;\n\n        if (value instanceof Date) {\n            index = this.categoryAxis.categoryIndex(value);\n        }\n\n        return index;\n    },\n\n    _value: function(index) {\n        var value = index;\n        if (this._dateAxis) {\n            value = this.categoryAxis.categoryAt(index);\n            if (value > this.options.max) {\n                value = this.options.max;\n            }\n        }\n\n        return value;\n    },\n\n    _slot: function(value) {\n        var categoryAxis = this.categoryAxis;\n        var index = this._index(value);\n\n        return categoryAxis.getSlot(index, index, true);\n    },\n\n    move: function(from, to) {\n        var options = this.options;\n        var reverse = this.categoryAxis.options.reverse;\n        var offset = options.offset;\n        var padding = options.padding;\n        var border = options.selection.border;\n        var left = reverse ? to : from;\n        var right = reverse ? from : to;\n        var edge = 'x' + (reverse ? 2 : 1);\n\n        var box = this._slot(left);\n        var leftMaskWidth = round(box[edge] - offset.left + padding.left);\n\n        elementStyles(this.leftMask, {\n            width: leftMaskWidth\n        });\n        elementStyles(this.selection, {\n            left: leftMaskWidth\n        });\n\n        box = this._slot(right);\n\n        var rightMaskWidth = round(options.width - (box[edge] - offset.left + padding.left));\n        elementStyles(this.rightMask, {\n            width: rightMaskWidth\n        });\n\n        var distance = options.width - rightMaskWidth;\n        if (distance !== options.width) {\n            distance += border.right;\n        }\n\n        elementStyles(this.rightMask, {\n            left: distance\n        });\n        elementStyles(this.selection, {\n            width: Math.max(options.width - (leftMaskWidth + rightMaskWidth) - border.right, 0)\n        });\n    },\n\n    set: function(from, to) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var fromValue = limitValue(this._index(from), min, max);\n        var toValue = limitValue(this._index(to), fromValue + 1, max);\n\n        if (options.visible) {\n            this.move(fromValue, toValue);\n        }\n\n        options.from = this._value(fromValue);\n        options.to = this._value(toValue);\n    },\n\n    expand: function(delta) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var zDir = options.mousewheel.zoom;\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var range = { from: from, to: to };\n        var oldRange = deepExtend({}, range);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        if (zDir !== RIGHT) {\n            range.from = limitValue(\n                limitValue(from - delta, 0, to - 1),\n                min, max\n            );\n        }\n\n        if (zDir !== LEFT) {\n            range.to = limitValue(\n                limitValue(to + delta, range.from + 1, max),\n                min,\n                max\n            );\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    },\n\n    zoom: function(delta, coords) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var range = { from: from, to: to };\n        var oldRange = deepExtend({}, range);\n\n        var ref = this.categoryAxis.options;\n        var reverse = ref.reverse;\n        var origin = X + (reverse ? '2' : '1');\n        var lineBox = this.categoryAxis.lineBox();\n        var relative = Math.abs(lineBox[origin] - coords[X]);\n        var size = lineBox.width();\n        var position = round(relative / size, 2);\n        var minDelta = round(position * delta);\n        var maxDelta = round((1 - position) * delta);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        range.from = limitValue(\n            limitValue(from - minDelta, 0, to - 1),\n            min, max\n        );\n\n        range.to = limitValue(\n            limitValue(to + maxDelta, range.from + 1, max),\n            min,\n            max\n        );\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    },\n\n    trigger: function(name, args) {\n        return (this.observer || this.chart).trigger(name, args);\n    }\n});\n\nsetDefaultOptions(Selection, {\n    visible: true,\n    mousewheel: {\n        zoom: \"both\"\n    },\n    min: MIN_VALUE,\n    max: MAX_VALUE\n});\n\nvar Tooltip = BaseTooltip.extend({\n    show: function(point) {\n        if (!point || !point.tooltipAnchor || (this._current && this._current === point)) {\n            return;\n        }\n\n        var options = deepExtend({}, this.options, point.options.tooltip);\n        var anchor = point.tooltipAnchor();\n\n        if (anchor) {\n            this._current = point;\n            BaseTooltip.fn.show.call(this, {\n                point: point,\n                anchor: anchor\n            }, options, point);\n        } else {\n            this.hide();\n        }\n    },\n\n    hide: function() {\n        delete this._current;\n        BaseTooltip.fn.hide.call(this);\n    }\n});\n\nvar SharedTooltip = BaseTooltip.extend({\n    init: function(plotArea, options) {\n        BaseTooltip.fn.init.call(this, plotArea.chartService, options);\n\n        this.plotArea = plotArea;\n        this.formatService = plotArea.chartService.format;\n    },\n\n    showAt: function(points, coords) {\n        var tooltipPoints = grep(points, function(point) {\n            var tooltip = point.series.tooltip;\n            var excluded = tooltip && tooltip.visible === false;\n\n            return !excluded;\n        });\n\n        if (tooltipPoints.length > 0) {\n            var point = tooltipPoints[0];\n            var slot = this.plotArea.categoryAxis.getSlot(point.categoryIx);\n\n            var anchor = coords ? this._slotAnchor(coords, slot) : this._defaultAnchor(point, slot);\n\n            this.show({\n                anchor: anchor,\n                shared: true,\n                points: points,\n                category: point.category,\n                categoryText: this.formatService.auto(this.options.categoryFormat, point.category),\n                series: this.plotArea.series\n            }, this.options);\n        }\n    },\n\n    _slotAnchor: function(point, slot) {\n        var axis = this.plotArea.categoryAxis;\n        var align = {\n            horizontal: \"left\",\n            vertical: \"center\"\n        };\n\n        if (!axis.options.vertical) {\n            point.x = slot.center().x;\n        }\n\n        return {\n            point: point,\n            align: align\n        };\n    },\n\n    _defaultAnchor: function(point, slot) {\n        var box = point.owner.pane.chartsBox();\n        var vertical = this.plotArea.categoryAxis.options.vertical;\n        var center = box.center();\n        var slotCenter = slot.center();\n        var align = {\n            horizontal: \"center\",\n            vertical: \"center\"\n        };\n\n        var centerPoint;\n        if (vertical) {\n            centerPoint = new Point(center.x, slotCenter.y);\n        } else {\n            centerPoint = new Point(slotCenter.x, center.y);\n        }\n\n        return {\n            point: centerPoint,\n            align: align\n        };\n    }\n});\n\nsetDefaultOptions(SharedTooltip, {\n    categoryFormat: '{0:d}'\n});\n\nvar BarChartAnimation = Animation.extend({\n    setup: function() {\n        var ref = this;\n        var element = ref.element;\n        var options = ref.options;\n        var bbox = element.bbox();\n\n        if (bbox) {\n            this.origin = options.origin;\n            var axis = options.vertical ? Y : X;\n\n            var fromScale = this.fromScale = new GeometryPoint(1, 1);\n            fromScale[axis] = START_SCALE;\n\n            element.transform(transform()\n                .scale(fromScale.x, fromScale.y)\n            );\n        } else {\n            this.abort();\n        }\n    },\n\n    step: function(pos) {\n        var scaleX = dataviz.interpolateValue(this.fromScale.x, 1, pos);\n        var scaleY = dataviz.interpolateValue(this.fromScale.y, 1, pos);\n\n        this.element.transform(transform()\n            .scale(scaleX, scaleY, this.origin)\n        );\n    },\n\n    abort: function() {\n        Animation.fn.abort.call(this);\n        this.element.transform(null);\n    }\n});\n\nsetDefaultOptions(BarChartAnimation, {\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(BAR, BarChartAnimation);\n\nvar BubbleAnimation = Animation.extend({\n    setup: function() {\n        var center = this.center = this.element.bbox().center();\n        this.element.transform(transform()\n            .scale(START_SCALE, START_SCALE, center)\n        );\n    },\n\n    step: function(pos) {\n        this.element.transform(transform()\n            .scale(pos, pos, this.center)\n        );\n    }\n});\n\nsetDefaultOptions(BubbleAnimation, {\n    easing: \"easeOutElastic\"\n});\n\nAnimationFactory.current.register(BUBBLE, BubbleAnimation);\n\nvar FadeInAnimation = Animation.extend({\n    setup: function() {\n        this.fadeTo = this.element.opacity();\n        this.element.opacity(0);\n    },\n\n    step: function(pos) {\n        this.element.opacity(pos * this.fadeTo);\n    }\n});\n\nsetDefaultOptions(FadeInAnimation, {\n    duration: 200,\n    easing: \"linear\"\n});\n\nAnimationFactory.current.register(FADEIN, FadeInAnimation);\n\nvar PieAnimation = Animation.extend({\n    setup: function() {\n        this.element.transform(transform()\n            .scale(START_SCALE, START_SCALE, this.options.center)\n        );\n    },\n\n    step: function(pos) {\n        this.element.transform(transform()\n            .scale(pos, pos, this.options.center)\n        );\n    }\n});\n\nsetDefaultOptions(PieAnimation, {\n    easing: \"easeOutElastic\",\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(PIE, PieAnimation);\n\nvar ScatterLineChart = ScatterChart.extend({\n    render: function() {\n        ScatterChart.fn.render.call(this);\n\n        this.renderSegments();\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx);\n    },\n\n    animationPoints: function() {\n        var points = ScatterChart.fn.animationPoints.call(this);\n        return points.concat(this._segments);\n    },\n\n    createMissingValue: function(value, missingValues) {\n        if (missingValues === ZERO) {\n            var missingValue = {\n                x: value.x,\n                y: value.y\n            };\n            if (!hasValue(missingValue.x)) {\n                missingValue.x = 0;\n            }\n            if (!hasValue(missingValue.y)) {\n                missingValue.y = 0;\n            }\n            return missingValue;\n        }\n    }\n});\n\ndeepExtend(ScatterLineChart.prototype, LineChartMixin);\n\nfunction autoMajorUnit(min, max) {\n    var diff = round(max - min, DEFAULT_PRECISION - 1);\n\n    if (diff === 0) {\n        if (max === 0) {\n            return 0.1;\n        }\n\n        diff = Math.abs(max);\n    }\n\n    var scale = Math.pow(10, Math.floor(Math.log(diff) / Math.log(10)));\n    var relativeValue = round((diff / scale), DEFAULT_PRECISION);\n    var scaleMultiplier = 1;\n\n    if (relativeValue < 1.904762) {\n        scaleMultiplier = 0.2;\n    } else if (relativeValue < 4.761904) {\n        scaleMultiplier = 0.5;\n    } else if (relativeValue < 9.523809) {\n        scaleMultiplier = 1;\n    } else {\n        scaleMultiplier = 2;\n    }\n\n    return round(scale * scaleMultiplier, DEFAULT_PRECISION);\n}\n\nvar scatterValueGetter = function (fieldName) { return function (ref) {\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: valueFields.x, yValue: valueFields[fieldName] });\n }    };\n\nfunction scatterLinearTrendLine(context) {\n    var options = context.options;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$2({ seriesValues: seriesValues, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'scatterLine',\n            data: data});\n    }\n\n    return null;\n}\n\nfunction getData$2(ref) {\n    var seriesValues = ref.seriesValues;\n    var options = ref.options;\n\n    var ref$1 = calculateSlope(seriesValues(), scatterValueGetter(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n    var xMin = ref$1.xMin;\n    var xMax = ref$1.xMax;\n\n    if (count > 0) {\n        var data = [];\n        var forecast = (options.trendline || {}).forecast;\n        if (forecast) {\n            if (forecast.before > 0) {\n                xMin -= forecast.before;\n            }\n\n            if (forecast.after > 0) {\n                xMax += forecast.after;\n            }\n        }\n\n        var samplingInterval = (options.trendline || {}).samplingInterval;\n        var delta = valueOrDefault(samplingInterval,  autoMajorUnit(xMin, xMax) / 10);\n        if (samplingInterval <= 0) {\n            delta = xMax - xMin;\n        }\n\n        for (var x = xMin; x <= xMax; x += delta) {\n            data.push([ x,\n                slope * x + intercept\n            ]);\n        }\n\n        return data;\n    }\n\n    return null;\n}\n\nfunction scatterMovingAverageTrendline(context) {\n    var options = context.options;\n\n    var data = getData$3(context);\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'scatterLine',\n            data: data});\n    }\n\n    return null;\n}\n\nfunction getData$3(ref) {\n    var options = ref.options;\n    var seriesValues = ref.seriesValues;\n\n    var period = (options.trendline || {}).period || MIN_MOVING_AVERAGE_PERIOD;\n    var range = { before: period, after: period };\n    var data = calculateMovingAverage(seriesValues(range), scatterValueGetter(options.field), period);\n\n    if (data.length > 0) {\n        return data;\n    }\n\n    return null;\n}\n\nvar scatterRegistry = {};\nscatterRegistry[TRENDLINE_LINEAR] = scatterLinearTrendLine;\nscatterRegistry[TRENDLINE_MOVING_AVERAGE] = scatterMovingAverageTrendline;\n\nvar XYPlotArea = PlotAreaBase.extend({\n    initFields: function() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n\n        this.xAxisRangeTracker = new AxisGroupRangeTracker();\n        this.yAxisRangeTracker = new AxisGroupRangeTracker();\n    },\n\n    render: function(panes) {\n        var this$1$1 = this;\n        if (panes === void 0) { panes = this.panes; }\n\n        this.series = [].concat( this.originalSeries );\n        this.createTrendlineSeries();\n\n        var seriesByPane = this.groupSeriesByPane();\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n            var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this$1$1.createScatterChart(\n                filterSeriesByType(filteredSeries, SCATTER),\n                pane\n            );\n\n            this$1$1.createScatterLineChart(\n                filterSeriesByType(filteredSeries, SCATTER_LINE),\n                pane\n            );\n\n            this$1$1.createBubbleChart(\n                filterSeriesByType(filteredSeries, BUBBLE),\n                pane\n            );\n        }\n\n        this.createAxes(panes);\n    },\n\n    appendChart: function(chart, pane) {\n        this.xAxisRangeTracker.update(chart.xAxisRanges);\n        this.yAxisRangeTracker.update(chart.yAxisRanges);\n\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis.options.vertical) {\n            this.yAxisRangeTracker.reset(axisName);\n            delete this.namedYAxes[axisName];\n        } else {\n            this.xAxisRangeTracker.reset(axisName);\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var xAxisName = series.xAxis;\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        var yAxisName = series.yAxis;\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = panes[0].name || \"default\";\n        var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    createScatterChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createScatterLineChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterLineChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createBubbleChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new BubbleChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createXYAxis: function(options, vertical, axisIndex) {\n        var axisName = options.name;\n        var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        var tracker = vertical ? this.yAxisRangeTracker : this.xAxisRangeTracker;\n        var axisOptions = deepExtend({ reverse: !vertical && this.chartService.rtl }, options, { vertical: vertical });\n        var isLog = equalsIgnoreCase(axisOptions.type, LOGARITHMIC);\n        var defaultRange = tracker.query();\n        var defaultAxisRange = isLog ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n        var range = tracker.query(axisName) || defaultRange || defaultAxisRange;\n        var typeSamples = [ axisOptions.min, axisOptions.max ];\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        if (axisIndex === 0 && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        var inferredDate;\n\n        for (var i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        var axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = dataviz.DateValueAxis;\n        } else if (isLog) {\n            axisType = dataviz.LogarithmicAxis;\n        } else {\n            axisType = dataviz.NumericAxis;\n        }\n\n        var axis = new axisType(range.min, range.max, axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n\n        return axis;\n    },\n\n    createAxes: function(panes) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var xAxesOptions = [].concat(options.xAxis);\n        var xAxes = [];\n        var yAxesOptions = [].concat(options.yAxis);\n        var yAxes = [];\n\n        for (var idx = 0; idx < xAxesOptions.length; idx++) {\n            var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n            var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n            if (inArray(axisPane$1, panes)) {\n                yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var allAxes = this.axes;\n        var length = allAxes.length;\n        var xValues = [];\n        var yValues = [];\n\n        for (var i = 0; i < length; i++) {\n            var axis = allAxes[i];\n            var values = axis.options.vertical ? yValues : xValues;\n            var currentValue = axis.getValue(point);\n            if (currentValue !== null) {\n                values.push(currentValue);\n            }\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        var vertical = axis.options.vertical;\n        var axes = this.groupAxes(this.panes);\n        var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n        updateAxisOptions$1(this.options, index, vertical, options);\n        updateAxisOptions$1(this.originalOptions, index, vertical, options);\n    },\n\n    trendlineFactory: function(options, series) {\n        var seriesValues = this.seriesValues.bind(this, series.index);\n\n        var trendline = trendlineFactory(scatterRegistry, options.type, {\n            options: options,\n            seriesValues: seriesValues\n        });\n\n        if (trendline) {\n            // Inherit settings\n            trendline.xAxis = series.xAxis;\n            trendline.yAxis = series.yAxis;\n        }\n\n        return trendline;\n    },\n\n    seriesValues: function(seriesIx) {\n        var this$1$1 = this;\n\n        var result = [];\n        var currentSeries = this.series[seriesIx];\n\n        for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n            var data = this$1$1.bindPoint(currentSeries, pointIx);\n            result.push({ pointIx: pointIx, valueFields: data.valueFields });\n        }\n\n        return result;\n    }\n});\n\nfunction updateAxisOptions$1(targetOptions, axisIndex, vertical, options) {\n    var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n    deepExtend(axisOptions, options);\n}\n\nsetDefaultOptions(XYPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(XYPlotArea.prototype, PlotAreaEventsMixin);\n\nvar PieSegment = ChartElement.extend({\n    init: function(value, sector, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.value = value;\n        this.sector = sector;\n    },\n\n    render: function() {\n        var labels = this.options.labels;\n        var chartService = this.owner.chartService;\n        var labelText = this.value;\n\n        if (this._rendered || this.visible === false) {\n            return;\n        }\n        this._rendered = true;\n\n        var labelTemplate = getTemplate(labels);\n        var pointData = this.pointData();\n\n        if (labelTemplate) {\n            labelText = labelTemplate(pointData);\n        } else if (labels.format) {\n            labelText = chartService.format.auto(labels.format, labelText);\n        }\n\n        if (labels.visible && (labelText || labelText === 0)) {\n            if (labels.position === CENTER || labels.position === INSIDE_END) {\n                if (!labels.color) {\n                    labels.color = dataviz.autoTextColor(this.options.color);\n                }\n                if (!labels.background) {\n                    labels.background = this.options.color;\n                }\n            } else {\n                var themeLabels = chartService.theme.seriesDefaults.labels;\n                labels.color = labels.color || themeLabels.color;\n                labels.background = labels.background || themeLabels.background;\n            }\n\n            this.label = new TextBox(labelText, deepExtend({}, labels, {\n                align: CENTER,\n                vAlign: \"\",\n                animation: {\n                    type: FADEIN,\n                    delay: this.animationDelay\n                }\n            }), pointData);\n\n            this.append(this.label);\n        }\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n        this.box = targetBox;\n        this.reflowLabel();\n    },\n\n    reflowLabel: function() {\n        var ref = this;\n        var labelsOptions = ref.options.labels;\n        var label = ref.label;\n        var sector = this.sector.clone();\n        var labelsDistance = labelsOptions.distance;\n        var angle = sector.middle();\n\n        if (label) {\n            var labelHeight = label.box.height();\n            var labelWidth = label.box.width();\n            var lp;\n\n            if (labelsOptions.position === CENTER) {\n                sector.radius = Math.abs((sector.radius - labelHeight) / 2) + labelHeight;\n                lp = sector.point(angle);\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else if (labelsOptions.position === INSIDE_END) {\n                sector.radius = sector.radius - labelHeight / 2;\n                lp = sector.point(angle);\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else {\n                var x1;\n                lp = sector.clone().expand(labelsDistance).point(angle);\n                if (lp.x >= sector.center.x) {\n                    x1 = lp.x + labelWidth;\n                    label.orientation = RIGHT;\n                } else {\n                    x1 = lp.x - labelWidth;\n                    label.orientation = LEFT;\n                }\n                label.reflow(new Box(x1, lp.y - labelHeight, lp.x, lp.y));\n            }\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var sector = ref.sector;\n        var options = ref.options;\n\n        ChartElement.fn.createVisual.call(this);\n\n        if (this.value) {\n            if (options.visual) {\n                var startAngle = (sector.startAngle + 180) % 360;\n                var visual = options.visual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    series: this.series,\n                    percentage: this.percentage,\n                    center: new GeometryPoint(sector.center.x, sector.center.y),\n                    radius: sector.radius,\n                    innerRadius: sector.innerRadius,\n                    startAngle: startAngle,\n                    endAngle: startAngle + sector.angle,\n                    options: options,\n                    sender: this.getSender(),\n                    createVisual: function () {\n                        var group = new Group();\n                        this$1$1.createSegmentVisual(group);\n\n                        return group;\n                    }\n                });\n\n                if (visual) {\n                    this.visual.append(visual);\n                }\n            } else {\n                this.createSegmentVisual(this.visual);\n            }\n        }\n    },\n\n    createSegmentVisual: function(group) {\n        var ref = this;\n        var sector = ref.sector;\n        var options = ref.options;\n        var borderOptions = options.border || {};\n        var border = borderOptions.width > 0 ? {\n            stroke: {\n                color: borderOptions.color,\n                width: borderOptions.width,\n                opacity: borderOptions.opacity,\n                dashType: borderOptions.dashType\n            }\n        } : {};\n        var color = options.color;\n        var fill = {\n            color: color,\n            opacity: options.opacity\n        };\n        var visual = this.createSegment(sector, deepExtend({\n            fill: fill,\n            stroke: {\n                opacity: options.opacity\n            },\n            zIndex: options.zIndex\n        }, border));\n\n        group.append(visual);\n\n        if (hasGradientOverlay(options)) {\n            group.append(this.createGradientOverlay(visual, {\n                baseColor: color,\n                fallbackFill: fill\n            }, deepExtend({\n                center: [ sector.center.x, sector.center.y ],\n                innerRadius: sector.innerRadius,\n                radius: sector.radius,\n                userSpace: true\n            }, options.overlay)));\n        }\n    },\n\n    createSegment: function(sector, options) {\n        if (options.singleSegment) {\n            return new drawing.Circle(new geometry.Circle(new GeometryPoint(sector.center.x, sector.center.y), sector.radius), options);\n        }\n\n        return dataviz.ShapeBuilder.current.createRing(sector, options);\n    },\n\n    createAnimation: function() {\n        var ref = this;\n        var options = ref.options;\n        var center = ref.sector.center;\n\n        deepExtend(options, {\n            animation: {\n                center: [ center.x, center.y ],\n                delay: this.animationDelay\n            }\n        });\n\n        ChartElement.fn.createAnimation.call(this);\n    },\n\n    createHighlight: function(options) {\n        var highlight = this.options.highlight || {};\n        var border = highlight.border || {};\n\n        return this.createSegment(this.sector, deepExtend({}, options, {\n            fill: {\n                color: highlight.color,\n                opacity: highlight.opacity\n            },\n            stroke: {\n                opacity: border.opacity,\n                width: border.width,\n                color: border.color\n            }\n        }));\n    },\n\n    highlightVisual: function() {\n        return this.visual.children[0];\n    },\n\n    highlightVisualArgs: function() {\n        var sector = this.sector;\n\n        return {\n            options: this.options,\n            radius: sector.radius,\n            innerRadius: sector.innerRadius,\n            center: new GeometryPoint(sector.center.x, sector.center.y),\n            startAngle: sector.startAngle,\n            endAngle: sector.angle + sector.startAngle,\n            visual: this.visual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var sector = this.sector.clone().expand(TOOLTIP_OFFSET);\n        var midAndle = sector.middle();\n        var midPoint = sector.point(midAndle);\n\n        return {\n            point: midPoint,\n            align: tooltipAlignment(midAndle + 180)\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            series: this.series,\n            percentage: this.percentage\n        };\n    }\n});\n\nvar RAD_30 = round(dataviz.rad(30), DEFAULT_PRECISION);\nvar RAD_60 = round(dataviz.rad(60), DEFAULT_PRECISION);\n\nfunction tooltipAlignment(angle) {\n    var radians = dataviz.rad(angle);\n    var sine = round(Math.sin(radians), DEFAULT_PRECISION);\n    var cosine = round(Math.cos(radians), DEFAULT_PRECISION);\n\n    var horizontal;\n    if (Math.abs(sine) > RAD_60) {\n        horizontal = CENTER;\n    } else if (cosine < 0) {\n        horizontal = RIGHT;\n    } else {\n        horizontal = LEFT;\n    }\n\n    var vertical;\n    if (Math.abs(sine) < RAD_30) {\n        vertical = CENTER;\n    } else if (sine < 0) {\n        vertical = BOTTOM;\n    } else {\n        vertical = TOP;\n    }\n\n    return {\n        horizontal: horizontal,\n        vertical: vertical\n    };\n}\n\nsetDefaultOptions(PieSegment, {\n    color: WHITE,\n    overlay: {\n        gradient: \"roundedBevel\"\n    },\n    border: {\n        width: 0.5\n    },\n    labels: {\n        visible: false,\n        distance: 35,\n        font: datavizConstants.DEFAULT_FONT,\n        margin: getSpacing(0.5),\n        align: CIRCLE,\n        zIndex: 1,\n        position: OUTSIDE_END\n    },\n    animation: {\n        type: PIE\n    },\n    highlight: {\n        visible: true,\n        border: {\n            width: 1\n        }\n    },\n    visible: true\n});\n\ndeepExtend(PieSegment.prototype, PointEventsMixin);\n\nvar PieChartMixin = {\n    createLegendItem: function(value, point, options) {\n        var legendOptions = this.options.legend || {};\n        var labelsOptions = legendOptions.labels || {};\n        var inactiveItems = legendOptions.inactiveItems || {};\n        var inactiveItemsLabels = inactiveItems.labels || {};\n\n        if (options && options.visibleInLegend !== false) {\n            var pointVisible = options.visible !== false;\n            var labelTemplate = pointVisible ? getTemplate(labelsOptions) :\n                getTemplate(inactiveItemsLabels) || getTemplate(labelsOptions);\n            var text = options.category;\n\n            if (labelTemplate) {\n                text = labelTemplate({\n                    text: text,\n                    series: options.series,\n                    dataItem: options.dataItem,\n                    percentage: options.percentage,\n                    value: value\n                });\n            }\n\n            var itemLabelOptions, markerColor;\n            if (pointVisible) {\n                itemLabelOptions = {};\n                markerColor = point.color;\n            } else {\n                itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                };\n                markerColor = (inactiveItems.markers || {}).color;\n            }\n\n            if (hasValue(text) && text !== \"\") {\n                this.legendItems.push({\n                    active: pointVisible,\n                    pointIndex: options.index,\n                    text: text,\n                    series: options.series,\n                    markerColor: markerColor,\n                    labels: itemLabelOptions\n                });\n            }\n        }\n    }\n};\n\nvar PIE_SECTOR_ANIM_DELAY = 70;\n\nvar PieChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.points = [];\n        this.legendItems = [];\n        this.render();\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n        var colorsCount = seriesColors.length;\n        var series = options.series;\n        var seriesCount = series.length;\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var data = currentSeries.data;\n            var ref$1 = bindSegments(currentSeries);\n            var total = ref$1.total;\n            var points = ref$1.points;\n            var count = ref$1.count;\n            var anglePerValue = 360 / total;\n            var constantAngle = (void 0);\n            if (!isFinite(anglePerValue)) {\n                constantAngle = 360 / count;\n            }\n            var currentAngle = (void 0);\n\n            if (defined(currentSeries.startAngle)) {\n                currentAngle = currentSeries.startAngle;\n            } else {\n                currentAngle = options.startAngle;\n            }\n\n            if (seriesIx !== seriesCount - 1) {\n                if (currentSeries.labels.position === OUTSIDE_END) {\n                    currentSeries.labels.position = CENTER;\n                }\n            }\n\n            for (var i = 0; i < points.length; i++) {\n                var pointData = points[i];\n                if (!pointData) {\n                    continue;\n                }\n\n                var fields = pointData.fields;\n                var value = pointData.value;\n                var visible = pointData.visible;\n                var angle = value !== 0 ? (constantAngle || (value * anglePerValue)) : 0;\n                var explode = data.length !== 1 && Boolean(fields.explode);\n\n                if (!isFunction(currentSeries.color)) {\n                    currentSeries.color = fields.color || seriesColors[i % colorsCount];\n                }\n\n                callback(value, new dataviz.Ring(null, 0, 0, currentAngle, angle), {\n                    owner: this$1$1,\n                    category: defined(fields.category) ? fields.category : \"\",\n                    index: i,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: data[i],\n                    percentage: total !== 0 ? value / total : 0,\n                    explode: explode,\n                    visibleInLegend: fields.visibleInLegend,\n                    visible: visible,\n                    zIndex: seriesCount - seriesIx,\n                    animationDelay: this$1$1.animationDelay(i, seriesIx, seriesCount)\n                });\n\n                if (visible !== false) {\n                    currentAngle += angle;\n                }\n            }\n        }\n    },\n\n    evalSegmentOptions: function(options, value, fields) {\n        var series = fields.series;\n\n        evalOptions(options, {\n            value: value,\n            series: series,\n            dataItem: fields.dataItem,\n            category: fields.category,\n            percentage: fields.percentage\n        }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"visual\", \"toggle\" ] });\n    },\n\n    addValue: function(value, sector, fields) {\n        var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n        this.evalSegmentOptions(segmentOptions, value, fields);\n\n        this.createLegendItem(value, segmentOptions, fields);\n\n        if (fields.visible === false) {\n            return;\n        }\n\n        var segment = new PieSegment(value, sector, segmentOptions);\n        $.extend(segment, fields);\n        this.append(segment);\n        this.points.push(segment);\n    },\n\n    reflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var points = ref.points;\n        var seriesConfigs = ref.seriesConfigs; if (seriesConfigs === void 0) { seriesConfigs = []; }\n        var count = points.length;\n        var box = targetBox.clone();\n        var space = 5;\n        var minWidth = Math.min(box.width(), box.height());\n        var halfMinWidth = minWidth / 2;\n        var defaultPadding = minWidth - minWidth * 0.85;\n        var newBox = new Box(box.x1, box.y1, box.x1 + minWidth, box.y1 + minWidth);\n        var newBoxCenter = newBox.center();\n        var boxCenter = box.center();\n        var seriesCount = options.series.length;\n        var leftSideLabels = [];\n        var rightSideLabels = [];\n        var padding = valueOrDefault(options.padding, defaultPadding);\n\n        this.targetBox = targetBox;\n\n        padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n        newBox.translate(boxCenter.x - newBoxCenter.x, boxCenter.y - newBoxCenter.y);\n\n        var radius = halfMinWidth - padding;\n        var center = new Point(\n            radius + newBox.x1 + padding,\n            radius + newBox.y1 + padding\n        );\n\n        for (var i = 0; i < count; i++) {\n            var segment = points[i];\n            var sector = segment.sector;\n            var seriesIndex = segment.seriesIx;\n            sector.radius = radius;\n            sector.center = center;\n\n            if (seriesConfigs.length) {\n                var seriesConfig = seriesConfigs[seriesIndex];\n                sector.innerRadius = seriesConfig.innerRadius;\n                sector.radius = seriesConfig.radius;\n            }\n\n            if (seriesIndex === seriesCount - 1 && segment.explode) {\n                sector.center = sector.clone().setRadius(sector.radius * 0.15).point(sector.middle());\n            }\n\n            segment.reflow(newBox);\n\n            var label = segment.label;\n            if (label) {\n                if (label.options.position === OUTSIDE_END) {\n                    if (seriesIndex === seriesCount - 1) {\n                        if (label.orientation === RIGHT) {\n                            rightSideLabels.push(label);\n                        } else {\n                            leftSideLabels.push(label);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (leftSideLabels.length > 0) {\n            leftSideLabels.sort(this.labelComparator(true));\n            this.leftLabelsReflow(leftSideLabels);\n        }\n\n        if (rightSideLabels.length > 0) {\n            rightSideLabels.sort(this.labelComparator(false));\n            this.rightLabelsReflow(rightSideLabels);\n        }\n\n        this.box = newBox;\n    },\n\n    leftLabelsReflow: function(labels) {\n        var distances = this.distanceBetweenLabels(labels);\n\n        this.distributeLabels(distances, labels);\n    },\n\n    rightLabelsReflow: function(labels) {\n        var distances = this.distanceBetweenLabels(labels);\n\n        this.distributeLabels(distances, labels);\n    },\n\n    distanceBetweenLabels: function(labels) {\n        var segment = last(this.points);\n        var sector = segment.sector;\n        var count = labels.length - 1;\n        var lr = sector.radius + segment.options.labels.distance;\n        var distances = [];\n        var firstBox = labels[0].box;\n        var distance = round(firstBox.y1 - (sector.center.y - lr - firstBox.height() - firstBox.height() / 2));\n\n        distances.push(distance);\n\n        for (var i = 0; i < count; i++) {\n            var secondBox = labels[i + 1].box;\n\n            firstBox = labels[i].box;\n            distance = round(secondBox.y1 - firstBox.y2);\n            distances.push(distance);\n        }\n        distance = round(sector.center.y + lr - labels[count].box.y2 - labels[count].box.height() / 2);\n        distances.push(distance);\n\n        return distances;\n    },\n\n    distributeLabels: function(distances, labels) {\n        var this$1$1 = this;\n\n        var count = distances.length;\n        var left, right, remaining;\n\n        for (var i = 0; i < count; i++) {\n            remaining = -distances[i];\n            left = right = i;\n\n            while (remaining > 0 && (left >= 0 || right < count)) {\n                remaining = this$1$1._takeDistance(distances, i, --left, remaining);\n                remaining = this$1$1._takeDistance(distances, i, ++right, remaining);\n            }\n        }\n\n        this.reflowLabels(distances, labels);\n    },\n\n    _takeDistance: function(distances, anchor, position, amount) {\n        var result = amount;\n        if (distances[position] > 0) {\n            var available = Math.min(distances[position], result);\n            result -= available;\n            distances[position] -= available;\n            distances[anchor] += available;\n        }\n\n        return result;\n    },\n\n    reflowLabels: function(distances, labels) {\n        var this$1$1 = this;\n\n        var segment = last(this.points);\n        var sector = segment.sector;\n        var labelOptions = segment.options.labels;\n        var labelsCount = labels.length;\n        var labelDistance = labelOptions.distance;\n        var boxY = sector.center.y - (sector.radius + labelDistance) - labels[0].box.height();\n        var boxX;\n\n        distances[0] += 2;\n        for (var i = 0; i < labelsCount; i++) {\n            var label = labels[i];\n            var box = label.box;\n\n            boxY += distances[i];\n            boxX = this$1$1.hAlignLabel(\n                box.x2,\n                sector.clone().expand(labelDistance),\n                boxY,\n                boxY + box.height(),\n                label.orientation === RIGHT);\n\n            if (label.orientation === RIGHT) {\n                if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.radius + sector.center.x + labelDistance;\n                }\n                label.reflow(new Box(boxX + box.width(), boxY, boxX, boxY));\n            } else {\n                if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.center.x - sector.radius - labelDistance;\n                }\n                label.reflow(new Box(boxX - box.width(), boxY, boxX, boxY));\n            }\n\n            boxY += box.height();\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var connectors = ref.options.connectors;\n        var points = ref.points;\n        var count = points.length;\n        var space = 4;\n\n        ChartElement.fn.createVisual.call(this);\n\n        this._connectorLines = [];\n\n        for (var i = 0; i < count; i++) {\n            var segment = points[i];\n            var sector = segment.sector;\n            var label = segment.label;\n            var angle = sector.middle();\n            var connectorsColor = (segment.options.connectors || {}).color || connectors.color;\n\n            if (label) {\n                var connectorLine = new Path({\n                    stroke: {\n                        color: connectorsColor,\n                        width: connectors.width\n                    },\n                    animation: {\n                        type: FADEIN,\n                        delay: segment.animationDelay\n                    }\n                });\n\n                if (label.options.position === OUTSIDE_END) {\n                    var box = label.box;\n                    var centerPoint = sector.center;\n                    var start = sector.point(angle);\n                    var middle = new Point(box.x1, box.center().y);\n                    var sr = (void 0), end = (void 0), crossing = (void 0);\n\n                    start = sector.clone().expand(connectors.padding).point(angle);\n                    connectorLine.moveTo(start.x, start.y);\n                    // TODO: Extract into a method to remove duplication\n                    if (label.orientation === RIGHT) {\n                        end = new Point(box.x1 - connectors.padding, box.center().y);\n                        crossing = intersection(centerPoint, start, middle, end);\n                        middle = new Point(end.x - space, end.y);\n                        crossing = crossing || middle;\n                        crossing.x = Math.min(crossing.x, middle.x);\n\n                        if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                            crossing.x < sector.center.x) {\n                            sr = sector.center.x + sector.radius + space;\n                            if (segment.options.labels.align !== COLUMN) {\n                                if (sr < middle.x) {\n                                    connectorLine.lineTo(sr, start.y);\n                                } else {\n                                    connectorLine.lineTo(start.x + space * 2, start.y);\n                                }\n                            } else {\n                                connectorLine.lineTo(sr, start.y);\n                            }\n                            connectorLine.lineTo(middle.x, end.y);\n                        } else {\n                            crossing.y = end.y;\n                            connectorLine.lineTo(crossing.x, crossing.y);\n                        }\n                    } else {\n                        end = new Point(box.x2 + connectors.padding, box.center().y);\n                        crossing = intersection(centerPoint, start, middle, end);\n                        middle = new Point(end.x + space, end.y);\n                        crossing = crossing || middle;\n                        crossing.x = Math.max(crossing.x, middle.x);\n\n                        if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                            crossing.x > sector.center.x) {\n                            sr = sector.center.x - sector.radius - space;\n                            if (segment.options.labels.align !== COLUMN) {\n                                if (sr > middle.x) {\n                                    connectorLine.lineTo(sr, start.y);\n                                } else {\n                                    connectorLine.lineTo(start.x - space * 2, start.y);\n                                }\n                            } else {\n                                connectorLine.lineTo(sr, start.y);\n                            }\n                            connectorLine.lineTo(middle.x, end.y);\n                        } else {\n                            crossing.y = end.y;\n                            connectorLine.lineTo(crossing.x, crossing.y);\n                        }\n                    }\n\n                    connectorLine.lineTo(end.x, end.y);\n\n                    this$1$1._connectorLines.push(connectorLine);\n                    this$1$1.visual.append(connectorLine);\n                }\n            }\n        }\n    },\n\n    renderVisual: function() {\n        ChartElement.fn.renderVisual.call(this);\n\n        if (dataviz.find(this.options.series, function (options) { return options.autoFit; })) {\n            var targetBox = this.targetBox;\n            var pieCenter = this.box.center();\n            var bbox = this.visual.bbox();\n            if (!bbox) {\n                return;\n            }\n\n            var bboxBottom = bbox.bottomRight();\n\n            var scale = Math.min(\n                (pieCenter.y - targetBox.y1) / (pieCenter.y - bbox.origin.y),\n                (targetBox.y2 - pieCenter.y) / (bboxBottom.y - pieCenter.y),\n                (pieCenter.x - targetBox.x1) / (pieCenter.x - bbox.origin.x),\n                (targetBox.x2 - pieCenter.x) / (bboxBottom.x - pieCenter.x)\n            );\n\n            if (scale < 1) {\n                this.visual.transform(transform().scale(scale, scale, [ pieCenter.x, pieCenter.y ]));\n            }\n        }\n    },\n\n    labelComparator: function(reverse) {\n        var reverseValue = reverse ? -1 : 1;\n\n        return function(a, b) {\n            var first = (a.parent.sector.middle() + 270) % 360;\n            var second = (b.parent.sector.middle() + 270) % 360;\n            return (first - second) * reverseValue;\n        };\n    },\n\n    hAlignLabel: function(originalX, sector, y1, y2, direction) {\n        var radius = sector.radius;\n        var sector_center = sector.center;\n        var cx = sector_center.x;\n        var cy = sector_center.y;\n        var t = Math.min(Math.abs(cy - y1), Math.abs(cy - y2));\n\n        if (t > radius) {\n            return originalX;\n        }\n\n        return cx + Math.sqrt((radius * radius) - (t * t)) * (direction ? 1 : -1);\n    },\n\n    pointInCircle: function(point, center, radius) {\n        return Math.pow(center.x - point.x, 2) + Math.pow(center.y - point.y, 2) < Math.pow(radius, 2);\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format, point.value);\n    },\n\n    animationDelay: function(categoryIndex) {\n        return categoryIndex * PIE_SECTOR_ANIM_DELAY;\n    },\n\n    stackRoot: function() {\n        return this;\n    }\n});\n\nfunction intersection(a1, a2, b1, b2) {\n    var uat = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n    var ub = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n\n    var result;\n    if (ub !== 0) {\n        var ua = (uat / ub);\n\n        result = new Point(\n            a1.x + ua * (a2.x - a1.x),\n            a1.y + ua * (a2.y - a1.y)\n        );\n    }\n\n    return result;\n}\n\nsetDefaultOptions(PieChart, {\n    startAngle: 90,\n    connectors: {\n        width: 2,\n        color: \"#939393\",\n        padding: 8\n    },\n    inactiveItems: {\n        markers: {},\n        labels: {}\n    }\n});\n\ndeepExtend(PieChart.prototype, PieChartMixin);\n\nPieChart.prototype.isStackRoot = true;\n\nvar PiePlotArea = PlotAreaBase.extend({\n    render: function() {\n        this.createPieChart(this.series);\n    },\n\n    createPieChart: function(series) {\n        var firstSeries = series[0];\n        var pieChart = new PieChart(this, {\n            series: series,\n            padding: firstSeries.padding,\n            startAngle: firstSeries.startAngle,\n            connectors: firstSeries.connectors,\n            legend: this.options.legend\n        });\n\n        this.appendChart(pieChart);\n    },\n\n    appendChart: function(chart, pane) {\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        append(this.options.legend.items, chart.legendItems);\n    }\n});\n\nvar DonutSegment = PieSegment.extend({\n    reflowLabel: function() {\n        var ref = this;\n        var labelsOptions = ref.options.labels;\n        var label = ref.label;\n        var sector = this.sector.clone();\n        var angle = sector.middle();\n\n        if (label) {\n            var labelHeight = label.box.height();\n            if (labelsOptions.position === CENTER) {\n                sector.radius -= (sector.radius - sector.innerRadius) / 2;\n\n                var lp = sector.point(angle);\n\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else {\n                PieSegment.fn.reflowLabel.call(this);\n            }\n        }\n    },\n\n    createSegment: function(sector, options) {\n        return dataviz.ShapeBuilder.current.createRing(sector, options);\n    }\n});\n\nsetDefaultOptions(DonutSegment, {\n    overlay: {\n        gradient: \"roundedGlass\"\n    },\n    labels: {\n        position: CENTER\n    },\n    animation: {\n        type: PIE\n    }\n});\n\ndeepExtend(DonutSegment.prototype, PointEventsMixin);\n\nvar DONUT_SECTOR_ANIM_DELAY = 50;\n\nvar DonutChart = PieChart.extend({\n    addValue: function(value, sector, fields) {\n        var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n        this.evalSegmentOptions(segmentOptions, value, fields);\n\n        this.createLegendItem(value, segmentOptions, fields);\n\n        if (fields.visible === false) {\n            return;\n        }\n\n        var segment = new DonutSegment(value, sector, segmentOptions);\n\n        $.extend(segment, fields);\n        this.append(segment);\n        this.points.push(segment);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var box = targetBox.clone();\n        var space = 5;\n        var minWidth = Math.min(box.width(), box.height());\n        var halfMinWidth = minWidth / 2;\n        var defaultPadding = minWidth - minWidth * 0.85;\n        var series = options.series;\n        var seriesCount = series.length;\n\n        var padding = valueOrDefault(options.padding, defaultPadding);\n        padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n\n        var totalSize = halfMinWidth - padding;\n        var seriesWithoutSize = 0;\n        var holeSize;\n\n        for (var i = 0; i < seriesCount; i++) {\n            var currentSeries = series[i];\n            if (i === 0) {\n                if (defined(currentSeries.holeSize)) {\n                    holeSize = currentSeries.holeSize;\n                    totalSize -= currentSeries.holeSize;\n                }\n            }\n\n            if (defined(currentSeries.size)) {\n                totalSize -= currentSeries.size;\n            } else {\n                seriesWithoutSize++;\n            }\n\n            if (defined(currentSeries.margin) && i !== seriesCount - 1) {\n                totalSize -= currentSeries.margin;\n            }\n        }\n\n        if (!defined(holeSize)) {\n            var currentSize = (halfMinWidth - padding) / (seriesCount + 0.75);\n            holeSize = currentSize * 0.75;\n            totalSize -= holeSize;\n        }\n\n        var innerRadius = holeSize;\n        var margin = 0;\n        var size, radius;\n\n        this.seriesConfigs = [];\n\n        for (var i$1 = 0; i$1 < seriesCount; i$1++) {\n            var currentSeries$1 = series[i$1];\n            size = valueOrDefault(currentSeries$1.size, totalSize / seriesWithoutSize);\n            innerRadius += margin;\n            radius = innerRadius + size;\n            this$1$1.seriesConfigs.push({ innerRadius: innerRadius, radius: radius });\n            margin = currentSeries$1.margin || 0;\n            innerRadius = radius;\n        }\n\n        PieChart.fn.reflow.call(this, targetBox);\n    },\n\n    animationDelay: function(categoryIndex, seriesIndex, seriesCount) {\n        return categoryIndex * DONUT_SECTOR_ANIM_DELAY +\n            (INITIAL_ANIMATION_DURATION * (seriesIndex + 1) / (seriesCount + 1));\n    }\n});\n\nsetDefaultOptions(DonutChart, {\n    startAngle: 90,\n    connectors: {\n        width: 2,\n        color: \"#939393\",\n        padding: 8\n    }\n});\n\nvar DonutPlotArea = PiePlotArea.extend({\n    render: function() {\n        this.createDonutChart(this.series);\n    },\n\n    createDonutChart: function(series) {\n        var firstSeries = series[0];\n        var donutChart = new DonutChart(this, {\n            series: series,\n            padding: firstSeries.padding,\n            connectors: firstSeries.connectors,\n            legend: this.options.legend\n        });\n\n        this.appendChart(donutChart);\n    }\n});\n\nvar DEFAULT_PADDING = 0.15;\n\nvar PolarPlotAreaBase = PlotAreaBase.extend({\n    initFields: function() {\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n    },\n\n    render: function() {\n        this.addToLegend(this.series);\n        this.createPolarAxis();\n        this.createCharts();\n        this.createValueAxis();\n    },\n\n    alignAxes: function() {\n        var axis = this.valueAxis;\n        var range = axis.range();\n        var crossingValue = axis.options.reverse ? range.max : range.min;\n        var slot = axis.getSlot(crossingValue);\n        var center = this.polarAxis.getSlot(0).center;\n        var axisBox = axis.box.translate(\n            center.x - slot.x1,\n            center.y - slot.y1\n        );\n\n        axis.reflow(axisBox);\n    },\n\n    createValueAxis: function() {\n        var tracker = this.valueAxisRangeTracker;\n        var defaultRange = tracker.query();\n        var axisOptions = this.valueAxisOptions({\n            roundToMajorUnit: false,\n            zIndex: -1\n        });\n        var axisType, axisDefaultRange;\n\n        if (axisOptions.type === LOGARITHMIC) {\n            axisType = dataviz.RadarLogarithmicAxis;\n            axisDefaultRange = { min: 0.1, max: 1 };\n        } else {\n            axisType = dataviz.RadarNumericAxis;\n            axisDefaultRange = { min: 0, max: 1 };\n        }\n\n        var range = tracker.query(name) || defaultRange || axisDefaultRange;\n\n        if (range && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        var valueAxis = new axisType(\n            range.min, range.max,\n            axisOptions,\n            this.chartService\n        );\n\n        this.valueAxis = valueAxis;\n        this.appendAxis(valueAxis);\n    },\n\n    reflowAxes: function() {\n        var ref = this;\n        var options = ref.options.plotArea;\n        var valueAxis = ref.valueAxis;\n        var polarAxis = ref.polarAxis;\n        var box = ref.box;\n        var defaultPadding = Math.min(box.width(), box.height()) * DEFAULT_PADDING;\n        var padding = getSpacing(options.padding || {}, defaultPadding);\n        var paddingBox = box.clone().unpad(padding);\n        var axisBox = paddingBox.clone();\n\n        axisBox.y2 = axisBox.y1 + Math.min(axisBox.width(), axisBox.height());\n        axisBox.align(paddingBox, Y, CENTER);\n\n        var valueAxisBox = axisBox.clone().shrink(0, axisBox.height() / 2);\n\n        polarAxis.reflow(axisBox);\n        valueAxis.reflow(valueAxisBox);\n        var heightDiff = valueAxis.lineBox().height() - valueAxis.box.height();\n        valueAxis.reflow(valueAxis.box.unpad({ top: heightDiff }));\n\n        this.axisBox = axisBox;\n        this.alignAxes(axisBox);\n    },\n\n    backgroundBox: function() {\n        return this.box;\n    },\n\n    detachLabels: function() {}\n});\n\nvar PolarScatterChart = ScatterChart.extend({\n    pointSlot: function(slotX, slotY) {\n        var valueRadius = slotX.center.y - slotY.y1;\n        var slot = Point.onCircle(slotX.center, slotX.startAngle, valueRadius);\n\n        return new Box(slot.x, slot.y, slot.x, slot.y);\n    }\n});\n\nsetDefaultOptions(PolarScatterChart, {\n    clip: false\n});\n\nvar PolarLineChart = ScatterLineChart.extend({\n\n});\n\nPolarLineChart.prototype.pointSlot = PolarScatterChart.prototype.pointSlot;\n\nsetDefaultOptions(PolarLineChart, {\n    clip: false\n});\n\nvar SplinePolarAreaSegment = SplineAreaSegment.extend({\n    fillToAxes: function(fillPath) {\n        var center = this._polarAxisCenter();\n        fillPath.lineTo(center.x, center.y);\n    },\n\n    _polarAxisCenter: function() {\n        var polarAxis = this.parent.plotArea.polarAxis;\n        var center = polarAxis.box.center();\n        return center;\n    },\n\n    strokeSegments: function() {\n        var segments = this._strokeSegments;\n\n        if (!segments) {\n            var center = this._polarAxisCenter();\n            var curveProcessor = new CurveProcessor(false);\n            var linePoints = this.points();\n\n            linePoints.push(center);\n            segments = this._strokeSegments = curveProcessor.process(linePoints);\n            segments.pop();\n        }\n\n        return segments;\n    }\n});\n\nvar PolarAreaSegment = AreaSegment.extend({\n    fillToAxes: function(fillPath) {\n        var polarAxis = this.parent.plotArea.polarAxis;\n        var center = polarAxis.box.center();\n        var centerSegment = new geometry.Segment([ center.x, center.y ]);\n\n        fillPath.segments.unshift(centerSegment);\n        fillPath.segments.push(centerSegment);\n    }\n});\n\nvar PolarAreaChart = PolarLineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = (currentSeries.line || {}).style;\n        var segment;\n\n        if (style === SMOOTH) {\n            segment = new SplinePolarAreaSegment(linePoints, currentSeries, seriesIx);\n        } else {\n            segment = new PolarAreaSegment(linePoints, currentSeries, seriesIx);\n        }\n        return segment;\n    },\n\n    createMissingValue: function(value, missingValues) {\n        var missingValue;\n\n        if (hasValue(value.x) && missingValues !== INTERPOLATE) {\n            missingValue = {\n                x: value.x,\n                y: value.y\n            };\n            if (missingValues === ZERO) {\n                missingValue.y = 0;\n            }\n        }\n\n        return missingValue;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    },\n\n    _hasMissingValuesGap: function() {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n\n        for (var idx = 0; idx < series.length; idx++) {\n            if (this$1$1.seriesMissingValues(series[idx]) === GAP) {\n                return true;\n            }\n        }\n    },\n\n    sortPoints: function(points) {\n        var this$1$1 = this;\n\n        points.sort(xComparer);\n\n        if (this._hasMissingValuesGap()) {\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                if (point) {\n                    var value = point.value;\n                    if (!hasValue(value.y) && this$1$1.seriesMissingValues(point.series) === GAP) {\n                        delete points[idx];\n                    }\n                }\n            }\n        }\n\n        return points;\n    }\n});\n\nfunction xComparer(a, b) {\n    return a.value.x - b.value.x;\n}\n\nvar PolarPlotArea = PolarPlotAreaBase.extend({\n    createPolarAxis: function() {\n        var polarAxis = new dataviz.PolarAxis(this.options.xAxis, this.chartService);\n\n        this.polarAxis = polarAxis;\n        this.axisX = polarAxis;\n        this.appendAxis(polarAxis);\n    },\n\n    render: function() {\n        this.series = [].concat( this.originalSeries );\n        this.createTrendlineSeries();\n\n        PolarPlotAreaBase.fn.render.call(this);\n    },\n\n    valueAxisOptions: function(defaults) {\n        return deepExtend(defaults, {\n            majorGridLines: { type: ARC },\n            minorGridLines: { type: ARC }\n        }, this.options.yAxis);\n    },\n\n    createValueAxis: function() {\n        PolarPlotAreaBase.fn.createValueAxis.call(this);\n        this.axisY = this.valueAxis;\n    },\n\n    trendlineFactory: function(options, series) {\n        var trendline = XYPlotArea.prototype.trendlineFactory.call(this, options, series);\n        if (trendline) {\n            trendline.type = POLAR_LINE;\n        }\n\n        return trendline;\n    },\n\n    appendChart: function(chart, pane) {\n        this.valueAxisRangeTracker.update(chart.yAxisRanges);\n\n        PlotAreaBase.prototype.appendChart.call(this, chart, pane);\n    },\n\n    createCharts: function() {\n        var series = this.filterVisibleSeries(this.series);\n        var pane = this.panes[0];\n\n        this.createLineChart(\n            filterSeriesByType(series, [ POLAR_LINE ]),\n            pane\n        );\n\n        this.createScatterChart(\n            filterSeriesByType(series, [ POLAR_SCATTER ]),\n            pane\n        );\n\n        this.createAreaChart(\n            filterSeriesByType(series, [ POLAR_AREA ]),\n            pane\n        );\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new PolarLineChart(this, { series: series });\n\n        this.appendChart(lineChart, pane);\n    },\n\n    createScatterChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var scatterChart = new PolarScatterChart(this, { series: series });\n\n        this.appendChart(scatterChart, pane);\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new PolarAreaChart(this, { series: series });\n\n        this.appendChart(areaChart, pane);\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var xValue = this.axisX.getValue(point);\n        var yValue = this.axisY.getValue(point);\n\n        if (xValue !== null && yValue !== null) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                x: xValue,\n                y: yValue\n            });\n        }\n    },\n\n    createCrosshairs: function() {}\n});\n\nsetDefaultOptions(PolarPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(PolarPlotArea.prototype, PlotAreaEventsMixin, {\n    seriesValues: XYPlotArea.prototype.seriesValues\n});\n\nfunction groupBySeriesIx(segments) {\n    var seriesSegments = [];\n    for (var idx = 0; idx < segments.length; idx++) {\n        var segment = segments[idx];\n        seriesSegments[segment.seriesIx] = seriesSegments[segment.seriesIx] || [];\n        seriesSegments[segment.seriesIx].push(segment);\n    }\n\n    return seriesSegments;\n}\n\nvar RadarLineChart = LineChart.extend({\n    pointSlot: function(categorySlot, valueSlot) {\n        var valueRadius = categorySlot.center.y - valueSlot.y1;\n        var slot = Point.onCircle(categorySlot.center, categorySlot.middle(), valueRadius);\n\n        return new Box(slot.x, slot.y, slot.x, slot.y);\n    },\n\n    renderSegments: function() {\n        LineChart.fn.renderSegments.call(this);\n\n        if (this._segments && this._segments.length > 1) {\n            var seriesSegments = groupBySeriesIx(this._segments);\n\n            for (var idx = 0; idx < seriesSegments.length; idx++) {\n                var segments = seriesSegments[idx];\n                if (segments && segments.length > 1) {\n                    var firstPoint = segments[0].linePoints[0];\n                    var lastSegment = last(segments);\n                    var lastPoint = last(lastSegment.linePoints);\n                    var isFirstDataPoint = firstPoint.categoryIx === 0;\n                    var isLastDataPoint = lastPoint.categoryIx === lastPoint.categoriesCount - 1;\n                    if (isFirstDataPoint && isLastDataPoint) {\n                        last(segments).linePoints.push(firstPoint);\n                    }\n                }\n            }\n        }\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        var segment = new pointType(linePoints, currentSeries, seriesIx);\n        var missingValues = this.seriesMissingValues(currentSeries);\n\n        if (linePoints.length === currentSeries.data.length || missingValues === INTERPOLATE) {\n            segment.options.closed = true;\n        }\n\n        return segment;\n    }\n});\n\nsetDefaultOptions(RadarLineChart, {\n    clip: false,\n    limitPoints: false\n});\n\nvar SplineRadarAreaSegment = SplineAreaSegment.extend({\n    fillToAxes: function() {}\n});\n\nvar RadarAreaSegment = AreaSegment.extend({\n    fillToAxes: function() {}\n});\n\nvar RadarAreaChart = RadarLineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n        var isStacked = this.options.isStacked;\n        var style = (currentSeries.line || {}).style;\n        var previousSegment;\n        var stackPoints;\n        var segment;\n\n        if (isStacked && seriesIx > 0 && prevSegment) {\n            stackPoints = prevSegment.linePoints.slice(0);\n            previousSegment = prevSegment;\n        }\n\n        if (style === SMOOTH) {\n            segment = new SplineRadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n            segment.options.closed = true;\n        } else {\n            linePoints.push(linePoints[0]);\n            segment = new RadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n        }\n\n        return segment;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    }\n});\n\nvar RadarSegment = DonutSegment.extend({\n    init: function(value, options) {\n        DonutSegment.fn.init.call(this, value, null, options);\n    }\n});\n\nsetDefaultOptions(RadarSegment, {\n    overlay: {\n        gradient: \"none\"\n    },\n    labels: {\n        distance: 10\n    }\n});\n\nvar RadarClusterLayout = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    },\n\n    reflow: function(sector) {\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var gap = options.gap;\n        var spacing = options.spacing;\n        var count = children.length;\n        var slots = count + gap + (spacing * (count - 1));\n        var slotAngle = sector.angle / slots;\n        var angle = sector.startAngle + slotAngle * (gap / 2);\n\n        this.forEach(children, function (child) {\n            var slotSector = sector.clone();\n            slotSector.startAngle = angle;\n            slotSector.angle = slotAngle;\n\n            if (child.sector) {\n                slotSector.radius = child.sector.radius;\n            }\n\n            child.reflow(slotSector);\n            child.sector = slotSector;\n\n            angle += slotAngle + (slotAngle * spacing);\n        });\n    }\n});\n\nsetDefaultOptions(RadarClusterLayout, {\n    gap: 1,\n    spacing: 0\n});\n\nvar RadarStackLayout = ChartElement.extend({\n    reflow: function(sector) {\n        var ref = this;\n        var reverse = ref.options.reverse;\n        var children = ref.children;\n        var childrenCount = children.length;\n        var first = reverse ? childrenCount - 1 : 0;\n        var step = reverse ? -1 : 1;\n\n        this.box = new Box();\n\n        for (var i = first; i >= 0 && i < childrenCount; i += step) {\n            var childSector = children[i].sector;\n            childSector.startAngle = sector.startAngle;\n            childSector.angle = sector.angle;\n        }\n    }\n});\n\nvar RadarBarChart = BarChart.extend({\n    pointType: function() {\n        return RadarSegment;\n    },\n\n    clusterType: function() {\n        return RadarClusterLayout;\n    },\n\n    stackType: function() {\n        return RadarStackLayout;\n    },\n\n    categorySlot: function(categoryAxis, categoryIx) {\n        return categoryAxis.getSlot(categoryIx);\n    },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var slot = categorySlot.clone();\n        var y = categorySlot.center.y;\n\n        slot.radius = y - valueSlot.y1;\n        slot.innerRadius = y - valueSlot.y2;\n\n        return slot;\n    },\n\n    reflowPoint: function(point, pointSlot) {\n        point.sector = pointSlot;\n        point.reflow();\n    },\n\n    createAnimation: function() {\n        this.options.animation.center = this.box.toRect().center();\n        BarChart.fn.createAnimation.call(this);\n    }\n});\n\nRadarBarChart.prototype.reflow = CategoricalChart.prototype.reflow;\n\nsetDefaultOptions(RadarBarChart, {\n    clip: false,\n    limitPoints: false,\n    animation: {\n        type: \"pie\"\n    }\n});\n\nvar RadarPlotArea = PolarPlotAreaBase.extend({\n    createPolarAxis: function() {\n        var categoryAxis = new dataviz.RadarCategoryAxis(this.options.categoryAxis, this.chartService);\n\n        this.polarAxis = categoryAxis;\n        this.categoryAxis = categoryAxis;\n        this.appendAxis(categoryAxis);\n        this.aggregateCategories();\n        this.createTrendlineSeries();\n        this.createCategoryAxesLabels();\n    },\n\n    valueAxisOptions: function(defaults) {\n        if (this._hasBarCharts) {\n            deepExtend(defaults, {\n                majorGridLines: { type: ARC },\n                minorGridLines: { type: ARC }\n            });\n        }\n\n        if (this._isStacked100) {\n            deepExtend(defaults, {\n                roundToMajorUnit: false,\n                labels: { format: \"P0\" }\n            });\n        }\n\n        return deepExtend(defaults, this.options.valueAxis);\n    },\n\n    aggregateCategories: function() {\n        // No separate panes in radar charts\n        CategoricalPlotArea.prototype.aggregateCategories.call(this, this.panes);\n    },\n\n    createCategoryAxesLabels: function() {\n        CategoricalPlotArea.prototype.createCategoryAxesLabels.call(this, this.panes);\n    },\n\n    filterSeries: function(currentSeries) {\n        // Not supported for radar charts\n        return currentSeries;\n    },\n\n    trendlineFactory: function(options, series) {\n        var trendline = CategoricalPlotArea.prototype.trendlineFactory.call(this, options, series);\n        if (trendline) {\n            trendline.type = RADAR_LINE;\n        }\n\n        return trendline;\n    },\n\n    createCharts: function() {\n        var series = this.filterVisibleSeries(this.series);\n        var pane = this.panes[0];\n\n        this.createAreaChart(\n            filterSeriesByType(series, [ RADAR_AREA ]),\n            pane\n        );\n\n        this.createLineChart(\n            filterSeriesByType(series, [ RADAR_LINE ]),\n            pane\n        );\n\n        this.createBarChart(\n            filterSeriesByType(series, [ RADAR_COLUMN ]),\n            pane\n        );\n    },\n\n    chartOptions: function(series) {\n        var options = { series: series };\n        var firstSeries = series[0];\n        if (firstSeries) {\n            var filteredSeries = this.filterVisibleSeries(series);\n            var stack = firstSeries.stack;\n            options.isStacked = stack && filteredSeries.length > 1;\n            options.isStacked100 = stack && stack.type === \"100%\" && filteredSeries.length > 1;\n\n            if (options.isStacked100) {\n                this._isStacked100 = true;\n            }\n        }\n\n        return options;\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new RadarAreaChart(this, this.chartOptions(series));\n        this.appendChart(areaChart, pane);\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new RadarLineChart(this, this.chartOptions(series));\n        this.appendChart(lineChart, pane);\n    },\n\n    createBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var options = this.chartOptions(series);\n        options.gap = firstSeries.gap;\n        options.spacing = firstSeries.spacing;\n\n        var barChart = new RadarBarChart(this, options);\n        this.appendChart(barChart, pane);\n\n        this._hasBarCharts = true;\n    },\n\n    seriesCategoryAxis: function() {\n        return this.categoryAxis;\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var category = this.categoryAxis.getCategory(point);\n        var value = this.valueAxis.getValue(point);\n\n        if (category !== null && value !== null) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                category: category,\n                value: value\n            });\n        }\n    },\n\n    createCrosshairs: function() {}\n});\n\ndeepExtend(RadarPlotArea.prototype, PlotAreaEventsMixin, {\n    appendChart: CategoricalPlotArea.prototype.appendChart,\n    aggregateSeries: CategoricalPlotArea.prototype.aggregateSeries,\n    seriesSourcePoints: CategoricalPlotArea.prototype.seriesSourcePoints,\n    seriesValues: CategoricalPlotArea.prototype.seriesValues\n});\n\nsetDefaultOptions(RadarPlotArea, {\n    categoryAxis: {\n        categories: []\n    },\n    valueAxis: {}\n});\n\nvar FunnelSegment = ChartElement.extend({\n    init: function(value, options, segmentOptions) {\n        ChartElement.fn.init.call(this, options);\n\n        this.value = value;\n        this.options.index = segmentOptions.index;\n    },\n\n    reflow: function(chartBox) {\n        var points = this.points;\n        var label = this.children[0];\n\n        this.box = new Box(points[0].x, points[0].y, points[1].x, points[2].y);\n\n        if (label) {\n            label.reflow(new Box(chartBox.x1, points[0].y, chartBox.x2, points[2].y));\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var visual;\n\n        ChartElement.fn.createVisual.call(this);\n\n        if (options.visual) {\n            visual = options.visual({\n                category: this.category,\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                percentage: this.percentage,\n                points: this.points,\n                options: options,\n                sender: this.getSender(),\n                createVisual: function () { return this$1$1.createPath(); }\n            });\n        } else {\n            visual = this.createPath();\n        }\n\n        if (visual) {\n            this.visual.append(visual);\n        }\n    },\n\n    createPath: function() {\n        var options = this.options;\n        var border = options.border;\n        var path = Path.fromPoints(this.points, {\n            fill: {\n                color: options.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: border.color,\n                opacity: border.opacity,\n                width: border.width\n            }\n        }).close();\n\n        return path;\n    },\n\n    createHighlight: function(style) {\n        return Path.fromPoints(this.points, style);\n    },\n\n    highlightVisual: function() {\n        return this.visual.children[0];\n    },\n\n    highlightVisualArgs: function() {\n        var path = Path.fromPoints(this.points).close();\n\n        return {\n            options: this.options,\n            path: path\n        };\n    },\n\n    tooltipAnchor: function() {\n        var box = this.box;\n        return {\n            point: new Point(box.center().x, box.y1),\n            align: {\n                horizontal: \"center\",\n                vertical: \"top\"\n            }\n        };\n    },\n\n    formatValue: function(format) {\n        var point = this;\n        return point.owner.formatPointValue(point, format);\n    }\n});\n\nsetDefaultOptions(FunnelSegment, {\n    color: WHITE,\n    border: {\n        width: 1\n    }\n});\n\ndeepExtend(FunnelSegment.prototype, PointEventsMixin);\n\nvar FunnelChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.points = [];\n        this.labels = [];\n        this.legendItems = [];\n        this.render();\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format,point.value);\n    },\n\n    render: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n        var series = options.series[0];\n        var data = series.data;\n\n        if (!data) {\n            return;\n        }\n\n        var ref$1 = bindSegments(series);\n        var total = ref$1.total;\n        var points = ref$1.points;\n\n        for (var i = 0; i < points.length; i++) {\n            var pointData = points[i];\n\n            if (!pointData) {\n                continue;\n            }\n\n            var fields = pointData.fields;\n\n            if (!isFunction(series.color)) {\n                series.color = fields.color || seriesColors[i % seriesColors.length];\n            }\n\n            fields = deepExtend({\n                index: i,\n                owner: this$1$1,\n                series: series,\n                dataItem: data[i],\n                percentage: pointData.value / total\n            }, fields, { visible: pointData.visible });\n\n            var value = pointData.valueFields.value;\n            var segment = this$1$1.createSegment(value, fields);\n            var label = this$1$1.createLabel(value, fields);\n\n            if (segment && label) {\n                segment.append(label);\n            }\n        }\n    },\n\n    evalSegmentOptions: function(options, value, fields) {\n        var series = fields.series;\n\n        evalOptions(options, {\n            value: value,\n            series: series,\n            dataItem: fields.dataItem,\n            index: fields.index\n        }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"toggle\", \"visual\" ] });\n    },\n\n    createSegment: function(value, fields) {\n        var seriesOptions = deepExtend({}, fields.series);\n        this.evalSegmentOptions(seriesOptions, value, fields);\n\n        this.createLegendItem(value, seriesOptions, fields);\n\n        if (fields.visible !== false) {\n\n            var segment = new FunnelSegment(value, seriesOptions, fields);\n            $.extend(segment, fields);\n\n            this.append(segment);\n            this.points.push(segment);\n\n            return segment;\n        }\n    },\n\n    createLabel: function(value, fields) {\n        var series = fields.series;\n        var dataItem = fields.dataItem;\n        var labels = deepExtend({}, this.options.labels, series.labels);\n        var text = value;\n\n        if (labels.visible) {\n            var labelTemplate = getTemplate(labels);\n            var data = {\n                dataItem: dataItem,\n                value: value,\n                percentage: fields.percentage,\n                category: fields.category,\n                series: series\n            };\n            if (labelTemplate) {\n                text = labelTemplate(data);\n            } else if (labels.format) {\n                text = this.plotArea.chartService.format.auto(labels.format, text);\n            }\n\n            if (!labels.color) {\n                labels.color = dataviz.autoTextColor(series.color);\n                if (!labels.background) {\n                    labels.background = series.color;\n                }\n            }\n\n            this.evalSegmentOptions(labels, value, fields);\n            var textBox = new TextBox(text, deepExtend({\n                vAlign: labels.position\n            }, labels), data);\n\n            this.labels.push(textBox);\n\n            return textBox;\n        }\n    },\n\n    labelPadding: function() {\n        var labels = this.labels;\n        var padding = { left: 0, right: 0 };\n\n        for (var i = 0; i < labels.length; i++) {\n            var label = labels[i];\n            var align = label.options.align;\n            if (align !== CENTER) {\n                var width = labels[i].box.width();\n\n                if (align === LEFT) {\n                    padding.left = Math.max(padding.left, width);\n                } else {\n                    padding.right = Math.max(padding.right, width);\n                }\n            }\n        }\n\n        return padding;\n    },\n\n    dynamicSlopeReflow: function(box, width, totalHeight) {\n        var ref = this;\n        var options = ref.options;\n        var segments = ref.points;\n        var count = segments.length;\n        var firstSegment = segments[0];\n        var maxSegment = firstSegment;\n\n        for (var idx = 0; idx < segments.length; idx++) {\n            if (segments[idx].percentage > maxSegment.percentage) {\n                maxSegment = segments[idx];\n            }\n        }\n\n        var lastUpperSide = (firstSegment.percentage / maxSegment.percentage) * width;\n        var previousOffset = (width - lastUpperSide) / 2;\n        var previousHeight = 0;\n\n        for (var idx$1 = 0; idx$1 < count; idx$1++) {\n            var percentage = segments[idx$1].percentage;\n            var nextSegment = segments[idx$1 + 1];\n            var nextPercentage = (nextSegment ? nextSegment.percentage : percentage);\n            var points = segments[idx$1].points = [];\n            var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n            var offset = (void 0);\n\n            if (!percentage) {\n                offset = nextPercentage ? 0 : width / 2;\n            } else {\n                offset = (width - lastUpperSide * (nextPercentage / percentage)) / 2;\n            }\n\n            offset = limitValue(offset, 0, width);\n\n            points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - offset, box.y1 + height + previousHeight));\n            points.push(new GeometryPoint(box.x1 + offset, box.y1 + height + previousHeight));\n\n            previousOffset = offset;\n            previousHeight += height + options.segmentSpacing;\n            lastUpperSide = limitValue(width - 2 * offset, 0, width);\n        }\n    },\n\n    constantSlopeReflow: function(box, width, totalHeight) {\n        var ref = this;\n        var options = ref.options;\n        var segments = ref.points;\n        var count = segments.length;\n        var decreasingWidth = options.neckRatio <= 1;\n        var neckRatio = decreasingWidth ? options.neckRatio * width : width;\n        var previousOffset = decreasingWidth ? 0 : (width - width / options.neckRatio) / 2;\n        var topMostWidth = decreasingWidth ? width : width - previousOffset * 2;\n        var finalNarrow = (topMostWidth - neckRatio) / 2;\n        var previousHeight = 0;\n\n        for (var idx = 0; idx < count; idx++) {\n            var points = segments[idx].points = [];\n            var percentage = segments[idx].percentage;\n            var offset = (options.dynamicHeight) ? (finalNarrow * percentage) : (finalNarrow / count);\n            var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n\n            points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset - offset, box.y1 + height + previousHeight));\n            points.push(new GeometryPoint(box.x1 + previousOffset + offset,box.y1 + height + previousHeight));\n            previousOffset += offset;\n            previousHeight += height + options.segmentSpacing;\n        }\n    },\n\n    reflow: function(chartBox) {\n        var points = this.points;\n        var count = points.length;\n\n        if (!count) {\n            return;\n        }\n\n        var options = this.options;\n        var box = chartBox.clone().unpad(this.labelPadding());\n        var totalHeight = box.height() - options.segmentSpacing * (count - 1);\n        var width = box.width();\n\n        if (options.dynamicSlope) {\n            this.dynamicSlopeReflow(box, width, totalHeight);\n        } else {\n            this.constantSlopeReflow(box, width, totalHeight);\n        }\n\n        for (var idx = 0; idx < count; idx++) {\n            points[idx].reflow(chartBox);\n        }\n    }\n});\n\nsetDefaultOptions(FunnelChart, {\n    neckRatio: 0.3,\n    width: 300,\n    dynamicSlope: false,\n    dynamicHeight: true,\n    segmentSpacing: 0,\n    labels: {\n        visible: false,\n        align: CENTER,\n        position: CENTER,\n        zIndex: 1\n    }\n});\n\ndeepExtend(FunnelChart.prototype, PieChartMixin);\n\nvar MAX_NECK_RATIO = 1e6;\n\nvar PyramidChart = FunnelChart.extend({\n    init: function(plotArea, options) {\n        options.dynamicSlope = false;\n        options.neckRatio = MAX_NECK_RATIO;\n\n        FunnelChart.fn.init.call(this, plotArea, options);\n    }\n});\n\nvar FunnelPlotArea = PlotAreaBase.extend({\n    render: function() {\n        this.createChart(FunnelChart, filterSeriesByType(this.series, [ FUNNEL ]));\n        this.createChart(PyramidChart, filterSeriesByType(this.series, [ PYRAMID ]));\n    },\n\n    createChart: function(chartType, series) {\n        var firstSeries = series[0];\n        if (!firstSeries) {\n            return;\n        }\n\n        var chart = new chartType(this, {\n            series: series,\n            legend: this.options.legend,\n            neckRatio: firstSeries.neckRatio,\n            dynamicHeight: firstSeries.dynamicHeight,\n            dynamicSlope: firstSeries.dynamicSlope,\n            segmentSpacing: firstSeries.segmentSpacing,\n            highlight: firstSeries.highlight\n        });\n\n        this.appendChart(chart);\n    },\n\n    appendChart: function(chart, pane) {\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        append(this.options.legend.items, chart.legendItems);\n    }\n});\n\n// Linear color scale from the given color to white minus minimum lightness offset.\nvar colorScale = function (color, minLightnessOffset) {\n    if (minLightnessOffset === void 0) { minLightnessOffset = 0.05; }\n\n    var baseColor = kendo.parseColor(color);\n    var offset = 1 - minLightnessOffset;\n\n    return function (value) {\n        var hsl = baseColor.toHSL();\n        var range = 100 - hsl.l;\n        var point = offset - value;\n        hsl.l += Math.min(point * range, range);\n\n        return hsl.toCss();\n    };\n};\n\nvar HeatmapPoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.value = value;\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createMarker();\n        this.createLabel();\n        this.createNote();\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n            var labelColor = labels.color;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            if (!labelColor) {\n                labelColor = dataviz.autoTextColor(this.color);\n            }\n\n            this.label = new TextBox(labelText,\n                deepExtend({\n                    align: CENTER,\n                    vAlign: CENTER,\n                    margin: {\n                        left: 5,\n                        right: 5\n                    },\n                    zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                },\n                labels, {\n                    color: labelColor\n                }),\n                pointData\n            );\n            this.append(this.label);\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.reflow(this.markerBox());\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        this.marker.reflow(this.markerBox());\n    },\n\n    markerBox: function() {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var rect = this.box.toRect();\n        var type = valueOrDefault(markers.type, 'rect');\n        var isRoundRect = type === datavizConstants.ROUNDED_RECT;\n        var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n        var halfBorderWidth = Math.round(borderWidth / 2);\n\n        if (markers.size) {\n            var center = rect.center();\n            rect.size.width = rect.size.height = markers.size;\n            rect.origin.x = Math.round(center.x - rect.size.width / 2);\n            rect.origin.y = Math.round(center.y - rect.size.height / 2);\n        }\n\n        rect.size.width -= borderWidth;\n        rect.size.height -= borderWidth;\n        rect.origin.y += halfBorderWidth + 0.5;\n        rect.origin.x += halfBorderWidth + 0.5;\n\n        return dataviz.rectToBox(rect);\n    },\n\n    markerBorder: function() {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var opacity = valueOrDefault(border.opacity, options.opacity);\n\n        return {\n            color: border.color || this.color,\n            width: border.width,\n            opacity: opacity,\n            dashType: border.dashType\n        };\n    },\n\n    createMarker: function() {\n        var options = this.options;\n        var markerOptions = options.markers;\n        var marker = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        this.marker = marker;\n        this.append(marker);\n    },\n\n    createHighlight: function(style) {\n        var options = this.options;\n        var markerOptions = this.options.highlight.markers || this.options.markers;\n\n        var highlight = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: markerOptions.color || this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n        });\n\n        highlight.reflow(this.markerBox());\n        var visual = highlight.getElement();\n\n        visual.options.fill = style.fill;\n        visual.options.stroke = style.stroke;\n\n        return visual;\n    },\n\n    highlightVisual: function() {\n        return this.rectVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var left = this.box.center().x;\n        var top = this.box.y1 - TOOLTIP_OFFSET;\n\n        return {\n            point: new Point(left, top),\n            align: {\n                horizontal: CENTER,\n                vertical: BOTTOM\n            }\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    unclipElements: function() {\n        /* noop, clip labels */\n    },\n\n    pointData: function() {\n        return {\n            x: this.value.x,\n            y: this.value.y,\n            value: this.value.value,\n            dataItem: this.dataItem,\n            series: this.series\n        };\n    }\n});\n\ndeepExtend(HeatmapPoint.prototype, PointEventsMixin);\ndeepExtend(HeatmapPoint.prototype, NoteMixin);\n\nHeatmapPoint.prototype.defaults = {\n    markers: {\n        type: 'rect',\n        borderRadius: 4,\n        border: {\n            color: 'transparent'\n        }\n    },\n    padding: { top: 1 },\n    labels: {\n        visible: false,\n        padding: 3\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    }\n};\n\nvar HeatmapChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this._initFields();\n\n        this.render();\n    },\n\n    _initFields: function() {\n        this.points = [];\n        this.seriesOptions = [];\n        this.valueRange = { min: MAX_VALUE, max: MIN_VALUE };\n        this._evalSeries = [];\n    },\n\n    render: function() {\n        this.setRange();\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    setRange: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$1 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                var valueFields = ref$1.valueFields;\n                if (defined(valueFields.value) && valueFields.value !== null) {\n                    this$1$1.valueRange.min = Math.min(this$1$1.valueRange.min, valueFields.value);\n                    this$1$1.valueRange.max = Math.max(this$1$1.valueRange.max, valueFields.value);\n                }\n            }\n        }\n    },\n\n    addValue: function(value, fields) {\n        var point;\n        if (value && defined(value.value) && value.value !== null) {\n            point = this.createPoint(value, fields);\n            if (point) {\n                $.extend(point, fields);\n            }\n        }\n\n        this.points.push(point);\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"tooltip\", \"content\", \"template\",\n                \"visual\", \"toggle\", \"drilldownSeriesFactory\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, options);\n            evalOptions(pointOptions, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                min: this.valueRange.min,\n                max: this.valueRange.max\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    pointType: function() {\n        return HeatmapPoint;\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                markers: {\n                    opacity: series.opacity\n                },\n                tooltip: {\n                    format: this.options.tooltip.format\n                },\n                labels: {\n                    format: this.options.labels.format\n                }\n            }, series);\n        }\n\n        return options;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointOptions = this.pointOptions(series, fields.seriesIx);\n        var color = fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        } else if (this.valueRange.max !== 0) {\n            var scale = colorScale(color);\n            color = scale(value.value / this.valueRange.max);\n        }\n\n        var point = new HeatmapPoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    seriesAxes: function(series) {\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var plotArea = this.plotArea;\n        var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n        var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return { xAxis: xAxis, yAxis: yAxis };\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var chartPoints = this.points;\n        var limit = !this.options.clip;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (value, fields) {\n            var point = chartPoints[pointIx++];\n            var ref = this$1$1.seriesAxes(fields.series);\n            var xAxis = ref.xAxis;\n            var yAxis = ref.yAxis;\n            var indexX = xAxis.categoryIndex(value.x);\n            var indexY = yAxis.categoryIndex(value.y);\n            var slotX = xAxis.getSlot(indexX, indexX, limit);\n            var slotY = yAxis.getSlot(indexY, indexY, limit);\n\n            if (point) {\n                if (slotX && slotY) {\n                    var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.box = targetBox;\n    },\n\n    pointSlot: function(slotX, slotY) {\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var ref$1 = this$1$1.seriesAxes(currentSeries);\n            var xAxis = ref$1.xAxis;\n            var yAxis = ref$1.yAxis;\n            var xRange = xAxis.currentRangeIndices();\n            var yRange = yAxis.currentRangeIndices();\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$2 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                var value = ref$2.valueFields;\n                var fields = ref$2.fields;\n                var xIndex = xAxis.totalIndex(value.x);\n                var yIndex = yAxis.totalIndex(value.y);\n                var xIn = xRange.min <= xIndex && xIndex <= xRange.max;\n                var yIn = yRange.min <= yIndex && yIndex <= yRange.max;\n\n                if (xIn && yIn) {\n                    callback(value, deepExtend({\n                        pointIx: pointIx,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        dataItem: currentSeries.data[pointIx],\n                        owner: this$1$1\n                    }, fields));\n                }\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y, value.value);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result;\n    }\n});\nsetDefaultOptions(HeatmapChart, {\n    series: [],\n    tooltip: {\n        format: \"{0}, {1}: {2}\"\n    },\n    labels: {\n        format: \"{2}\"\n    },\n    clip: true\n});\n\nvar HeatmapPlotArea = PlotAreaBase.extend({\n    initFields: function() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n    },\n\n    render: function(panes) {\n        if (panes === void 0) { panes = this.panes; }\n\n        this.bindCategories();\n        this.createAxes(panes);\n        this.createCharts(panes);\n        this.createAxisLabels();\n    },\n\n    bindCategories: function() {\n        var this$1$1 = this;\n\n        var series = this.srcSeries || this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var data = currentSeries.data || [];\n            var ref = this$1$1.seriesAxes(currentSeries);\n            var xAxis = ref.xAxis;\n            var yAxis = ref.yAxis;\n\n            var xCategories = dataviz.createHashSet(xAxis.categories || []);\n            var yCategories = dataviz.createHashSet(yAxis.categories || []);\n\n            for (var pointIndex = 0; pointIndex < data.length; pointIndex++) {\n                var ref$1 = SeriesBinder.current.bindPoint(currentSeries, pointIndex).valueFields;\n                var x = ref$1.x;\n                var y = ref$1.y;\n\n                if (!xCategories.has(x)) {\n                    xCategories.add(x);\n                }\n\n                if (!yCategories.has(y)) {\n                    yCategories.add(y);\n                }\n            }\n\n            xAxis.categories = xCategories.values();\n            yAxis.categories = yCategories.values();\n        }\n    },\n\n    createCharts: function(panes) {\n        var this$1$1 = this;\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n            var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this$1$1.createHeatmapChart(\n                filterSeriesByType(filteredSeries, [ HEATMAP ]),\n                pane\n            );\n        }\n    },\n\n    createHeatmapChart: function(series, pane) {\n        var chart = new HeatmapChart(this, {\n            series: series\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var xAxisName = series.xAxis;\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        var yAxisName = series.yAxis;\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = panes[0].name || \"default\";\n        var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    seriesAxes: function(series) {\n        var xAxis;\n        var yAxis;\n\n        var options = this.options;\n\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxisName = series.xAxis;\n        if (xAxisName) {\n            xAxis = xAxisOptions.find(function (axis) { return axis.name === xAxisName; });\n        } else {\n            xAxis = xAxisOptions[0];\n        }\n\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxisName = series.yAxis;\n        if (yAxisName) {\n            yAxis = yAxisOptions.find(function (axis) { return axis.name === yAxisName; });\n        } else {\n            yAxis = yAxisOptions[0];\n        }\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return { xAxis: xAxis, yAxis: yAxis };\n    },\n\n    createAxisLabels: function() {\n        var axes = this.axes;\n        for (var i = 0; i < axes.length; i++) {\n            axes[i].createLabels();\n        }\n    },\n\n    createXYAxis: function(options, vertical, axisIndex) {\n        var axisName = options.name;\n        var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        var axisOptions = $.extend({\n            axisCrossingValue: 0\n        }, options, {\n            vertical: vertical,\n            reverse: (vertical || this.chartService.rtl) ? !options.reverse : options.reverse,\n            justified: false\n        });\n        var firstCategory = axisOptions.categories ? axisOptions.categories[0] : null;\n        var typeSamples = [ axisOptions.min, axisOptions.max, firstCategory ];\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        var inferredDate;\n\n        for (var i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        var axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = dataviz.DateCategoryAxis;\n        } else {\n            axisType = CategoryAxis;\n        }\n\n        var axis = new axisType(axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n        axis.mapCategories();\n\n        return axis;\n    },\n\n    createAxes: function(panes) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var xAxesOptions = [].concat(options.xAxis);\n        var xAxes = [];\n        var yAxesOptions = [].concat(options.yAxis);\n        var yAxes = [];\n\n        for (var idx = 0; idx < xAxesOptions.length; idx++) {\n            var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n            var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n            if (inArray(axisPane$1, panes)) {\n                yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis.options.vertical) {\n            delete this.namedYAxes[axisName];\n        } else {\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var allAxes = this.axes;\n        var length = allAxes.length;\n        var xValues = [];\n        var yValues = [];\n\n        for (var i = 0; i < length; i++) {\n            var axis = allAxes[i];\n            var values = axis.options.vertical ? yValues : xValues;\n            appendIfNotNull(values, axis.getCategory(point));\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        var vertical = axis.options.vertical;\n        var axes = this.groupAxes(this.panes);\n        var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n        updateAxisOptions$2(this.options, index, vertical, options);\n        updateAxisOptions$2(this.originalOptions, index, vertical, options);\n    },\n\n    crosshairOptions: function(axis) {\n        // Stack the crosshair above the series points.\n        return $.extend({}, axis.options.crosshair, { zIndex: 0 });\n    }\n});\n\nfunction updateAxisOptions$2(targetOptions, axisIndex, vertical, options) {\n    var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n    deepExtend(axisOptions, options);\n}\n\nsetDefaultOptions(HeatmapPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(HeatmapPlotArea.prototype, PlotAreaEventsMixin);\n\nvar COLOR = \"color\";\nvar FIRST = \"first\";\nvar FROM = \"from\";\nvar MAX = \"max\";\nvar MIN = \"min\";\nvar NOTE_TEXT = \"noteText\";\nvar SUMMARY_FIELD = \"summary\";\nvar TO = \"to\";\n\nPlotAreaFactory.current.register(CategoricalPlotArea, [\n    BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA,\n    CANDLESTICK, OHLC, BULLET, VERTICAL_BULLET, BOX_PLOT, VERTICAL_BOX_PLOT,\n    RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL, RANGE_AREA, VERTICAL_RANGE_AREA ].concat( TRENDLINE_SERIES\n));\n\nPlotAreaFactory.current.register(XYPlotArea, [\n    SCATTER, SCATTER_LINE, BUBBLE ].concat( TRENDLINE_SERIES\n));\n\nPlotAreaFactory.current.register(PiePlotArea, [ PIE ]);\nPlotAreaFactory.current.register(DonutPlotArea, [ DONUT ]);\nPlotAreaFactory.current.register(FunnelPlotArea, [ FUNNEL, PYRAMID ]);\n\nPlotAreaFactory.current.register(PolarPlotArea, [\n    POLAR_AREA, POLAR_LINE, POLAR_SCATTER ].concat( TRENDLINE_SERIES\n));\n\nPlotAreaFactory.current.register(RadarPlotArea, [\n    RADAR_AREA, RADAR_COLUMN, RADAR_LINE ].concat( TRENDLINE_SERIES\n));\n\nPlotAreaFactory.current.register(HeatmapPlotArea, [ HEATMAP ]);\n\nSeriesBinder.current.register(\n    [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA ],\n    [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, ERROR_LOW_FIELD, ERROR_HIGH_FIELD, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n    [ FROM, TO ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ WATERFALL, HORIZONTAL_WATERFALL ],\n    [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, SUMMARY_FIELD, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register([ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ], [ X, Y ], [ COLOR, DRILLDOWN_FIELD ]);\nSeriesBinder.current.register([ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ], [ VALUE ], [ COLOR, DRILLDOWN_FIELD ]);\n\nSeriesBinder.current.register(\n    [ FUNNEL, PYRAMID ],\n    [ VALUE ], [ CATEGORY, COLOR, \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA, WATERFALL, HORIZONTAL_WATERFALL ],\n    { value: MAX, color: FIRST, noteText: FIRST, errorLow: MIN, errorHigh: MAX }\n);\n\nDefaultAggregates.current.register(\n    [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n    { from: MIN, to: MAX, color: FIRST, noteText: FIRST }\n);\n\nDefaultAggregates.current.register(\n    [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ],\n    { value: MAX, color: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ SCATTER, SCATTER_LINE, BUBBLE ],\n    [ X, Y ], [ COLOR, NOTE_TEXT, X_ERROR_LOW_FIELD, X_ERROR_HIGH_FIELD, Y_ERROR_LOW_FIELD, Y_ERROR_HIGH_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ BUBBLE ], [ X, Y, \"size\" ], [ COLOR, CATEGORY, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ HEATMAP ],\n    [ X, Y, VALUE ], [ COLOR, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ CANDLESTICK, OHLC ],\n    [ \"open\", \"high\", \"low\", \"close\" ], [ CATEGORY, COLOR, \"downColor\", NOTE_TEXT ]\n);\n\nDefaultAggregates.current.register(\n    [ CANDLESTICK, OHLC ],\n    { open: MAX, high: MAX, low: MIN, close: MAX,\n      color: FIRST, downColor: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n    [ \"lower\", \"q1\", \"median\", \"q3\", \"upper\", \"mean\", \"outliers\" ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n    { lower: MAX, q1: MAX, median: MAX, q3: MAX, upper: MAX, mean: MAX, outliers: FIRST,\n      color: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ BULLET, VERTICAL_BULLET ],\n    [ \"current\", \"target\" ], [ CATEGORY, COLOR, \"visibleInLegend\", NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BULLET, VERTICAL_BULLET ],\n    { current: MAX, target: MAX, color: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ PIE, DONUT ],\n    [ VALUE ], [ CATEGORY, COLOR, \"explode\", \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n);\n\nvar AXIS_NAMES = [ CATEGORY, VALUE, X, Y ];\n\nvar MOUSEMOVE = \"mousemove\";\nvar CONTEXTMENU = \"contextmenu\";\nvar MOUSELEAVE = \"mouseleave\";\nvar MOUSEMOVE_DELAY = 20;\n\nvar Chart = Class.extend({\n    init: function(element, userOptions, themeOptions, context) {\n        var this$1$1 = this;\n        if (context === void 0) { context = {}; }\n\n        this.observers = [];\n        this.addObserver(context.observer);\n        this.chartService = new services.ChartService(this, context);\n        this.chartService.theme = themeOptions;\n\n        this._initElement(element);\n\n        var options = deepExtend({}, this.options, userOptions);\n        this._originalOptions = deepExtend({}, options);\n        this._theme = themeOptions;\n        this._initTheme(options, themeOptions);\n\n        this._initHandlers();\n        this._initSurface();\n\n        this.bindCategories();\n        dataviz.FontLoader.preloadFonts(userOptions, function () {\n            this$1$1.fontLoaded = true;\n            if (!this$1$1._destroyed) {\n                this$1$1.trigger('init');\n                this$1$1._redraw();\n                this$1$1._attachEvents();\n            }\n        });\n    },\n\n    _initElement: function(element) {\n        this._setElementClass(element);\n        element.style.position = \"relative\";\n        while (element.firstChild) {\n            element.removeChild(element.firstChild);\n        }\n        this.element = element;\n    },\n\n    _setElementClass: function(element) {\n        dataviz.addClass(element, \"k-chart\");\n    },\n\n    _initTheme: function(options, themeOptions) {\n        var seriesCopies = [];\n        var series = options.series || [];\n\n        for (var i = 0; i < series.length; i++) {\n            seriesCopies.push($.extend({}, series[i]));\n        }\n        options.series = seriesCopies;\n\n        resolveAxisAliases(options);\n        this.applyDefaults(options, themeOptions);\n\n        // Clean up default if not overriden by data attributes\n        if (options.seriesColors === null) {\n            delete options.seriesColors;\n        }\n\n        this.options = deepExtend({}, themeOptions, options);\n        this.applySeriesColors();\n    },\n\n    getSize: function() {\n        var chartArea = this.options.chartArea || {};\n        var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n        var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n\n        return {\n            width: width,\n            height: height\n        };\n    },\n\n    resize: function(force) {\n        var size = this.getSize();\n        var currentSize = this._size;\n        var hasSize = size.width > 0 || size.height > 0;\n\n        if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n            this._size = size;\n            this._resize(size, force);\n            this.trigger(\"resize\", size);\n        } else if (hasSize && this._selections && dataviz.find(this._selections, function (s) { return !s.visible; })) {\n            this._destroySelections();\n            this._setupSelection();\n        }\n    },\n\n    _resize: function() {\n        this._noTransitionsRedraw();\n    },\n\n    redraw: function(paneName) {\n        this.applyDefaults(this.options);\n        this.applySeriesColors();\n\n        if (paneName) {\n            var plotArea = this._model._plotArea;\n            var pane = plotArea.findPane(paneName);\n            plotArea.redraw(pane);\n        } else {\n            this._redraw();\n        }\n    },\n\n    getAxis: function(name) {\n        return findAxisByName(name, this._plotArea.axes);\n    },\n\n    findAxisByName: function(name) {\n        return this.getAxis(name);\n    },\n\n    findPaneByName: function(name) {\n        var panes = this._plotArea.panes;\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            if (panes[idx].options.name === name) {\n                return new ChartPane(panes[idx]);\n            }\n        }\n    },\n\n    findPaneByIndex: function(idx) {\n        var panes = this._plotArea.panes;\n        if (panes[idx]) {\n            return new ChartPane(panes[idx]);\n        }\n    },\n\n    plotArea: function() {\n        return new ChartPlotArea(this._plotArea);\n    },\n\n    toggleHighlight: function(show, filter) {\n        var plotArea = this._plotArea;\n        var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n        var points;\n\n        if (isFunction(filter)) {\n            points = plotArea.filterPoints(filter);\n        } else {\n            var seriesName, categoryName;\n            if (isObject(filter)) {\n                seriesName = filter.series;\n                categoryName = filter.category;\n            } else {\n                seriesName = categoryName = filter;\n            }\n\n            if (firstSeries.type === DONUT) {\n                points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n            } else if (inArray(firstSeries.type, [ PIE, FUNNEL, PYRAMID ])) {\n                points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n            } else {\n                points = plotArea.pointsBySeriesName(seriesName);\n            }\n        }\n\n        if (points) {\n            this.togglePointsHighlight(show, points);\n        }\n    },\n\n    togglePointsHighlight: function(show, points) {\n        var highlight = this._highlight;\n        for (var idx = 0; idx < points.length; idx++) {\n            highlight.togglePointHighlight(points[idx], show);\n        }\n    },\n\n    showTooltip: function(filter) {\n        var shared = this._sharedTooltip();\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var plotArea = ref._plotArea;\n        var point, categoryIndex;\n\n        if (isFunction(filter)) {\n            point = plotArea.findPoint(filter);\n            if (point && shared) {\n                categoryIndex = point.categoryIx;\n            }\n        } else if (shared && defined(filter)) {\n            categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n        }\n\n        if (shared) {\n            if (categoryIndex >= 0) {\n                var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n                tooltip.showAt(points);\n            }\n        } else if (point) {\n            tooltip.show(point);\n        }\n    },\n\n    hideTooltip: function() {\n        this._tooltip.hide();\n    },\n\n    _initSurface: function() {\n        var surface = this.surface;\n        var wrap = this._surfaceWrap();\n\n        var chartArea = this.options.chartArea || {};\n        if (chartArea.width) {\n            dataviz.elementSize(wrap, { width: chartArea.width });\n        }\n        if (chartArea.height) {\n            dataviz.elementSize(wrap, { height: chartArea.height });\n        }\n\n        if (!surface || surface.options.type !== this.options.renderAs) {\n            this._destroySurface();\n\n            this.surface = drawing.Surface.create(wrap, {\n                type: this.options.renderAs\n            });\n\n            this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n            this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n\n        } else {\n            this.surface.clear();\n            this.surface.resize();\n        }\n    },\n\n    _surfaceWrap: function() {\n        return this.element;\n    },\n\n    _redraw: function() {\n        var model = this._getModel();\n        this._size = {\n            width: model.options.width,\n            height: model.options.height\n        };\n\n        this._destroyView();\n\n        this._model = model;\n        this._plotArea = model._plotArea;\n\n        model.renderVisual();\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.setup();\n                }\n            });\n        }\n\n        this._initSurface();\n        this.surface.draw(model.visual);\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.play();\n                }\n            });\n        }\n\n        this._tooltip = this._createTooltip();\n        this._highlight = new Highlight();\n        this._setupSelection();\n        this._createPannable();\n        this._createZoomSelection();\n        this._createMousewheelZoom();\n\n        this.trigger(RENDER);\n        triggerPaneRender(this._plotArea.panes);\n\n        if (!this._navState) {\n            this._cancelDomEvents();\n        }\n    },\n\n    exportVisual: function(exportOptions) {\n        var visual;\n        if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n            var currentOptions = this.options;\n            var options = deepExtend({}, exportOptions.options, {\n                chartArea: {\n                    width: exportOptions.width,\n                    height: exportOptions.height\n                }\n            });\n\n            clearMissingValues(this._originalOptions, options);\n            this.options = deepExtend({}, this._originalOptions, options);\n            this._initTheme(this.options, this._theme);\n            this.bindCategories();\n\n            var model = this._getModel();\n\n            model.renderVisual();\n            triggerPaneRender(model._plotArea.panes);\n\n            visual = model.visual;\n\n            this.options = currentOptions;\n        } else {\n            visual = this.surface.exportVisual();\n        }\n\n        return visual;\n    },\n\n    _sharedTooltip: function() {\n        return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n    },\n\n    _createPannable: function() {\n        var options = this.options;\n        if (options.pannable !== false) {\n            this._pannable = new Pannable(this._plotArea, options.pannable);\n        }\n    },\n\n    _createZoomSelection: function() {\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        if (zoomable !== false && selection !== false) {\n            this._zoomSelection = new ZoomSelection(this, selection);\n        }\n    },\n\n    _createMousewheelZoom: function() {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel;\n        if (zoomable !== false && mousewheel !== false) {\n            this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n        }\n    },\n\n    _toggleDragZoomEvents: function() {\n        var pannable = this.options.pannable;\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        var mousewheel = (zoomable || {}).mousewheel;\n        var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ]);\n        var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ ZOOM_START, ZOOM, ZOOM_END ]);\n        var element = this.element;\n\n        if (this._dragZoomEnabled && allowDrag && allowZoom) {\n            element.style.touchAction = this._touchAction || '';\n            this._dragZoomEnabled = false;\n        } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n            element.style.touchAction = \"none\";\n\n            this._dragZoomEnabled = true;\n        }\n\n        this._toggleDomEvents(!allowDrag, !allowZoom);\n    },\n\n    _toggleDomEvents: function(drag, zoom) {\n        var domEvents = this.domEvents;\n        if (!domEvents) {\n            return;\n        }\n\n        if (domEvents.toggleDrag) {\n            domEvents.toggleDrag(drag);\n        }\n\n        if (domEvents.toggleZoom) {\n            domEvents.toggleZoom(zoom);\n        }\n    },\n\n    _createTooltip: function() {\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var tooltip;\n\n        if (this._sharedTooltip()) {\n            tooltip = this._createSharedTooltip(tooltipOptions);\n        } else {\n            tooltip = new Tooltip(this.chartService, tooltipOptions);\n        }\n\n        return tooltip;\n    },\n\n    _createSharedTooltip: function(options) {\n        return new SharedTooltip(this._plotArea, options);\n    },\n\n    applyDefaults: function(options, themeOptions) {\n        applyAxisDefaults(options, themeOptions);\n        applySeriesDefaults(options, themeOptions);\n    },\n\n    applySeriesColors: function() {\n        var options = this.options;\n        var series = options.series;\n        var colors = options.seriesColors || [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var seriesColor = colors[i % colors.length];\n            var defaults = currentSeries._defaults;\n\n            currentSeries.color = currentSeries.color || seriesColor;\n            if (defaults) {\n                defaults.color = defaults.color || seriesColor;\n            }\n        }\n    },\n\n    _getModel: function() {\n        var options = this.options;\n        var plotArea = this._createPlotArea();\n        var model = new dataviz.RootElement(this._modelOptions());\n        model.chart = this;\n        model._plotArea = plotArea;\n\n        var title = Title.buildTitle(options.title);\n        var subtitle = Title.buildTitle(options.subtitle, {\n            align: options.title.align,\n            position: options.title.position\n        });\n        model.append.apply(model, Title.orderTitles([title, subtitle]));\n\n        if (options.legend && options.legend.visible) {\n            model.append(new Legend(plotArea.options.legend, this.chartService));\n        }\n        model.append(plotArea);\n        model.reflow();\n\n        return model;\n    },\n\n    _modelOptions: function() {\n        var options = this.options;\n        var size = this.getSize();\n\n        return deepExtend({\n            transitions: options.transitions,\n            width: size.width || datavizConstants.DEFAULT_WIDTH,\n            height: size.height || datavizConstants.DEFAULT_HEIGHT\n        }, options.chartArea);\n    },\n\n    _createPlotArea: function(skipSeries) {\n        var options = this.options;\n\n        var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n\n        return plotArea;\n    },\n\n    _setupSelection: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var axes = ref._plotArea.axes;\n        var selections = this._selections = [];\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var options = axis.options;\n            if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n                var range = axis.range();\n\n                var selection = new Selection(this$1$1, axis,\n                    deepExtend({ min: range.min, max: range.max }, options.select)\n                );\n\n                selections.push(selection);\n            }\n        }\n    },\n\n    _selectStart: function(e) {\n        return this.trigger(SELECT_START, e);\n    },\n\n    _select: function(e) {\n        return this.trigger(SELECT, e);\n    },\n\n    _selectEnd: function(e) {\n        return this.trigger(SELECT_END, e);\n    },\n\n    _initHandlers: function() {\n        this._clickHandler = this._click.bind(this);\n        this._mousewheelHandler = this._mousewheel.bind(this);\n        this._mouseleaveHandler = this._mouseleave.bind(this);\n        this._surfaceMouseenterHandler = this._mouseover.bind(this);\n        this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n\n        this._mousemove = kendo.throttle(\n            this._mousemove.bind(this),\n            MOUSEMOVE_DELAY\n        );\n    },\n\n    addObserver: function(observer) {\n        if (observer) {\n            this.observers.push(observer);\n        }\n    },\n\n    removeObserver: function(observer) {\n        var index = this.observers.indexOf(observer);\n        if (index >= 0) {\n            this.observers.splice(index, 1);\n        }\n    },\n\n    requiresHandlers: function(eventNames) {\n        var observers = this.observers;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].requiresHandlers(eventNames)) {\n                return true;\n            }\n        }\n    },\n\n    trigger: function(name, args) {\n        if (args === void 0) { args = {}; }\n\n        args.sender = this;\n\n        if (name === SHOW_TOOLTIP) {\n            args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n        } else if (name === SERIES_OVER) {\n            this._updateDrilldownPoint(args.point);\n        } else if (name === SERIES_LEAVE) {\n            this._resetDrilldownPoint();\n        } else if (name === SERIES_CLICK) {\n            this._startDrilldown(args.point);\n        }\n\n        var observers = this.observers;\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, args)) {\n                isDefaultPrevented = true;\n            }\n        }\n\n        return isDefaultPrevented;\n    },\n\n    _attachEvents: function() {\n        var element = this.element;\n\n        this._touchAction = element.style.touchAction;\n\n        var obj;\n        bindEvents(element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            var obj$1;\n            bindEvents(element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n\n        this.domEvents = services.DomEventsBuilder.create(this.element, {\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n\n        this._toggleDragZoomEvents();\n    },\n\n    _mouseleave: function(e) {\n        if (this._hoveredPoint) {\n            this._hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (this._plotAreaHovered) {\n            this._plotAreaHovered = false;\n            this.trigger(PLOT_AREA_LEAVE);\n        }\n\n        if (this._hasInactiveOpacity() && this._activeChartInstance) {\n            this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n            this._updateSeriesOpacity(null, true);\n        }\n    },\n\n    _cancelDomEvents: function() {\n        if (this.domEvents && this.domEvents.cancel) {\n            this.domEvents.cancel();\n        }\n    },\n\n    _gesturestart: function(e) {\n        if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n            this._gestureDistance = e.distance;\n            this._unsetActivePoint();\n            this.surface.suspendTracking();\n        }\n    },\n\n    _gestureend: function(e) {\n        if (this._zooming && !this._stopChartHandlers(e)) {\n            if (this.surface) {\n                this.surface.resumeTracking();\n            }\n            this._zooming = false;\n            this.trigger(ZOOM_END, {});\n        }\n    },\n\n    _gesturechange: function(e) {\n        var mousewheelZoom = this._mousewheelZoom;\n\n        if (mousewheelZoom && !this._stopChartHandlers(e)) {\n            e.preventDefault();\n            var previousGestureDistance = this._gestureDistance;\n            var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n            if (Math.abs(scaleDelta) >= 0.1) {\n                scaleDelta = Math.round(scaleDelta * 10);\n\n                this._gestureDistance = e.distance;\n                var args = { delta: scaleDelta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                    var coords = this._eventCoordinates(e);\n\n                    if (!this._zooming) {\n                        this._zooming = true;\n                    }\n\n                    var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n                    if (ranges && !this.trigger(ZOOM, args)) {\n                        mousewheelZoom.zoom();\n                    }\n                }\n            }\n        }\n    },\n\n    _mouseout: function(e) {\n        if (e.element) {\n            var element = this._drawingChartElement(e.element, e);\n\n            if (element && element.leave) {\n                element.leave(this, e.originalEvent);\n            }\n        }\n    },\n\n    _start: function(e) {\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ])) {\n            this._startNavigation(e, coords, DRAG_START);\n        }\n\n        if (this._pannable && this._pannable.start(e)) {\n            this.surface.suspendTracking();\n            this._unsetActivePoint();\n            this._suppressHover = true;\n            this.chartService.panning = true;\n        }\n\n        if (this._zoomSelection) {\n            if (this._zoomSelection.start(e)) {\n                this.trigger(ZOOM_START, { axisRanges: axisRanges(this._plotArea.axes), originalEvent: e });\n            }\n        }\n    },\n\n    _move: function(e) {\n        var ref = this;\n        var state = ref._navState;\n        var pannable = ref._pannable;\n\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        if (pannable) {\n            var ranges = pannable.move(e);\n\n            if (ranges && !this.trigger(DRAG, { axisRanges: ranges, originalEvent: e })) {\n                pannable.pan();\n            }\n        } else if (state) {\n            var ranges$1 = {};\n            var axes = state.axes;\n\n            for (var i = 0; i < axes.length; i++) {\n                var currentAxis = axes[i];\n                var axisName = currentAxis.options.name;\n                if (axisName) {\n                    var axis = currentAxis.options.vertical ? e.y : e.x;\n                    var delta = axis.startLocation - axis.location;\n\n                    if (delta !== 0) {\n                        ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n                    }\n                }\n            }\n\n            state.axisRanges = ranges$1;\n            this.trigger(DRAG, {\n                axisRanges: ranges$1,\n                originalEvent: e\n            });\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.move(e);\n        }\n    },\n\n    _end: function(e) {\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        var pannable = this._pannable;\n        if (pannable && pannable.end(e)) {\n            this.surface.resumeTracking();\n            this.trigger(DRAG_END, {\n                axisRanges: axisRanges(this._plotArea.axes),\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this.chartService.panning = false;\n        } else {\n            this._endNavigation(e, DRAG_END);\n        }\n\n        if (this._zoomSelection) {\n            var ranges = this._zoomSelection.end(e);\n            if (ranges && !this.trigger(ZOOM, { axisRanges: ranges, originalEvent: e })) {\n                this._zoomSelection.zoom();\n                this.trigger(ZOOM_END, { axisRanges: ranges, originalEvent: e });\n            }\n        }\n    },\n\n    _stopChartHandlers: function(e) {\n        var selections = this._selections || [];\n        if (!selections.length) {\n            return false;\n        }\n\n        var coords = this._eventCoordinates(e);\n        var pane = this._plotArea.paneByPoint(coords);\n        if (pane) {\n            for (var idx = 0; idx < selections.length; idx++) {\n                if (selections[idx].onPane(pane)) {\n                    return true;\n                }\n            }\n        }\n    },\n\n    _mousewheelZoomRate: function() {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel || {};\n        return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n    },\n\n    _mousewheel: function(e) {\n        var this$1$1 = this;\n\n        var delta = dataviz.mousewheelDelta(e);\n        var mousewheelZoom = this._mousewheelZoom;\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (mousewheelZoom) {\n            var args = { delta: delta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n            if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                e.preventDefault();\n\n                if (!this._zooming) {\n                    this._unsetActivePoint();\n                    this.surface.suspendTracking();\n                    this._zooming = true;\n                }\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n                if (args.axisRanges && !this.trigger(ZOOM, args)) {\n                    mousewheelZoom.zoom();\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1$1.trigger(ZOOM_END, args);\n                    this$1$1._zooming = false;\n                    if (this$1$1.surface) {\n                        this$1$1.surface.resumeTracking();\n                    }\n                }, MOUSEWHEEL_DELAY);\n            }\n        } else {\n            var state = this._navState;\n            if (!state) {\n                var prevented = this._startNavigation(e, coords, ZOOM_START);\n                if (!prevented) {\n                    state = this._navState;\n                }\n            }\n\n            if (state) {\n                var totalDelta = state.totalDelta || delta;\n                state.totalDelta = totalDelta + delta;\n\n                var axes = this._navState.axes;\n                var ranges = {};\n\n                for (var i = 0; i < axes.length; i++) {\n                    var currentAxis = axes[i];\n                    var axisName = currentAxis.options.name;\n                    if (axisName) {\n                        ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1$1._mousewheelZoomRate(), coords);\n                    }\n                }\n\n                this.trigger(ZOOM, {\n                    delta: delta,\n                    axisRanges: ranges,\n                    originalEvent: e\n                });\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1$1._endNavigation(e, ZOOM_END);\n                }, MOUSEWHEEL_DELAY);\n            }\n        }\n    },\n\n    _startNavigation: function(e, coords, chartEvent) {\n        var plotArea = this._model._plotArea;\n        var pane = plotArea.findPointPane(coords);\n        var axes = plotArea.axes.slice(0);\n\n        if (!pane) {\n            return;\n        }\n\n        var ranges = axisRanges(axes);\n\n        var prevented = this.trigger(chartEvent, {\n            axisRanges: ranges,\n            originalEvent: e\n        });\n\n        if (prevented) {\n            this._cancelDomEvents();\n        } else {\n            this._suppressHover = true;\n            this._unsetActivePoint();\n            this._navState = {\n                axisRanges: ranges,\n                pane: pane,\n                axes: axes\n            };\n        }\n    },\n\n    _endNavigation: function(e, chartEvent) {\n        if (this._navState) {\n            this.trigger(chartEvent, {\n                axisRanges: this._navState.axisRanges,\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this._navState = null;\n        }\n    },\n\n    _getChartElement: function(e, match) {\n        var element = this.surface.eventTarget(e);\n        if (element) {\n            return this._drawingChartElement(element, e, match);\n        }\n    },\n\n    _drawingChartElement: function(element, e, match) {\n        var current = element;\n        var chartElement;\n        while (current && !chartElement) {\n            chartElement = current.chartElement;\n            current = current.parent;\n        }\n\n        if (chartElement) {\n            if (chartElement.aliasFor) {\n                chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n            }\n\n            if (match) {\n                chartElement = chartElement.closest(match);\n                if (chartElement && chartElement.aliasFor) {\n                    chartElement = chartElement.aliasFor();\n                }\n            }\n\n            return chartElement;\n        }\n    },\n\n    _eventCoordinates: function(e) {\n        var coordinates = dataviz.eventCoordinates(e);\n        return this._toModelCoordinates(coordinates.x, coordinates.y);\n    },\n\n    _elementPadding: function() {\n        if (!this._padding) {\n            var ref = elementStyles(this.element, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref.paddingLeft;\n            var paddingTop = ref.paddingTop;\n            this._padding = {\n                top: paddingTop,\n                left: paddingLeft\n            };\n        }\n\n        return this._padding;\n    },\n\n    _toDocumentCoordinates: function(point) {\n        var padding = this._elementPadding();\n        var offset = dataviz.elementOffset(this.element);\n\n        return {\n            left: round(point.x + padding.left + offset.left),\n            top: round(point.y + padding.top + offset.top)\n        };\n    },\n\n    _toModelCoordinates: function(clientX, clientY) {\n        var element = this.element;\n        var offset = dataviz.elementOffset(element);\n        var padding = this._elementPadding();\n        var inverseTransform = dataviz.elementScale(element).invert();\n        var point = new GeometryPoint(\n            clientX - offset.left - padding.left,\n            clientY - offset.top - padding.top\n        ).transform(inverseTransform);\n\n        return new Point(point.x, point.y);\n    },\n\n    _tap: function(e) {\n        var this$1$1 = this;\n\n        var drawingElement = this.surface.eventTarget(e);\n        var element = this._drawingChartElement(drawingElement, e);\n        var sharedTooltip = this._sharedTooltip();\n\n        if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n            this._unsetActivePoint();\n        }\n\n        if (sharedTooltip) {\n            this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n        }\n\n        this._propagateClick(element, e);\n\n        //part of fix for hover issue on windows touch\n        this.handlingTap = true;\n        setTimeout(function () {\n            this$1$1.handlingTap = false;\n        }, 0);\n    },\n\n    _click: function(e) {\n        var element = this._getChartElement(e);\n        this._propagateClick(element, e);\n    },\n\n    _propagateClick: function(element, e) {\n        var this$1$1 = this;\n\n        var current = element;\n        while (current) {\n            if (current.click) {\n                current.click(this$1$1, e);\n            }\n\n            current = current.parent;\n        }\n    },\n\n    _startHover: function(element, e) {\n        if (this._suppressHover) {\n            return false;\n        }\n\n        var point = this._drawingChartElement(element, e, function(element) {\n            return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n        });\n\n        this._showInactiveOpacity(point, e);\n\n        return point;\n    },\n\n    _displayTooltip: function(point) {\n        var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n        if (tooltipOptions.visible) {\n            this._tooltip.show(point);\n        }\n    },\n\n    _displayInactiveOpacity: function(activePoint, multipleSeries, highlightPoints) {\n        var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n        if (!chartInstance) {\n            return;\n        }\n\n        if (multipleSeries) {\n            this._updateSeriesOpacity(activePoint);\n            this._applySeriesOpacity(chartInstance.children, null, true);\n            this._applySeriesOpacity(chartInstance.children, activePoint.series);\n            this._highlight.show(highlightPoints || activePoint);\n        } else {\n            var inactivePoints;\n\n            if (!chartInstance.supportsPointInactiveOpacity()) {\n                this._highlight.show(activePoint);\n                return;\n            }\n\n            inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n            if (inactivePoints && inactivePoints.length) {\n                this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n            }\n        }\n    },\n\n    _getInactivePoints: function(activePoint, chartInstance) {\n        var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n        return allPoints.filter(function (point) { return point !== activePoint; });\n    },\n\n    _getAllPointsOfType: function(container, type) {\n        var this$1$1 = this;\n\n        var points = [];\n\n        for (var i = 0; i < container.children.length; i++) {\n            var element = container.children[i];\n\n            if (element.constructor === type) {\n                points.push(element);\n            } else if (element.children && element.children.length) {\n                points = points.concat(this$1$1._getAllPointsOfType(element, type));\n            }\n        }\n\n        return points;\n    },\n\n    _updateHoveredPoint: function(point, e) {\n        var hoveredPoint = this._hoveredPoint;\n\n        if (hoveredPoint && hoveredPoint !== point) {\n            hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (point && hoveredPoint !== point && point.over) {\n            this._hoveredPoint = point;\n            point.over(this, e);\n        }\n    },\n\n    _updateDrilldownPoint: function(point) {\n        if (!point || !point.series) {\n            return;\n        }\n\n        var ref = SeriesBinder.current.bindPoint(point.series, null, point.dataItem);\n        var fields = ref.fields;\n        if (fields.drilldown) {\n            this._drilldownState = { cursor: this.element.style.cursor };\n            this.element.style.cursor = 'pointer';\n        }\n    },\n\n    _resetDrilldownPoint: function() {\n        if (this._drilldownState) {\n            this.element.style.cursor = this._drilldownState.cursor;\n            this._drilldownState = null;\n        }\n    },\n\n    _startDrilldown: function(point) {\n        if (!point || !point.series) {\n            return;\n        }\n\n        var series = point.series;\n        var ref = SeriesBinder.current.bindPoint(series, null, point.dataItem);\n        var fields = ref.fields;\n        var value = fields.drilldown;\n        if (value) {\n            var args = { series: series, point: point, value: value, sender: this };\n            this.trigger(DRILLDOWN, args);\n        }\n    },\n\n    _updateSeriesOpacity: function(point, resetOpacity) {\n        var this$1$1 = this;\n\n        var plotArea = this._plotArea;\n        var length = plotArea.series.length;\n\n        for (var i = 0; i < length; i++) {\n            var currSeries = plotArea.series[i];\n            var defaultOpacity = this$1$1._getDefaultOpacityForSeries(currSeries);\n            var inactiveOpacity = this$1$1._getInactiveOpacityForSeries(currSeries);\n\n            if (!resetOpacity && currSeries !== point.series) {\n                currSeries.defaultOpacity = defaultOpacity;\n                currSeries.opacity = inactiveOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = inactiveOpacity;\n                }\n            } else {\n                currSeries.opacity = defaultOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = defaultOpacity;\n                }\n            }\n        }\n    },\n\n    _applySeriesOpacity: function(elements, activeSeries, reset, series) {\n        var this$1$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var currSeries = element.series || series;\n            var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n            if (shouldHighlight && element.visual) {\n                var opacity = series ? series.opacity : element.series.opacity;\n                if (currSeries !== activeSeries || reset) {\n                    element.visual.opacity(reset ? 1 : opacity);\n                }\n            }\n\n            if (element.children && element.children.length) {\n                this$1$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n            }\n        }\n    },\n\n    _chartInstanceFromPoint: function(point) {\n        var chartInstance = point.parent;\n\n        while (chartInstance && !chartInstance.plotArea) {\n            chartInstance = chartInstance.parent;\n        }\n\n        return chartInstance;\n    },\n\n    _showInactiveOpacity: function(point, e) {\n        var activePoint = this._activePoint;\n        var multipleSeries = this._plotArea.series.length > 1;\n        var hasInactiveOpacity = this._hasInactiveOpacity();\n\n        this._updateHoveredPoint(point, e);\n\n        if (point && activePoint !== point && point.hover) {\n            this._activePoint = point;\n\n            if (!this._sharedTooltip() && !point.hover(this, e)) {\n                this._displayTooltip(point);\n\n                if (hasInactiveOpacity) {\n                    this._displayInactiveOpacity(point, multipleSeries);\n                } else {\n                    this._highlight.show(point);\n                }\n            }\n        }\n\n        return point;\n    },\n\n    _hideInactiveOpacity: function(point) {\n        var multipleSeries = this._plotArea.series.length > 1;\n        var hasInactiveOpacity = this._hasInactiveOpacity();\n        if (hasInactiveOpacity) {\n            if (multipleSeries && this._activeChartInstance) {\n                this._updateSeriesOpacity(point, true);\n                this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n                this._activeChartInstance = null;\n            }\n            this._highlight && this._highlight.hide();\n            this._activePoint = null;\n        }\n    },\n\n    _hasInactiveOpacity: function() {\n        var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n        var hasInactiveOpacity = this.options.series.filter(function (s) { return s.highlight.inactiveOpacity !== undefined; } ).length > 0;\n        return hasDefaultInactiveOpacity || hasInactiveOpacity;\n    },\n\n    _getInactiveOpacityForSeries: function(series) {\n        var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n        var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n        return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n    },\n\n    _getDefaultOpacityForSeries: function(series) {\n        return series.defaultOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n    },\n\n    _mouseover: function(e) {\n        var point = this._startHover(e.element, e.originalEvent);\n\n        if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n            this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n            var obj;\n            bindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n        }\n    },\n\n    _mouseMoveTracking: function(e) {\n        var ref = this;\n        var options = ref.options;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n        var point = ref._activePoint;\n        var coords = this._eventCoordinates(e);\n\n        if (this._plotArea.box.containsPoint(coords)) {\n            if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n                var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n                if (seriesPoint && seriesPoint !== point) {\n                    this._activePoint = seriesPoint;\n\n                    if (!seriesPoint.hover(this, e)) {\n                        var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n                        if (tooltipOptions.visible) {\n                            tooltip.show(seriesPoint);\n                        }\n\n                        highlight.show(seriesPoint);\n                    }\n                }\n            }\n        } else {\n            var obj;\n            unbindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n            this._unsetActivePoint();\n            this._mouseMoveTrackHandler = null;\n\n            this._hideInactiveOpacity(point);\n        }\n    },\n\n    _mousemove: function(e) {\n        var coords = this._eventCoordinates(e);\n        var plotArea = this._plotArea;\n\n        this._trackCrosshairs(coords);\n\n        if (plotArea.hover) {\n            var overPlotArea = plotArea.backgroundContainsPoint(coords);\n            if (overPlotArea) {\n                this._plotAreaHovered = true;\n                this._plotArea.hover(this, e);\n            } else if (this._plotAreaHovered && !overPlotArea) {\n                this._plotAreaHovered = false;\n                this.trigger(PLOT_AREA_LEAVE);\n            }\n        }\n\n        if (this._sharedTooltip()) {\n            this._trackSharedTooltip(coords, e);\n        }\n    },\n\n    _trackCrosshairs: function(coords) {\n        var crosshairs = this._plotArea.crosshairs;\n\n        for (var i = 0; i < crosshairs.length; i++) {\n            var current = crosshairs[i];\n\n            if (current.box.containsPoint(coords)) {\n                current.showAt(coords);\n            } else {\n                current.hide();\n            }\n        }\n    },\n\n    _trackSharedTooltip: function(coords, e, toggle) {\n        if (this._suppressHover) {\n            return;\n        }\n\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var plotArea = ref._plotArea;\n        var categoryAxis = ref._plotArea.categoryAxis;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        if (plotArea.backgroundContainsPoint(coords)) {\n            var index = categoryAxis.pointCategoryIndex(coords);\n            if (index !== this._tooltipCategoryIx || (!this._sharedHighlight && toggle)) {\n                var points = plotArea.pointsByCategoryIndex(index);\n                var pointArgs = points.map(function(point) {\n                    return point.eventArgs(e);\n                });\n                var hoverArgs = pointArgs[0] || {};\n                hoverArgs.categoryPoints = pointArgs;\n\n                if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n                    if (tooltipOptions.visible) {\n                        tooltip.showAt(points, coords);\n                    }\n\n                    highlight.show(points);\n\n                    this._sharedHighlight = true;\n                } else {\n                    tooltip.hide();\n                }\n\n                this._tooltipCategoryIx = index;\n            } else if (toggle && this._sharedHighlight) {\n                highlight.hide();\n                tooltip.hide();\n                this._sharedHighlight = false;\n            }\n        } else if (this._sharedHighlight) {\n            highlight.hide();\n            tooltip.hide();\n            this._tooltipCategoryIx = null;\n            this._sharedHighlight = false;\n        }\n    },\n\n    hideElements: function(options) {\n        var plotArea = this._plotArea;\n        this._mousemove.cancel();\n\n        plotArea.hideCrosshairs();\n\n        this._unsetActivePoint(options);\n    },\n\n    _unsetActivePoint: function(options) {\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        this._activePoint = null;\n        this._hoveredPoint = null;\n\n        if (tooltip && !(options && options.keepTooltipOpen)) {\n            tooltip.hide();\n        }\n\n        this._tooltipCategoryIx = null;\n        this._sharedHighlight = false;\n\n        if (highlight) {\n            highlight.hide();\n        }\n    },\n\n    _deferRedraw: function() {\n        this._redraw();\n    },\n\n    _clearRedrawTimeout: function() {\n        if (this._redrawTimeout) {\n            clearInterval(this._redrawTimeout);\n            this._redrawTimeout = null;\n        }\n    },\n\n    bindCategories: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var definitions = [].concat(options.categoryAxis);\n\n        for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n            var axis = definitions[axisIx];\n            if (axis.autoBind !== false) {\n                this$1$1.bindCategoryAxisFromSeries(axis, axisIx);\n            }\n        }\n    },\n\n    bindCategoryAxisFromSeries: function(axis, axisIx) {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var seriesLength = series.length;\n        var uniqueCategories = new dataviz.HashMap();//perf improvement in case type category with dates\n        var items = [];\n        var bindable = false;\n        var dateAxis;\n\n        for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n            var s = series[seriesIx];\n            var onAxis = s.categoryAxis === axis.name || (!s.categoryAxis && axisIx === 0);\n            var data = s.data;\n            var dataLength = data.length;\n            var bind = s.categoryField && onAxis;\n            bindable = bind || bindable;\n\n            if (bind && dataLength > 0) {\n                dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n\n                var getFn = dateAxis ? getDateField : getField;\n\n                for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n                    var dataRow = data[dataIx];\n                    var category = getFn(s.categoryField, dataRow, this$1$1.chartService.intl);\n\n                    if (dateAxis || !uniqueCategories.get(category)) {\n                        items.push([ category, dataRow ]);\n\n                        if (!dateAxis) {\n                            uniqueCategories.set(category, true);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (items.length > 0) {\n            if (dateAxis) {\n                items = uniqueDates(items, function(a, b) {\n                    return dataviz.dateComparer(a[0], b[0]);\n                });\n            }\n\n            var result = transpose(items);\n            axis.categories = result[0];\n        } else if (bindable) {\n            axis.categories = [];\n        }\n    },\n\n    _isBindable: function(series) {\n        var valueFields = SeriesBinder.current.valueFields(series);\n        var result = true;\n\n        for (var i = 0; i < valueFields.length; i++) {\n            var field = valueFields[i];\n            if (field === VALUE) {\n                field = \"field\";\n            } else {\n                field = field + \"Field\";\n            }\n\n            if (!defined(series[field])) {\n                result = false;\n                break;\n            }\n        }\n\n        return result;\n    },\n\n    _noTransitionsRedraw: function() {\n        var options = this.options;\n        var transitionsState;\n\n        if (options.transitions !== false) {\n            options.transitions = false;\n            transitionsState = true;\n        }\n\n        this._redraw();\n\n        if (transitionsState) {\n            options.transitions = true;\n        }\n    },\n\n    _legendItemHover: function(seriesIndex, pointIndex) {\n        var ref = this;\n        var plotArea = ref._plotArea;\n        var highlight = ref._highlight;\n        var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n        var items;\n\n        if (inArray(currentSeries.type, [ PIE, DONUT, FUNNEL, PYRAMID ])) {\n            items = plotArea.findPoint(function(point) {\n                return point.series.index === seriesIndex && point.index === pointIndex;\n            });\n        } else {\n            items = plotArea.pointsBySeriesIndex(seriesIndex);\n        }\n\n        if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n            var multipleSeries = plotArea.series.length > 1;\n            var point = items.length ? items[0] : items;\n\n            this._displayInactiveOpacity(point, multipleSeries, items);\n        } else {\n            highlight.show(items);\n        }\n    },\n\n    _shouldAttachMouseMove: function() {\n        return this._plotArea.crosshairs.length || (this._tooltip && this._sharedTooltip()) || this.requiresHandlers([ PLOT_AREA_HOVER, PLOT_AREA_LEAVE ]);\n    },\n\n    updateMouseMoveHandler: function() {\n        var obj;\n        unbindEvents(this.element, ( obj = {}, obj[ MOUSEMOVE ] = this._mousemove, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            var obj$1;\n            bindEvents(this.element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n    },\n\n    applyOptions: function(options, theme) {\n        clearMissingValues(this._originalOptions, options);\n        this._originalOptions = deepExtend(this._originalOptions, options);\n        this.options = deepExtend({}, this._originalOptions);\n\n        if (theme) {\n            this._theme = theme;\n            this.chartService.theme = theme;\n        }\n        this._initTheme(this.options, this._theme);\n\n        this._toggleDragZoomEvents();\n    },\n\n    setOptions: function(options, theme) {\n        this.applyOptions(options, theme);\n        this.bindCategories();\n        this.redraw();\n        this.updateMouseMoveHandler();\n    },\n\n    setDirection: function(rtl) {\n        this.chartService.rtl = Boolean(rtl);\n        if (this.surface && this.surface.type === 'svg') {\n            this._destroySurface();\n        }\n    },\n\n    setIntlService: function(intl) {\n        this.chartService.intl = intl;\n    },\n\n    noTransitionsRedraw: function() {\n        this._noTransitionsRedraw();\n    },\n\n    destroy: function() {\n        this._destroyed = true;\n\n        var obj;\n        unbindEvents(this.element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSEMOVE ] = this._mousemove, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n        if (this.domEvents) {\n            this.domEvents.destroy();\n            delete this.domEvents;\n        }\n\n        if (this._mouseMoveTrackHandler) {\n            var obj$1;\n            unbindEvents(document, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj$1 ));\n        }\n\n        this._destroyView();\n\n        this._destroySurface();\n\n        this._clearRedrawTimeout();\n    },\n\n    _destroySurface: function() {\n        var surface = this.surface;\n        if (surface) {\n            surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n            surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n            surface.destroy();\n\n            this.surface = null;\n        }\n    },\n\n    _destroySelections: function() {\n        var selections = this._selections;\n\n        if (selections) {\n            while (selections.length > 0) {\n                selections.shift().destroy();\n            }\n        }\n    },\n\n    _destroyView: function() {\n        var model = this._model;\n\n        if (model) {\n            model.destroy();\n            this._model = null;\n        }\n\n        this._unsetActivePoint();\n        this._resetDrilldownPoint();\n        this._destroySelections();\n\n        if (this._tooltip) {\n            this._tooltip.destroy();\n        }\n\n        if (this._highlight) {\n            this._highlight.destroy();\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.destroy();\n            delete this._zoomSelection;\n        }\n\n        if (this._pannable) {\n            this._pannable.destroy();\n            delete this._pannable;\n        }\n\n        if (this._mousewheelZoom) {\n            this._mousewheelZoom.destroy();\n            delete this._mousewheelZoom;\n        }\n    }\n});\n\nfunction resolveAxisAliases(options) {\n    var aliases = AXIS_NAMES;\n\n    for (var idx = 0; idx < aliases.length; idx++) {\n        var alias = aliases[idx] + \"Axes\";\n        if (options[alias]) {\n            options[aliases[idx] + \"Axis\"] = options[alias];\n            delete options[alias];\n        }\n    }\n}\n\nfunction pointByCategoryName(points, name) {\n    if (points) {\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx].category === name) {\n                return [ points[idx] ];\n            }\n        }\n    }\n}\n\nfunction applyAxisDefaults(options, themeOptions) {\n    var themeAxisDefaults = ((themeOptions || {}).axisDefaults) || {};\n    var axisName, axisDefaults, axes;\n\n    function mapAxisOptions(axisOptions) {\n        var axisColor = (axisOptions || {}).color || axisDefaults.color;\n        var result = deepExtend({},\n            themeAxisDefaults,\n            themeAxisDefaults[axisName],\n            axisDefaults,\n            axisDefaults[axisName], {\n                line: { color: axisColor },\n                labels: { color: axisColor },\n                title: { color: axisColor }\n            },\n            axisOptions\n        );\n\n        delete result[axisName];\n\n        return result;\n    }\n\n    for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n        axisName = AXIS_NAMES[idx] + \"Axis\";\n        axisDefaults = options.axisDefaults || {};\n        axes = [].concat(options[axisName]);\n\n        axes = axes.map(mapAxisOptions);\n\n        options[axisName] = axes.length > 1 ? axes : axes[0];\n    }\n}\n\nfunction applySeriesDefaults(options, themeOptions) {\n    var series = options.series;\n    var seriesLength = series.length;\n    var seriesDefaults = options.seriesDefaults;\n    var commonDefaults = deepExtend({}, options.seriesDefaults);\n    var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n    var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n\n    cleanupNestedSeriesDefaults(commonDefaults);\n    cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n    for (var i = 0; i < seriesLength; i++) {\n        var seriesType = series[i].type || options.seriesDefaults.type;\n\n        var baseOptions = deepExtend(\n            { data: [] },\n            commonThemeDefaults,\n            themeSeriesDefaults[seriesType],\n            { tooltip: options.tooltip },\n            commonDefaults,\n            seriesDefaults[seriesType]\n        );\n\n        series[i]._defaults = baseOptions;\n        series[i] = deepExtend({}, baseOptions, series[i]);\n        series[i].data = series[i].data || [];\n    }\n}\n\nfunction cleanupNestedSeriesDefaults(seriesDefaults) {\n    delete seriesDefaults.bar;\n    delete seriesDefaults.column;\n    delete seriesDefaults.rangeColumn;\n    delete seriesDefaults.line;\n    delete seriesDefaults.verticalLine;\n    delete seriesDefaults.pie;\n    delete seriesDefaults.donut;\n    delete seriesDefaults.area;\n    delete seriesDefaults.verticalArea;\n    delete seriesDefaults.scatter;\n    delete seriesDefaults.scatterLine;\n    delete seriesDefaults.bubble;\n    delete seriesDefaults.candlestick;\n    delete seriesDefaults.ohlc;\n    delete seriesDefaults.boxPlot;\n    delete seriesDefaults.bullet;\n    delete seriesDefaults.verticalBullet;\n    delete seriesDefaults.polarArea;\n    delete seriesDefaults.polarLine;\n    delete seriesDefaults.radarArea;\n    delete seriesDefaults.radarLine;\n    delete seriesDefaults.waterfall;\n}\n\nfunction axisRanges(axes) {\n    var ranges = {};\n\n    for (var i = 0; i < axes.length; i++) {\n        var axis = axes[i];\n        var axisName = axis.options.name;\n        if (axisName) {\n            ranges[axisName] = axis.range();\n        }\n    }\n\n    return ranges;\n}\n\nfunction sortDates(dates, comparer) {\n    if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n    for (var i = 1, length = dates.length; i < length; i++) {\n        if (comparer(dates[i], dates[i - 1]) < 0) {\n            dates.sort(comparer);\n            break;\n        }\n    }\n\n    return dates;\n}\n\nfunction uniqueDates(srcDates, comparer) {\n    if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n    var dates = sortDates(srcDates, comparer);\n    var length = dates.length;\n    var result = length > 0 ? [ dates[0] ] : [];\n\n    for (var i = 1; i < length; i++) {\n        if (comparer(dates[i], last(result)) !== 0) {\n            result.push(dates[i]);\n        }\n    }\n\n    return result;\n}\n\nfunction transpose(rows) {\n    var rowCount = rows.length;\n    var result = [];\n\n    for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n        var row = rows[rowIx];\n        var colCount = row.length;\n\n        for (var colIx = 0; colIx < colCount; colIx++) {\n            result[colIx] = result[colIx] || [];\n            result[colIx].push(row[colIx]);\n        }\n    }\n\n    return result;\n}\n\nvar DATA_FIELDS = [ 'data', 'categories' ];\n\nfunction clearMissingValues(originalOptions, options) {\n    for (var field in options) {\n        if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n            var fieldValue = options[field];\n            var originalValue = originalOptions[field];\n            if (defined(originalValue)) {\n                var nullValue = fieldValue === null;\n                if ((nullValue || !defined(fieldValue))) {\n                    delete originalOptions[field];\n                    if (nullValue) {\n                        delete options[field];\n                    }\n                } else if (originalValue && isObject(fieldValue)) {\n                    if (isObject(originalValue)) {\n                        clearMissingValues(originalValue, fieldValue);\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction triggerPaneRender(panes) {\n    for (var idx = 0; idx < panes.length; idx++) {\n        panes[idx].notifyRender();\n    }\n}\n\nsetDefaultOptions(Chart, {\n    renderAs: \"\",\n    chartArea: {},\n    legend: {\n        visible: true,\n        labels: {}\n    },\n    categoryAxis: {},\n    seriesDefaults: {\n        type: COLUMN,\n        data: [],\n        highlight: {\n            visible: true\n        },\n        labels: {},\n        negativeValues: {\n            visible: false\n        }\n    },\n    series: [],\n    seriesColors: null,\n    tooltip: {\n        visible: false\n    },\n    transitions: true,\n    valueAxis: {},\n    plotArea: {},\n    title: {},\n    xAxis: {},\n    yAxis: {},\n    panes: [ {} ],\n    pannable: false,\n    zoomable: false\n});\n\nkendo.deepExtend(kendo.dataviz, {\n    constants: constants,\n    Aggregates: Aggregates,\n    AreaChart: AreaChart,\n    AreaSegment: AreaSegment,\n    AxisGroupRangeTracker: AxisGroupRangeTracker,\n    Bar: Bar,\n    BarChart: BarChart,\n    BarLabel: BarLabel,\n    BoxPlotChart: BoxPlotChart,\n    BoxPlot: BoxPlot,\n    BubbleChart: BubbleChart,\n    Bullet: Bullet,\n    BulletChart: BulletChart,\n    CandlestickChart: CandlestickChart,\n    Candlestick: Candlestick,\n    CategoricalChart: CategoricalChart,\n    CategoricalErrorBar: CategoricalErrorBar,\n    CategoricalPlotArea: CategoricalPlotArea,\n    Chart: Chart,\n    ChartContainer: ChartContainer,\n    ClipAnimation: ClipAnimation,\n    ClusterLayout: ClusterLayout,\n    Crosshair: Crosshair,\n    CrosshairTooltip: CrosshairTooltip,\n    DefaultAggregates: DefaultAggregates,\n    DonutChart: DonutChart,\n    DonutPlotArea: DonutPlotArea,\n    DonutSegment: DonutSegment,\n    ErrorBarBase: ErrorBarBase,\n    ErrorRangeCalculator: ErrorRangeCalculator,\n    Highlight: Highlight,\n    SharedTooltip: SharedTooltip,\n    Legend: Legend,\n    LegendItem: LegendItem,\n    LegendLayout: LegendLayout,\n    LineChart: LineChart,\n    LinePoint: LinePoint,\n    LineSegment: LineSegment,\n    Pane: Pane,\n    PieAnimation: PieAnimation,\n    PieChart: PieChart,\n    PieChartMixin: PieChartMixin,\n    PiePlotArea: PiePlotArea,\n    PieSegment: PieSegment,\n    PlotAreaBase: PlotAreaBase,\n    PlotAreaEventsMixin: PlotAreaEventsMixin,\n    PlotAreaFactory: PlotAreaFactory,\n    PointEventsMixin: PointEventsMixin,\n    RangeBar: RangeBar,\n    RangeBarChart: RangeBarChart,\n    RangeAreaPoint: RangeAreaPoint,\n    RangeAreaChart: RangeAreaChart,\n    ScatterChart: ScatterChart,\n    ScatterErrorBar: ScatterErrorBar,\n    ScatterLineChart: ScatterLineChart,\n    Selection: Selection,\n    SeriesAggregator: SeriesAggregator,\n    SeriesBinder: SeriesBinder,\n    SplineSegment: SplineSegment,\n    SplineAreaSegment: SplineAreaSegment,\n    StackWrap: StackWrap,\n    Tooltip: Tooltip,\n    OHLCChart: OHLCChart,\n    OHLCPoint: OHLCPoint,\n    WaterfallChart: WaterfallChart,\n    WaterfallSegment: WaterfallSegment,\n    XYPlotArea: XYPlotArea,\n    MousewheelZoom: MousewheelZoom,\n    ZoomSelection: ZoomSelection,\n    Pannable: Pannable,\n    ChartAxis: ChartAxis,\n    ChartPane: ChartPane,\n    ChartPlotArea: ChartPlotArea,\n    findAxisByName: findAxisByName,\n    anyHasZIndex: anyHasZIndex,\n    appendIfNotNull: appendIfNotNull,\n    areNumbers: areNumbers,\n    bindSegments: bindSegments,\n    categoriesCount: categoriesCount,\n    countNumbers: countNumbers,\n    equalsIgnoreCase: equalsIgnoreCase,\n    evalOptions: evalOptions,\n    filterSeriesByType: filterSeriesByType,\n    getDateField: getDateField,\n    getField: getField,\n    hasGradientOverlay: hasGradientOverlay,\n    hasValue: hasValue,\n    isDateAxis: isDateAxis,\n    segmentVisible: segmentVisible,\n    singleItemOrArray: singleItemOrArray,\n    createOutOfRangePoints: createOutOfRangePoints\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n    const kendo = window.kendo;\n    const dataviz = kendo.dataviz;\n    const Widget = kendo.ui.Widget;\n\n    const ChartBreadcrumb = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            if (!options.chart) {\n                throw new Error('ChartBreadcrumb: No Chart instance supplied as `options.chart`');\n            }\n\n            this._attachChartEvents();\n            this._renderBreadcrumb();\n\n            kendo.notify(this, dataviz.ui);\n        },\n\n        events: [],\n\n        options: {\n            name: \"ChartBreadcrumb\",\n            rootItem: {\n                type: 'rootitem',\n                icon: 'home',\n                text: 'Home',\n                showIcon: true\n            }\n        },\n\n        destroy: function() {\n            if (this.breadcrumb) {\n                this.breadcrumb.destroy();\n                this.breadcrumb = null;\n            }\n\n            if (this.chart) {\n                this.chart.unbind('drilldown', this._onChartDrilldown);\n                this.chart.unbind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n                this.chart = null;\n            }\n\n            Widget.fn.destroy.call(this);\n        },\n\n        _attachChartEvents(deferred) {\n            const options = this.options;\n\n            if (typeof options.chart.resetDrilldownLevel === 'function') {\n                this.chart = options.chart;\n            } else if (typeof options.chart === 'string') {\n                this.chart = $(options.chart).getKendoChart() || $('#' + options.chart).getKendoChart();\n\n                if (!this.chart && !deferred) {\n                    setTimeout(() => this._attachChartEvents(true));\n                    return;\n                }\n            } else {\n                throw new Error('ChartBreadcrumb: `options.chart` must be a Chart instance, element ID or a selector');\n            }\n\n            this._onChartDrilldown = this._onChartDrilldown.bind(this);\n            this.chart.bind('drilldown', this._onChartDrilldown);\n\n            this._onChartDrilldownLevelChange = this._onChartDrilldownLevelChange.bind(this);\n            this.chart.bind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n        },\n\n        _renderBreadcrumb: function() {\n            const breadcrumbElement = $('<nav />');\n            this.element.append(breadcrumbElement);\n            this.breadcrumb = new kendo.ui.Breadcrumb(breadcrumbElement, {\n                items: [this.options.rootItem]\n            });\n\n            this.breadcrumb.bind('click', e => this._onBreadcrumbClick(e));\n        },\n\n        _onBreadcrumbClick: function(e) {\n            if (!this.breadcrumb || !this.chart) {\n                return;\n            }\n\n            let items = this.breadcrumb.items();\n            const level = items.findIndex((item) => item === e.item);\n\n            const chart = this.chart;\n            chart.resetDrilldownLevel(level);\n        },\n\n        _onChartDrilldown: function(e) {\n            if (!this.breadcrumb || e.isDefaultPrevented()) {\n                return;\n            }\n\n            this.breadcrumb.items([\n                ...this.breadcrumb.items(),\n                { type: 'item', text: e.point.category }\n            ]);\n        },\n\n        _onChartDrilldownLevelChange: function(e) {\n            if (!this.breadcrumb) {\n                return;\n            }\n\n            let items = this.breadcrumb.items();\n            items = items.slice(0, e.level + 1);\n            this.breadcrumb.items(items);\n        }\n    });\n\n    dataviz.ui.plugin(ChartBreadcrumb);\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n    var NS = \".kendoChart\";\n    var kendo = window.kendo;\n    var Class = kendo.Class;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var dataviz = kendo.dataviz;\n    var constants = dataviz.constants;\n    var KendoChart = dataviz.Chart;\n    var SeriesBinder = dataviz.SeriesBinder;\n    var Widget = kendo.ui.Widget;\n    var DataSource = kendo.data.DataSource;\n    var deepExtend = kendo.deepExtend;\n    var defined = dataviz.defined;\n    var getField = dataviz.getField;\n    var InstanceObserver = dataviz.InstanceObserver;\n    var inArray = dataviz.inArray;\n    var services = dataviz.services;\n    var isArray = Array.isArray;\n    var extend = $.extend;\n    var template = kendo.template;\n    var encode = kendo.htmlEncode;\n\n    var MOUSELEAVE_NS = \"mouseleave\" + NS;\n    var AXIS_LABEL_CLICK = constants.AXIS_LABEL_CLICK;\n    var LEGEND_ITEM_CLICK = constants.LEGEND_ITEM_CLICK;\n    var LEGEND_ITEM_HOVER = constants.LEGEND_ITEM_HOVER;\n    var LEGEND_ITEM_LEAVE = constants.LEGEND_ITEM_LEAVE;\n    var SERIES_CLICK = constants.SERIES_CLICK;\n    var SERIES_HOVER = constants.SERIES_HOVER;\n    var SERIES_OVER = constants.SERIES_OVER;\n    var SERIES_LEAVE = constants.SERIES_LEAVE;\n    var PANE_RENDER = constants.PANE_RENDER;\n    var PLOT_AREA_CLICK = constants.PLOT_AREA_CLICK;\n    var PLOT_AREA_HOVER = constants.PLOT_AREA_HOVER;\n    var PLOT_AREA_LEAVE = constants.PLOT_AREA_LEAVE;\n    var DRAG = constants.DRAG;\n    var DRAG_END = constants.DRAG_END;\n    var DRAG_START = constants.DRAG_START;\n    var DRILLDOWN = constants.DRILLDOWN;\n    var DRILLDOWN_LEVEL_CHANGE = \"drilldownLevelChange\";\n    var ZOOM_START = constants.ZOOM_START;\n    var ZOOM = constants.ZOOM;\n    var ZOOM_END = constants.ZOOM_END;\n    var SELECT_START = constants.SELECT_START;\n    var SELECT = constants.SELECT;\n    var SELECT_END = constants.SELECT_END;\n    var RENDER = constants.RENDER;\n    var NOTE_CLICK = constants.NOTE_CLICK;\n    var NOTE_HOVER = constants.NOTE_HOVER;\n    var NOTE_LEAVE = constants.NOTE_LEAVE;\n    var DOCUMENT_ELEMENT = $(document.documentElement);\n\n    var CHANGE = \"change\";\n    var DATABOUND = \"dataBound\";\n    var LEAVE = \"leave\";\n    var MOUSEDOWN = \"down\";\n\n    var VALUE = constants.VALUE;\n    var PIE = constants.PIE;\n    var DONUT = constants.DONUT;\n    var FUNNEL = constants.FUNNEL;\n\n    var Observable = kendo.Observable;\n    var TOOLTIP_ANIMATION_DURATION = 150;\n    var TOOLTIP_SHOW_DELAY = 100;\n    var TOOLTIP_INVERSE = \"k-chart-tooltip-inverse\";\n    var SHARED_TOOLTIP_CLASS = \"k-chart-shared-tooltip\";\n    var RTL = \"rtl\";\n\n    services.DomEventsBuilder.register({\n        create: function(element, events) {\n             return new kendo.UserEvents(element, deepExtend({\n                 global: true,\n                 multiTouch: true,\n                 fastTap: true\n             }, events));\n        }\n    });\n\n    var ChartInstanceObserver = InstanceObserver.extend({\n        handlerMap: {\n            showTooltip: '_showTooltip',\n            hideTooltip: '_hideTooltip',\n            legendItemClick: '_onLegendItemClick',\n            render: '_onRender',\n            init: '_onInit',\n            drilldown: '_onDrilldown'\n        }\n    });\n\n    var Chart = Widget.extend({\n        init: function(element, userOptions) {\n            var dataSource;\n\n            kendo.destroy(element);\n\n            Widget.fn.init.call(this, element);\n\n            if (userOptions) {\n                dataSource = userOptions.dataSource;\n                delete userOptions.dataSource;\n            }\n\n            this.options = deepExtend({}, this.options, userOptions);\n\n            this.wrapper = this.element;\n            this._attachEvents();\n\n            if (userOptions) {\n                userOptions.dataSource = dataSource;\n            }\n\n            this._seriesVisibility = new SeriesVisibilityState();\n\n            this.bind(this.events, this.options);\n            this._initDataSource(userOptions);\n\n            this._drilldownState = [];\n\n            kendo.notify(this, dataviz.ui);\n\n            if (this._showWatermarkOverlay) {\n                this._showWatermarkOverlay(this.wrapper[0]);\n            }\n        },\n\n        events: [\n            DATABOUND,\n            DRILLDOWN,\n            DRILLDOWN_LEVEL_CHANGE,\n            SERIES_CLICK,\n            SERIES_HOVER,\n            SERIES_OVER,\n            SERIES_LEAVE,\n            AXIS_LABEL_CLICK,\n            LEGEND_ITEM_CLICK,\n            LEGEND_ITEM_HOVER,\n            LEGEND_ITEM_LEAVE,\n            PANE_RENDER,\n            PLOT_AREA_CLICK,\n            PLOT_AREA_HOVER,\n            PLOT_AREA_LEAVE,\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            ZOOM_START,\n            ZOOM,\n            ZOOM_END,\n            SELECT_START,\n            SELECT,\n            SELECT_END,\n            NOTE_CLICK,\n            NOTE_HOVER,\n            NOTE_LEAVE,\n            RENDER\n        ],\n\n        options: {\n            name: \"Chart\",\n            renderAs: \"\",\n            theme: \"default\",\n            axisDefaults: {},\n            chartArea: {},\n            legend: {},\n            categoryAxis: {},\n            autoBind: true,\n            seriesDefaults: {},\n            series: [],\n            seriesColors: null,\n            tooltip: {},\n            transitions: true,\n            valueAxis: {},\n            plotArea: {},\n            title: {},\n            xAxis: {},\n            yAxis: {},\n            panes: [{}],\n            pannable: false,\n            zoomable: false\n        },\n\n        items: function() {\n            return $();\n        },\n\n        refresh: function() {\n            var chart = this;\n            var instance = chart._instance;\n            instance.applyDefaults(chart.options);\n            instance.applySeriesColors();\n\n            chart._bindSeries();\n            chart._bindCategories();\n\n            chart.trigger(DATABOUND);\n            chart._redraw();\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.element);\n        },\n\n        redraw: function(paneName) {\n            this._size = null;\n            this._instance.redraw(paneName);\n        },\n\n        setOptions: function(options) {\n            var chart = this,\n                dataSource = options.dataSource;\n\n            delete options.dataSource;\n\n            Widget.fn._setEvents.call(chart, options);\n\n            this._instance.applyOptions(options, this._getThemeOptions(options));\n            this.options = this._instance.options;\n            this._tooltip.setOptions(this.options.tooltip);\n            this._seriesVisibility.setOptions(this.options);\n            this._sourceSeries = null;\n\n            if (dataSource) {\n                chart.setDataSource(dataSource);\n            }\n\n            if (chart._hasDataSource) {\n                chart._onDataChanged();\n            } else {\n                chart._bindCategories();\n                chart.redraw();\n            }\n\n            chart._instance.updateMouseMoveHandler();\n\n        },\n\n        setDataSource: function(dataSource) {\n            var chart = this;\n\n            chart.dataSource.unbind(CHANGE, chart._dataChangeHandler);\n            chart.dataSource = dataSource = DataSource.create(dataSource);\n            chart._hasDataSource = true;\n            chart._hasData = false;\n\n            dataSource.bind(CHANGE, chart._dataChangeHandler);\n\n            if (chart.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        destroy: function() {\n            var chart = this,\n                dataSource = chart.dataSource;\n\n            chart.element.off(NS);\n\n            if (dataSource) {\n                dataSource.unbind(CHANGE, chart._dataChangeHandler);\n            }\n\n            if (chart._instance) {\n                chart._instance.destroy();\n                delete this._instance;\n            }\n\n            if (this._tooltip) {\n                this._tooltip.destroy();\n                delete this._tooltip;\n            }\n\n            this._destroyCrosshairTooltips();\n\n            Widget.fn.destroy.call(chart);\n        },\n\n        findPaneByName: function(name) {\n            var panes = this._plotArea.panes;\n\n            for (var idx = 0; idx < panes.length; idx++) {\n                if (panes[idx].options.name === name) {\n                    return new ChartPane(this, panes[idx]);\n                }\n            }\n        },\n\n        findPaneByIndex: function(idx) {\n            var panes = this._plotArea.panes;\n            if (panes[idx]) {\n                return new ChartPane(this, panes[idx]);\n            }\n        },\n\n        findSeries: function(callback) {\n            var plotArea = this._plotArea;\n            var series = plotArea.srcSeries || plotArea.series;\n            for (var idx = 0; idx < series.length; idx++) {\n                if (callback(series[idx])) {\n                    return new ChartSeries(this, series[idx]);\n                }\n            }\n        },\n\n        findSeriesByName: function(name) {\n            return this._createSeries({ name: name });\n        },\n\n        findSeriesByIndex: function(index) {\n            return this._createSeries({ index: index });\n        },\n\n        exportVisual: function(options) {\n            var instance = this._instance;\n            if (!instance) {\n                return;\n            }\n\n            var visual;\n\n            //TO DO: support for setting any options. already available in kendo-charts\n            if (options && (options.width || options.height)) {\n                var chartArea = instance.options.chartArea;\n                var originalChartArea = instance._originalOptions.chartArea;\n\n                deepExtend(chartArea, options);\n\n                var model = instance._getModel();\n\n                chartArea.width = originalChartArea.width;\n                chartArea.height = originalChartArea.height;\n\n                model.renderVisual();\n\n                triggerPaneRender(model._plotArea.panes);\n\n                visual = model.visual;\n            } else {\n                visual = instance.exportVisual();\n            }\n\n            return visual;\n        },\n\n        resetDrilldownLevel(level) {\n            level = level || 0;\n            const state = this._drilldownState;\n            if (!state || level < 0 || level > state.length - 1) {\n                return;\n            }\n\n            const args = {\n                level,\n                sender: this\n            };\n            this.trigger(DRILLDOWN_LEVEL_CHANGE, args);\n\n            this.options.series = this._drilldownState[level];\n            this._drilldownState = this._drilldownState.slice(0, level);\n\n            this._bindCategories();\n            this._redraw();\n        },\n\n        _createSeries: function(options) {\n            var seriesOptions = this._seriesOptions(options);\n            if (seriesOptions) {\n                return new ChartSeries(this, seriesOptions);\n            }\n        },\n\n        _seriesOptions: function(options) {\n            var plotArea = this._plotArea;\n            var series = plotArea.srcSeries || plotArea.series;\n            var seriesOptions;\n\n            if (defined(options.index)) {\n                seriesOptions = series[options.index];\n            } else if (defined(options.name)) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    if (series[idx].name === options.name) {\n                        seriesOptions = series[idx];\n                        break;\n                    }\n                }\n            }\n\n            return seriesOptions;\n        },\n\n        _attachEvents: function() {\n             this.element.on(MOUSELEAVE_NS, this._mouseleave.bind(this));\n        },\n\n        _mouseleave: function(e) {\n            var instance = this._instance;\n            var tooltip = this._tooltip;\n            var target = e.relatedTarget;\n\n            if (!(target && $(target).closest(tooltip.element).length) && instance && !instance.handlingTap) {\n                instance.hideElements({\n                    keepTooltipOpen: !tooltip.options.autoHide\n                });\n            }\n        },\n\n        _getThemeOptions: function(userOptions) {\n            var themeName = (userOptions || {}).theme;\n\n            if (themeName && dataviz.SASS_THEMES.indexOf(themeName.toLowerCase()) !== -1) {\n                return dataviz.autoTheme().chart;\n            }\n\n            if (defined(themeName)) {\n                var themes = dataviz.ui.themes || {};\n                var theme = themes[themeName] || themes[themeName.toLowerCase()] || {};\n                return theme.chart || {};\n            }\n        },\n\n        _initChart: function() {\n            this._createChart(this.options, this._getThemeOptions(this.options));\n            this.options = this._instance.options;\n            this._seriesVisibility.setOptions(this.options);\n        },\n\n        _createChart: function(options, themeOptions) {\n            this._instance = new KendoChart(this.element[0], options, themeOptions, {\n                observer: new ChartInstanceObserver(this),\n                sender: this,\n                rtl: this._isRtl()\n            });\n        },\n\n        _onInit: function(e) {\n            this._instance = e.sender;\n        },\n\n        _initDataSource: function(userOptions) {\n            var chart = this,\n                dataSource = (userOptions || {}).dataSource;\n\n            chart._dataChangeHandler = chart._onDataChanged.bind(chart);\n\n            chart.dataSource = DataSource\n                .create(dataSource)\n                .bind(\"change\", chart._dataChangeHandler);\n\n            chart._bindCategories();\n\n            if (dataSource) {\n                chart._hasDataSource = true;\n            }\n\n            this._initChart();\n            this._initTooltip();\n\n            if (dataSource) {\n                if (chart.options.autoBind) {\n                    chart.dataSource.fetch();\n                }\n            }\n        },\n\n        _destroyCrosshairTooltips: function() {\n            var tooltips = this._crosshairTooltips;\n            if (tooltips) {\n                for (var key in tooltips) {\n                    tooltips[key].destroy();\n                }\n            }\n            this._crosshairTooltips = {};\n        },\n\n        _getCrosshairTooltip: function(name, index) {\n            var tooltips = this._crosshairTooltips = this._crosshairTooltips || {};\n            var key = name + index;\n            var tooltip = tooltips[key];\n            if (!tooltip) {\n                tooltip = tooltips[key] = new CrosshairTooltip(this.element);\n            }\n            return tooltip;\n        },\n\n        _showTooltip: function(e) {\n            if (e.crosshair) {\n                var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                tooltip.show(e);\n            } else if (this._tooltip) {\n                this._tooltip.show(e);\n            }\n        },\n\n        _hideTooltip: function(e) {\n            if (e.crosshair) {\n                 var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                 tooltip.hide();\n            } else if (this._tooltip) {\n                this._tooltip.hide();\n            }\n        },\n\n        _onRender: function(e) {\n            this._destroyCrosshairTooltips();\n            this._copyMembers(e.sender);\n            if (!this._hasDataSource || this._hasData || !this.options.autoBind) {\n                this.trigger(RENDER);\n            }\n        },\n\n        _copyMembers: function(instance) {\n            this.options = instance.options;\n            this._originalOptions = instance._originalOptions;\n            this.surface = instance.surface;\n            this._plotArea = instance._plotArea;\n            this._model = instance._model;\n            this._highlight = instance._highlight;\n            this._selections = instance._selections;\n            this._pannable = instance._pannable;\n            this._zoomSelection = instance._zoomSelection;\n            this._mousewheelZoom = instance._mousewheelZoom;\n        },\n\n        requiresHandlers: function(names) {\n           var events = this._events;\n           for (var idx = 0; idx < names.length; idx++) {\n               if (defined(events[names[idx]])) {\n                   return true;\n               }\n           }\n        },\n\n        _initTooltip: function() {\n            this._tooltip = this._createTooltip();\n\n            this._tooltip.bind(LEAVE, this._tooltipleave.bind(this));\n        },\n\n        _onLegendItemClick: function(e) {\n            if (!this.trigger(LEGEND_ITEM_CLICK, e)) {\n                this._legendItemClick(e.seriesIndex, e.pointIndex);\n            }\n        },\n\n        _legendItemClick: function(seriesIndex, pointIndex) {\n            var chart = this._instance,\n                plotArea = chart._plotArea,\n                currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n\n            if (chart._hasInactiveOpacity() && chart._activeChartInstance) {\n                chart._updateSeriesOpacity(null, true);\n                chart._applySeriesOpacity(chart._activeChartInstance.children, null, true);\n                chart._activeChartInstance = null;\n            }\n\n            if ($.inArray(currentSeries.type, [PIE, DONUT, FUNNEL]) >= 0) {\n                var point = currentSeries.data[pointIndex];\n                if (point && defined(point.visible)) {\n                    point.visible = !point.visible;\n                } else {\n                    var pointVisibility = currentSeries.pointVisibility = currentSeries.pointVisibility || {};\n                    var visible = pointVisibility[pointIndex];\n                    pointVisibility[pointIndex] = defined(visible) ? !visible : false;\n                }\n            } else {\n                currentSeries.visible = !currentSeries.visible;\n                this._seriesVisibility.save(currentSeries);\n            }\n\n            chart._noTransitionsRedraw();\n        },\n\n        _createTooltip: function() {\n            return new Tooltip(this.element, extend({}, this.options.tooltip, {\n                rtl: this._isRtl()\n            }));\n        },\n\n        _tooltipleave: function() {\n            if (this._instance) {\n                this._instance.hideElements();\n            }\n        },\n\n        _onDrilldown: function(e) {\n            const { series, value } = e;\n\n            if (series.drilldownSeriesFactory) {\n                const result = series.drilldownSeriesFactory(value);\n\n                if (!result) {\n                    return;\n                } else if (result instanceof Promise) {\n                    result.then((resolved) => this._onDrilldownData(e, resolved));\n                } else {\n                    this._onDrilldownData(e, result);\n                }\n            } else if (typeof value === 'object') {\n                this._onDrilldownData(e, value);\n            }\n        },\n\n        _onDrilldownData: function(e, data) {\n            const drilldownSeries = Object.assign({}, e.series, data);\n            const args = {\n                point: e.point,\n                series: e.series,\n                drilldownSeries,\n                sender: this\n            };\n\n            const prevented = this.trigger(DRILLDOWN, args);\n            if (!prevented) {\n                this._drilldownState.push(this.options.series);\n\n                this.options.series = [drilldownSeries];\n                this._bindCategories();\n                this._redraw();\n            }\n        },\n\n        _bindData: function(e) {\n            var chart = this,\n                options = chart.options,\n                series = chart._sourceSeries || options.series,\n                seriesIx,\n                seriesLength = series.length,\n                data = chart.dataSource.view(),\n                grouped = (chart.dataSource.group() || []).length > 0,\n                processedSeries = [],\n                seriesVisibility = this._seriesVisibility,\n                currentSeries,\n                groupedSeries;\n\n            seriesVisibility.read();\n\n            for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                currentSeries = series[seriesIx];\n\n                if (chart._isBindable(currentSeries) && grouped) {\n                    groupedSeries = groupSeries(currentSeries, data);\n                    processedSeries = processedSeries.concat(groupedSeries);\n\n                    seriesVisibility.applyByGroup(groupedSeries, e);\n                } else {\n                    currentSeries = extend({}, currentSeries);\n                    processedSeries.push(currentSeries);\n\n                    seriesVisibility.applyByIndex(currentSeries, e);\n                }\n            }\n\n            chart._sourceSeries = series;\n            options.series = processedSeries;\n            this._instance.applySeriesColors();\n\n            chart._bindSeries();\n            chart._bindCategories();\n\n            this._hasData = true;\n        },\n\n        _onDataChanged: function(e) {\n            this._bindData(e);\n\n            this.trigger(DATABOUND);\n            if (this._instance && this._instance.fontLoaded) {\n                this._redraw();\n            }\n        },\n\n        _bindSeries: function() {\n            var chart = this,\n                data = chart.dataSource.view(),\n                series = chart.options.series,\n                seriesIx,\n                seriesLength = series.length,\n                currentSeries,\n                groupIx,\n                seriesData;\n\n            for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                currentSeries = series[seriesIx];\n\n                if (chart._isBindable(currentSeries)) {\n                    groupIx = currentSeries._groupIx;\n                    seriesData = defined(groupIx) ? (data[groupIx] || {}).items : data;\n\n                    if (currentSeries.autoBind !== false) {\n                        currentSeries.data = seriesData;\n                    }\n                }\n            }\n        },\n\n        _bindCategories: function() {\n            var chart = this,\n                data = chart.dataSource.view() || [],\n                grouped = (chart.dataSource.group() || []).length > 0,\n                categoriesData = data,\n                options = chart.options,\n                definitions = [].concat(options.categoryAxis),\n                axisIx,\n                axis;\n\n            if (grouped) {\n                if (data.length) {\n                    categoriesData = data[0].items;\n                }\n            }\n\n            for (axisIx = 0; axisIx < definitions.length; axisIx++) {\n                axis = definitions[axisIx];\n                if (axis.autoBind !== false) {\n                    chart._bindCategoryAxis(axis, categoriesData, axisIx);\n                }\n            }\n        },\n\n        _bindCategoryAxis: function(axis, data, axisIx) {\n            var count = (data || []).length,\n                categoryIx,\n                category,\n                row;\n\n            if (axis.field) {\n                axis.categories = [];\n                for (categoryIx = 0; categoryIx < count; categoryIx++) {\n                    row = data[categoryIx];\n\n                    category = getField(axis.field, row);\n                    if (categoryIx === 0) {\n                        axis.categories = [category];\n                        axis.dataItems = [row];\n                    } else {\n                        axis.categories.push(category);\n                        axis.dataItems.push(row);\n                    }\n                }\n            } else if (this._instance) {\n                this._instance.bindCategoryAxisFromSeries(axis, axisIx);\n            }\n        },\n\n        _isBindable: function(series) {\n            var valueFields = SeriesBinder.current.valueFields(series),\n                result = true,\n                field, i;\n\n            for (i = 0; i < valueFields.length; i++) {\n                field = valueFields[i];\n                if (field === VALUE) {\n                    field = \"field\";\n                } else {\n                    field = field + \"Field\";\n                }\n\n                if (!defined(series[field])) {\n                    result = false;\n                    break;\n                }\n            }\n\n            return result;\n        },\n\n        _isRtl: function() {\n            return kendo.support.isRtl(this.element) && this.element.css(\"direction\") === RTL;\n        }\n    });\n\n    var proxyMembers = [\"getAxis\", \"findAxisByName\", \"plotArea\", \"toggleHighlight\", \"showTooltip\",\n        \"hideTooltip\", \"_resize\", \"_redraw\", \"_noTransitionsRedraw\", \"_legendItemHover\", \"_eventCoordinates\"];\n\n    function createProxyMember(name) {\n        Chart.fn[name] = function() {\n            var instance = this._instance;\n            if (instance) {\n                return instance[name].apply(instance, arguments);\n            }\n        };\n    }\n\n    for (var idx = 0; idx < proxyMembers.length; idx++) {\n        createProxyMember(proxyMembers[idx]);\n    }\n\n    function groupSeries(series, data) {\n        var result = [],\n            nameTemplate,\n            legacyTemplate = series.groupNameTemplate,\n            groupIx,\n            dataLength = data.length,\n            seriesClone,\n            defaultNameTemplate = ({ group }) => `${defined(series.name) ? group.value + \": \" + series.name : group.value}`;\n\n        if (dataLength === 0) {\n            seriesClone = deepExtend({}, series);\n            seriesClone.visibleInLegend = false;\n            return [seriesClone];\n        }\n\n        if (defined(legacyTemplate)) {\n            kendo.logToConsole(\n                \"'groupNameTemplate' is obsolete and will be removed in future versions. \" +\n                \"Specify the group name template as 'series.name'\"\n            );\n\n            if (legacyTemplate) {\n                nameTemplate = template(legacyTemplate);\n            }\n        } else {\n            nameTemplate = template(series.name || defaultNameTemplate);\n        }\n\n        for (groupIx = 0; groupIx < dataLength; groupIx++) {\n            seriesClone = deepExtend({}, series);\n\n            if (!kendo.isFunction(seriesClone.color)) {\n                seriesClone.color = undefined$1;\n            }\n\n            seriesClone._groupIx = groupIx;\n            seriesClone._groupValue = data[groupIx].value;\n            result.push(seriesClone);\n\n            if (nameTemplate) {\n                seriesClone.name = nameTemplate({\n                    series: seriesClone, group: data[groupIx]\n                });\n            }\n        }\n\n        return result;\n    }\n\n    dataviz.ExportMixin.extend(Chart.fn);\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Chart.fn);\n    }\n\n    dataviz.ui.plugin(Chart);\n\n    var SeriesVisibilityState = Class.extend({\n        init: function() {\n            this.groups = {};\n            this.index = {};\n            this.options = {};\n        },\n\n        applyByGroup: function(series, e) {\n            if ((e && e.action) || this.options.persistSeriesVisibility) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    if (this.groups[series[idx]._groupValue] === false) {\n                        series[idx].visible = false;\n                    }\n                }\n            } else {\n                this.groups = {};\n            }\n        },\n\n        applyByIndex: function(series, e) {\n            if ((e && e.action) || this.options.persistSeriesVisibility) {\n                if (this.index[series.index] === false) {\n                    series.visible = false;\n                }\n            } else {\n                this.index = {};\n            }\n        },\n\n        save: function(series) {\n            if (!series) {\n                return;\n            }\n\n            if (this.options.persistSeriesVisibility) {\n                this.options.series[series.index].visible = series.visible;\n            } else {\n                this.saveState(series);\n            }\n        },\n\n        setOptions: function(options) {\n            this.options = options;\n            this.groups = {};\n            this.index = {};\n        },\n\n        read: function() {\n            var options = this.options;\n            if (options.persistSeriesVisibility) {\n                var series = options.series;\n                for (var idx = 0; idx < series.length; idx++) {\n                    this.saveState(series[idx]);\n                }\n            }\n        },\n\n        saveState: function(series) {\n            if (defined(series._groupValue)) {\n                this.groups[series._groupValue] = series.visible;\n            } else {\n                this.index[series.index] = series.visible;\n            }\n        }\n    });\n\n    var geom = kendo.geometry;\n\n    function normalizeStyle(style) {\n        for (var field in style) {\n            if (style[field] === undefined$1) {\n                style[field] = '';\n            }\n        }\n\n        return style;\n    }\n\n    var Tooltip = Observable.extend({\n        init: function(chartElement, options) {\n            var tooltip = this;\n\n            Observable.fn.init.call(tooltip);\n\n            this.setOptions(options);\n\n            tooltip.chartElement = chartElement;\n\n            tooltip.template = Tooltip.template;\n            if (!tooltip.template) {\n                tooltip.template = Tooltip.template = ({ autoHide, rtl, font, border, opacity }) =>\n                    `<div class='k-tooltip ${autoHide ? \"k-tooltip-closable\" : \"\"} k-chart-tooltip ${rtl ? \"k-rtl\" : \"\"}' ` +\n                    `${kendo.attr(\"style-display\")}=\"none\" ${kendo.attr(\"style-position\")}=\"absolute\" ` +\n                    `${kendo.attr(\"style-font\")}=\"${font}\" ${kendo.attr(\"style-opacity\")}=\"${opacity}\" ` +\n                    `${border ? `${kendo.attr(\"style-border\")}=\"${border.width}px solid\" ` : \"\"}` +\n                    `>` +\n                    '<div class=\"k-tooltip-content\"></div>' +\n                    `${autoHide ? '' : '<div class=\"k-tooltip-button\">' + kendo.ui.icon($('<a href=\"#\" title=\"Close\"></a>'), { icon: \"x\" }) + '</div>'}` +\n                    \"</div>\";\n            }\n\n            tooltip.element = $(tooltip.template(tooltip.options));\n            kendo.applyStylesFromKendoAttributes(tooltip.element, [\"display\", \"position\", \"font\", \"border\", \"opacity\"]);\n\n            tooltip.move = tooltip.move.bind(tooltip);\n            tooltip._mouseleave = tooltip._mouseleave.bind(tooltip);\n\n            var mobileScrollerSelector = kendo.format(\"[{0}='content'],[{0}='scroller']\", kendo.attr(\"role\"));\n            tooltip._mobileScroller = chartElement.closest(mobileScrollerSelector).data(\"kendoMobileScroller\");\n            tooltip.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n            tooltip._closeTooltipHandler = tooltip._closeTooltip.bind(tooltip);\n        },\n\n        destroy: function() {\n            var tooltip = this;\n\n            this._clearShowTimeout();\n            DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n            if (this.element) {\n                this.element.off(MOUSELEAVE_NS).remove();\n                this.element = null;\n            }\n        },\n\n        setOptions: function(options) {\n            this.options = deepExtend({}, this.options, options);\n        },\n\n        options: {\n            opacity: 1,\n            animation: {\n                duration: TOOLTIP_ANIMATION_DURATION\n            },\n            sharedTemplate: ({ colspan, categoryText, points, content, colorMarker, nameColumn }) =>\n                \"<table>\" +\n                `<th colspan='${colspan}'>${categoryText}</th>` +\n                    sharedTemplateIterator(points, colorMarker, nameColumn, content) +\n                \"</table>\",\n            categoryFormat: \"{0:d}\",\n            autoHide: true\n        },\n\n        move: function() {\n            var tooltip = this,\n                options = tooltip.options,\n                element = tooltip.element,\n                offset;\n\n            if (!tooltip.anchor || !tooltip.element) {\n                return;\n            }\n\n            offset = tooltip._offset();\n            if (!tooltip.visible) {\n                element.css({ top: offset.top, left: offset.left });\n            }\n\n            tooltip.visible = true;\n            tooltip._ensureElement(document.body);\n            element\n                .stop(true, true)\n                .show()\n                .animate({\n                    left: offset.left,\n                    top: offset.top\n                }, options.animation.duration);\n        },\n\n        _clearShowTimeout: function() {\n            if (this.showTimeout) {\n                clearTimeout(this.showTimeout);\n                this.showTimeout = null;\n            }\n        },\n\n        getAnchor: function(size) {\n            var anchor = this.anchor;\n            var point = anchor.point;\n            var align = anchor.align;\n            var x = point.left;\n            var y = point.top;\n            if (align.horizontal === \"center\") {\n                x -= size.width / 2;\n            } else if (align.horizontal === \"right\") {\n                x -= size.width;\n            }\n\n            if (align.vertical === \"center\") {\n                y -= size.height / 2;\n            } else if (align.vertical === \"bottom\") {\n                y -= size.height;\n            }\n\n            return {\n                x: x,\n                y: y\n            };\n        },\n\n        _offset: function() {\n            var tooltip = this,\n                size = tooltip._measure(),\n                anchor = tooltip.getAnchor(size),\n                top = anchor.y,\n                left = anchor.x,\n                zoomLevel = kendo.support.zoomLevel(),\n                viewport = $(window),\n                scrollTop = window.pageYOffset || document.documentElement.scrollTop || 0,\n                scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || 0,\n                movable = (this._mobileScroller || {}).movable;\n\n            if (!movable || movable.scale === 1) {\n                top += tooltip._fit(top - scrollTop, size.height, outerHeight(viewport) / zoomLevel);\n                left += tooltip._fit(left - scrollLeft, size.width, outerWidth(viewport) / zoomLevel);\n            } else {\n                var transform = geom.transform().scale(movable.scale, movable.scale, [movable.x, movable.y]);\n                var point = new geom.Point(left, top).transform(transform);\n                left = point.x;\n                top = point.y;\n            }\n\n            return {\n                top: top,\n                left: left\n            };\n        },\n\n        show: function(e) {\n            var tooltip = this;\n            var fakeContainer = $(\"<div></div>\");\n            this.anchor = e.anchor;\n            this.element.css(normalizeStyle(e.style));\n            this.element.toggleClass(TOOLTIP_INVERSE, !!e.className);\n            this.element.toggleClass(SHARED_TOOLTIP_CLASS, !!e.shared);\n\n            var content = e.shared ? this._sharedContent(e) : this._pointContent(e.point);\n            fakeContainer.html(content);\n            kendo.applyStylesFromKendoAttributes(fakeContainer, [\"background-color\"]);\n            this.element.find('.k-tooltip-content').empty().append(fakeContainer);\n\n            if (!tooltip.options.autoHide) {\n                tooltip.element.off(\"click\" + NS).on(\"click\" + NS, \".k-tooltip-button\", tooltip._closeTooltipHandler);\n                DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler)\n                    .on(tooltip.downEvent, tooltip._closeTooltipHandler);\n            }\n\n            this._clearShowTimeout();\n            this.showTimeout = setTimeout(this.move, TOOLTIP_SHOW_DELAY);\n        },\n\n        hide: function(forceHide) {\n            var tooltip = this;\n\n            if (!tooltip.options.autoHide && !forceHide) {\n                return;\n            }\n\n            clearTimeout(tooltip.showTimeout);\n            tooltip._hideElement();\n\n            if (tooltip.visible) {\n                tooltip.point = null;\n                tooltip.visible = false;\n                tooltip.index = null;\n                DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n            }\n        },\n\n        _closeTooltip: function(e) {\n            var target = $(e.target);\n\n            if (!target.is(\".k-chart-tooltip, .k-tooltip-content\")) {\n                e.preventDefault();\n                this.chartElement.data(\"kendoChart\")._instance.hideElements();\n                this.hide(true);\n            }\n        },\n\n        _sharedContent: function(e) {\n            var points = e.points;\n            var that = this;\n\n            var nameColumn = dataviz.grep(points, function(point) {\n                return defined(point.series.name);\n            }).length;\n\n            var colorMarker = e.series.length > 1;\n            var colspan = 1;\n            if (nameColumn) {\n                colspan++;\n            }\n            if (colorMarker) {\n                colspan++;\n            }\n\n            var template = kendo.template(this.options.sharedTemplate);\n            var content = template({\n                points: points,\n                category: e.category,\n                categoryText: e.categoryText,\n                content: this._pointContent.bind(that),\n                colorMarker: colorMarker,\n                nameColumn: nameColumn,\n                colspan: colspan\n            });\n\n            return content;\n        },\n\n        _measure: function() {\n            this._ensureElement();\n\n            var size = {\n                width: outerWidth(this.element),\n                height: outerHeight(this.element)\n            };\n\n            return size;\n        },\n\n        _ensureElement: function() {\n            if (this.element) {\n                this.element\n                    .appendTo(document.body)\n                    .on(MOUSELEAVE_NS, this._mouseleave);\n            }\n        },\n\n        _mouseleave: function(e) {\n            var target = e.relatedTarget;\n            var chart = this.chartElement[0];\n            if (target && target !== chart && !$.contains(chart, target)) {\n                this.trigger(LEAVE);\n            }\n        },\n\n        _hideElement: function() {\n            var tooltip = this;\n            var element = this.element;\n            if (element) {\n                element.fadeOut({\n                    always: function() {\n                        if (!tooltip.visible) {\n                            element.off(MOUSELEAVE_NS).remove();\n                        }\n                    }\n                });\n            }\n        },\n\n        _pointContent: function(point) {\n            var tooltip = this,\n                options = deepExtend({}, tooltip.options, point.options.tooltip),\n                content, tooltipTemplate;\n\n            if (defined(point.value)) {\n                content = point.value.toString();\n            }\n\n            if (options.template) {\n                tooltipTemplate = template(options.template);\n                content = tooltipTemplate({\n                    value: point.value,\n                    category: point.category,\n                    series: point.series,\n                    dataItem: point.dataItem,\n                    percentage: point.percentage,\n                    runningTotal: point.runningTotal,\n                    total: point.total,\n                    low: point.low,\n                    high: point.high,\n                    xLow: point.xLow,\n                    xHigh: point.xHigh,\n                    yLow: point.yLow,\n                    yHigh: point.yHigh\n                });\n            } else if (options.format) {\n                content = point.formatValue(options.format);\n            }\n\n            return content;\n        },\n\n        _fit: function(offset, size, viewPortSize) {\n            var output = 0;\n\n            if (offset + size > viewPortSize) {\n                output = viewPortSize - (offset + size);\n            }\n\n            if (offset < 0) {\n                output = -offset;\n            }\n\n            return output;\n        }\n    });\n\n    var CrosshairTooltip = Tooltip.extend({\n        init: function(chartElement, options) {\n            Tooltip.fn.init.call(this, chartElement, options);\n            this.element.addClass(\"k-chart-crosshair-tooltip\");\n        },\n\n        show: function(e) {\n            var element = this.element;\n\n            if (element) {\n                this.anchor = e.anchor;\n                this.element.css(e.style);\n                this.element.html(this.content(e));\n\n                this.move();\n            }\n        },\n\n        move: function() {\n            var tooltip = this,\n                element = tooltip.element,\n                offset = tooltip._offset();\n\n            tooltip._ensureElement();\n            element.css({ top: offset.top, left: offset.left }).show();\n        },\n\n        content: function(e) {\n            var content = e.value,\n                options = e.crosshair.options.tooltip;\n\n            if (options.template) {\n                content = template(options.template)({\n                    value: content\n                });\n            }\n\n            return content;\n        },\n\n        hide: function() {\n            this.element.hide();\n        }\n    });\n\n    var ChartPane = Class.extend({\n        init: function(chart, pane) {\n            this._chart = chart;\n            this._pane = pane;\n            this.visual = pane.visual;\n            this.chartsVisual = pane.chartContainer.visual;\n            this.name = pane.options.name;\n        },\n\n        series: function() {\n            var chart = this._chart;\n            var seriesByPane = chart._plotArea.groupSeriesByPane();\n            var series = seriesByPane[this.name || \"default\"];\n\n            var result = [];\n            if (series) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    result.push(new ChartSeries(chart, series[idx]));\n                }\n            }\n\n            return result;\n        }\n    });\n\n    var ChartSeries = Class.extend({\n        init: function(chart, options) {\n            this._chart = chart;\n            this._options = options;\n        },\n\n        points: function(filter) {\n            var points = this._points;\n            if (!points) {\n                var series = this._seriesOptions();\n                var plotArea = this._chart._plotArea;\n                this._points = points = plotArea.pointsBySeriesIndex(series.index);\n            }\n            if (kendo.isFunction(filter)) {\n                points = this._filterPoints(points, filter);\n            }\n\n\n            return points;\n        },\n\n        data: function(data) {\n            var series = this._seriesOptions();\n            if (data) {\n                var chart = this._chart;\n                var plotArea = chart._plotArea;\n\n                series.data = data;\n\n                if (series.categoryField) {\n                    var axis = plotArea.seriesCategoryAxis(series);\n                    var options = [].concat(chart.options.categoryAxis);\n\n                    chart._instance.bindCategoryAxisFromSeries(options[axis.axisIndex], axis.axisIndex);\n                }\n\n                chart._noTransitionsRedraw();\n                this._clearFields();\n            }\n\n            return series.data;\n        },\n\n        findPoint: function(filter) {\n            var points = this.points();\n            for (var idx = 0; idx < points.length; idx++) {\n                if (filter(points[idx])) {\n                    return points[idx];\n                }\n            }\n        },\n\n        toggleHighlight: function(show, elements) {\n            if (!elements) {\n                elements = this.points();\n            } else if (kendo.isFunction(elements)) {\n                elements = this.points(elements);\n            } else {\n                elements = isArray(elements) ? elements : [elements];\n            }\n\n            this._chart._instance.togglePointsHighlight(show, elements);\n        },\n\n        toggleVisibility: function(visible, filter) {\n            var chart = this._chart;\n            var seriesOptions = this._seriesOptions();\n            var hasFilter = kendo.isFunction(filter);\n            if (!hasFilter) {\n                seriesOptions.visible = visible;\n                chart._seriesVisibility.save(seriesOptions);\n            } else {\n                if (inArray(seriesOptions.type, [PIE, DONUT, FUNNEL])) {\n                    var data = this._filterData(filter);\n                    for (var idx = 0; idx < data.length; idx++) {\n                        data[idx].visible = visible;\n                    }\n                } else {\n                    seriesOptions.visible = function(data) {\n                        return filter(data.dataItem) ? visible : true;\n                    };\n                }\n            }\n\n            chart._noTransitionsRedraw();\n\n            this._clearFields();\n        },\n\n        _filterData: function(filter) {\n            var data = this._seriesOptions().data;\n            var length = data.length;\n            var result = [];\n\n            for (var idx = 0; idx < length; idx++) {\n                if (filter(data[idx])) {\n                    result.push(data[idx]);\n                }\n            }\n            return result;\n        },\n\n        _filterPoints: function(points, filter) {\n            var result = [];\n            var length = points.length;\n            for (var idx = 0; idx < length; idx++) {\n                if (filter(points[idx])) {\n                    result.push(points[idx]);\n                }\n            }\n            return result;\n        },\n\n        _seriesOptions: function() {\n            var series = this._series;\n            if (!series) {\n                series = this._series = this._chart._seriesOptions(this._options);\n            }\n            return series;\n        },\n\n        _clearFields: function() {\n            delete this._points;\n            delete this._series;\n        }\n    });\n\n    function triggerPaneRender(panes) {\n        for (var idx = 0; idx < panes.length; idx++) {\n            panes[idx].notifyRender();\n        }\n    }\n\n    function sharedTemplateIterator(points, colorMarker, nameColumn, content) {\n        var result = \"\";\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            result += \"<tr>\";\n\n            if (colorMarker) {\n                result += `<td><span class='k-chart-shared-tooltip-marker' ${kendo.attr(\"style-background-color\")}=\"${encode(point.series.color)}\"></span></td>`;\n            }\n\n            if (nameColumn) {\n                result += `<td> ${point.series.name ? point.series.name + \":\" : \"&nbsp;\"}</td>`;\n            }\n\n            result += `<td>${content(point)}</td>`;\n            result += \"</tr>\";\n        }\n\n        return result;\n    }\n\n    dataviz.Tooltip = Tooltip;\n    dataviz.CrosshairTooltip = CrosshairTooltip;\n    dataviz.ChartInstanceObserver = ChartInstanceObserver;\n    dataviz.ChartPane = ChartPane;\n    dataviz.ChartSeries = ChartSeries;\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"dataviz.chart\",\n    name: \"Chart\",\n    category: \"dataviz\",\n    description: \"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.\",\n    depends: [ \"data\", \"userevents\", \"drawing\", \"dataviz.core\", \"dataviz.themes\" ],\n    features: [{\n        id: \"dataviz.chart-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export Chart as PDF\",\n        depends: [ \"pdf\" ]\n    }]\n};\n\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}