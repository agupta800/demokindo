{"version":3,"file":"kendo.grid.js","names":["$","undefined$1","kendo","window","ContextMenu","ui","extend","encode","htmlEncode","ACTION","GridContextMenu","init","element","options","that","this","fn","call","_overrideTemplates","_extendItems","bind","_onSelect","_onOpen","templates","sprite","icon","spriteCssClass","iconClass","defaultItems","separator","name","create","text","command","rules","edit","destroy","select","items","softRules","copySelection","copySelectionNoHeaders","reorderRow","exportPDF","exportExcel","sortAsc","sortDesc","moveGroupPrevious","moveGroupNext","events","concat","ev","item","data","split","map","val","indexOf","key","reduce","acc","v","Object","assign","target","action","menu","sender","elTarget","event","isEmptyObject","closest","length","preventDefault","_toggleSeparatorVisibility","find","attr","each","i","enable","_validateSoftRules","filter","prev","next","hide","isPlainObject","keys","_append","_extendItem","messages","j","forEach","subItem","commands","uid","guid","_readState","_validateRules","tool","state","states","isFunction","append","args","trigger","grid","jQuery","Command","Class","MoveGroupCommand","exec","groupable","method","dir","_change","SortCommand","idx","dataSource","sort","field","_getCellField","multipleMode","sortable","mode","compare","splice","push","AddCommand","addRow","EditCommand","inCellMode","_editMode","editCell","editRow","DeleteCommand","removeRow","CopySelectionCommand","withHeaders","copySelectionToClipboard","SelectRowCommand","selectMode","Selectable","parseOptions","selectable","cell","SelectAllRowsCommand","rows","ClearSelectionCommand","clearSelection","ReorderRowCommand","newIndex","index","reorderRowTo","ExportPDFCommand","saveAsPDF","ExportExcelCommand","selection","exportSelectedToExcel","saveAsExcel","GridCommand","__meta__","id","category","description","depends","features","GroupsPager","DataSource","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","grep","isArray","Array","inArray","prototype","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","DATA_CELL_HIDDENINCLUDED","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGING","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","SVG_ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","whitespaceRegExp","nonDataCellsRegExp","RegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","SELECTCOLUMNTMPL","size","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","DEFAULTHEADERTEMPLATE","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","defaultBodyContextMenu","defaultHeadContextMenu","defaultGroupsContextMenu","Pager","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","global","allowSelection","start","e","capture","move","scrollTop","y","delta","scrollLeft","x","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","divElements","join","empty","cancel","page","attrEquals","attrName","attrValue","groupCells","count","stringifyAttributes","attributes","defaultCommands","save","themeColor","update","canceledit","excel","pdf","search","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","attachCustomCommandEvent","commandName","click","replace","normalizeColumns","columns","encoded","locked","parentIds","column","hidden","Function","_attributesFunction","isVisible","addHiddenStyle","footerAttributes","headerAttributes","headers","columnParent","parents","columnParents","inserted","setColumnVisibility","visible","setVisibility","show","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","visibleColumns","columnsWithMedia","minScreenWidth","Error","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","leafs","destination","groups","sourcesDepth","depth","targetDepth","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","html","classes","match","cssClasses","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","removeAttributeProperty","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","title","childColumns","visibleChildColumns","editField","format","editor","editorOptions","label","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","appendContent","tbody","table","placeholder","tmp","$html","applyStylesFromKendoAttributes","_","appendChild","createElement","innerHTML","addClass","getValidCssClass","firstChild","replaceChild","kendoStyleAttrObject","normalizeCols","hasDetails","colgroup","is","prepend","convertToObject","array","formatGroupValue","columnValues","groupValue","setCellVisibility","pad","hideColumnCells","columnIndex","groupRows","hasSubgroups","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","contextMenu","_initContextMenu","_resizeHandler","resize","notify","_showWatermarkOverlay","scrollableContent","scrollable","leftMostPosition","virtualScrollable","navigatable","toolbar","filterable","allowCopy","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","cancelDelete","confirmation","confirmDelete","selectRow","selectAllRows","reorderRowUp","reorderRowDown","reorderRowTop","reorderRowBottom","exportPdf","exportToExcelAll","exportToExcelSelection","exportToExcelSelectionNoHeaders","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","tbodyContextMenu","theadContextMenu","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","current","currentIndex","lockedParent","setAttribute","type","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","sourceParent","targetParent","_isLocked","change","oldIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","clickMoveClick","holdToDrag","showHintOnHold","preventOsHoldFeatures","clone","elm","innerText","cursorOffset","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","reorderRows","dataItem","pushMove","rowsLength","targetItem","_rowDropping","autoFitColumns","headerTable","leafCols","minWidth","contentDiv","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","footerTable","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","getByUid","_calculateColumnIndex","virtualOffset","useDoubleTapEditing","editContainer","_editContainer","_mousedownOnEditCell","supportDoubleTap","fastTap","isLockedCell","has","end","closeCell","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","_belongsToGrid","_isVirtualInlineEditable","stopPropagation","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","buttonsHTML","editMenuGuid","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","clearContainer","Form","buttonsTemplate","formData","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","_clickPdf","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","getColumnsFields","endless","_endlessPageSize","_pushExpression","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_createClickHandler","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","_processItems","kendoToolBar","navigateOnTab","tools","searchText","_processAttr","keyValue","replaceAll","attributeClassMatch","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","enableContextMenu","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","multiple","aria","toggleable","dragToSelect","changing","originalEvent","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","stopImmediatePropagation","tableClick","areaClipBoard","getTSV","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","curr","isRowSelection","nodeName","columnMapHandler","fieldAttr","_relatedCell","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","selectedKeyNames","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","_findVisibleCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","aggregates","_canDrag","link","originalIndex","cellToFocus","_currentDataIndex","lockedColumnsCount","$cell","$newFocus","hiddenCount","prevUntil","nextCell","originalRow","up","step","back","switchRow","isEdited","isIE","_initMobile","groupsContextMenu","head","mainOptions","_action","_buildStates","showOn","isEditable","isSelectable","isSortable","isRowReorderable","isGroupable","hasSelection","isSorted","canMoveGroupPrev","canMoveGroupNext","commandOptions","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menuOptions","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","closeCallback","stickCallback","unstickCallback","filterHandler","forceUnique","checkSource","owner","stick","unstick","filtering","autoSize","componentType","kendoColumnMenu","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","dataValueField","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","compiledAttributes","paramName","rowTemplateFunc","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","colSpanAttributes","dirty","dirtyFields","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","f","useWithBlock","fieldValue","_virtualCols","considerNext","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","hiddenColumns","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","scrollableNoGridHeightStyles","resultTemplate","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","stickyAttributes","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","outerHTML","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","expanded","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_currentRowIndex","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_restoreSelection","selectedRows","dataItemKey","_cleanupDetailItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","plugin","kendo$1"],"sources":["kendo.grid.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.columnsorter.js';\nimport './kendo.editable.js';\nimport './kendo.window.js';\nimport './kendo.filtermenu.js';\nimport './kendo.filtercell.js';\nimport './kendo.columnmenu.js';\nimport './kendo.groupable.js';\nimport './kendo.pager.js';\nimport './kendo.selectable.js';\nimport './kendo.sortable.js';\nimport './kendo.reorderable.js';\nimport './kendo.resizable.js';\nimport './kendo.ooxml.js';\nimport './kendo.excel.js';\nimport './kendo.pane.js';\nimport './kendo.progressbar.js';\nimport './kendo.pdf.js';\nimport './kendo.dialog.js';\nimport './kendo.switch.js';\nimport './kendo.html.button.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\nimport './kendo.menu.js';\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        ContextMenu = ui.ContextMenu,\n        extend = $.extend,\n        encode = kendo.htmlEncode;\n\n    var ACTION = \"action\";\n\n    var GridContextMenu = ContextMenu.extend({\n        init: function(element, options) {\n            var that = this;\n\n            ContextMenu.fn.init.call(that, element, options);\n\n            that._overrideTemplates();\n            that._extendItems();\n\n            that.bind(\"select\", that._onSelect.bind(that));\n            that.bind(\"open\", that._onOpen.bind(that));\n        },\n\n        _overrideTemplates: function() {\n            this.templates.sprite = ({ icon, spriteCssClass }) => `${(icon || spriteCssClass) ? kendo.ui.icon({ icon: encode(icon || \"\"), iconClass: encode(spriteCssClass || \"\") }) : ''}`;\n        },\n\n        defaultItems: {\n            \"separator\": { name: \"separator\", separator: true },\n            \"create\": { name: \"create\", text: \"Add\", icon: \"plus\", command: \"AddCommand\", rules: \"isEditable\" },\n            \"edit\": { name: \"edit\", text: \"Edit\", icon: \"pencil\", command: \"EditCommand\", rules: \"isEditable\" },\n            \"destroy\": { name: \"destroy\", text: \"Delete\", icon: \"trash\", command: \"DeleteCommand\", rules: \"isEditable\" },\n            \"select\": { name: \"select\", text: \"Select\", icon: \"table-body\", rules: \"isSelectable\", items: [\n                { name: \"selectRow\", text: \"Row\", icon: \"table-row-groups\", command: \"SelectRowCommand\" },\n                { name: \"selectAllRows\", text: \"All rows\", icon: \"grid\", command: \"SelectAllRowsCommand\" },\n                { name: \"clearSelection\", text: \"Clear selection\", icon: \"table-unmerge\", softRules: \"hasSelection\", command: \"ClearSelectionCommand\" },\n            ] },\n            \"copySelection\": { name: \"copySelection\", text: \"Copy selection\", icon: \"page-header-section\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\", options: \"withHeaders\" },\n            \"copySelectionNoHeaders\": { name: \"copySelectionNoHeaders\", text: \"Copy selection (No Headers)\", icon: \"file-txt\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\" },\n            \"reorderRow\": { name: \"reorderRow\", text: \"Reorder row\", icon: \"caret-alt-expand\", rules: \"isRowReorderable\", softRules: \"isSorted\", items: [\n                { name: \"reorderRowUp\", text: \"Up\", icon: \"caret-alt-up\", command: \"ReorderRowCommand\", options: \"dir:up\" },\n                { name: \"reorderRowDown\", text: \"Down\", icon: \"caret-alt-down\", command: \"ReorderRowCommand\", options: \"dir:down\" },\n                { name: \"reorderRowTop\", text: \"Top\", icon: \"caret-alt-to-top\", command: \"ReorderRowCommand\", options: \"dir:top\" },\n                { name: \"reorderRowBottom\", text: \"Bottom\", icon: \"caret-alt-to-bottom\", command: \"ReorderRowCommand\", options: \"dir:bottom\" }\n            ] },\n            \"exportPDF\": { name: \"exportPDF\", text: \"Export to PDF\", icon: \"file-pdf\", command: \"ExportPDFCommand\" },\n            \"exportExcel\": { name: \"exportExcel\", text: \"Export to Excel\", icon: \"file-excel\", items: [\n                { name: \"exportToExcelAll\", text: \"All\", command: \"ExportExcelCommand\" },\n                { name: \"exportToExcelSelection\", text: \"Selection\", command: \"ExportExcelCommand\", softRules: \"hasSelection\", options: \"selection,withHeaders\" },\n                { name: \"exportToExcelSelectionNoHeaders\", text: \"Selection (No Headers)\", softRules: \"hasSelection\", command: \"ExportExcelCommand\", options: \"selection\" }\n            ] },\n            \"sortAsc\": { name: \"sortAsc\", text: \"Sort Ascending\", icon: \"sort-asc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:asc\" },\n            \"sortDesc\": { name: \"sortDesc\", text: \"Sort Descending\", icon: \"sort-desc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:desc\" },\n            \"moveGroupPrevious\": { name: \"moveGroupPrevious\", text: \"Move previous\", icon: \"arrow-left\", rules: \"isGroupable\", softRules: \"canMoveGroupPrev\", command: \"MoveGroupCommand\", options: \"dir:prev\" },\n            \"moveGroupNext\": { name: \"moveGroupNext\", text: \"Move next\", icon: \"arrow-right\", rules: \"isGroupable\", softRules: \"canMoveGroupNext\", command: \"MoveGroupCommand\", options: \"dir:next\" }\n            // \"filter\": { name: \"filter\", text: \"Filter\", icon: \"filter\", attr: { [kendo.attr(\"is-filter\")]: true }, items: [\n            //     { content: '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' }\n            // ] },\n        },\n\n        events: ContextMenu.fn.events.concat([\n            ACTION\n        ]),\n\n        _onSelect: function(ev) {\n            var command = $(ev.item).data(\"command\");\n            var options = $(ev.item).data(\"options\");\n                options = options ? options.split(\",\")\n                .map(val => {\n                    if (val.indexOf(\":\") > -1) {\n                        var [key, val] = val.split(\":\");\n                        return { [key || \"_\"]: val };\n                    }\n\n                    return { [val]: true };\n                })\n                .reduce((acc, v) => Object.assign(acc, v), {}) : {};\n\n            var target = $(ev.target);\n\n            if (!command) {\n                return;\n            }\n\n            this.action({\n                command: command,\n                options: Object.assign(options, { target: target })\n            });\n        },\n\n        _onOpen: function(ev) {\n            var menu = ev.sender,\n                items = menu.options.items,\n                elTarget = $(ev.event ? ev.event.target : null);\n\n            if ((!items && $.isEmptyObject(this.defaultItems)) || elTarget.closest(\".k-grid-column-menu\").length) {\n                ev.preventDefault();\n                return;\n            }\n\n            this._toggleSeparatorVisibility();\n\n            menu.element.find(`[${kendo.attr('soft-rules')}]`).each((i, item) => {\n                var rules = $(item).attr(kendo.attr('soft-rules')).split(\";\");\n                menu.enable(item, this._validateSoftRules(rules, elTarget));\n            });\n        },\n\n        _toggleSeparatorVisibility: function() {\n            var that = this,\n                items = that.element.find(\".k-item.k-separator\").filter((i, item) => {\n                    var prev = $(item).prev(\".k-item:not(.k-separator)\");\n                    var next = $(item).next(\".k-item:not(.k-separator)\");\n\n                    return !(prev.length && next.length);\n                });\n\n            items.hide();\n        },\n\n        _extendItems: function() {\n            var that = this,\n                items = that.options.items,\n                item, isBuiltInTool;\n\n            if (items && items.length) {\n                for (var i = 0; i < items.length; i++) {\n                    item = items[i];\n                    isBuiltInTool = $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                    if (isBuiltInTool) {\n                        item = item.name;\n                    }\n\n                    if ($.isPlainObject(item)) {\n                        that._append(item);\n                    } else if (that.defaultItems[item]) {\n                        item = that.defaultItems[item];\n                        that._append(item);\n                    } else if (typeof(item) === \"string\") {\n                        item = { name: item, text: item, spriteCssClass: item, command: item + \"Command\" };\n                        that._append(item);\n                    }\n                }\n            } else {\n                for (var key in that.defaultItems) {\n                    item = that.defaultItems[key];\n                    that._append(item);\n                }\n            }\n        },\n\n        _extendItem: function(item) {\n            var that = this,\n                messages = that.options.messages,\n                attr = item.attr || {};\n\n            if (item.command) {\n                attr[kendo.attr(\"command\")] = item.command;\n            }\n\n            if (item.options) {\n                attr[kendo.attr(\"options\")] = item.options;\n            }\n\n            if (item.softRules) {\n                attr[kendo.attr(\"soft-rules\")] = item.softRules;\n            }\n\n            if (item.items) {\n                for (var j = 0; j < item.items.length; j++) {\n                    item.items.forEach(subItem => {\n                        that._extendItem(subItem);\n                    });\n                }\n            }\n\n            extend(item, {\n                text: messages.commands[item.name],\n                icon: item.icon || \"\",\n                spriteCssClass: item.spriteCssClass || \"\",\n                attr: attr,\n                uid: kendo.guid()\n            });\n        },\n\n        _validateSoftRules: function(rules, target) {\n            var that = this;\n\n            if (!rules || !(rules && rules.length)) {\n                return true;\n            }\n\n            for (var i = 0; i < rules.length; i++) {\n                if (!this._readState(rules[i], target)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        _validateRules: function(tool) {\n            var that = this,\n                rules = tool.rules ? tool.rules.split(\";\") : [];\n\n            if (!rules.length) {\n                return true;\n            }\n\n            for (var i = 0; i < rules.length; i++) {\n                if (!this._readState(rules[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        _readState: function(state, target) {\n            var that = this,\n                states = that.options.states;\n\n            if (kendo.isFunction(states[state])) {\n                return states[state](target);\n            } else {\n                return states[state];\n            }\n        },\n\n        _append: function(item) {\n            var that = this;\n\n            that._extendItem(item);\n\n            if (that._validateRules(item)) {\n                that.append(item);\n            }\n        },\n\n        action: function(args) {\n            this.trigger(ACTION, args);\n        }\n    });\n\n    kendo.ui.grid = kendo.ui.grid || {};\n\n    extend(kendo.ui.grid, {\n        ContextMenu: GridContextMenu\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class;\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.grid = options.grid;\n        }\n    });\n\n    var MoveGroupCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                groupable = grid.groupable,\n                options = that.options,\n                target = options.target.closest(\".k-chip\"),\n                method = options.dir === \"next\" ? \"after\" : \"before\",\n                position = options.dir === \"next\" ? target.next() : target.prev();\n\n            position[method](target);\n            groupable._change();\n        },\n    });\n\n    var SortCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                dataSource = grid.dataSource,\n                sort = dataSource.sort() || [],\n                options = that.options,\n                dir = options.dir,\n                field = grid._getCellField(options.target),\n                multipleMode = grid.options.sortable.mode && grid.options.sortable.mode === \"multiple\",\n                compare = grid.options.compare,\n                length, idx;\n\n            if (multipleMode) {\n                for (idx = 0, length = sort.length; idx < length; idx++) {\n                    if (sort[idx].field === field) {\n                        sort.splice(idx, 1);\n                        break;\n                    }\n                }\n                sort.push({ field: field, dir: dir, compare: compare });\n            } else {\n                sort = [{ field: field, dir: dir, compare: compare }];\n            }\n\n            dataSource.sort(sort);\n        },\n    });\n\n    var AddCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.addRow();\n        }\n    });\n\n    var EditCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                inCellMode = grid._editMode() === \"incell\",\n                target = inCellMode ? that.options.target : that.options.target.closest(\"tr\");\n\n            if (inCellMode) {\n                grid.editCell(target);\n            } else {\n                grid.editRow(target);\n            }\n        }\n    });\n\n    var DeleteCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                target = that.options.target.closest(\"tr\");\n\n            grid.removeRow(target);\n        }\n    });\n\n    var CopySelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                withHeaders = that.options.withHeaders;\n\n            grid.copySelectionToClipboard(withHeaders);\n        }\n    });\n\n    var SelectRowCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                target = that.options.target.closest(\"tr\");\n\n            grid.select(selectMode.cell ? target.find('td') : target);\n        }\n    });\n\n    var SelectAllRowsCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                rows = grid.items();\n\n            grid.select(selectMode.cell ? rows.find('td') : rows);\n        }\n    });\n\n    var ClearSelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.clearSelection();\n        }\n    });\n\n    var ReorderRowCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                dir = that.options.dir,\n                target = that.options.target.closest(\"tr\"),\n                index = target.index(),\n                newIndex;\n\n            switch (dir) {\n                case \"up\":\n                    newIndex = index - 1;\n                    break;\n                case \"down\":\n                    newIndex = index + 2;\n                    break;\n                case \"top\":\n                    newIndex = 0;\n                    break;\n                case \"bottom\":\n                    newIndex = grid.items().length;\n                    break;\n            }\n\n            grid.reorderRowTo(target, newIndex);\n        }\n    });\n\n    var ExportPDFCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.saveAsPDF();\n        }\n    });\n\n    var ExportExcelCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                selection = that.options.selection,\n                withHeaders = that.options.withHeaders,\n                grid = that.grid;\n\n            if (selection) {\n                grid.exportSelectedToExcel(withHeaders);\n            } else {\n                grid.saveAsExcel();\n            }\n        }\n    });\n\n    kendo.ui.grid = kendo.ui.grid || {};\n\n    extend(kendo.ui.grid, {\n        GridCommand: Command,\n        commands: {\n            SortCommand: SortCommand,\n            AddCommand: AddCommand,\n            EditCommand: EditCommand,\n            DeleteCommand: DeleteCommand,\n            CopySelectionCommand: CopySelectionCommand,\n            SelectRowCommand: SelectRowCommand,\n            SelectAllRowsCommand: SelectAllRowsCommand,\n            ClearSelectionCommand: ClearSelectionCommand,\n            ReorderRowCommand: ReorderRowCommand,\n            ExportPDFCommand: ExportPDFCommand,\n            ExportExcelCommand: ExportExcelCommand,\n            MoveGroupCommand: MoveGroupCommand\n        }\n    });\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"grid\",\n    name: \"Grid\",\n    category: \"web\",\n    description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n    depends: [ \"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\", \"menu\" ],\n    features: [ {\n        id: \"grid-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n    }, {\n        id: \"grid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for record filtering\",\n        depends: [ \"filtermenu\" ]\n    }, {\n        id: \"grid-columnmenu\",\n        name: \"Column menu\",\n        description: \"Support for header column menu\",\n        depends: [ \"columnmenu\" ]\n    }, {\n        id: \"grid-grouping\",\n        name: \"Grouping\",\n        description: \"Support for grid grouping\",\n        depends: [ \"groupable\" ]\n    }, {\n        id: \"grid-filtercell\",\n        name: \"Row filter\",\n        description: \"Support for grid header filtering\",\n        depends: [ \"filtercell\" ]\n    }, {\n        id: \"grid-paging\",\n        name: \"Paging\",\n        description: \"Support for grid paging\",\n        depends: [ \"pager\" ]\n    }, {\n        id: \"grid-selection\",\n        name: \"Selection\",\n        description: \"Support for row selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"grid-column-reorder\",\n        name: \"Column reordering\",\n        description: \"Support for column reordering\",\n        depends: [ \"reorderable\" ]\n    }, {\n        id: \"grid-column-resize\",\n        name: \"Column resizing\",\n        description: \"Support for column resizing\",\n        depends: [ \"resizable\" ]\n    }, {\n        id: \"grid-mobile\",\n        name: \"Grid adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"grid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export grid data as Excel spreadsheet\",\n        depends: [ \"excel\" ]\n    }, {\n        id: \"grid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n    } ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        DataSource = kendo.data.DataSource,\n        ObservableObject = kendo.data.ObservableObject,\n        tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n        activeElement = kendo._activeElement,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        keys = kendo.keys,\n\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        map = $.map,\n        grep = $.grep,\n        isArray = Array.isArray,\n        inArray = $.inArray,\n        push = Array.prototype.push,\n        isFunction = kendo.isFunction,\n        encode = kendo.htmlEncode,\n        isEmptyObject = $.isEmptyObject,\n        contains = $.contains,\n        math = Math,\n\n        DOT = \".\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n        DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n        DATA_CELL_HIDDENINCLUDED = \":not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))\",\n        SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        NAVROW = \"tr:not(.k-footer-template):visible\",\n        NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n        ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n        COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n        HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n        CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n        CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n        CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n        WRAPPER = \".k-grid\",\n        NS = \".kendoGrid\",\n        CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n        GROUPCELLCLASS = \"k-group-cell\",\n\n        EDIT = \"edit\",\n        BEFOREEDIT = \"beforeEdit\",\n        SAVE = \"save\",\n        REMOVE = \"remove\",\n        DETAILINIT = \"detailInit\",\n        FILTERMENUINIT = \"filterMenuInit\",\n        COLUMNMENUINIT = \"columnMenuInit\",\n        FILTERMENUOPEN = \"filterMenuOpen\",\n        COLUMNMENUOPEN = \"columnMenuOpen\",\n        CELLCLOSE = \"cellClose\",\n        CHANGING = \"changing\",\n        CHANGE = \"change\",\n        COLUMNHIDE = \"columnHide\",\n        COLUMNSHOW = \"columnShow\",\n        SAVECHANGES = \"saveChanges\",\n        DATABOUND = \"dataBound\",\n        DETAILEXPAND = \"detailExpand\",\n        DETAILCOLLAPSE = \"detailCollapse\",\n        ITEM_CHANGE = \"itemchange\",\n        PAGE = \"page\",\n        PAGING = \"paging\",\n        SCROLL = \"scroll\",\n        SYNC = \"sync\",\n        LOAD_START = \"loadStart\",\n        LOAD_END = \"loadEnd\",\n\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        ACTIVE = \"k-active\",\n        FOCUSABLE = \":kendoFocusable\",\n        SELECTED = \"k-selected\",\n        CHECKBOX = \"k-checkbox\",\n        CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n        NORECORDSCLASS = \"k-grid-norecords\",\n        LINK_CLASS = \"k-link\",\n        ICON_CLASS = \"k-icon\",\n        SVG_ICON_CLASS = \"k-svg-icon\",\n        ORDER_CLASS = \"k-sort-order\",\n        SORTED_CLASS = \"k-sorted\",\n        HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n        FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n        STICKY_CELL_CLASS = \"k-grid-content-sticky k-table-td\",\n        STICKY_HEADER_CLASS = \"k-grid-header-sticky k-header\",\n        STICKY_FOOTER_CLASS = \"k-grid-footer-sticky k-table-td\",\n        STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n        ROW_RESIZER = \"k-row-resizer\",\n        ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n        GROUPING_ROW = \"k-grouping-row\",\n        RESIZE = \"resize\",\n        ROWRESIZE = \"rowResize\",\n        COLUMNRESIZE = \"columnResize\",\n        COLUMNREORDER = \"columnReorder\",\n        COLUMNLOCK = \"columnLock\",\n        COLUMNUNLOCK = \"columnUnlock\",\n        COLUMNSTICK = \"columnStick\",\n        COLUMNUNSTICK = \"columnUnstick\",\n        ROWREORDER = \"rowReorder\",\n        NAVIGATE = \"navigate\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        MOUSEUP = \"mouseup\",\n        MOUSEENTER = \"mouseenter\",\n        MOUSELEAVE = \"mouseleave\",\n        MOUSEMOVE = \"mousemove\",\n        DUBLECLICK = \"dblclick\",\n        HEIGHT = \"height\",\n        WIDTH = \"width\",\n        AUTO = \"auto\",\n        TABINDEX = \"tabIndex\",\n        FUNCTION = \"function\",\n        STRING = \"string\",\n        BOTTOM = \"bottom\",\n        CONTAINER_FOR = \"container-for\",\n        FIELD = \"field\",\n        INPUT = \"input\",\n        INCELL = \"incell\",\n        INLINE = \"inline\",\n        UNIQUE_ID = \"uid\",\n        MINCOLSPANVALUE = 1,\n        COLSPAN = \"colSpan\",\n        OVERFLOW = \"overflow\",\n        HIDDEN = \"hidden\",\n        SORT = \"sort\",\n        GROUP_SORT = \"group-sort\",\n        DELETECONFIRM = \"Are you sure you want to delete this record?\",\n        NORECORDS = \"No records available.\",\n        CONFIRMDELETE = \"Delete\",\n        CANCELDELETE = \"Cancel\",\n        COLLAPSE = \"Collapse\",\n        EXPAND = \"Expand\",\n        ID = \"id\",\n        PX = \"px\",\n        TR = \"tr\",\n        DIV = \"div\",\n\n        ARIA_LABEL = \"aria-label\",\n        ARIA_OWNS = \"aria-owns\",\n        ARIA_ROWCOUNT = \"aria-rowcount\",\n        ARIA_COLCOUNT = \"aria-colcount\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_COLINDEX = \"aria-colindex\",\n        ARIA_ROWINDEX = \"aria-rowindex\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_CHECKED = \"aria-checked\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ROLE = \"role\",\n        NONE = \"none\",\n        ROW = \"row\",\n        ROWGROUP = \"rowgroup\",\n        COLUMNHEADER = \"columnheader\",\n        GRIDCELL = \"gridcell\",\n\n        formatRegExp = /(\\}|\\#)/ig,\n        templateHashRegExp = /#/ig,\n        whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n        leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        COMMANDBUTTONTMPL = ({ className, attr, text }) => `<button type=\"button\" class=\"${className}\" ${attr}>${text}</button>`,\n        SELECTCOLUMNTMPL = ({ size }) => `<input tabindex=\"-1\" class=\"k-select-checkbox ` + CHECKBOX + ` ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">`,\n        SELECTCOLUMNHEADERTMPL = ({ size }) => `<input tabindex=\"-1\" class=\"k-select-checkbox ` + CHECKBOX + ` ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">`,\n        DRAGHANDLECOLUMNTMPL = () => kendo.ui.icon(\"reorder\"),\n        DEFAULTHEADERTEMPLATE = ({ text }) => `<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">${text}</span></span></span>`,\n        isRtl = false,\n        browser = kendo.support.browser;\n\n    var isIE11 = browser.msie && browser.version === 11;\n    var isMac = /Mac OS/.test(navigator.userAgent);\n    var classNames = {\n        content: \"k-content\",\n        scrollContainer: \"k-scroll-container\",\n        headerCellInner: \"k-cell-inner\"\n    };\n    var GroupsPager;\n\n    var defaultBodyContextMenu = [\n        \"copySelection\",\n        \"copySelectionNoHeaders\",\n        \"separator\",\n        \"create\",\n        \"edit\",\n        \"destroy\",\n        \"select\",\n        \"separator\",\n        \"reorderRow\",\n        \"exportPDF\",\n        \"exportExcel\",\n        \"separator\"\n    ];\n\n    var defaultHeadContextMenu = [\n        \"sortAsc\",\n        \"sortDesc\",\n        \"separator\"\n    ];\n\n    var defaultGroupsContextMenu = [\n        \"moveGroupPrevious\",\n        \"moveGroupNext\",\n        \"separator\"\n    ];\n\n    if (ui.Pager) {\n        GroupsPager = ui.Pager.extend({\n            init: function(element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n            },\n            options: {\n                name: \"GroupsPager\"\n            },\n\n            totalPages: function() {\n                var that = this;\n\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _collapsedTotal: function() {\n                var dataSource = this.dataSource;\n                return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n            }\n        });\n    }\n\n    var VirtualScrollable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            that._refreshHandler = that.refresh.bind(that);\n            that.setDataSource(options.dataSource);\n            that.wrap();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            }\n            that.dataSource = dataSource;\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.dataSource.options.useRanges = true;\n            that.dataSource.options.virtual = true;\n        },\n\n        options: {\n            name: \"VirtualScrollable\",\n            itemHeight: $.noop,\n            prefetch: true,\n            maxScrollHeight: 250000\n        },\n\n        events: [\n            PAGING,\n            PAGE,\n            SCROLL,\n            LOAD_START,\n            LOAD_END\n        ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that.wrapper.add(that.verticalScrollbar).off(NS);\n\n            clearTimeout(that._timeout);\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            if (that.drag) {\n                that.drag.destroy();\n                that.drag = null;\n            }\n            that.wrapper = that.element = that.verticalScrollbar = null;\n            that._refreshHandler = null;\n        },\n\n        wrap: function() {\n            var that = this,\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                scrollbar = kendo.support.scrollbar() + 1,\n                element = that.element,\n                wrapper;\n\n            element.css( {\n                width: AUTO,\n                overflow: \"hidden\"\n            }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n            that.content = element.children().first();\n            wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                .parent()\n                                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            that._wrapper();\n\n            if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                that.wrapper.css(\"touch-action\", NONE);\n                that.drag = new kendo.UserEvents(that.wrapper, {\n                    global: true,\n                    allowSelection: true,\n                    start: function(e) {\n                        e.sender.capture();\n                    },\n                    move: function(e) {\n                        that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                        kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                        .css({\n                                            width: scrollbar\n                                        }).appendTo(element)\n                                        .on(\"scroll\" + NS, that._scroll.bind(that));\n        },\n\n        _wrapper: function() {\n            var that = this;\n\n            if (isIE11) {\n                //scrolling the virtual scrollbar to the bottom and then\n                //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                //https://github.com/telerik/kendo-ui-core/issues/3779\n                that.wrapper.css({\n                    \"overflow-y\": SCROLL\n                });\n\n                //hide the wrapper behind the virtual scrollbar\n                that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var scrollbar = this.verticalScrollbar,\n                scrollTop = scrollbar.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                e.preventDefault();\n                this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                scrollTop = e.currentTarget.scrollTop,\n                dataSource = that.dataSource,\n                rowHeight = that.itemHeight,\n                skip = dataSource.skip() || 0,\n                start = that._rangeStart || skip,\n                height = that.element.innerHeight(),\n                isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n            if (that._preventScroll) {\n                that._preventScroll = false;\n                return;\n            }\n            that._prevScrollTop = that._scrollTop;\n            that._scrollTop = scrollTop - (start * rowHeight);\n            that._scrollbarTop = scrollTop;\n\n            that._scrolling = delayLoading;\n\n            if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                that.wrapper[0].scrollTop = that._scrollTop;\n            }\n\n            that.trigger(SCROLL);\n\n            if (delayLoading) {\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                that._scrollingTimeout = setTimeout(function() {\n                    that._scrolling = false;\n                    that._page(that._rangeStart, that.dataSource.take());\n                }, 100);\n            }\n        },\n\n        scrollToTop: function() {\n            this._scrollTo(0);\n        },\n\n        scrollToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n        },\n\n        _scrollWrapperToTop: function() {\n            this.wrapper.scrollTop(0);\n        },\n\n        _scrollWrapperToBottom: function() {\n            this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n        },\n\n        _scrollWrapperOnColumnResize: function() {\n            var that = this;\n            var wrapper = this.wrapper;\n            var initialScrollTop = wrapper.scrollTop();\n\n            if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                    that._wrapperScrolled = true;\n                }\n            } else if (that._wrapperScrolled) {\n                if (!that._isWrapperScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                }\n\n                that._wrapperScrolled = false;\n            }\n        },\n\n        _scrollTo: function(scrollTop) {\n            var that = this;\n            var scrollbar = that.verticalScrollbar;\n\n            if (scrollbar.scrollTop() !== scrollTop) {\n                that._preventScroll = true;\n            }\n\n            that.wrapper.scrollTop(scrollTop);\n            that._scrollTop = that.wrapper.scrollTop();\n\n            scrollbar.scrollTop(scrollTop);\n            that._scrollbarTop = scrollbar.scrollTop();\n        },\n\n        _isScrolledToTop: function() {\n            return this.verticalScrollbar.scrollTop() === 0;\n        },\n\n        _isScrolledToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            var scrollTop = scrollbar.scrollTop();\n\n            return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n        },\n\n        _isWrapperScrolledToBottom: function() {\n            var wrapper = this.wrapper;\n\n            return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n        },\n\n        itemIndex: function(rowIndex) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n            return rangeStart + rowIndex;\n        },\n\n        position: function(index) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n            var pageSize = this.dataSource.pageSize();\n            var result;\n\n            if (index > rangeStart) {\n                result = index - rangeStart;\n            } else {\n                result = rangeStart - index - 1;\n            }\n\n            return result > pageSize ? pageSize : result;\n        },\n\n        scrollIntoView: function(row) {\n            var container = this.wrapper[0];\n            var containerHeight = container.clientHeight;\n            var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n            var elementOffset = row[0].offsetTop;\n            var elementHeight = row[0].offsetHeight;\n\n            if (containerScroll > elementOffset) {\n                this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n            } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n            }\n        },\n\n        _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n            var that = this,\n                dataSource = that.dataSource,\n                itemHeight = that.itemHeight,\n                take = dataSource.take(),\n                rangeStart = that._rangeStart || dataSource.skip() || 0,\n                currentSkip = math.floor(firstItemIndex / take) * take,\n                fetching = false,\n                prefetchAt = 0.33;\n            var scrollbar = that.verticalScrollbar;\n            var webkitCorrection = browser.webkit ? 1 : 0;\n            var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n            if (firstItemIndex < rangeStart) {\n\n                fetching = true;\n                rangeStart = math.max(0, lastItemIndex - take);\n                that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                that._page(rangeStart, take);\n\n            } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                fetching = true;\n                rangeStart = math.min(firstItemIndex, total - take);\n\n                //ensure the scrollbar can be scrolled to bottom with mouse drag\n                if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                } else {\n                    that._scrollTop = itemHeight;\n                }\n\n                that._page(rangeStart, take);\n\n            } else if (!that._fetching && that.options.prefetch) {\n\n                if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                    dataSource.prefetch(currentSkip - take, take, $.noop);\n                }\n                if (lastItemIndex > currentSkip + take * prefetchAt) {\n                    dataSource.prefetch(currentSkip + take, take, $.noop);\n                }\n\n            }\n            return fetching;\n        },\n\n        fetching: function() {\n            return this._fetching;\n        },\n\n        _page: function(skip, take, callback) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                dataSource = that.dataSource,\n                isGroupPaged = dataSource._isGroupPaged();\n            callback = isFunction(callback) ? callback : $.noop;\n\n            if (that.trigger(PAGING, { skip: skip, take: take })) {\n                return;\n            }\n\n            clearTimeout(that._timeout);\n            that._fetching = true;\n            that._rangeStart = skip;\n\n            if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                that.trigger(LOAD_START);\n\n                dataSource.range(skip, take, function() {\n                    that.trigger(LOAD_END);\n                    callback();\n                    that.trigger(PAGE);\n                }, \"page\");\n            } else {\n                if (!delayLoading) {\n                    that.trigger(LOAD_START);\n                }\n\n                that._timeout = setTimeout(function() {\n                    if (!that._scrolling) {\n\n                        if (delayLoading) {\n                            that.trigger(LOAD_START);\n                        }\n\n                        dataSource.range(skip, take, function() {\n                            that.trigger(LOAD_END);\n                            callback();\n                            that.trigger(PAGE);\n                        });\n                    }\n                }, 100);\n            }\n        },\n\n        repaintScrollbar: function(shouldScrollWrapper) {\n            var that = this,\n                maxHeight = that.options.maxScrollHeight,\n                dataSource = that.dataSource,\n                scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                wrapperElement = that.wrapper[0],\n                totalHeight,\n                idx,\n                itemHeight;\n            var wasScrolledToBottom = that._isScrolledToBottom();\n\n            itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n            var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n            totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n            var divElements = $(new Array(math.floor(totalHeight / maxHeight) + 1).join('<div></div>'))\n                .css({\n                    width: \"1px\",\n                    height: `${maxHeight}px`\n                });\n\n            if (totalHeight % maxHeight) {\n                divElements = divElements.add($(\"<div></div>\").css({\n                    width: \"1px\",\n                    height: `${(totalHeight % maxHeight)}px`\n                }));\n            }\n\n            that.verticalScrollbar.empty().append(divElements);\n\n            if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                that.scrollToBottom();\n            }\n\n            if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                wrapperElement.scrollTop = that._scrollTop;\n                that._scrollWrapperOnColumnResize();\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                dataSource = that.dataSource,\n                rangeStart = that._rangeStart;\n            var action = (e || {}).action;\n            var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n            that.trigger(LOAD_END);\n            clearTimeout(that._timeout);\n\n            that.repaintScrollbar(shouldScrollWrapper);\n\n            if (that.drag) {\n                that.drag.cancel();\n            }\n\n            if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                    that._rangeStart = dataSource.skip();\n                }\n\n                if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                    // reset the scrollbar position if datasource is filtered\n                    that.verticalScrollbar[0].scrollTop = 0;\n                }\n            }\n\n            that._fetching = false;\n        }\n    });\n\n    function attrEquals(attrName, attrValue) {\n        return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n    }\n\n    function groupCells(count) {\n        return new Array(count + 1).join('<td class=\"k-table-td k-group-cell\">&nbsp;</td>');\n    }\n\n    function stringifyAttributes(attributes) {\n        var attr,\n            result = \" \";\n\n        if (attributes) {\n            if (typeof attributes === STRING) {\n                return attributes;\n            }\n\n            for (attr in attributes) {\n                if (attributes[attr] !== '') {\n                    result += attr + '=\"' + attributes[attr] + '\"';\n                }\n            }\n        }\n        return result;\n    }\n\n    var defaultCommands = {\n        create: {\n            text: \"Add new record\",\n            className: \"k-grid-add\",\n            iconClass: \"k-i-plus\"\n        },\n        cancel: {\n            text: \"Cancel changes\",\n            className: \"k-grid-cancel-changes\",\n            iconClass: \"k-i-cancel\"\n        },\n        save: {\n            text: \"Save changes\",\n            className: \"k-grid-save-changes\",\n            iconClass: \"k-i-check\"\n        },\n        destroy: {\n            text: \"Delete\",\n            className: \"k-grid-remove-command\",\n            iconClass: \"k-i-x\"\n        },\n        edit: {\n            text: \"Edit\",\n            className: \"k-grid-edit-command\",\n            iconClass: \"k-i-pencil\",\n            themeColor: \"primary\"\n        },\n        update: {\n            text: \"Save\",\n            className: \"k-grid-save-command\",\n            iconClass: \"k-i-save\",\n            themeColor: \"primary\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-grid-cancel-command\",\n            iconClass: \"k-i-cancel-outline\"\n        },\n        excel: {\n            text: \"Export to Excel\",\n            className: \"k-grid-excel\",\n            iconClass: \"k-i-file-excel\"\n        },\n        pdf: {\n            text: \"Export to PDF\",\n            className: \"k-grid-pdf\",\n            iconClass: \"k-i-file-pdf\"\n        },\n        search: {\n            text: \"Search...\",\n            className: \"k-grid-search\"\n        }\n    };\n\n    function cursor(context, value) {\n        $('th, th .k-grid-filter-menu, th .k-link', context)\n            .add(document.body)\n            .css('cursor', value);\n    }\n\n    function reorder(selector, source, dest, before, count) {\n        var sourceIndex = source;\n        source = $();\n        count = count || 1;\n        for (var idx = 0; idx < count; idx++) {\n            source = source.add(selector.eq(sourceIndex + idx));\n        }\n\n        if (typeof dest == \"number\") {\n            source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n        } else {\n            source.appendTo(dest);\n        }\n    }\n\n    function elements(lockedContent, content, filter) {\n        return $(lockedContent).add(content).find(filter);\n    }\n\n    function attachCustomCommandEvent(context, container, commands) {\n        var idx,\n            length,\n            command,\n            commandName;\n\n        commands = !isArray(commands) ? [commands] : commands;\n\n        for (idx = 0, length = commands.length; idx < length; idx++) {\n            command = commands[idx];\n\n            if (isPlainObject(command) && command.click) {\n                commandName = command.name || command.text;\n                container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n            }\n        }\n    }\n\n    function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n        return map(columns, function(column) {\n            column = typeof column === STRING ? { field: column } : column;\n\n            var hidden;\n            column.parentIds = parentIds;\n\n            if (column.attributes instanceof Function) {\n                column._attributesFunction = column.attributes;\n            }\n\n            if (!isVisible(column) || hide) {\n                column.attributes = addHiddenStyle(column.attributes);\n                column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                hidden = true;\n            }\n\n            var uid = kendo.guid();\n            if (locked && !column.locked) {\n                column.locked = locked;\n            }\n\n            column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n            if (!column.headerAttributes.id) {\n                column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                column.uid = uid;\n            } else {\n                column.uid = uid = column.headerAttributes.id;\n            }\n\n            if (column.columns) {\n                column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n            }\n            return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n        });\n    }\n\n    function columnParent(column, columns) {\n        var parents = [];\n        columnParents(column, columns, parents);\n        return parents[parents.length - 1];\n    }\n\n    function columnParents(column, columns, parents) {\n        parents = parents || [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (column === columns[idx]) {\n                return true;\n            } else if (columns[idx].columns) {\n                var inserted = parents.length;\n                parents.push(columns[idx]);\n                if (!columnParents(column, columns[idx].columns, parents)) {\n                    parents.splice(inserted, parents.length - inserted);\n                } else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function setColumnVisibility(column, visible) {\n        setVisibility(column, visible, visible);\n    }\n\n    function setVisibility(column, visible, show) {\n        var method = show ? removeHiddenStyle : addHiddenStyle;\n        column.hidden = !visible;\n        column.attributes = method(column.attributes);\n        column.footerAttributes = method(column.footerAttributes);\n        column.headerAttributes = method(column.headerAttributes);\n    }\n\n\n    function setColumnMediaVisibility(column, visible) {\n        setColumnMatchesMedia(column);\n        var hideByMedia = column._hideByMedia;\n        setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n    }\n\n    function setColumnMatchesMedia(column) {\n        column.matchesMedia = columnMatchesMedia(column);\n    }\n\n    function columnMatchesMedia(column) {\n        return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n    }\n\n    function isCellVisible() {\n        return this.style.display !== NONE;\n    }\n\n    function isElementVisible(element) {\n        return $(element)[0].style.display !== NONE;\n    }\n\n    function isVisible(column) {\n        return visibleColumns([column]).length > 0;\n    }\n\n    function visibleColumns(columns) {\n        return grep(columns, function(column) {\n            var result = !column.hidden && column.matchesMedia !== false;\n\n            if (result && column.columns) {\n                result = visibleColumns(column.columns).length > 0;\n            }\n            return result;\n        });\n    }\n\n    function columnsWithMedia(columns) {\n        var result = [];\n        var column;\n\n        for (var i = 0; i < columns.length; i++) {\n            column = columns[i];\n\n            if (!isUndefined(column.media)) {\n                if (!isUndefined(column.minScreenWidth)) {\n                    throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                }\n\n                result.push(column);\n            }\n\n            if (column.columns) {\n                result = result.concat(columnsWithMedia(column.columns));\n            }\n        }\n\n        return result;\n    }\n\n    function isUndefined(value) {\n        return typeof value === \"undefined\";\n    }\n\n    function toJQuery(elements) {\n        return $(elements).map(function() { return this.toArray(); });\n    }\n\n    function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n        var lockedColumnDepth = depth(lockedColumns(columns));\n        var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n        var rowSpan = cell.rowSpan;\n        if (sourceLockedColumnsCount) {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n            } else {\n                cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n            }\n        } else {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n            } else {\n                cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n            }\n        }\n    }\n\n    function findColumnByField(columns, field) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field == field) {\n                return columns[i];\n            }\n        }\n    }\n\n    function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n        var sourcesDepth = depth(sources);\n        var targetDepth = depth([target]);\n\n        if (sourcesDepth > targetDepth) {\n            var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n            var rows = destination.children(\":not(.k-filter-row)\");\n            $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n        }\n\n        addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n        moveCells(leafs, columns, container, destination, action);\n    }\n\n    function updateCellIndex(thead, columns, offset) {\n        offset = offset || 0;\n\n        var position;\n        var cell;\n        var allColumns = columns;\n        columns = leafColumns(columns);\n\n        var cells = {};\n        var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        for (var idx = 0, length = columns.length; idx < length; idx++) {\n            position = columnPosition(columns[idx], allColumns);\n\n            if (!cells[position.row]) {\n                cells[position.row] = rows.eq(position.row)\n                    .find(\".k-header\")\n                    .filter(filter);\n            }\n\n            cell = cells[position.row].eq(position.cell);\n            cell.attr(kendo.attr(\"index\"), offset + idx);\n        }\n\n\n        return columns.length;\n    }\n\n    function depth(columns) {\n        var result = 1;\n        var max = 0;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                var temp = depth(columns[idx].columns);\n                if (temp > max) {\n                    max = temp;\n                }\n            }\n        }\n        return result + max;\n    }\n\n    function moveCells(leafs, columns, container, destination, action) {\n        var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n        var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header\");\n\n        var t = $();\n        var sourceIndex = sourcePosition.cell;\n        var idx;\n\n        for (idx = 0; idx < leafs.length; idx++) {\n            t = t.add(ths.eq(sourceIndex + idx));\n        }\n\n        destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n        var children = [];\n        for (idx = 0; idx < leafs.length; idx++) {\n            if (leafs[idx].columns) {\n                children = children.concat(leafs[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            moveCells(children, columns, container, destination, action);\n        }\n    }\n\n    function columnPosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           cellCounts[row]++;\n        }\n        return result;\n    }\n    function findParentColumnWithChildren(columns, index, source, rtl) {\n        var target;\n        var locked = !!source.locked;\n        var targetLocked;\n\n        do {\n            target = columns[index];\n            index += rtl ? 1 : -1;\n            targetLocked = !!target.locked;\n        } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n        return target;\n    }\n\n    function decorateCellWithClass(html) {\n        let element = html;\n        let classes = element.match(/class=[\"][^\"]+/g);\n        if (classes) {\n            const cssClasses = classes[0].split('\\\"').pop();\n            element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n        } else {\n            element = element.replace(\"<td\",\"<td class='k-table-td'\");\n        }\n\n        return element;\n    }\n\n    function findReorderTarget(columns, target, source, before, masterColumns) {\n        if (target.columns) {\n            target = target.columns;\n            return target[before ? 0 : target.length - 1];\n        } else {\n            var parent = columnParent(target, columns);\n            var parentColumns;\n\n            if (parent) {\n                parentColumns = parent.columns;\n            } else {\n                parentColumns = columns;\n            }\n\n            var index = inArray(target, parentColumns);\n            if (index === 0 && before) {\n                index++;\n            } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                index--;\n            } else if (index > 0 || (index === 0 && !before)) {\n                index++;\n            }\n\n            var sourceIndex = inArray(source, parentColumns);\n            target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n            var targetIndex = inArray(target, masterColumns);\n            if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                return null;\n            }\n\n            if (target && target != source && target.columns) {\n                return findReorderTarget(columns, target, source, before, masterColumns);\n            }\n        }\n        return null;\n    }\n\n    function columnVisiblePosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           if (!columns[idx].hidden) {\n               cellCounts[row]++;\n           }\n        }\n        return result;\n    }\n\n    function flatColumnsInDomOrder(columns) {\n        var result = flatColumns(lockedColumns(columns));\n        return result.concat(flatColumns(nonLockedColumns(columns)));\n    }\n\n    function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n        var column = flatColumns[sourceIndex];\n        var target = flatColumns[targetIndex];\n\n        var parent = columnParent(column, columns);\n        columns = parent ? parent.columns : columns;\n\n        return inArray(target, columns);\n    }\n\n    function flatColumns(columns) {\n        var result = [];\n        var children = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n\n        }\n        if (children.length) {\n            result = result.concat(flatColumns(children));\n        }\n        return result;\n    }\n\n    function hiddenLeafColumnsCount(columns) {\n        var counter = 0;\n        var column;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            column = columns[idx];\n\n            if (column.columns) {\n                counter += hiddenLeafColumnsCount(column.columns);\n            } else if (column.hidden) {\n                counter++;\n            }\n        }\n        return counter;\n    }\n\n    function sumWidths(cols) {\n        var width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            if (!cols[idx].hidden) {\n                width += parseInt(cols[idx].width, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function columnsWidth(cols) {\n        var colWidth, width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            colWidth = cols[idx].style.width;\n            if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                width += parseInt(colWidth, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function removeRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        var rowSpan;\n        for (var idx = 0; idx < cells.length; idx++) {\n            rowSpan = cells[idx].rowSpan;\n            if (rowSpan > 1) {\n                cells[idx].rowSpan = (rowSpan - count) || 1;\n            }\n        }\n    }\n\n    function addRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            cells[idx].rowSpan += count;\n        }\n    }\n\n    function removeEmptyRows(container) {\n        var rows = container.find(\"tr:not(.k-filter-row)\");\n\n        var emptyRowsCount = rows.filter(function() {\n            return !$(this).children().length;\n        }).remove().length;\n\n        var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            if (cells[idx].rowSpan > 1) {\n                cells[idx].rowSpan -= emptyRowsCount;\n            }\n        }\n        return rows.length - emptyRowsCount;\n    }\n\n    function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n        var idx, row, length, children = [];\n\n        for (idx = 0, length = columns.length; idx < length; idx++) {\n            row = rows[rowIndex] || [];\n            row.push(cells.eq(offset + idx));\n            rows[rowIndex] = row;\n\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n        }\n    }\n\n    function setLeftAndRightStyles(element, left, right) {\n        element.css({\n            \"left\": left,\n            \"right\": right\n        });\n    }\n\n    function createColumnAttribute(column, attribute, property) {\n        column[attribute] = column[attribute] || {};\n        column[attribute][property] = column[attribute][property] || \"\";\n    }\n\n    function addColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        if (column[attribute][property] !== \"\") {\n            column[attribute][property] += \" \" + value;\n        } else {\n            column[attribute][property] = value;\n        }\n    }\n\n    function removeColumnAttribute(column, attribute, property, value, removeAttributeProperty) {\n        createColumnAttribute(column, attribute, property);\n        if (removeAttributeProperty) {\n            delete column[attribute][property];\n        } else {\n            column[attribute][property] = column[attribute][property].replace(value, \"\");\n        }\n    }\n\n    function lockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked;\n        });\n    }\n\n    function nonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked;\n        });\n    }\n\n    function stickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked;\n        });\n    }\n\n    function visibleStickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleNonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLeafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push(columns[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleLeafExportColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push({\n                    field: columns[idx].field,\n                    width: columns[idx].width,\n                    values: columns[idx].values,\n                    title: columns[idx].title\n                });\n            }\n        }\n\n        return result;\n    }\n\n    function childColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                result = result.concat(columns[idx].columns);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleChildColumns(columns) {\n        var result = childColumns(columns);\n\n        result = result.filter(function(e) {\n            return !e.hidden;\n        });\n\n        return result;\n    }\n\n    function leafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n            }\n            result = result.concat(leafColumns(columns[idx].columns));\n        }\n\n        return result;\n    }\n\n    function getColumnsFields(columns) {\n        var result = [];\n        columns = leafColumns(columns);\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (typeof columns[idx] === \"string\") {\n                result.push(columns[idx]);\n            } else if (columns[idx].field) {\n                result.push(columns[idx].field);\n            }\n        }\n        return result;\n    }\n\n    function editField(column) {\n        return {\n            field: column.field,\n            title: column.title,\n            format: column.format,\n            editor: column.editor,\n            values: column.values,\n            editorOptions: extend(true, { format: column.format }, column.editorOptions),\n            label: column.title || column.field || \"\"\n        };\n    }\n\n    function leafDataCells(container) {\n        var rows = container.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        var cells = $();\n        if (rows.length > 1) {\n            cells = rows.find(\"th\")\n                .filter(filter)\n                .filter(function() { return this.rowSpan > 1; });\n        }\n\n        cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n        var indexAttr = kendo.attr(\"index\");\n        cells.sort(function(a, b) {\n            a = $(a);\n            b = $(b);\n\n            var indexA = a.attr(indexAttr);\n            var indexB = b.attr(indexAttr);\n\n            if (indexA === undefined$1) {\n                indexA = $(a).index();\n            }\n            if (indexB === undefined$1) {\n                indexB = $(b).index();\n            }\n\n            indexA = parseInt(indexA, 10);\n            indexB = parseInt(indexB, 10);\n            return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n        });\n\n        return cells;\n    }\n\n    function parentColumnsCells(cell) {\n        var container = cell.closest(\"table\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row);\n        if (level > 0) {\n            var parent = headerRows.eq(level - 1);\n            var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return !$(this).attr(\"rowspan\");\n            });\n\n            var offset = 0;\n            var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return this.colSpan > 1;\n            });\n\n            for (var idx = 0; idx < prevCells.length; idx++) {\n                offset += prevCells[idx].colSpan || 1;\n            }\n\n            index += Math.max(offset - 1, 0);\n\n            offset = 0;\n            for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                var parentCell = parentCellsWithChildren.eq(idx);\n                if (parentCell.attr(\"data-colspan\")) {\n                    offset += parentCell[0].getAttribute(\"data-colspan\");\n                } else {\n                    offset += 1;\n                }\n                if (index >= idx && index < offset) {\n                    result = parentColumnsCells(parentCell).add(result);\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n\n    function childColumnsCells(cell) {\n        var container = cell.closest(\"thead\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row) + cell[0].rowSpan;\n        var colSpanAttr = kendo.attr(\"colspan\");\n\n        if (level <= headerRows.length - 1) {\n            var child = row.next();\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var idx;\n\n            prevCells = prevCells.filter(function() {\n                return !this.rowSpan || this.rowSpan === 1;\n            });\n\n            var offset = 0;\n\n            for (idx = 0; idx < prevCells.length; idx++) {\n                offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n            }\n\n            var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n            var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n            idx = 0;\n\n            while (idx < colSpan) {\n                child = cells.eq(idx + offset);\n                result = result.add(childColumnsCells(child));\n                var value = parseInt(child.attr(colSpanAttr), 10);\n                if (value > 1) {\n                    colSpan -= value - 1;\n                }\n                idx++;\n            }\n        }\n\n        return result;\n    }\n\n    function appendContent(tbody, table, html, size) {\n        var placeholder,\n            tmp = tbody;\n\n        if (tbodySupportsInnerHtml) {\n            let $html = $(html);\n            kendo.applyStylesFromKendoAttributes($html, [\"display\", \"left\", \"right\"]);\n            tbody.empty();\n            $html.each((_, el) => tbody[0].appendChild(el));\n        } else {\n            placeholder = document.createElement(DIV);\n            placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n            $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n            tbody = placeholder.firstChild.firstChild;\n            table[0].replaceChild(tbody, tmp[0]);\n            tbody = $(tbody);\n        }\n        return tbody;\n    }\n\n    function addHiddenStyle(attr) {\n        attr = attr || {};\n        let kendoStyleAttrObject = {};\n        kendoStyleAttrObject[kendo.attr(\"style-display\")] = \"none\";\n\n        return extend({}, attr, kendoStyleAttrObject);\n    }\n\n    function hasHiddenStyle(attr) {\n        attr = attr || {};\n\n        return !!attr[kendo.attr(\"style-display\")];\n    }\n\n    function removeHiddenStyle(attr) {\n        attr = attr || {};\n        delete attr[kendo.attr(\"style-display\")];\n\n        return attr;\n    }\n\n    function normalizeCols(table, visibleColumns, hasDetails, groups) {\n        var colgroup = table.find(\">colgroup\"),\n            width,\n            cols = map(visibleColumns, function(column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format(`<col ${kendo.attr('style-width')}=\"{0}\"/>`, typeof width === STRING ? width : width + PX);\n                    }\n\n                    return \"<col />\";\n                });\n\n        if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n            cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n        }\n\n        if (colgroup.length) {\n            colgroup.remove();\n        }\n\n        colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n        kendo.applyStylesFromKendoAttributes(colgroup, [\"width\"]);\n\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        table.prepend(colgroup);\n    }\n\n    function normalizeHeaderCells(container, columns) {\n        var lastIndex = 0;\n        var idx , len;\n        var th = container.find(\"th:not(.k-group-cell)\");\n\n        for (idx = 0, len = columns.length; idx < len; idx ++) {\n            if (columns[idx].locked) {\n                th.eq(idx).insertBefore(th.eq(lastIndex));\n                th = container.find(\"th:not(.k-group-cell)\");\n                lastIndex ++;\n            }\n        }\n    }\n\n    function convertToObject(array) {\n        var result = {},\n            item,\n            idx,\n            length;\n\n        for (idx = 0, length = array.length; idx < length; idx++) {\n            item = array[idx];\n            result[item.value] = item.text;\n        }\n\n        return result;\n    }\n\n    function formatGroupValue(value, format, columnValues, encoded) {\n        var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n            groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n        groupValue = groupValue != null ? groupValue : \"\";\n\n        return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n    }\n\n    function setCellVisibility(cells, index, visible) {\n        var pad = 0,\n            state,\n            cell = cells[pad];\n\n        while (cell) {\n            state = visible ? true : cell.style.display !== NONE;\n\n            if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                cell.style.display = visible ? \"\" : NONE;\n                break;\n            }\n\n            cell = cells[++pad];\n        }\n    }\n\n    function hideColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                    cell.find(\"col\").eq(columnIndex).remove();\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, false);\n            }\n        }\n    }\n\n    function groupRows(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            result.push(item);\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupRows(item.items));\n            }\n        }\n\n        return result;\n    }\n\n    function groupFooters(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupFooters(item.items));\n            }\n\n            result.push(item.aggregates);\n        }\n\n        return result;\n    }\n\n    function showColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row, columns;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                    normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, true);\n            }\n        }\n    }\n\n    function updateColspan(toAdd, toRemove, num) {\n        num = num || 1;\n\n        var item, idx, length;\n        for (idx = 0, length = toAdd.length; idx < length; idx++) {\n            item = toAdd.eq(idx).children(\":not([hidden])\").last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n            item = toRemove.eq(idx).children(\":not([hidden])\").last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n        }\n    }\n\n    function tableWidth(table) {\n        var idx, length, width = 0;\n        var cols = table.find(\">colgroup>col\");\n\n        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n            width += parseInt(cols[idx].style.width, 10);\n        }\n\n        return width;\n    }\n    var Grid = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options, events) {\n            var that = this;\n\n            options = isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (events) {\n                that._events = events;\n            }\n\n            isRtl = kendo.support.isRtl(element);\n            CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n            that._element();\n\n            that._ariaId();\n\n            that._columns($.extend(true, [], that.options.columns));\n\n            if (that._foreignKeyPromises) {\n                $.when.apply(null, that._foreignKeyPromises)\n                    .then(function() {\n                        that._foreignKeyPromises = null;\n                        that._continueInit();\n                    });\n            } else {\n                that._continueInit();\n            }\n        },\n\n        _continueInit: function() {\n            var that = this;\n\n            that._dataSource();\n\n            that._stickyColumns();\n\n            that._tbody();\n\n            that._thead();\n\n            that._rowResizing();\n\n            that._groupable();\n\n            that._toolbar();\n\n            that._pageable();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._selectable();\n\n            that._clipboard();\n\n            that._details();\n\n            that._editable();\n\n            that._attachCustomCommandsEvent();\n\n            that._adaptiveColumns();\n\n            that._minScreenSupport();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._group = that._groups() > 0;\n                that._footer();\n            }\n\n            if (that.options.contextMenu) {\n                that._initContextMenu();\n            }\n\n            if (that.lockedContent) {\n                that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                that._resizeHandler = function() {\n                    that.resize();\n                };\n                $(window).on(\"resize\" + NS, that._resizeHandler);\n            }\n\n            kendo.notify(that);\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay(that.wrapper[0]);\n            }\n        },\n\n        events: [\n           CHANGE,\n           CHANGING,\n           \"dataBinding\",\n           \"cancel\",\n           DATABOUND,\n           DETAILEXPAND,\n           DETAILCOLLAPSE,\n           DETAILINIT,\n           FILTERMENUINIT,\n           FILTERMENUOPEN,\n           COLUMNMENUINIT,\n           COLUMNMENUOPEN,\n           EDIT,\n           BEFOREEDIT,\n           SAVE,\n           REMOVE,\n           SAVECHANGES,\n           CELLCLOSE,\n           ROWRESIZE,\n           COLUMNRESIZE,\n           COLUMNREORDER,\n           COLUMNSHOW,\n           COLUMNHIDE,\n           COLUMNLOCK,\n           COLUMNUNLOCK,\n           COLUMNSTICK,\n           COLUMNUNSTICK,\n           ROWREORDER,\n           NAVIGATE,\n           \"page\",\n           \"sort\",\n           \"filter\",\n           \"group\",\n           \"groupExpand\",\n           \"groupCollapse\",\n           \"kendoKeydown\"\n        ],\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var scrollable = that.options.scrollable;\n            var scrollableContent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            that._pageable();\n\n            that._thead();\n\n            that._rowResizing();\n\n            if (scrollable) {\n                if (scrollable.virtual) {\n                    scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                    kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                } else {\n                    scrollableContent = that.tbody;\n                    kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                }\n            }\n\n            if (that.options.groupable) {\n                that._groupable();\n            }\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.setDataSource(that.options.dataSource);\n            }\n\n            if (that.options.navigatable) {\n                that._navigatable();\n            }\n\n            if (that.options.selectable) {\n                that._selectable();\n            }\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._footer();\n            }\n        },\n\n        options: {\n            name: \"Grid\",\n            columns: [],\n            toolbar: null,\n            autoBind: true,\n            filterable: false,\n            scrollable: true,\n            sortable: false,\n            selectable: false,\n            allowCopy: false,\n            navigatable: false,\n            pageable: false,\n            persistSelection: false,\n            editable: false,\n            encodeTitles: false,\n            groupable: false,\n            rowTemplate: \"\",\n            altRowTemplate: \"\",\n            search: false,\n            noRecords: false,\n            dataSource: {},\n            height: null,\n            resizable: false,\n            reorderable: false,\n            columnMenu: false,\n            detailTemplate: null,\n            contextMenu: false,\n            columnResizeHandleWidth: 3,\n            size: \"medium\",\n            mobile: \"\",\n            loaderType: \"loadingPanel\",\n            messages: {\n                editable: {\n                    cancelDelete: CANCELDELETE,\n                    confirmation: DELETECONFIRM,\n                    confirmDelete: CONFIRMDELETE\n                },\n                commands: {\n                    create: defaultCommands.create.text,\n                    cancel: defaultCommands.cancel.text,\n                    save: defaultCommands.save.text,\n                    destroy: defaultCommands.destroy.text,\n                    edit: defaultCommands.edit.text,\n                    update: defaultCommands.update.text,\n                    canceledit: defaultCommands.canceledit.text,\n                    excel: defaultCommands.excel.text,\n                    pdf: defaultCommands.pdf.text,\n                    search: defaultCommands.search.text,\n                    select: \"Select\",\n                    selectRow: \"Select Row\",\n                    selectAllRows: \"All rows\",\n                    clearSelection: \"Clear selection\",\n                    copySelection: \"Copy selection\",\n                    copySelectionNoHeaders: \"Copy selection (No Headers)\",\n                    reorderRow: \"Reorder row\",\n                    reorderRowUp: \"Up\",\n                    reorderRowDown: \"Down\",\n                    reorderRowTop: \"Top\",\n                    reorderRowBottom: \"Bottom\",\n                    exportPdf: \"Export to PDF\",\n                    exportExcel: \"Export to Excel\",\n                    exportToExcelAll: \"All\",\n                    exportToExcelSelection: \"Selection\",\n                    exportToExcelSelectionNoHeaders: \"Selection (No Headers)\",\n                    sortAsc: \"Sort Ascending\",\n                    sortDesc: \"Sort Descending\",\n                    moveGroupPrevious: \"Move previous\",\n                    moveGroupNext: \"Move next\",\n                },\n                noRecords: NORECORDS,\n                expandCollapseColumnHeader: \"\",\n                groupHeader: \"Press ctrl + space to group\",\n                ungroupHeader: \"Press ctrl + space to ungroup\",\n                itemsSelected: \"items selected\",\n                dragHandleLabel: \"Drag row\",\n                toolbarLabel: \"grid toolbar\",\n                groupingHeaderLabel: \"grid grouping header\",\n                filterCellTitle: \"filter cell\"\n            },\n            width: null\n        },\n\n        destroy: function() {\n            var that = this,\n                element,\n                reorderableInstance;\n\n            that._destroyColumnAttachments();\n\n            Widget.fn.destroy.call(that);\n\n            if (this._navigatableTables) {\n                this._navigatableTables.off(NS);\n                this._navigatableTables = null;\n                this._headertables = null;\n            }\n\n            if (that._resizeHandler) {\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n            }\n\n            if (that.pager && that.pager.element) {\n                that.pager.destroy();\n            }\n\n            if (that.timer) {\n                clearTimeout(that.timer);\n            }\n\n            if (that._progressTimeOut) {\n                clearTimeout(that._progressTimeOut);\n            }\n\n            if (that._collapseGroupsTimeOut) {\n                clearTimeout(that._collapseGroupsTimeOut);\n            }\n\n            if (that._endlessFetchTimeOut) {\n                clearTimeout(that._endlessFetchTimeOut);\n            }\n\n            that.pager = null;\n\n            that._destroyGroupable();\n\n            reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            if (that.selectable && that.selectable.element) {\n                that.selectable.destroy();\n\n                that.clearArea();\n                that._selectedIds = null;\n\n                if (that.copyHandler) {\n                    that.wrapper.off(\"keydown\", that.copyHandler);\n                    that.unbind(that.copyHandler);\n                }\n                if (that.updateClipBoardState) {\n                    that.unbind(that.updateClipBoardState);\n                    that.updateClipBoardState = null;\n                }\n                if (that.clearAreaHandler) {\n                    that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                }\n            }\n\n            that.selectable = null;\n\n            if (that.resizable) {\n                that.resizable.destroy();\n\n                if (that._resizeUserEvents) {\n                    if (that._resizeHandleDocumentClickHandler) {\n                        $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                    that._resizeUserEvents.destroy();\n                    that._resizeUserEvents = null;\n                }\n                that.resizable = null;\n            }\n\n            that._destroyRowResizing();\n\n            that._destroyVirtualScrollable();\n\n            if (that.editableUserEvents) {\n                that.editableUserEvents.destroy();\n                that.editableUserEvents = null;\n            }\n\n            if (that._lockedContentUserEvents) {\n                that._lockedContentUserEvents.destroy();\n                that._lockedContentUserEvents = null;\n            }\n\n            that._destroyEditable();\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                           .unbind(PROGRESS, that._progressHandler)\n                           .unbind(ERROR, that._errorHandler)\n                           .unbind(SORT, that._clearSortClasses);\n\n                that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.table)\n                .add(that.thead)\n                .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n            if (that.content) {\n                element = element\n                        .add(that.content)\n                        .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n            }\n\n            if (that.lockedHeader) {\n                that._removeLockedContainers();\n            }\n\n            if (that.pane) {\n                that.pane.destroy();\n            }\n\n            if (that._isMobile) {\n                that.wrapper.off(\"transitionend\" + NS);\n                that.wrapper.off(\"contextmenu\" + NS);\n            }\n\n            if (that.minScreenResizeHandler) {\n                $(window).off(\"resize\", that.minScreenResizeHandler);\n            }\n\n            that._detachColumnMediaResizeHandler();\n\n            if (that._draggableInstance && that._draggableInstance.element) {\n                that._draggableInstance.destroy();\n            }\n\n            that._draggableInstance = null;\n\n            if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            if (that.tbodyContextMenu) {\n                that.tbodyContextMenu.destroy();\n            }\n\n            if (that.theadContextMenu) {\n                that.theadContextMenu.destroy();\n            }\n\n            that._draggableRowsInstance = null;\n\n            element.off(NS);\n\n            kendo.destroy(that.wrapper);\n\n            that.rowTemplate =\n            that.altRowTemplate =\n            that.lockedRowTemplate =\n            that.lockedAltRowTemplate =\n            that.detailTemplate =\n            that.footerTemplate =\n            that.groupFooterTemplate =\n            that.lockedGroupFooterTemplate =\n            that.noRecordsTemplate = null;\n\n            that.scrollables =\n            that.thead =\n            that.tbody =\n            that.element =\n            that.table =\n            that.content =\n            that.footer =\n            that.wrapper =\n            that.lockedTable =\n            that.lockedContent =\n            that.lockedHeader =\n            that.lockedFooter =\n            that._groupableClickHandler =\n            that._groupRows =\n            that._setContentWidthHandler = null;\n        },\n\n        getOptions: function() {\n            var options = this.options;\n            options.dataSource = null;\n\n            var result = extend(true, {}, this.options);\n            result.columns = kendo.deepExtend([], this.columns);\n\n            var dataSource = this.dataSource;\n\n            var initialData = dataSource.options.data && dataSource._data;\n            dataSource.options.data = null;\n\n            result.dataSource = $.extend(true, {}, dataSource.options);\n\n            dataSource.options.data = initialData;\n\n            result.dataSource.data = initialData;\n            result.dataSource.page = dataSource.page();\n            result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n            result.dataSource.pageSize = dataSource.pageSize();\n            result.dataSource.sort = dataSource.sort();\n            result.dataSource.group = dataSource.group();\n            result.dataSource.aggregate = dataSource.aggregate();\n\n            if (result.dataSource.transport) {\n                result.dataSource.transport.dataSource = null;\n            }\n\n            if (result.pageable && result.pageable.pageSize) {\n                result.pageable.pageSize = dataSource.pageSize();\n            }\n\n            return result;\n        },\n\n        setOptions: function(options) {\n            var currentOptions = this.getOptions();\n            kendo.deepExtend(currentOptions, options);\n            if (!options.dataSource) {\n                currentOptions.dataSource = this.dataSource;\n            } else {\n              if (options.dataSource.filter) {\n                  currentOptions.dataSource.filter = options.dataSource.filter;\n              }\n            }\n            var wrapper = this.wrapper;\n            var events = this._events;\n            var element = this.element;\n\n            this.destroy();\n            this.options = null;\n            if (this._isMobile) {\n                var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                mobileWrapper.after(wrapper);\n                mobileWrapper.remove();\n                wrapper.removeClass(\"k-grid-mobile\");\n            }\n            if (wrapper[0] !== element[0]) {\n                wrapper.before(element);\n                wrapper.remove();\n            }\n            element.empty();\n\n            this.init(element, currentOptions, events);\n            this._setEvents(currentOptions);\n        },\n\n        items: function() {\n            if (this.lockedContent) {\n                return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n            } else {\n                return this._items(this.tbody);\n            }\n        },\n\n        _items: function(container, includeGroupRows) {\n            return container.children().filter(function() {\n                var tr = $(this);\n                return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n            });\n        },\n\n        dataItems: function() {\n            var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n            if (this.lockedContent) {\n                var n = dataItems.length, tmp = new Array(2 * n);\n                for (var i = n; --i >= 0;) {\n                    tmp[i] = tmp[i + n] = dataItems[i];\n                }\n                dataItems = tmp;\n            }\n\n            return dataItems;\n        },\n\n        _destroyColumnAttachments: function() {\n            var that = this;\n\n            that.resizeHandle = null;\n\n            if (!that.thead) {\n                return;\n            }\n\n            that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                var th = $(this),\n                    filterMenu = th.data(\"kendoFilterMenu\"),\n                    sortable = th.data(\"kendoColumnSorter\"),\n                    columnMenu = th.data(\"kendoColumnMenu\");\n\n                if (filterMenu) {\n                    filterMenu.destroy();\n                }\n\n                if (sortable) {\n                    sortable.destroy();\n                }\n\n                if (columnMenu) {\n                    columnMenu.destroy();\n                }\n            });\n        },\n\n        _attachCustomCommandsEvent: function() {\n            var that = this,\n                columns = leafColumns(that.columns || []),\n                command,\n                idx,\n                length;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                command = columns[idx].command;\n\n                if (command) {\n                    attachCustomCommandEvent(that, that.wrapper, command);\n                }\n            }\n        },\n\n        _aria: function() {\n            var wrapper = this.wrapper,\n                gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                table = this.table,\n                toolbar = wrapper.find(\".k-grid-toolbar\"),\n                groupingHeader = wrapper.find(\".k-grouping-header\"),\n                gridId = table.attr(ID),\n                tableTabindex = table.attr(TABINDEX),\n                tbodyId, headerGroupId, footerGroupId, tableOwned,\n                numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                trailingColumns = this._trailingColumns(),\n                virtual = this.virtualScroll,\n                pageable = this.options.pageable,\n                rowsCount;\n\n            table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n            if (gridRole) {\n                table.attr(ROLE, gridRole);\n            }\n\n            table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n            table.find(TR).attr(ROLE, ROW);\n            table.find(\"th\").attr(ROLE, COLUMNHEADER);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else if (this._hasDetails()) {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                } else {\n                    rowsCount = numberOfFixedRows + this.dataSource.total();\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            } else if (this._hasDetails()) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            }\n\n            if (rowsCount && rowsCount > 0) {\n                this._ariaRowIndex();\n            }\n\n            if ((virtual && virtual.columns) ||\n                (!table.attr(ARIA_COLCOUNT) &&\n                    (table.find(\"td:not([group-header-spanned-hidden]):hidden\").length > 0 ||\n                    wrapper.find(\".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden\").length > 0))) {\n                        table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                        this._ariaColumnIndex();\n            }\n\n            if (!gridId) {\n                gridId = kendo.guid();\n                table.attr(ID, gridId);\n            }\n\n            if (this.pager) {\n                this.pager.element.attr(ARIA_CONTROLS, gridId);\n            }\n\n            toolbar.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.toolbarLabel,\n                \"aria-controls\": gridId\n            });\n\n            groupingHeader.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.groupingHeaderLabel,\n                \"aria-controls\": gridId\n            });\n\n            headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n            footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n            if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                this._ariaLockedContent();\n            }\n\n            if (!!headerGroupId || !!footerGroupId) {\n                tbodyId = this.tbody.attr(ID) || kendo.guid();\n                tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                this.tbody.attr(ID, tbodyId);\n                table.attr(ARIA_OWNS, tableOwned);\n            }\n\n            if (this.options.groupable) {\n                this._ariaGroupTitles();\n            }\n        },\n\n        _ariaColumnIndex: function() {\n            var trailingColumns = this._trailingColumns(),\n                dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                firstIndex = Number.MAX_VALUE,\n                lastIndex = 0,\n                lockedLastIndex = 0,\n                previousVirtual = 0,\n                nextVirtual = 0,\n                previousIndex, i, cells, dataIndex, cellsIndex,\n                eachHeaderCell = function(j, cell) {\n                    var current = cell.getAttribute(\"data-index\"),\n                        currentIndex = Number(current),\n                        lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                    if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                        firstIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                        lockedLastIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                        lastIndex = currentIndex;\n                    }\n\n                    if (current !== null) {\n                        cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                        previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                    } else {\n                        cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                        previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                    }\n                };\n\n            if (dataVirtual.length === 2) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            }\n\n            for (i = 0; i < lockedHeaderRows.length; i++) {\n                previousIndex = 0;\n                lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i < headerRows.length; i++) {\n                previousIndex = 0;\n                headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i <= lockedLastIndex; i++) {\n                dataIndex = i + trailingColumns;\n                cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n\n            for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                if (previousVirtual === 0 ) {\n                    cellsIndex = i + 1;\n                } else {\n                    cellsIndex = i - previousVirtual + 2;\n                }\n\n                dataIndex = firstIndex + i + trailingColumns;\n\n                cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n        },\n\n        _ariaGroupTitles: function() {\n            var that = this,\n                groups = that.dataSource.group(),\n                ths = that.wrapper.find(\".k-grid-header th\");\n\n            ths.each(function(i, el) {\n                if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                        el.setAttribute(\"title\", that.options.messages.groupHeader);\n                }\n            });\n\n            if (groups && groups.length > 0) {\n                groups.forEach(function(group) {\n                    var field = group.field,\n                        el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                    if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                        el.attr(\"title\", that.options.messages.ungroupHeader);\n                    }\n                });\n            }\n        },\n\n        _ariaHeaderFooter: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                groupId = \"\",\n                rowGroup;\n\n            if (table.length > 0) {\n                rowGroup = table.find(group + \", tbody\");\n                groupId = rowGroup.attr(ID) || kendo.guid();\n\n                table.attr(ROLE, NONE);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(el).attr(ROLE, role);\n                rowGroup.attr({\n                    role: ROWGROUP,\n                    id: groupId\n                });\n            }\n\n            if (lockedTable.length > 0) {\n                that._ariaLocked(type, group, el, role);\n            }\n\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            return groupId;\n        },\n\n        _ariaId: function() {\n            var id = this.element.attr(ID) || \"aria\";\n\n            if (id) {\n                this._cellId = id + \"_active_cell\";\n            }\n        },\n\n        _ariaLocked: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                rows = table.find(TR),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n\n            lockedTable.find(el).attr(ROLE, role);\n\n            rows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaLockedContent: function() {\n            var that = this,\n                table = that.table,\n                tableRows = table.find(TR),\n                lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(\"tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n            tableRows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaAddHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                table = this.table,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                this._ariaColumnIndex();\n\n                table.attr(ARIA_COLCOUNT, leafColsCount);\n            }\n        },\n\n        _ariaRemoveHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                this.table.removeAttr(ARIA_COLCOUNT);\n            }\n        },\n\n        _ariaRowIndex: function() {\n            var headerRows = this.thead.find(\">tr\"),\n                numberOfHeaderRows = headerRows.length,\n                bodyRows = this.tbody.find(\">tr\"),\n                footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                totalNumberOfItems = this.dataSource.total(),\n                previousItems = this.dataSource.skip() || 0,\n                currentIndex = 1,\n                previousMaster = false,\n                i, currentRow;\n\n            if (this._hasDetails()) {\n                totalNumberOfItems = totalNumberOfItems * 2;\n                previousItems = previousItems * 2;\n            }\n\n            for (i = 0; i < numberOfHeaderRows; i++) {\n                headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n\n            currentIndex = numberOfHeaderRows + previousItems;\n\n            for (i = 0; i < bodyRows.length; i++) {\n                currentRow = bodyRows.eq(i);\n\n                if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                    if (previousMaster) {\n                        currentIndex = currentIndex + 2;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                    }\n\n                    previousMaster = true;\n                } else {\n                    currentIndex = currentIndex + 1;\n                    previousMaster = false;\n                }\n\n                currentRow.attr(ARIA_ROWINDEX, currentIndex);\n            }\n\n            currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n            for (i = 0; i < footerRows.length; i++) {\n                footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n        },\n\n        _cellsIds: function(elements, prefix, i) {\n            var ownedCells = [];\n\n            elements.each(function(j, cell) {\n                var id = cell.getAttribute(ID) || prefix + \"_\" + i + \"_\" + j;\n\n                cell.setAttribute(ID, id);\n\n                ownedCells.push(id);\n            });\n\n            return ownedCells;\n        },\n\n        _trailingColumns: function() {\n            return this._groups() + (this._hasDetails() ? 1 : 0);\n        },\n\n        _element: function() {\n            var that = this,\n                table = that.element;\n\n            if (!table.is(\"table\")) {\n                if (that.options.scrollable) {\n                    table = that.element.find(\"> .k-grid-content > table\");\n                } else {\n                    table = that.element.children(\"table\");\n                }\n\n                if (!table.length) {\n                    table = $(\"<table />\").appendTo(that.element);\n                }\n            }\n\n            table.addClass(\"k-grid-table k-table\");\n            table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n            that.table = table;\n\n            that._wrapper();\n        },\n\n        _createResizeHandle: function(container, th) {\n            var that = this;\n            var indicatorWidth = that.options.columnResizeHandleWidth;\n            var scrollable = that.options.scrollable;\n            var resizeHandle = that.resizeHandle;\n            var halfResizeHandle = (indicatorWidth * 3) / 2;\n            var rtlCorrection = 0;\n            var headerWrap;\n            var ieCorrection;\n            var webkitCorrection;\n            var firefoxCorrection;\n            var leftMargin;\n            var invisibleSpace;\n            var leftBorderWidth;\n            var scrollLeft;\n            var left;\n            var top;\n\n            if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                resizeHandle.off(NS).remove();\n                resizeHandle = null;\n            }\n\n            if (!resizeHandle) {\n                resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                container.append(resizeHandle);\n            }\n\n            scrollLeft = kendo.scrollLeft(container);\n\n            if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeft = scrollLeft * -1;\n            }\n\n            leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n            left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n            if (!isRtl) {\n                left += th[0].offsetWidth;\n           } else {\n                if (scrollable) {\n                    rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                    headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                    invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                    leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                    ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    webkitCorrection = -rtlCorrection;\n                    firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                    left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                }\n            }\n\n            top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n            resizeHandle.css({\n                top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                left: left - halfResizeHandle,\n                height: outerHeight(th),\n                width: indicatorWidth * 3 - rtlCorrection\n            })\n            .data(\"th\", th)\n            .show();\n\n            resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n            });\n        },\n\n        _positionColumnResizeHandle: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                var th = $(this);\n                if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                    return;\n                }\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                    //do not create a new resize handle if a mouse button is still pressed\n                    //this happens during resizing or before UserEvents trigger \"start\"\n                    return;\n                }\n\n                if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                    // resizing multi-column headers is not supported\n                    return;\n                }\n\n                that._createResizeHandle(th.closest(DIV), th);\n            });\n        },\n\n        _resizeHandleDocumentClick: function(e) {\n            if ($(e.target).closest(\".k-column-active\").length) {\n                return;\n            }\n\n            $(document).off(e);\n\n            this._resetResizeHandleHeader();\n            this._hideResizeHandle();\n        },\n\n        _resetResizeHandleHeader: function() {\n            var th;\n\n            if (!this.resizeHandle) {\n                return;\n            }\n\n            th = $(this.resizeHandle).data(\"th\");\n\n            if (th) {\n                th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                th.find(DOT + ORDER_CLASS).show();\n                th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                th.find(DOT + FILTER_MENU_CLASS).show();\n            }\n        },\n\n        _hideResizeHandle: function() {\n            if (this.resizeHandle) {\n                this.resizeHandle.data(\"th\")\n                    .removeClass(\"k-column-active\");\n\n                if (this.lockedContent && !this._isMobile) {\n                    this.resizeHandle.off(NS).remove();\n                    this.resizeHandle = null;\n                } else {\n                    this.resizeHandle.hide();\n                }\n            }\n        },\n\n        _positionColumnResizeHandleTouch: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                threshold: 10,\n                minHold: 500,\n                hold: function(e) {\n                    var th = $(e.target);\n\n                    e.preventDefault();\n\n                    if (that.resizeHandle) {\n                        that.resizeHandle.data(\"th\")\n                            .removeClass(\"k-column-active\");\n                        that._resetResizeHandleHeader();\n                    }\n\n                    th.addClass(\"k-column-active\");\n\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                    th.find(DOT + ORDER_CLASS).hide();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                    th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                    that._createResizeHandle(th.closest(DIV), th);\n\n                    if (!that._resizeHandleDocumentClickHandler) {\n                        that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                    }\n\n                    $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                }\n            });\n        },\n\n        resizeColumn: function(column, columnWidth) {\n            var that = this;\n            var isLocked = !!column.locked;\n            var isHidden = !!column.hidden;\n            var options = this.options;\n            var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n            var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n            var contentTable = isLocked ? that.lockedTable : that.table;\n            var footer = that.footer || $();\n            var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n            var columnMinWidth = column.minResizableWidth || 10;\n            var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n            var col;\n\n            if (isHidden) {\n                column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                return;\n            }\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            if (options.scrollable) {\n\n                col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n            } else {\n                col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n            }\n\n            if (options.scrollable) {\n                var constrain = false;\n                var totalWidth = that.wrapper.width() - scrollbar;\n                var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                    if (width < 0) {\n                        width = columnWidth;\n                    }\n                    constrain = true;\n                }\n\n                if (width > 10 && width >= columnMinWidth) {\n                    col.css('width', width);\n\n                    if (gridWidth) {\n                        if (constrain) {\n                            width = totalWidth - scrollbar * 2;\n                        } else {\n                            width = gridWidth + (columnWidth - column.width);\n                        }\n\n                        contentTable\n                            .add(header)\n                            .add(footer)\n                            .css('width', width);\n\n                        if (!isLocked) {\n                            that._footerWidth = width;\n                        }\n                    }\n                }\n\n            that._scrollVirtualWrapperOnColumnResize();\n            } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                col.css('width', columnWidth);\n            }\n\n            column.width = columnWidth;\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        _resizable: function() {\n            var that = this,\n                options = that.options,\n                container,\n                columnStart,\n                columnWidth,\n                columnMinWidth,\n                gridWidth,\n                isMobile = this._isMobile,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                isLocked,\n                col, th;\n\n            if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                if (isMobile) {\n                    that._positionColumnResizeHandleTouch(container);\n                } else {\n                    that._positionColumnResizeHandle(container);\n                }\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n                }\n\n                that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                    handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                    hint: function(handle) {\n                        return $('<div class=\"k-grid-resize-indicator\" />').css({\n                            height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                        });\n                    },\n                    start: function(e) {\n                        th = $(e.currentTarget).data(\"th\");\n\n                        if (isMobile) {\n                            that._hideResizeHandle();\n                        }\n\n                        var header = th.closest(\"table\"),\n                            index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                        isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                        var contentTable = isLocked ? that.lockedTable : that.table,\n                            footer = that.footer || $();\n\n                        if (that.footer && that.lockedContent) {\n                            footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                        }\n\n                        cursor(that.wrapper, 'col-resize');\n\n                        if (options.scrollable) {\n                            col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                        } else {\n                            col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                        }\n\n                        var columns = $.map(that.columns, function(a) {\n                            return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                        });\n\n                        columnStart = e.x.location;\n                        columnWidth = outerWidth(th);\n                        columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                        gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                        // fix broken UI in Chrome38+\n                        if (browser.webkit) {\n                            that.wrapper.addClass(\"k-grid-column-resizing\");\n                        }\n                    },\n                    resize: function(e) {\n                        var rtlMultiplier = isRtl ? -1 : 1,\n                            currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                        if (options.scrollable) {\n                            var footer;\n                            if (isLocked && that.lockedFooter) {\n                                footer = that.lockedFooter.children(\"table\");\n                            } else if (that.footer) {\n                                footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                            }\n                            if (!footer || !footer[0]) {\n                                footer = $();\n                            }\n                            var header = th.closest(\"table\");\n                            var contentTable = isLocked ? that.lockedTable : that.table;\n                            var constrain = false;\n                            var totalWidth = that.wrapper.width() - scrollbar;\n                            var width = currentWidth;\n\n                            if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                if (width < 0) {\n                                    width = currentWidth;\n                                }\n                                constrain = true;\n                            }\n\n                            if (width > 10 && width >= columnMinWidth) {\n                                col.css('width', width);\n\n                                if (gridWidth) {\n                                    if (constrain) {\n                                        width = totalWidth - scrollbar * 2;\n                                    } else {\n                                        width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                    }\n\n                                    contentTable\n                                        .add(header)\n                                        .add(footer)\n                                        .css('width', width);\n\n                                    if (!isLocked) {\n                                        that._footerWidth = width;\n                                    }\n                                }\n                            }\n\n                            that._scrollVirtualWrapperOnColumnResize();\n                        } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                            col.css('width', currentWidth);\n                        }\n                    },\n                    resizeend: function() {\n                        var newWidth = outerWidth(th),\n                            column,\n                            header;\n\n                        cursor(that.wrapper, \"\");\n\n                        if (browser.webkit) {\n                            that.wrapper.removeClass(\"k-grid-column-resizing\");\n                        }\n\n                        if (th && columnWidth != newWidth) {\n                            header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                            var index = th.attr(kendo.attr(\"index\"));\n                            if (!index) {\n                                index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                            }\n                            column = leafColumns(that.columns)[index];\n\n                            column.width = newWidth;\n\n                            that.trigger(COLUMNRESIZE, {\n                                column: column,\n                                oldWidth: columnWidth,\n                                newWidth: newWidth\n                            });\n\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._updateStickyColumns();\n                        }\n\n                        that._resetResizeHandleHeader();\n                        that._hideResizeHandle();\n                        th = null;\n                    }\n                });\n\n            }\n        },\n\n        // Row resizing functionality below\n        _addLockedRowResizing: function(tr) {\n            var index = tr.index();\n\n            return this.lockedTable.find(TR).eq(index)\n                .add(this.tbody.find(TR).eq(index));\n        },\n\n        _getMinRowHeight: function(row) {\n            var minHeight = 0;\n\n            row.each((i, el) => {\n                var currentMinHeight;\n\n                el.style.height = '';\n                currentMinHeight = outerHeight(el);\n\n                if (currentMinHeight > minHeight) {\n                    minHeight = currentMinHeight;\n                }\n            });\n\n            return minHeight;\n        },\n\n        _cacheRowHeight: function(rows, height) {\n            var that = this;\n\n            if (!that._cachedRowsHeight) {\n                that._cachedRowsHeight = {};\n            }\n\n            rows.each((i, el) => {\n                var uid = el.getAttribute(\"data-uid\");\n\n                that._cachedRowsHeight[uid] = height;\n            });\n        },\n\n        _clearCachedRowsHeight: function(rows) {\n            var that = this;\n\n            if (rows && that._cachedRowsHeight) {\n                rows.each((i, el) => {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    delete that._cachedRowsHeight[uid];\n                });\n            } else {\n                that._cachedRowsHeight = null;\n            }\n        },\n\n        _mapCachedRowsHeight: function(method, target) {\n            var input = this._cachedRowsHeight,\n                ds = this.dataSource,\n                output = {};\n\n            Object.keys(input).forEach((key) => {\n                var item = ds[method](key);\n\n                output[item[target]] = input[key];\n            });\n\n            this._cachedRowsHeight = output;\n        },\n\n        _rowResizerDblClick: function() {\n            var that = this,\n                resizer = that.rowResizer,\n                row = resizer.data(TR),\n                oldHeight = outerHeight(row),\n                newHeight, rows;\n\n            if (row.hasClass(SELECTED)) {\n                rows = that.select();\n            } else {\n                rows = row;\n            }\n\n            if (that.lockedTable) {\n                row = that._addLockedRowResizing(row);\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.lockedTable.find(DOT + SELECTED);\n                } else {\n                    rows = that.lockedTable.find(TR).eq(row.index());\n                }\n\n                rows.each((i, el) => {\n                    var rowIndex = el.rowIndex,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                        pairMinHeight = that._getMinRowHeight(rowPair);\n\n                    rowPair.css(HEIGHT, pairMinHeight);\n                });\n            } else {\n                rows.css(HEIGHT, AUTO);\n            }\n\n            that._clearCachedRowsHeight(rows);\n\n            resizer.removeClass(HOVER);\n            resizer.removeClass(ACTIVE);\n\n            newHeight = outerHeight(row);\n\n            if (oldHeight != newHeight) {\n                that.trigger(ROWRESIZE, {\n                    row,\n                    rows,\n                    oldHeight,\n                    newHeight\n                });\n            }\n        },\n\n        _setupRowResizer(resizer, row, top) {\n            resizer\n                .data(TR, row)\n                .css({\n                    top: top\n                });\n        },\n\n        _attachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer,\n                delay = 200,\n                isIn = false;\n\n            rowResizer\n                .on(MOUSEDOWN + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(HOVER);\n                        rowResizer.addClass(ACTIVE);\n                    }\n                })\n                .on(MOUSEUP + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(ACTIVE);\n                        rowResizer.addClass(HOVER);\n                    }\n                })\n                .on(MOUSEENTER + NS, () => {\n                    isIn = true;\n\n                    setTimeout(() => {\n                        if (isIn) {\n                            rowResizer.addClass(HOVER);\n                        }\n                    }, delay);\n                })\n                .on(MOUSELEAVE + NS, () => {\n                    isIn = false;\n                    rowResizer.removeClass(HOVER);\n                });\n        },\n\n        _getResizerTop: function(tr, container) {\n            var resizer = this.rowResizer,\n                inner = resizer.find(DOT + ROW_RESIZER)[0],\n                paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n            return tr.offset().top -\n                parseFloat(tr.css(\"marginTop\")) -\n                (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                inner.clientHeight -\n                paddingTop +\n                container.scrollTop();\n        },\n\n        _getResizerContainer: function() {\n            var container = this.tbody.closest(DIV);\n\n            if (this.lockedTable) {\n                container = container.closest(DOT + \"k-grid-container\");\n            }\n\n            return container;\n        },\n\n        _createRowResizer: function(e) {\n            var that = this,\n                tr = $(e.currentTarget),\n                targetHeight = e.currentTarget.clientHeight,\n                positionIntarget = e.offsetY,\n                rowResizer = that.rowResizer,\n                previousRow = tr.prev(TR + \":visible\"),\n                container = that._getResizerContainer(),\n                top;\n\n            if (!rowResizer) {\n                rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                container.append(rowResizer);\n                that._attachRowResizerEvents();\n\n                rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n            }\n\n            top = that._getResizerTop(tr, container);\n\n            if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                if (!previousRow.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, previousRow, top);\n                }\n            } else {\n                if (!tr.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                }\n            }\n        },\n\n        _detachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer;\n\n            rowResizer\n                .off(MOUSEDOWN + NS)\n                .off(MOUSEUP + NS)\n                .off(MOUSEENTER + NS)\n                .off(MOUSELEAVE + NS);\n        },\n\n        _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n            var that = this;\n\n            rows.each((i, el) => {\n                var minHeight;\n\n                if (multiSelectionLocked) {\n                    var rowIndex = el.rowIndex,\n                        pairNew = newHeight,\n                        pairMin = 0,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                    rowPair.each((i, r) => {\n                        var currentMinHeight;\n\n                        r.style.height = '';\n                        currentMinHeight = outerHeight(r);\n\n                        if (currentMinHeight > pairMin) {\n                            pairMin = currentMinHeight;\n                        }\n                    });\n\n                    if (pairNew < pairMin) {\n                        pairNew = pairMin;\n\n                        that._clearCachedRowsHeight(rowPair.eq(0));\n                    } else {\n                        that._cacheRowHeight(rowPair.eq(0), pairNew);\n                    }\n\n                    rowPair.css(HEIGHT, pairNew);\n                } else {\n                    el.style.height = '';\n                    minHeight = outerHeight(el);\n\n                    if (newHeight > minHeight) {\n                        el.style.height = newHeight + PX;\n\n                        that._cacheRowHeight($(el), newHeight);\n                    } else {\n                        that._clearCachedRowsHeight($(el));\n                    }\n                }\n            });\n        },\n\n        _rowResizing: function() {\n            var that = this,\n                options = that.options,\n                container, rowStart, rowHeight, tr;\n\n            if (options.resizable && options.resizable.rows === true) {\n                that.tbody\n                    .parent()\n                    .add(that.lockedTable)\n                    .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                if (that.rowResizing) {\n                    that.rowResizing.destroy();\n                }\n\n                container = that._getResizerContainer();\n\n                that.rowResizing = new ui.Resizable(container, {\n                    handle: DOT + ROW_RESIZER_WRAP,\n                    start: function(e) {\n                        tr = $(e.currentTarget).data(TR);\n\n                        if (that.lockedTable) {\n                            tr = that._addLockedRowResizing(tr);\n                        }\n\n                        tr.addClass(HOVER);\n\n                        that._detachRowResizerEvents();\n\n                        rowStart = e.y.location;\n                        rowHeight = outerHeight(tr);\n                    },\n                    resize: function(e) {\n                        var newHeight = rowHeight + e.y.location - rowStart,\n                            minHeight = 0;\n\n                        if (tr.length > 1) {\n                            minHeight = that._getMinRowHeight(tr);\n                        }\n\n                        if (newHeight < minHeight) {\n                            newHeight = minHeight;\n                        }\n\n                        tr.css('height', newHeight);\n\n                        that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                    },\n                    resizeend: function() {\n                        var newHeight = outerHeight(tr),\n                            multiSelectionLocked = false,\n                            rows;\n\n                        if (tr.hasClass(SELECTED)) {\n                            rows = that.select();\n\n                            if (tr.length > 1 && rows.length > tr.length) {\n                                rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                multiSelectionLocked = true;\n                            }\n                        } else {\n                            rows = tr;\n                        }\n\n                        that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                        tr.removeClass(HOVER);\n\n                        that.rowResizer.removeClass(ACTIVE);\n                        that.rowResizer.addClass(HOVER);\n                        that._attachRowResizerEvents();\n\n                        if (multiSelectionLocked) {\n                            rows = that.select();\n                        }\n\n                        if (rowHeight != newHeight) {\n                            that.trigger(ROWRESIZE, {\n                                row: tr,\n                                rows,\n                                oldHeight: rowHeight,\n                                newHeight\n                            });\n                        }\n\n                        tr = null;\n                    }\n                });\n            }\n        },\n\n        _draggable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                if (that._draggableInstance) {\n                    that._draggableInstance.destroy();\n                }\n\n                var header = that.wrapper.children(\".k-grid-header\");\n\n                that._draggableInstance = that.wrapper.kendoDraggable({\n                    group: kendo.guid(),\n                    autoScroll: true,\n                    filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                    dragstart: function() {\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                            if (that.virtualScrollable) {\n                                kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                            } else {\n                                kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                            }\n                        });\n                    },\n                    dragend: function() {\n                        that._resetResizeHandleHeader();\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                    },\n                    drag: function() {\n                        that._hideResizeHandle();\n                    },\n                    hint: function(target) {\n                        var title = target.attr(kendo.attr(\"title\"));\n                        if (title) {\n                            title = kendo.htmlEncode(title);\n                        }\n                        return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                            .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                            .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                    }\n                }).data(\"kendoDraggable\");\n            }\n        },\n\n        _reorderable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n                if (that.wrapper.data(\"kendoReorderable\")) {\n                    that.wrapper.data(\"kendoReorderable\").destroy();\n                }\n\n                that.wrapper.kendoReorderable({\n                    draggable: that._draggableInstance,\n                    dropFilter: HEADERCELLS,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                    },\n                    inSameContainer: function(e) {\n                        var sourceParent = $(e.source).parent()[0],\n                            targetParent = $(e.target).parent()[0];\n\n                        /* If there are locked columns, check if the grid header is the same instead.\n                        Otherwise the locked/unlocked headers are treated as separate(in the case of column reordering they shouldn't be). */\n                        if (that._isLocked()) {\n                            sourceParent = $(e.source.closest(\".k-grid-header\"))[0];\n                            targetParent = $(e.target.closest(\".k-grid-header\"))[0];\n                        }\n\n                        return sourceParent === targetParent && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function(e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n\n                        that.reorderColumn(newIndex, column, e.position === \"before\");\n                    }\n                });\n            }\n        },\n\n        _reorderHeader: function(sources, target, before, container) {\n            var that = this;\n            var sourcePosition = columnPosition(sources[0], that.columns);\n            var destPosition = columnPosition(target, that.columns);\n            var action;\n            var ths;\n\n            var leafs = [];\n            for (var idx = 0; idx < sources.length; idx++) {\n                if (sources[idx].columns) {\n                    leafs = leafs.concat(sources[idx].columns);\n                }\n            }\n            if (container) {\n                ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            } else {\n                ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            }\n\n            var sourceLockedColumns = lockedColumns(sources).length;\n            var targetLockedColumns = lockedColumns([target]).length;\n\n            if (leafs.length) {\n                if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                    action = \"prepend\";\n                    moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                    action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                    moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                }\n\n                if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                    target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                    if (target) {\n                        if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                            that._reorderHeader(leafs, target, before, that.thead);\n                        } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                            that._reorderHeader(leafs, target, before, that.lockedHead);\n                        } else {\n                            that._reorderHeader(leafs, target, before);\n                        }\n                    }\n                }\n            } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n            }\n\n            reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n        },\n\n        _reorderContent: function(sources, destination, before) {\n            var that = this;\n            var lockedRows = $();\n            var source = sources[0];\n            var visibleSources = visibleColumns(sources);\n            var sourceIndex = inArray(source, leafColumns(that.columns));\n            var destIndex = inArray(destination, leafColumns(that.columns));\n\n            var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n            var colDest = inArray(destination, visibleLeafColumns(that.columns));\n            var lockedCount = lockedColumns(that.columns).length;\n            var isLocked = !!destination.locked;\n            var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            var headerCol, footerCol, beforeVisibleColumn;\n            headerCol = footerCol = colDest;\n\n            if (destination.hidden) {\n                var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                if (visibleColumns(columnsArray).length > 0) {\n                    headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                    beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                }\n                else {\n                    if (isLocked) {\n                        colDest = that.lockedTable.find(\"colgroup\");\n                        headerCol = that.lockedHeader.find(\"colgroup\");\n                        footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                    } else {\n                        colDest = that.tbody.prev();\n                        headerCol = that.thead.prev();\n                        footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                    }\n                }\n            }\n\n            if (that._hasFilterRow()) {\n                reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            if (colSourceIndex >= 0) {\n                reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n            }\n\n            if (that.options.scrollable) {\n                if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                    reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n            }\n\n            if (footer && footer.length) {\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n            if (that.lockedTable) {\n                if (lockedCount > destIndex) {\n                    if (lockedCount <= sourceIndex) {\n                        updateColspan(\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            sources.length\n                        );\n                    }\n                } else if (lockedCount > sourceIndex) {\n                    updateColspan(\n                        that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                        that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                        sources.length\n                    );\n                }\n\n                lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n            }\n\n            for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n        },\n\n        _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n            var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n            return inArray(closestVisibleColumn, visibleColumns(this.columns));\n        },\n\n        _autoFitLeafColumn: function(leafIndex) {\n            this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n        },\n\n        _hasReorderableRows: function() {\n            return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n        },\n\n        _draggableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                    (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell),\n                clickMoveClick = false,\n                isMobile = !!(that._isMobile || kendo.support.mobileOS);\n\n            if (that._draggableRowsInstance) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            if (this.options.reorderable.rows.clickMoveClick !== false && this._hasDragHandleColumn) {\n                clickMoveClick = true;\n            }\n\n            that._draggableRowsInstance = that.tbody.kendoDraggable({\n                holdToDrag: isMobile,\n                showHintOnHold: isMobile,\n                preventOsHoldFeatures: isMobile,\n                group: \"row-draggable\",\n                autoScroll: true,\n                filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                hint: function(target) {\n                    var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                    if (selectable && that.select().length > 1) {\n                        hint.append(\"<span>\" + that.select().length + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                    } else {\n                        var clone = target.closest(ITEMROW).clone();\n                        clone.find(\"td.k-command-cell\").remove();\n                        clone.find(\"td\").each(function(index, elm) {\n                            hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                        });\n                    }\n\n                    return hint;\n                },\n                clickMoveClick: clickMoveClick,\n                cursorOffset: { top: 0, left: 0 }\n            }).data(\"kendoDraggable\");\n        },\n\n        _reorderableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that.tbody.data(\"kendoReorderable\")) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n            }\n\n            that.tbody.kendoReorderable({\n                smartPosition: false,\n                draggable: that._draggableRowsInstance,\n                dragOverContainers: function(sourceIndex, targetIndex) {\n                    var result = true,\n                        target = $(ITEMROW, that.content).eq(targetIndex);\n\n                    if (selectable) {\n                        result = !target.is(\".k-selected\");\n                    }\n\n                    return result;\n                },\n                inSameContainer: function(e) {\n                    if (selectable) {\n                        return !$(e.target).is(\".k-selected\");\n                    }\n\n                    return true;\n                },\n                dropFilter: \"> \" + ITEMROW,\n                allowIcon: \"insert-middle\",\n                orientation: \"vertical\",\n                reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                positionDropCue: function(reorderDropCue, dropTarget) {\n                    var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                    reorderDropCue.css({\n                        transform: \"translate(0,-50%)\",\n                        left: firstCellLeft\n                    });\n                },\n                externalDraggable: function(e) {\n                    var draggable = e.draggable;\n\n                    if (draggable) {\n                        return draggable;\n                    }\n                },\n                change: function(e) {\n                    that._triggerRowRorder(e);\n                }\n            });\n        },\n\n        _triggerRowRorder: function(e) {\n            var that = this,\n                args = {\n                    newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                    oldIndex: e.oldIndex\n                },\n                row = e.element,\n                selectable = that._checkBoxSelection ||\n                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (selectable && that.select().length > 1) {\n                args = extend(args, {\n                    rows: that.select()\n                });\n            } else {\n                args = extend(args, {\n                    row: row\n                });\n            }\n\n            if (!that.trigger(ROWREORDER, args)) {\n                that.reorderRows(selectable ? that.select() : row, args.newIndex);\n            }\n        },\n\n        reorderRowTo: function(row, index) {\n            var that = this,\n                item = that.dataItem(row),\n                oldIndex = row.index();\n\n            if (index < 0 || index === oldIndex) {\n                return;\n            }\n\n            if (!that.trigger(ROWREORDER, {\n                row: row,\n                oldIndex: row.index(),\n                newIndex: index\n            })) {\n                that.dataSource.pushMove(index, [item]);\n            }\n        },\n\n        reorderRows: function(rows, index) {\n            var that = this,\n                dataSource = that.dataSource,\n                rowsLength = that.tbody.children(ITEMROW).length,\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                items = rows.toArray().map(function(row) {\n                    return that.dataItem(row);\n                });\n\n            if (!targetItem) {\n                // If index is after last row dataItem wouldn't exist\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                index = dataSource.indexOf(targetItem) + 1;\n            } else {\n                index = dataSource.indexOf(targetItem);\n            }\n\n            if (index >= 0) {\n                that._rowDropping = true;\n                dataSource.pushMove(index, items);\n                that._rowDropping = false;\n            }\n        },\n\n        autoFitColumns: function(columns) {\n            var that = this;\n\n            columns = columns || that.columns;\n\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i];\n\n                if (column.columns) {\n                    that.autoFitColumns(column.columns);\n                } else {\n                    that.autoFitColumn(column);\n                }\n            }\n        },\n\n        autoFitColumn: function(column) {\n            var that = this,\n                options = that.options,\n                columns = that.columns,\n                index,\n                th,\n                headerTable,\n                leafCols,\n                isLocked,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                col,\n                minWidth,\n                contentDiv, scrollLeft,\n                notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                menu,\n                thWidth;\n\n            //  retrieve the column object, depending on the method argument\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            leafCols = leafColumns(columns);\n            minWidth = column.minResizableWidth;\n            index = inArray(column, leafCols);\n            isLocked = column.locked;\n\n            if (isLocked) {\n                headerTable = that.lockedHeader.children(\"table\");\n            } else {\n                headerTable = that.thead.parent();\n            }\n\n            th = headerTable.find(\"[data-index='\" + index + \"']\");\n            menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n            var contentTable = isLocked ? that.lockedTable : that.table,\n                footer = that.footer || $();\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            var footerTable = footer.find(\"table\").first();\n\n            if (that.lockedHeader && !isLocked) {\n                index -= visibleLocked;\n            }\n\n            // adjust column index, depending on previous hidden columns\n            for (var j = 0; j < leafCols.length; j++) {\n                if (leafCols[j] === column) {\n                    break;\n                } else {\n                    if (leafCols[j].hidden) {\n                        index--;\n                    }\n                }\n            }\n\n            // get col elements\n            if (options.scrollable) {\n                col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                    .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                    .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                if (!isLocked) {\n                    contentDiv = contentTable.parent();\n                    scrollLeft = kendo.scrollLeft(contentDiv);\n                }\n            } else {\n                col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n            }\n\n            var tables = headerTable.add(contentTable).add(footerTable);\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"initial\");\n            }\n\n            var oldColumnWidth = outerWidth(th);\n\n            // reset the table and autofitted column widths\n            // if scrolling is disabled, we need some additional repainting of the table\n            col.width(\"\");\n            tables.css(\"table-layout\", \"fixed\");\n            col.width(AUTO);\n            tables.addClass(\"k-autofitting\");\n            tables.css(\"table-layout\", \"\");\n\n            thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n            // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n            var newColumnWidth = Math.ceil(Math.max(\n                thWidth,\n                outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n            )) + 1;\n\n            if (minWidth && minWidth > newColumnWidth) {\n                newColumnWidth = minWidth;\n            }\n\n            col.width(newColumnWidth);\n            column.width = newColumnWidth;\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"\");\n            }\n\n            // if all visible columns have widths, the table needs a pixel width as well\n            if (options.scrollable) {\n                var cols = headerTable.find(\"col\"),\n                    colWidth,\n                    totalWidth = 0;\n                for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        totalWidth += parseInt(colWidth, 10);\n                    } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                        totalWidth += parseInt(cols.eq(idx).width(), 10);\n                    } else {\n                        totalWidth = 0;\n                        break;\n                    }\n                }\n\n                if (totalWidth) {\n                    tables.each(function() {\n                        this.style.width = totalWidth + PX;\n                    });\n                }\n            }\n\n            tables.removeClass(\"k-autofitting\");\n\n            if (scrollLeft) {\n                kendo.scrollLeft(contentDiv, scrollLeft);\n            }\n\n            that.trigger(COLUMNRESIZE, {\n                column: column,\n                oldWidth: oldColumnWidth,\n                newWidth: newColumnWidth\n            });\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        reorderColumn: function(destIndex, column, before) {\n            var that = this,\n                parent = columnParent(column, that.columns),\n                columns = parent ? parent.columns : that.columns,\n                sourceIndex = inArray(column, columns),\n                destColumn = columns[destIndex],\n                virtualScroll = that.virtualScroll || {},\n                lockChanged,\n                isLocked = !!destColumn.locked,\n                lockedCount = lockedColumns(that.columns).length,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (sourceIndex === destIndex) {\n                return;\n            }\n\n            if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                return;\n            }\n\n            if (column.locked && !isLocked && lockedCount == 1) {\n                return;\n            }\n\n            that._hideResizeHandle();\n\n            if (before === undefined$1) {\n                before = destIndex < sourceIndex;\n            }\n\n            var sourceColumns = [column];\n\n            that._reorderHeader(sourceColumns, destColumn, before);\n\n            if (that.lockedHeader) {\n                removeEmptyRows(that.thead);\n                removeEmptyRows(that.lockedHeader);\n            }\n\n            if (destColumn.columns) {\n                destColumn = leafColumns(destColumn.columns);\n                destColumn = destColumn[before ? 0 : destColumn.length - 1];\n            }\n\n            if (column.columns) {\n                sourceColumns = leafColumns(column.columns);\n            }\n\n            that._reorderContent(sourceColumns, destColumn, before);\n\n            lockChanged = !!column.locked;\n            lockChanged = lockChanged != isLocked;\n            column.locked = isLocked;\n\n            columns.splice(before ? destIndex : destIndex + 1, 0, column);\n            columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n            that._updateLockedCols();\n            that._updateCols();\n            that._templates();\n\n            that._updateColumnCellIndex();\n            that._updateColumnSorters();\n\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._updateTablesWidth();\n            that._applyLockedContainersWidth();\n            that._syncLockedHeaderHeight();\n            that._syncLockedContentHeight();\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n\n            if (virtualScroll.columns) {\n                that.refresh();\n            }\n\n            if (!lockChanged) {\n                return;\n            }\n\n            if (isLocked) {\n                that.trigger(COLUMNLOCK, {\n                    column: column\n                });\n            } else {\n                that.trigger(COLUMNUNLOCK, {\n                    column: column\n                });\n            }\n        },\n\n        _updateColumnCellIndex: function() {\n            var header;\n            var offset = 0;\n\n            if (this.lockedHeader) {\n                header = this.lockedHeader.find(\"thead\");\n                offset = updateCellIndex(header, lockedColumns(this.columns));\n            }\n            updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n        },\n\n        lockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.locked || column.hidden) {\n                return;\n            }\n\n            if (column.sticky) {\n                this.unstickColumn(columns.indexOf(column));\n            }\n\n            var index = lockedColumns(columns).length - 1;\n            this.reorderColumn(index, column, false);\n        },\n\n        unlockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.locked || column.hidden) {\n                return;\n            }\n\n            var index = lockedColumns(columns).length;\n            this.reorderColumn(index, column, true);\n        },\n\n        stickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.sticky || column.hidden) {\n                return;\n            }\n\n            if (column.locked) {\n                this.unlockColumn(columns.indexOf(column));\n\n                if (column.locked) {\n                    return;\n                }\n            }\n\n            column.sticky = true;\n            this._updateStickyColumns();\n        },\n\n        unstickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.sticky || column.locked || column.hidden) {\n                return;\n            }\n\n            this._removeStickyAttributes([column]);\n            this._removeStickyStyles(stickyColumns(columns));\n\n            column.sticky = false;\n            this._updateStickyColumns();\n\n            if (this._anyStickyColumns() === 0) {\n                this._templates();\n                if (this._hasFilterRow()) {\n                    this._updateStickyFilterCells();\n                }\n            }\n        },\n\n        cellIndex: function(td) {\n            var lockedColumnOffset = 0;\n\n            if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n            }\n\n            return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container);\n\n            if (!container.is(TR) && this._editMode() !== \"popup\") {\n                container = container.closest(TR);\n            }\n\n            var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(id);\n        },\n\n        _calculateColumnIndex: function(cell) {\n            var cellIndex = this.cellIndex(cell);\n            var virtualOffset = 0;\n\n            if (this._hasVirtualColumns()) {\n                virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n            }\n\n            return cellIndex + virtualOffset;\n        },\n\n        _editable: function() {\n            var that = this,\n                editable = that.options.editable,\n                handler = function() {\n                    var target = activeElement(),\n                        cell = that._editContainer;\n\n                    if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                        if (that.editable.end()) {\n                            that.closeCell();\n                        } else {\n                            that._scrollVirtualWrapper();\n                        }\n                    }\n                },\n                useDoubleTapEditing = !!(that._isMobile || kendo.support.mobileOS);\n\n            if (editable) {\n                this.wrapper.addClass(\"k-editable\");\n\n                var mode = that._editMode();\n                if (mode === \"incell\") {\n                    that.table.add(that.lockedTable)\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                            var target = $(e.target);\n                            if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                e.preventDefault();\n                            }\n                        });\n\n                    if (editable.update !== false) {\n                        if (isMac) {\n                            that.wrapper\n                                .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                    // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                    // this is necessary for the \"focusout\" event to be fired\n                                    $(e.target).trigger(\"focus\");\n                                })\n                                .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                    if (!$(e.target).is(\"input\")) {\n                                        $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                    }\n                                })\n                                .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                    var editContainer = that._editContainer;\n\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                        }\n\n                        that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                            filter: \"tr:not(.k-grouping-row) > td\",\n                            allowSelection: true,\n                            supportDoubleTap: useDoubleTapEditing,\n                            fastTap: useDoubleTapEditing,\n                            [useDoubleTapEditing ? 'doubleTap' : 'tap']: function(e) {\n                                var td = $(e.target),\n                                isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                that._mousedownOnEditCell = false;\n\n                                if (td.hasClass(\"k-hierarchy-cell\") ||\n                                    td.hasClass(\"k-detail-cell\") ||\n                                    td.hasClass(\"k-group-cell\") ||\n                                    td.hasClass(\"k-edit-cell\") ||\n                                    td.has(\".k-grid-remove-command\").length ||\n                                    (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                    $(e.target).is(\":input\")) {\n                                    return;\n                                }\n\n                                if (that.editable) {\n                                    if (that.editable.end()) {\n                                        $(activeElement()).trigger(\"blur\");\n                                        that.closeCell();\n                                        that.editCell(td);\n                                    } else {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                } else {\n                                    that.editCell(td);\n                                }\n                            }\n                        });\n\n                        that.wrapper.on(\"focusin\" + NS, function() {\n                            // fix focus issue in IE\n                            if (!$.contains(this, activeElement())) {\n                                clearTimeout(that.timer);\n                                that.timer = null;\n                            }\n                        })\n                        .on(\"focusout\" + NS, function(e) {\n                            var shouldCloseCell = true;\n\n                            if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                shouldCloseCell = false;\n                            }\n\n                            that._mousedownOnEditCell = false;\n\n                            if (shouldCloseCell) {\n                                that.timer = setTimeout(function() {\n                                    handler(e);\n                                }, 1);\n                            }\n                        });\n                    }\n                } else {\n                    if (editable.update !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            that.editRow(element.closest(TR));\n                        });\n\n                        if (that._isVirtualInlineEditable()) {\n                            that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                if (that.editable && !that.editable.end()) {\n                                    that._scrollVirtualWrapper();\n                                }\n                            });\n                        }\n                    }\n                }\n\n                if (editable.destroy !== false) {\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                        var element = $(this);\n                        if (!that._belongsToGrid(element)) {\n                            return;\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.removeRow(element.closest(TR));\n                    });\n                } else {\n                    //Required for the MVC server wrapper delete button\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                        if (!that._belongsToGrid($(this))) {\n                            return;\n                        }\n                        e.stopPropagation();\n\n                        if (!that._confirmation()) {\n                            e.preventDefault();\n                        }\n                    });\n                }\n            }\n        },\n\n        editCell: function(cell) {\n            cell = $(cell);\n\n            var that = this,\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                model = that._modelForContainer(cell);\n\n            that.closeCell();\n\n            if (model && isColumnEditable(column, model) && !column.command) {\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                that._attachModelChange(model);\n\n                that._editContainer = cell;\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = cell.addClass(\"k-edit-cell\")\n                    .kendoEditable({\n                        fields: editField(column),\n                        model: model,\n                        size: that.options.size,\n                        target: that,\n                        change: function(e) {\n                            if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                    }).data(\"kendoEditable\");\n\n                var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                    that._syncLockedScroll();\n                }\n\n                that.trigger(EDIT, { container: cell, model: model });\n            }\n        },\n\n        _adjustLockedHorizontalScrollBar: function() {\n            var table = this.table,\n                content = table.parent();\n\n            var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n            this.lockedContent.height(content[0].offsetHeight - scrollbar);\n        },\n\n        _syncLockedScroll: function() {\n            this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n            if (this.virtualScrollable) {\n                this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n            }\n        },\n\n        _syncLockedContentHeight: function() {\n            if (this.lockedTable) {\n                if (!this.touchScroller) {\n                    this._adjustLockedHorizontalScrollBar();\n                }\n                this._adjustRowsHeight(this.table, this.lockedTable);\n            }\n        },\n\n        _syncLockedHeaderHeight: function() {\n            if (this.lockedHeader) {\n                var lockedTable = this.lockedHeader.children(\"table\");\n                var table = this.thead.parent();\n\n                this._adjustRowsHeight(lockedTable, table);\n\n                syncTableHeight(lockedTable, table);\n            }\n        },\n\n        _syncLockedFooterHeight: function() {\n            if (this.lockedFooter && this.footer && this.footer.length) {\n                this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n            }\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n\n                    var container = that.editView ? that.editView.element : that._editContainer;\n                    var window = that._editContainer.data(\"kendoWindow\");\n\n                    if (container) {\n                        container.off(CLICK + NS, \".k-grid-cancel-command\", that._editCancelClickHandler);\n                        container.off(CLICK + NS, \".k-grid-save-command\", that._editUpdateClickHandler);\n                    }\n\n                    that._detachModelChange();\n                    that.editable.destroy();\n                    that.editable = null;\n                    if (window) {\n                        window.destroy();\n                    }\n                    that._editContainer = null;\n                    that._destroyEditView();\n                    that._editableIsClosing = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._editMode() === \"popup\" && !that._isMobile) {\n                    if (that._editableIsClosing) {\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                    }\n                    else {\n                        that._editableIsClosing = true;\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                    }\n                } else {\n                    destroy();\n                }\n            }\n            if (that._confirmDialog) {\n                that._confirmDialog.close();\n                that._confirmDialog.destroy();\n                that._confirmDialog = null;\n            }\n        },\n\n        _destroyEditView: function() {\n            if (this.editView) {\n                this.editView.purge();\n                this.editView = null;\n                this.pane.navigate(\"\");\n            }\n        },\n\n        _attachModelChange: function(model) {\n            var that = this;\n\n            that._modelChangeHandler = function(e) {\n                that._modelChange({ field: e.field, model: this });\n            };\n\n            model.bind(\"change\", that._modelChangeHandler);\n        },\n\n        _detachModelChange: function() {\n            var that = this,\n                container = that._editContainer,\n                model = that._modelForContainer(container);\n\n            if (model) {\n                model.unbind(CHANGE, that._modelChangeHandler);\n            }\n        },\n\n        closeCell: function(isCancel) {\n            var that = this,\n                cell = that._editContainer,\n                column,\n                tr,\n                model;\n\n            if (!cell) {\n                return;\n            }\n\n            model = that._modelForContainer(cell);\n\n            if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                return;\n            }\n\n            that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n            cell.removeClass(\"k-edit-cell\");\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n            tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n            if (that.lockedContent) {\n                that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n            }\n\n            that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n            that._displayCell(cell, column, model);\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n            if (that.lockedContent) {\n                adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n            }\n        },\n\n        _displayCell: function(cell, column, dataItem) {\n            var that = this,\n                state = { storage: {}, count: 0 },\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            cell.empty().html(tmpl(dataItem));\n        },\n\n        removeRow: function(row) {\n            if (!this._confirmation(row)) {\n                return;\n            }\n\n            this._removeRow(row);\n        },\n\n        _removeRow: function(row) {\n            var that = this,\n                model,\n                modelId,\n                key,\n                schema,\n                mode = that._editMode();\n\n            if (mode !== \"incell\") {\n                that.cancelRow();\n            }\n\n            row = $(row);\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row = row.hide();\n            if (that.dataSource._isGroupPaged()) {\n                that._removeGroupIfEmpty(row);\n            }\n\n            model = that._modelForContainer(row);\n\n            if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                schema = that.dataSource.options.schema;\n                if (that._selectedIds && schema && schema.model) {\n                    modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                    key = model[modelId];\n                    delete that._selectedIds[key];\n                }\n\n                that.dataSource.remove(model);\n\n                if (mode === \"inline\" || mode === \"popup\") {\n                    that.dataSource.sync();\n                }\n            } else if (mode === \"incell\") {\n                that._destroyEditable();\n            }\n        },\n\n        _editMode: function() {\n            var mode = \"incell\",\n                editable = this.options.editable;\n\n            if (editable !== true) {\n                if (typeof editable == \"string\") {\n                    mode = editable;\n                } else {\n                    mode = editable.mode || mode;\n                }\n            }\n\n            return mode;\n        },\n\n        editRow: function(row) {\n            var model;\n            var that = this;\n\n            if (row instanceof ObservableObject) {\n                model = row;\n            } else {\n                row = $(row);\n                model = that._modelForContainer(row);\n            }\n\n            var mode = that._editMode();\n            var container;\n\n            that.cancelRow();\n\n            if (model) {\n                row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                that._attachModelChange(model);\n\n                if (mode === \"popup\") {\n                    that._createPopupEditor(model);\n                } else if (mode === \"inline\") {\n                    that._createInlineEditor(row, model);\n                } else if (mode === \"incell\") {\n                    $(row).children(DATA_CELL).each(function() {\n                        var cell = $(this);\n                        var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        model = that._modelForContainer(cell);\n\n                        if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                            that.editCell(cell);\n                            return false;\n                        }\n                    });\n                }\n\n\n                container = that.editView ? that.editView.element : that._editContainer;\n\n                if (container) {\n                    if (!this._editCancelClickHandler) {\n                        this._editCancelClickHandler = this._editCancelClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-cancel-command\", this._editCancelClickHandler);\n\n                    if (!this._editUpdateClickHandler) {\n                        this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-save-command\", this._editUpdateClickHandler);\n                }\n            }\n        },\n\n        _editUpdateClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.saveRow();\n        },\n\n        _editCancelClick: function(e) {\n            var that = this;\n            var navigatable = that.options.navigatable;\n            var model = that.editable.options.model;\n            var container = that.editView ? that.editView.element : that._editContainer;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                return;\n            }\n\n            var currentIndex = that.items().index($(that.current()).parent());\n\n            that.cancelRow();\n\n            if (navigatable) {\n                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                focusTable(that.table, true);\n            }\n        },\n\n        _editFields: function(columns, model) {\n            var fields = [];\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.selectable || column.command) {\n                    continue;\n                }\n                if (isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                }\n            }\n            return fields;\n        },\n\n        _createPopupEditor: function(model) {\n            var that = this;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n            var column;\n            var command;\n            var idx;\n            var length;\n            var tmpl;\n            var updateText;\n            var cancelText;\n            var updateIconClass;\n            var cancelIconClass;\n            var tempCommand;\n            var columns = leafColumns(that.columns);\n            var attr;\n            var editMenuGuid = kendo.guid();\n            var editable = that.options.editable;\n            var template = editable.template;\n            var options = isPlainObject(editable) ? editable.window : {};\n            var settings = extend({}, kendo.Template, that.options.templateSettings);\n            var state;\n            var container;\n            var buttonsHTML;\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            options = options || {};\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            } else {\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable) {\n                        continue;\n                    }\n                    if (!column.command) {\n                        if (that._isMobile) {\n                            html += '<li class=\"k-item k-listgroup-item\">';\n\n                            if (isColumnEditable(column, model)) {\n                                html += '<label class=\"k-label k-listgroup-form-row\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                html += '</label>';\n                            } else {\n                                state = { storage: {}, count: 0 };\n\n                                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                if (state.count > 0) {\n                                    tmpl = tmpl.bind(state.storage);\n                                }\n\n                                html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                html += '</label>';\n                            }\n\n                            html += \"</li>\";\n                        }\n                    } else if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            }\n\n            if (command) {\n                if (isPlainObject(command)) {\n                    if (isPlainObject(command.text)) {\n                        updateText = command.text.update;\n                        cancelText = command.text.cancel;\n                    }\n                    if (isPlainObject(command.iconClass)) {\n                        updateIconClass = command.iconClass.update;\n                        cancelIconClass = command.iconClass.cancel;\n                    }\n\n                   if (command.attr) {\n                       attr = command.attr;\n                   }\n                }\n            }\n\n            if (!that._isMobile) {\n                buttonsHTML = '<div class=\"k-edit-buttons k-actions-start\">';\n                buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\" }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\" });\n                buttonsHTML += '</div>';\n\n                html += template ? buttonsHTML + '</div>' : '</div>';\n\n                container = that._editContainer = $(html)\n                .appendTo(that.wrapper).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.commands.edit || \"Edit\",\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                            e.sender.element.trigger(\"focus\");\n                            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                e.preventDefault();\n                                return;\n                            }\n\n                            var currentIndex = that.items().index($(that.current()).parent());\n\n                            that._editableIsClosing = true;\n                            that.cancelRow();\n                            if (that.options.navigatable) {\n                                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                focusTable(that.table, true);\n                            }\n                        }\n                    }\n                }, options));\n            } else {\n                html += \"</ul></div>\";\n                that.editView = that.pane.append(\n                    '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                        '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                            '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel-command\" title=\"#=messages.cancel#\" ' +\n                            'aria-label=\"#=messages.cancel#\">' + kendo.ui.icon(\"chevron-left\") + '</a>' +\n                            encode(that.options.messages.commands.edit || \"Edit\") +\n                            '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-save-command\" title=\"#=messages.done#\" ' +\n                            'aria-label=\"#=messages.done#\">' + kendo.ui.icon(\"check\") + '</a>' +\n                        '</div>' +\n                        '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                            html +\n                        '</div>' +\n                    '</div>');\n                container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n            }\n\n            if (!template && !that._isMobile) {\n                that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                    items: that._editFields(columns, model),\n                    buttonsTemplate: () => '',\n                    formData: model\n                }).editable;\n                that._editContainer.append(buttonsHTML);\n            } else {\n                that.editable = that._editContainer\n                .kendoEditable({\n                    fields: that._isMobile ? that._editFields(columns, model) : null,\n                    model: model,\n                    clearContainer: false,\n                    target: that,\n                    skipFocus: true\n                }).data(\"kendoEditable\");\n            }\n\n            that._openPopUpEditor();\n\n            that.trigger(EDIT, { container: container, model: model });\n        },\n\n        _openPopUpEditor: function() {\n            var that = this;\n            var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n            var windowOptions = (that.options.editable || {}).window || {};\n\n            if (!this._isMobile) {\n                if (windowEditor) {\n                    if (!windowOptions.position) {\n                        windowEditor.center();\n                    }\n\n                    windowEditor.open();\n                }\n            } else {\n                this.pane.navigate(this.editView, this._editAnimation);\n            }\n        },\n\n        _createInlineEditor: function(row, model) {\n            var that = this;\n            var column;\n            var cell;\n            var command;\n            var fields = [];\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                cell = $(this);\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (!column.command && isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                    cell.attr(kendo.attr(\"container-for\"), column.field);\n                    cell.empty();\n                } else if (column.command) {\n                    command = getCommand(column.command, \"edit\");\n                    if (command) {\n                        cell.empty();\n\n                        var updateText,\n                            cancelText,\n                            updateIconClass,\n                            cancelIconClass,\n                            attr;\n\n                        if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n\n                            if (command.attr) {\n                                attr = command.attr;\n                            }\n                        }\n\n                        $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                            that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                    }\n                }\n            });\n\n            that._editContainer = row;\n            that._editContainer.addClass(\"k-grid-edit-row\");\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.editable = new kendo.ui.Editable(that._editContainer, {\n                target: that,\n                fields: fields,\n                size: that.options.size,\n                model: model,\n                skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                clearContainer: false\n            });\n\n            if (row.length > 1) {\n\n                adjustRowHeight(row[0], row[1]);\n                that._applyLockedContainersWidth();\n            }\n\n            that.trigger(EDIT, { container: row, model: model });\n        },\n\n        cancelRow: function(notify) {\n            var that = this,\n                container = that._editContainer,\n                model;\n\n            if (container) {\n                model = that._modelForContainer(container);\n\n                if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                    return;\n                }\n\n                that._destroyEditable();\n\n                that.dataSource.cancelChanges(model);\n\n                that._clearEditableState();\n\n                if (that._editMode() !== \"popup\") {\n                    that._displayRow(container);\n                } else {\n                    that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                }\n            }\n        },\n\n        saveRow: function() {\n            var that = this;\n            var container = this._editContainer;\n            var model = this._modelForContainer(container);\n            var deferred = $.Deferred();\n            var valid;\n\n            if (!container || !this.editable) {\n                return deferred.resolve().promise();\n            }\n\n            valid = that.editable && that.editable.end();\n\n            if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n\n                return deferred.reject().promise();\n            }\n\n            that._clearEditableState();\n\n            return this.dataSource.sync();\n        },\n\n        _displayRow: function(row) {\n                var that = this,\n                model = that._modelForContainer(row),\n                related,\n                newRow,\n                nextRow,\n                isSelected = row.hasClass(SELECTED),\n                isAlt = row.hasClass(\"k-alt\");\n\n            if (model) {\n\n                if (that.lockedContent) {\n                    related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                    kendo.applyStylesFromKendoAttributes(related, [\"display\"]);\n                    that._relatedRow(row.last()).replaceWith(related);\n                }\n\n                newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                if (!row.is(\":visible\")) {\n                    newRow.hide();\n                }\n\n                kendo.applyStylesFromKendoAttributes(newRow, [\"display\"]);\n                row.replaceWith(newRow);\n\n                that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                if (related && related.length) {\n                    that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                }\n\n                if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                    that.select(newRow.add(related));\n                }\n\n                if (related) {\n                    adjustRowHeight(newRow[0], related[0]);\n                }\n\n                nextRow = newRow.next();\n                if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                    kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                }\n            }\n        },\n\n        _showMessage: function(messages, row) {\n            var that = this;\n\n            if (!that._isMobile) {\n                // eslint-disable-next-line no-alert\n                return window.confirm(messages.title);\n            }\n\n            var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                modal: {\n                    preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: messages.title,\n                messages: {\n                    okText: messages.confirmDelete,\n                    cancel: messages.cancelDelete\n                },\n                open: function() {\n                    if (that.content) {\n                        that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                        that.content.css(OVERFLOW, HIDDEN);\n                    }\n                },\n                close: function() {\n                    if (that.content) {\n                        that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                    }\n                }\n            });\n\n            confirmDialog.result\n                .done(function() {\n                    that._removeRow(row);\n                })\n                .fail(function() {\n                    var confirmDialog = that._confirmDialog;\n\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n\n            return false;\n        },\n\n        _confirmation: function(row) {\n            var that = this,\n                editable = that.options.editable,\n                confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n            if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                confirmation = that.options.messages.editable.confirmation;\n            }\n\n            if (confirmation !== false && confirmation != null) {\n\n                if (typeof confirmation === FUNCTION) {\n                    confirmation = confirmation(that._modelForContainer(row));\n                }\n\n                return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n            }\n\n            return true;\n        },\n\n        cancelChanges: function() {\n            var that = this;\n\n            if (that._cachedRowsHeight) {\n                that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                that._shouldMapHights = true;\n            }\n\n            that.dataSource.cancelChanges();\n\n            if (that._isVirtualEditable()) {\n                that._virtualPageToTop(function() {\n                    that.virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        saveChanges: function() {\n            var that = this;\n            var valid = that.editable && that.editable.end();\n\n            if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                that.dataSource.sync();\n            } else if (!valid) {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        addRow: function() {\n            var that = this,\n                index,\n                dataSource = that.dataSource,\n                mode = that._editMode(),\n                createAt = that.options.editable.createAt || \"\",\n                pageSize = dataSource.pageSize(),\n                view = dataSource.view() || [];\n            var createAtBottom = createAt.toLowerCase() === BOTTOM;\n            var model;\n            var virtualEditable = that._isVirtualEditable();\n\n            if ((that.editable && that.editable.end()) || !that.editable) {\n                if (mode != \"incell\") {\n                    that.cancelRow();\n                }\n\n                index = dataSource.indexOf(view[0]);\n\n                if (createAtBottom) {\n                    index += view.length;\n\n                    if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                        index -= 1;\n                    }\n                }\n\n                if (index < 0) {\n                    if (dataSource.page() > dataSource.totalPages()) {\n                        index = (dataSource.page() - 1) * pageSize;\n                    } else {\n                        index = 0;\n                    }\n                }\n\n                if (that.options.navigatable && mode == \"incell\") {\n                    that._removeCurrent();\n                }\n\n                if (virtualEditable) {\n                    that._virtualAddRow();\n                } else {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                }\n            } else {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        _editModel: function(model) {\n            var that = this;\n            var createAt = that.options.editable.createAt || \"\";\n            var mode = that._editMode();\n\n            if (model) {\n                var id = model.uid,\n                    table = that.lockedContent ? that.lockedTable : that.table,\n                    row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                    cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                if (mode === \"inline\" && row.length) {\n                    that.editRow(row);\n                } else if (mode === \"popup\") {\n                    that.editRow(model);\n                } else if (cell.length) {\n                    that.editCell(cell);\n                }\n\n                if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                    //scroll the containers to the bottom\n                    that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                }\n            }\n        },\n\n        _virtualAddRow: function() {\n            var that = this;\n            var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n            that._clearEditableState();\n\n            if (createAtBottom) {\n                that._virtualAddRowAtBottom();\n            } else {\n                that._virtualAddRowAtTop();\n            }\n        },\n\n        _virtualAddRowAtTop: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var model;\n\n            if (dataSource.page() === 1) {\n                model = dataSource.insert(0, {});\n                that._editModel(model);\n                virtualScrollable.scrollToTop();\n            } else {\n                that._virtualPageToTop(function() {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        _virtualAddRowAtBottom: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var index = dataSource.total();\n            var model;\n\n            if (dataSource.at(index - 1) instanceof ObservableObject) {\n                model = dataSource.insert(index, {});\n\n                that._virtualPageToBottom(function() {\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            } else {\n                that._virtualPageToBottom(function() {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            }\n        },\n\n        _virtualPageToTop: function(callback) {\n            var that = this;\n\n            that._virtualPage(0, that.dataSource.take(), function() {\n                callback();\n            });\n        },\n\n        _virtualPageToBottom: function(callback) {\n            var that = this;\n            var dataSource = that.dataSource;\n            var take = dataSource.take();\n            var total = dataSource.total();\n            var skip = total > take ? (total - take) : 0;\n\n            that._virtualPage(skip, take, function() {\n                callback();\n            });\n        },\n\n        _virtualPage: function(skip, take, callback) {\n            var that = this;\n\n            if (that._isVirtualEditable()) {\n                that.virtualScrollable._preventScroll = true;\n                that.virtualScrollable._page(skip, take, callback);\n            }\n        },\n\n        _firstEditableColumnIndex: function(container) {\n            var that = this,\n                column,\n                columns = leafColumns(that.columns),\n                idx,\n                length,\n                model = that._modelForContainer(container);\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        _clickAdd: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.addRow();\n        },\n\n        _clickCancel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.cancelChanges();\n        },\n\n        _clickExcel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveAsExcel();\n        },\n\n        _clickPdf: function(e) {\n            var that = this;\n\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            var promise = that.saveAsPDF();\n\n            if (promise) {\n                promise.done(function() {\n                    that._pdfInitialized = false;\n                });\n            }\n        },\n\n        _clickSave: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveChanges();\n        },\n\n        _searchInput: function(e) {\n            var that = this,\n                input = e.currentTarget;\n\n            clearTimeout(that._searchTimeOut);\n\n            that._searchTimeOut = setTimeout(function() {\n                that._searchTimeOut = null;\n\n                var options = that.options;\n                var searchFields = options.search ? options.search.fields : null;\n                var expression = { filters: [], logic: \"or\" };\n                var value = input.value;\n\n                if (!searchFields) {\n                    searchFields = getColumnsFields(options.columns);\n                }\n\n                if (that.dataSource.options.endless) {\n                    that.dataSource.options.endless = null;\n                    that._endlessPageSize = that.dataSource.options.pageSize;\n                }\n\n                if (value) {\n                    for (var i = 0; i < searchFields.length; i++) {\n                        that._pushExpression(expression.filters, searchFields[i], value);\n                    }\n                } else {\n                    expression = {};\n                }\n\n                that.dataSource.filter(expression);\n            }, 300);\n        },\n\n        _pushExpression: function(filters, field, value) {\n            var that = this,\n                isServerFiltering = that.dataSource.options.serverFiltering,\n                defaultOperators = {\n                    string: \"contains\",\n                    number: \"gte\",\n                    date: \"gte\",\n                    enums: \"eq\",\n                    boolean: \"eq\"\n                },\n                name = field.name || field,\n                operator = field.operator,\n                modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                fieldInfo = modelInfo && modelInfo[name],\n                parseFn = fieldInfo && fieldInfo.parse,\n                expression = {\n                    field: name,\n                    operator: operator || defaultOperators.string,\n                    value: value\n                };\n\n            if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                extend(expression, {\n                    operator: operator || defaultOperators[fieldInfo.type],\n                    value: parseFn(value)\n                });\n            }\n\n            if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                return;\n            }\n\n            filters.push(expression);\n        },\n\n        _toolbar: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                toolbar = that.options.toolbar,\n\n                container, items;\n\n            if (toolbar) {\n                that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                that._cancelClickHandler = that._clickCancel.bind(that);\n                that._saveClickHandler = that._clickSave.bind(that);\n                that._excelClickHandler = that._clickExcel.bind(that);\n                that._pdfClickHandler = that._clickPdf.bind(that);\n                that._serachHandler = that._searchInput.bind(that);\n\n                container = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!container.length) {\n                    container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                        .prependTo(wrapper);\n\n                    if (typeof toolbar === STRING || isFunction(toolbar)) {\n                        if (typeof toolbar === STRING) {\n                            toolbar = kendo.template(toolbar).bind(that);\n                        }\n\n                        container.html(toolbar({ grid: that }));\n                        that._attachToolbarClicks();\n                    } else if (isArray(toolbar)) {\n                        items = that._processItems(toolbar);\n\n                        container.kendoToolBar({\n                            navigateOnTab: !that.options.navigatable,\n                            size: that.options.size,\n                            items: items\n                        });\n                    }\n                } else {\n                    that._attachToolbarClicks();\n                }\n\n                container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n            }\n        },\n\n        _attachToolbarClicks: function() {\n            var editable = this.options.editable,\n                container = this.wrapper.find(\".k-grid-toolbar\");\n\n            if (editable && editable.create !== false) {\n                container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                    .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                    .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n            }\n\n            container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n            container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n        },\n\n        _processItems: function(tools) {\n            var that = this,\n                items = [],\n                messages = this.options.messages.commands;\n\n            tools.map(t => {\n                var command, searchText, icon, className, inputSize, template = \"\";\n\n                if (typeof t === 'string') {\n                    command = t.toLowerCase();\n                    t = {};\n                    t.text = messages[command] || command;\n                } else {\n                    command = (t.name || t.text || \"\").toLowerCase();\n                    t.text = t.text || messages[command] || command;\n                }\n\n                if (command === \"search\") {\n                    items.push({\n                        type: \"spacer\"\n                    });\n\n                    searchText = t.text || messages.search;\n                    icon = t.icon || t.iconClass || \"search\";\n\n                    inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                    template += `<span class='k-searchbox k-input ${inputSize} k-rounded-md k-input-solid k-grid-search'>`;\n                    template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                    template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                    template += \"</span>\";\n\n                    items.push({\n                        name: \"search\",\n                        overflow: \"never\",\n                        template: template\n                    });\n                } else {\n                    if (!command && !(isPlainObject(t) && t.template)) {\n                        throw new Error(\"Custom commands should have name specified\");\n                    }\n\n                    t = extend({ type: \"button\" }, defaultCommands[command], t);\n                    className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                    t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                    t.attributes = that._processAttr(t.attr);\n                    delete t.attr;\n\n                    if (!!className) {\n                        if (t.attributes[\"class\"] === undefined$1) {\n                            t.attributes[\"class\"] = \"\";\n                        }\n\n                        t.attributes[\"class\"] += (\" \" + className);\n                    }\n\n                    if (t.template) {\n                        delete t.type;\n                    }\n\n                    if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                        t.click = that[\"_\" + command + \"ClickHandler\"];\n                    }\n\n                    items.push(t);\n                }\n            });\n\n            return items;\n        },\n\n        _processAttr: function(attr) {\n            var attributes = {},\n                attrArray;\n\n            if (typeof attr === STRING && attr.length > 0) {\n                attrArray = attr.split(\" \");\n                attrArray.map(a => {\n                    var keyValue = a.split(\"=\");\n\n                    if (keyValue.length === 2) {\n                        attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                    }\n                });\n            } else if (isPlainObject(attr)) {\n                attributes = attr;\n            }\n\n            return attributes;\n        },\n\n        _createButton: function(command) {\n            var button,\n                template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                options = { className: className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                messages = this.options.messages.commands,\n                attributeClassMatch;\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                command = extend(true, {}, command);\n\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                    command.className += \" \" + options.className;\n                } else if (command.className === undefined$1) {\n                    command.className = options.className;\n                }\n\n                if (command.className.indexOf(\"k-primary\") > -1) {\n                    command.className = command.className.replace(\"k-primary\", \"\");\n                    command.themeColor = \"primary\";\n                }\n\n                if (commandName === \"edit\") {\n                    command = extend(true, {}, command);\n                    command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                    command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                }\n\n                if (command.attr) {\n                    if (isPlainObject(command.attr)) {\n                        command.attr = stringifyAttributes(command.attr);\n                    }\n\n                    if (typeof command.attr === STRING) {\n                        attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                        if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                            command.className += \" \" + attributeClassMatch[1];\n                        }\n                    }\n                }\n\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n            }\n\n            button = kendo.template(template)(options);\n\n            if (!command.template) {\n                return kendo.html.renderButton($(button), options);\n            } else {\n                return button;\n            }\n        },\n\n        _hasFooters: function() {\n            return !!this.footerTemplate ||\n                !!this.groupFooterTemplate ||\n                (this.footer && this.footer.length > 0) ||\n                this.wrapper.find(\".k-grid-footer\").length > 0;\n        },\n\n        _groupable: function() {\n            var that = this;\n\n            if (that._groupableClickHandler) {\n                that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n            } else {\n                that._groupableClickHandler = function(e) {\n                    var element = $(this),\n                    groupRow = element.closest(TR);\n\n                    var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                    if (element.is(CARET_ALT_DOWN)) {\n                        if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                            that.collapseGroup(groupRow);\n                        }\n                    } else {\n                        if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                            that.expandGroup(groupRow);\n                        }\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                };\n            }\n\n            if (that._isLocked()) {\n                that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            } else {\n                that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            }\n\n            that._attachGroupable();\n        },\n\n        _attachGroupable: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                groupable = that.options.groupable,\n                draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n            if (groupable && groupable.enabled !== false) {\n                if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                    $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                }\n\n                if (that.groupable) {\n                    that._destroyGroupable();\n                }\n\n                if (browser.chrome) {\n                    wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                    wrapper.find(filter).css(\"touch-action\", NONE);\n                }\n\n                that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                    draggable: that._draggableInstance,\n                    groupContainer: \">div.k-grouping-header\",\n                    dataSource: that.dataSource,\n                    draggableElements: filter,\n                    filter: filter,\n                    size: that.options.size,\n                    allowDrag: that.options.reorderable,\n                    enableContextMenu: !!that.options.contextMenu,\n                    removeGroup: function(e) {\n                        that._showUngroupedColumn(e);\n                    },\n                    change: function(e) {\n                        if (that.trigger(\"group\", { groups: e.groups })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            that._hideGroupedColumns(e.groups);\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    }\n                }));\n\n                that._addGroupableOptionsToHeader();\n            }\n        },\n\n        _showUngroupedColumn: function(group) {\n            var columns = leafColumns(this.columns);\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                    this.showColumn(columns[i]);\n                }\n            }\n        },\n\n        _hideGroupedColumns: function(groups) {\n            if (!groups) {\n                return;\n            }\n            var columns = leafColumns(this.columns);\n            var fields = [];\n            var i;\n\n            for (i = 0; i < groups.length; i++) {\n                if (groups[i].colID) {\n                    fields.push(groups[i].colID);\n                }\n            }\n\n            for (i = 0; i < columns.length; i++) {\n                if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                    this.hideColumn(columns[i]);\n                }\n            }\n        },\n\n        _resetEndless: function() {\n            var that = this;\n            that.dataSource.options.endless = null;\n            that._endlessPageSize = that.dataSource.options.pageSize;\n            that.dataSource._skip = 0;\n            that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n            that.dataSource._page = 1;\n        },\n\n        _addGroupableOptionsToHeader: function() {\n            var that = this;\n            var columns = flatColumns(that.columns);\n            var columnFieldMap = {};\n            var field = \"\";\n            var headerCells = that._headerCells();\n            var cellFieldAttr = \"\";\n            var headerCell;\n            var columnOptions;\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                field = columns[i].field;\n                columnFieldMap[columns[i].field] = columns[i];\n            }\n\n            for (i = 0; i < headerCells.length; i++) {\n                headerCell = headerCells.eq(i);\n                cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                columnOptions = columnFieldMap[cellFieldAttr];\n\n                if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                    headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                }\n            }\n        },\n\n        _destroyGroupable: function() {\n            var that = this;\n\n            if (that.groupable && that.groupable.element) {\n                that.groupable.element.kendoGroupable(\"destroy\");\n            }\n\n            that.groupable = null;\n\n            that._removeGroupableOptionsFromHeader();\n        },\n\n        _removeGroupableOptionsFromHeader: function() {\n            var that = this;\n            var headerCells = that._headerCells();\n\n            for (var i = 0; i < headerCells.length; i++) {\n                headerCells.eq(i).removeData(GROUP_SORT);\n            }\n        },\n\n        _continuousItems: function(filter, cell) {\n            if (!this.lockedContent) {\n                return;\n            }\n\n            var that = this;\n\n            var elements = that.table.add(that.lockedTable);\n\n            var lockedItems = $(filter, elements[0]);\n            var nonLockedItems = $(filter, elements[1]);\n            var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n            var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n            var result = [];\n\n            for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                push.apply(result, lockedItems.slice(idx, idx + columns));\n                push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n            }\n\n            return result;\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                cell,\n                notString = [],\n                isLocked = that._isLocked(),\n                selectable = that.options.selectable;\n\n            if (selectable) {\n\n                if (that.selectable) {\n                    that.selectable.destroy();\n                }\n\n                that._selectedIds = {};\n\n                selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                multi = selectable.multiple;\n                cell = selectable.cell;\n\n                if (that._hasDetails()) {\n                    notString[notString.length] = \".k-detail-row\";\n                }\n                if (that.options.groupable || that._hasFooters() || that._groups()) {\n                    notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                }\n\n                notString = notString.join(\",\");\n\n                if (notString !== \"\") {\n                    notString = \":not(\" + notString + \")\";\n                }\n\n                var elements = that.table;\n                if (isLocked) {\n                    elements = elements.add(that.lockedTable);\n                }\n\n                var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                that.selectable = new kendo.ui.Selectable(elements, {\n                    filter: filter,\n                    aria: true,\n                    multiple: multi,\n                    holdToDrag: !!(that._isMobile || kendo.support.mobileOS),\n                    toggleable: !!(that._isMobile || kendo.support.mobileOS),\n                    dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                    changing: function(e) {\n                        if (that.trigger(CHANGING, { target: e.target, originalEvent: e.originalEvent })) {\n                            e.preventDefault();\n                        }\n                    },\n                    change: function(e) {\n                        var selectedValues;\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n\n                        if (that._checkBoxSelection) {\n                            selectedValues = that.selectable.value();\n                            that._uncheckCheckBoxes();\n                            that._checkRows(selectedValues);\n                            if (selectedValues.length && selectedValues.length === that.items().length) {\n                                that._toggleHeaderCheckState(true);\n                            } else {\n                                that._toggleHeaderCheckState(false);\n                            }\n                        }\n\n                        if (e.event) {\n                            that.trigger(CHANGE);\n                        }\n                    },\n                    useAllItems: isLocked && multi && cell,\n                    relatedTarget: function(items) {\n                        if (cell || !isLocked) {\n                            return;\n                        }\n\n                        var related;\n                        var result = $();\n                        for (var idx = 0, length = items.length; idx < length; idx ++) {\n                            related = that._relatedRow(items[idx]);\n\n                            if (inArray(related[0], items) < 0) {\n                                result = result.add(related);\n                            }\n                        }\n\n                        return result;\n                    },\n                    continuousItems: function() {\n                        return that._continuousItems(filter, cell);\n                    },\n                    ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                    addIdToRanges: true\n                });\n\n                if (that.options.navigatable) {\n                    elements.on(\"keydown\" + NS, function(e) {\n                        var current = that.current();\n                        var target = e.target;\n                        var eventObject = { event: e };\n                        var triggerChange;\n                        var triggerChanging;\n                        var lastSelection;\n                        if (!current) {\n                            return;\n                        }\n                        if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                            !current.is(\".k-edit-cell,.k-header\") &&\n                            current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n                                triggerChanging = triggerChange || (multi && current.hasClass(SELECTED) && e.ctrlKey);\n\n                                if (triggerChanging && that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                    return;\n                                }\n\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            that.trigger(CHANGE);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                                if (triggerChange) {\n                                    that.trigger(CHANGE);\n                                }\n                        } else if (!cell &&\n                            ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                          ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                           (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                           (e.shiftKey && e.keyCode == keys.UP) ||\n                           (e.shiftKey && e.keyCode == keys.DOWN) ||\n                           (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            current = current.parent();\n\n                            if (that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                return;\n                            }\n\n                            lastSelection = that.selectable.value();\n\n                            if (isLocked) {\n                                current = current.add(that._relatedRow(current));\n                            }\n\n                            if (multi) {\n                                if (!that.selectable._lastActive) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                if (!compareElements(lastSelection, that.selectable.value())) {\n                                    that.trigger(CHANGE, eventObject);\n                                }\n                            } else if (!current.hasClass(SELECTED)) {\n                                that.selectable.clear();\n                                that.selectable.value(current);\n                                that.trigger(CHANGE);\n                            }\n                        }\n                    });\n                }\n            }\n        },\n\n        _clipboard: function() {\n            var options = this.options;\n            var selectable = options.selectable;\n\n            if (selectable && options.allowCopy) {\n                var grid = this;\n                if (!options.navigatable) {\n                    grid.table.attr(TABINDEX, 0);\n\n                    grid.table.add(grid.lockedTable)\n                        .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        })\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                }\n                grid.copyHandler = grid.copySelection.bind(grid);\n                grid.updateClipBoardState = function() {\n                    if (grid.areaClipBoard) {\n                        grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                    }\n                };\n                grid.bind(\"change\",grid.updateClipBoardState);\n                grid.wrapper.on(\"keydown\", grid.copyHandler);\n                grid.clearAreaHandler = grid.clearArea.bind(grid);\n                grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n            }\n        },\n\n        copySelectionToClipboard: function(includeHeaders) {\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n            document.execCommand('copy');\n        },\n\n        copySelection: function(e) {\n            if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                $(e.target).is(\"input:visible,textarea:visible\") ||\n                (window.getSelection && window.getSelection().toString()) ||\n                (document.selection && document.selection.createRange().text) ) {\n                return;\n            }\n\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n\n        },\n\n        _createAreaClipBoard: function() {\n            if (!this.areaClipBoard) {\n                this.areaClipBoard =\n                    $(\"<textarea />\")\n                    .css({\n                        position: \"fixed\",\n                        top: \"50%\",\n                        left: \"50%\",\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    })\n                    .appendTo(this.wrapper);\n            }\n        },\n\n        getTSV: function(includeHeaders) {\n            var grid = this;\n            var selected = grid.select();\n            var delimeter = \"\\t\";\n            var allowCopy = grid.options.allowCopy;\n            var onlyVisible = true;\n            var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n            if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                delimeter = allowCopy.delimeter;\n            }\n            var text = \"\";\n            if (selected.length) {\n                if (selected.eq(0).is(TR)) {\n                    selected = selected.find(\"td:not(.k-group-cell)\");\n                }\n                if (onlyVisible) {\n                    selected.filter(\":visible\");\n                }\n\n                var result = [];\n                var cellsOffset = this.columns.length;\n                var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                var inLockedArea = true;\n                var fields = [];\n                var field;\n                var columns = visibleLeafColumns(this.columns);\n\n                $.each(selected, function(idx, cell) {\n                    cell = $(cell);\n                    field = grid._getCellField(cell, hasLockedCols);\n\n                    var tr = cell.closest(TR);\n                    var rowIndex = tr.index();\n                    var cellIndex = cell.index();\n                    if (onlyVisible) {\n                        cellIndex -= cell.prevAll(\":hidden\").length;\n                    }\n                    if (lockedCols && inLockedArea) {\n                        inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                    }\n                    if (grid._groups() && inLockedArea) {\n                        cellIndex -= grid._groups();\n                    }\n                    cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                    if (field) {\n                        fields[cellIndex] = field;\n                    }\n                    if (cellsOffset > cellIndex) {\n                        cellsOffset = cellIndex;\n                    }\n                    var cellText = cell.text();\n                    if (!result[rowIndex]) {\n                        result[rowIndex] = [];\n                    }\n                    result[rowIndex][cellIndex] = cellText;\n                });\n\n                var rowsOffset = result.length;\n                result = $.each(result, function(idx, val) {\n                    if (val) {\n                        result[idx] = val.slice(cellsOffset);\n                        if (rowsOffset > idx) {\n                            rowsOffset = idx;\n                        }\n                    }\n                });\n\n                if (includeHeaders && fields.length) {\n                    result.splice(rowsOffset, 0, fields.map(function(field) {\n                        return getTitle(field, columns);\n                    }));\n\n                    var headerIndex = result.findIndex(function(el) {\n                        return el !== undefined$1;\n                    });\n\n                    result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                }\n\n                $.each(result.slice(rowsOffset), function(idx, val) {\n                    if (val) {\n                        text += val.join(delimeter) + \"\\r\\n\";\n                    } else {\n                        text += \"\\r\\n\";\n                    }\n                });\n            }\n            return text;\n        },\n\n        clearArea: function(e) {\n            if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                focusTable(this.table, true);\n            }\n\n            if (this.areaClipBoard) {\n                this.areaClipBoard.remove();\n                this.areaClipBoard = null;\n            }\n        },\n\n        _adaptiveColumns: function() {\n            var that = this;\n\n            if (that._anyColumnHasMediaQuery()) {\n                that._setColumnsMediaVisibility(that.columns);\n                that._attachColumnMediaResizeHandler();\n            }\n        },\n\n        _anyColumnHasMediaQuery: function() {\n            return this._columnsWithMediaQuery().length;\n        },\n\n        _columnsWithMediaQuery: function() {\n            return columnsWithMedia(this.columns);\n        },\n\n        _attachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            that._detachColumnMediaResizeHandler();\n            that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n            $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n        },\n\n        _detachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            if (that._columnMediaResizeHandler) {\n                $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n            }\n        },\n\n        _onColumnMediaResize: function() {\n            var that = this;\n            that._setColumnsMediaVisibility(that.columns);\n            that._setContentMediaWidth();\n        },\n\n        _setColumnsMediaVisibility: function(columns) {\n            var cols = columns || [];\n\n            for (var i = 0; i < cols.length; i++) {\n                this._setColumnMediaVisibility(cols[i]);\n            }\n        },\n\n        _setColumnMediaVisibility: function(column) {\n            var that = this;\n\n            if (isUndefined(column.media)) {\n                that._setColumnsMediaVisibility(column.columns);\n            } else {\n                if (columnMatchesMedia(column)) {\n                    that._showColumnByMedia(column);\n\n                    if (!column.hidden) {\n                        that._setColumnsMediaVisibility(column.columns);\n                    }\n                } else {\n                    that._hideColumnByMedia(column);\n                }\n            }\n        },\n\n        _showColumnByMedia: function(column) {\n            if (!column.hidden) {\n                // \"hidden\" has a priority over \"matchesMedia\"\n                this.showColumn(column);\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _hideColumnByMedia: function(column) {\n            var initiallyHidden = column.hidden;\n\n            if (!initiallyHidden) {\n                column._hideByMedia = true;\n                this.hideColumn(column);\n                column._hideByMedia = false;\n\n                // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                column.hidden = initiallyHidden;\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _setContentMediaWidth: function() {\n            var that = this;\n            var options = that.options;\n            var isLocked = that._isLocked();\n            var footer;\n\n            if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                if (isLocked && that.lockedFooter) {\n                    footer = that.lockedFooter.children(\"table\");\n                } else if (that.footer) {\n                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                }\n\n                if (!footer || !footer[0]) {\n                    footer = $();\n                }\n\n                var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                var contentTable = isLocked ? that.lockedTable : that.table;\n\n                var headerColumns = header.find(\"th\");\n                var headerColgroup = header.find(\"colgroup\");\n\n                var headerColumnsCount = headerColumns.length;\n                var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                var totalHeaderWidth = 0;\n\n                if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                    var currentHeaderWidth = header.css(WIDTH);\n\n                    for (var i = 0; i < headerColumnsCount; i++) {\n                        if (isElementVisible(headerColumns[i])) {\n                            var columnWidth;\n                            var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                            var colgroupChild = headerColgroup.children()[cellIndex];\n                            var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                            if (columnStyleWidth !== \"\") {\n                                columnWidth = parseFloat(columnStyleWidth);\n                            } else {\n                                // remove the header width to calculate the height of a column without fixed width\n                                header.css(WIDTH, AUTO);\n                                columnWidth = outerWidth(headerColumns.eq(i));\n                                header.css(WIDTH, currentHeaderWidth);\n                            }\n\n                            totalHeaderWidth += columnWidth;\n                        }\n                    }\n\n                    contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                    header.css('width', totalHeaderWidth);\n                    footer.css('width', totalHeaderWidth);\n                    that._updateStickyColumns();\n                }\n            }\n        },\n\n        _minScreenSupport: function() {\n            var any = this.hideMinScreenCols();\n\n            if (any) {\n                this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                $(window).on(\"resize\", this.minScreenResizeHandler);\n            }\n        },\n\n        hideMinScreenCols: function() {\n            var cols = this.columns,\n                screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n            return this._iterateMinScreenCols(cols, screenWidth);\n        },\n\n        _iterateMinScreenCols: function(cols, screenWidth) {\n            var any = false;\n\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                var minWidth = col.minScreenWidth;\n                if (minWidth !== undefined$1 && minWidth !== null) {\n                    any = true;\n                    if (minWidth > screenWidth) {\n                        this.hideColumn(col);\n                    } else {\n                        this.showColumn(col);\n                    }\n                }\n                if (!col.hidden && col.columns) {\n                    any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                }\n            }\n            return any;\n        },\n\n        _stickyColumns: function() {\n            var that = this;\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(false);\n            }\n        },\n\n        _updateStickyColumns: function() {\n            var that = this;\n            var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(true);\n                that._templates();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n\n                if (that._hasFilterRow()) {\n                    that._updateStickyFilterCells();\n                }\n            }\n        },\n\n        _updateStickyFilterCells: function() {\n            var that = this;\n            var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n            if (filterCells.length) {\n                filterCells.each(function() {\n                    var th = $(this);\n                    var column = th.data(\"column\");\n\n                    if (column.sticky) {\n                        if (isPlainObject(column.stickyStyle)) {\n                            th.css({\n                                left: column.stickyStyle.left || \"\",\n                                right: column.stickyStyle.right || \"\"\n                            });\n                        }\n\n                        th.addClass(STICKY_HEADER_CLASS);\n                    } else {\n                        th.css({\n                            left: \"\",\n                            right: \"\"\n                        });\n\n                        th.removeClass(STICKY_HEADER_CLASS);\n                    }\n                });\n            }\n        },\n\n        _anyStickyColumns: function() {\n            var that = this;\n\n            return stickyColumns(that.columns).length;\n        },\n\n        _setStickyColumns: function(updateStyles) {\n            var that = this;\n            var columns = stickyColumns(that.columns);\n            var visibleColumns = visibleStickyColumns(that.columns);\n            var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n            that._removeStickyAttributes(columns);\n            that._setStickyClassAttributes(columns);\n            that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n            if (updateStyles) {\n                that._setStickyStyles(visibleColumns, stickyWidths);\n            }\n        },\n\n        _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n            var that = this;\n            var i;\n            var column;\n            var columnWidth;\n            var nextColumnLeft;\n            var nextColumnRight;\n            var left = isRtl ? \"right\" : \"left\";\n            var right = isRtl ? \"left\" : \"right\";\n            var stickyWidths = {\n                left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n            };\n\n            for (i = 0; i < columns.length - 1; i++) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                stickyWidths[left][i + 1] = nextColumnLeft;\n            }\n\n            for (i = columns.length - 1; i > 0; i--) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                stickyWidths[right][i - 1] = nextColumnRight;\n            }\n\n            return stickyWidths;\n        },\n\n        _setStickyClassAttributes: function(columns, masterIndex) {\n            var that = this;\n            var i;\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    if (!masterIndex && i) {\n                        masterIndex = i;\n                    }\n\n                    that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                }\n\n                if (masterIndex) {\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n            }\n        },\n\n        _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n            var that = this;\n            var i;\n            var column;\n            var stickyLeft;\n            var stickyRight;\n            var stickyStyle;\n            var childCols;\n            var childStickyWidths;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                stickyLeft = stickyWidths.left[i];\n                stickyRight = stickyWidths.right[i];\n                stickyStyle = { left: stickyLeft + \"px\", right: stickyRight + \"px\" };\n\n                if (column.columns) {\n                    childCols = visibleChildColumns([column]);\n                    childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                    that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                    if (updateStyles) {\n                        that._setStickyStyles(childCols, childStickyWidths);\n                    }\n                }\n\n                addColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n\n                column.stickyStyle = stickyStyle;\n            }\n        },\n\n        _removeStickyAttributes: function(columns) {\n            var that = this;\n            var i;\n            var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n            var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n            var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n            var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    that._removeStickyAttributes(childColumns([column]));\n                }\n\n                removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), '', true);\n\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), '', true);\n\n                removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), '', true);\n            }\n        },\n\n        _setStickyStyles: function(columns, stickyWidths) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var left;\n            var right;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                left = stickyWidths.left[i];\n                right = stickyWidths.right[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.addClass(STICKY_HEADER_CLASS);\n                if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                    header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                setLeftAndRightStyles(header, left, right);\n\n                if (column.columns) {\n                    continue;\n                }\n\n                if (that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.addClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, left, right);\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, left, right);\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, left, right);\n                    }\n                }\n            }\n        },\n\n        _removeStickyStyles: function(columns) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.removeClass(STICKY_HEADER_CLASS);\n                header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                setLeftAndRightStyles(header, \"\", \"\");\n\n                if (column.columns) {\n                    that._removeStickyStyles(column.columns);\n                    continue;\n                }\n\n                if (column.footerTemplate && that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.removeClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, \"\", \"\");\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, \"\", \"\");\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, \"\", \"\");\n                    }\n                }\n            }\n        },\n\n        _getColumnHeader: function(column) {\n            var that = this;\n            var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n            return header;\n        },\n\n        _sumColumnWidth: function(column) {\n            var that = this;\n            var width = 0;\n\n            if (column.columns) {\n                width = that._sumCurrentWidths(leafColumns([column]));\n            } else {\n                width = that._sumCurrentWidths([column]);\n            }\n\n            return width;\n        },\n\n        _sumCurrentWidths: function(cols) {\n            var that = this;\n            var width = 0;\n            var colWidth = 0;\n            var col;\n            var header;\n            var i;\n            var length = cols.length;\n\n            for (i = 0; i < length; i++) {\n                col = cols[i];\n                header = that._getColumnHeader(col);\n\n                if (!col.hidden && columnMatchesMedia(col)) {\n                    colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                    width += colWidth ? parseInt(colWidth, 10) : 0;\n                }\n            }\n\n            return width;\n        },\n\n        _belongsToGrid: function(element) {\n            return this.wrapper[0] === element.closest(WRAPPER)[0];\n        },\n\n        getSelectedData: function() {\n            var that = this;\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var result = [];\n            var visibleColumns = visibleLeafColumns(that.columns);\n\n            for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n            }\n\n            if (selectedSingleItems.length) {\n                result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n            }\n\n            return result;\n        },\n\n        exportSelectedToExcel: function(includeHeaders) {\n            if (!kendo.excel || !kendo.ooxml) {\n                throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n            }\n\n            var that = this;\n            var excel = this.options.excel || {};\n            var visibleColumns = visibleLeafColumns(that.columns);\n            var exporter = new kendo.excel.ExcelExporter({});\n            var columnHandler = function() {return { autoWidth: true };};\n            var book = {\n                sheets: [{\n                    columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                    rows: [],\n                    freezePane: {},\n                    filter: false\n                }]\n            };\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var idx;\n            var exportData = [];\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var sortHandler = exportDataSort.bind(that);\n\n            for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n            }\n\n            if (exportData.length) {\n                that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n            }\n            exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n            if (exportData.length) {\n                if (hasLockedCols) {\n                    exportData = exportData.sort(sortHandler);\n                }\n                that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n            }\n\n            if (book.sheets[0].rows.length) {\n                var workbook = new kendo.ooxml.Workbook(book);\n\n                if (!workbook.options) {\n                    workbook.options = {};\n                }\n                workbook.options.skipCustomHeight = true;\n\n                workbook.toDataURLAsync().then(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: book.fileName || excel.fileName,\n                        proxyURL: excel.proxyURL,\n                        forceProxy: excel.forceProxy\n                    });\n                });\n            }\n        },\n\n        _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n            var idx = 0;\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n            var item;\n\n            for (idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                exporter.data = [item];\n                this._setExporterColumns(exporter, visibleColumns, item);\n                this._createExportRows(book, exporter, includeHeaders);\n            }\n        },\n\n        _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n\n            exporter.data = data;\n            this._setExporterColumns(exporter, visibleColumns, data[0]);\n            this._createExportRows(book, exporter, includeHeaders);\n        },\n\n        _createExportRows: function(book, exporter, includeHeaders) {\n            book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n        },\n\n        _setExporterColumns: function(exporter, columns, item) {\n            exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                return Object.keys(item).indexOf(col.field) >= 0;\n            }), exporter._prepareColumn);\n        },\n\n        _mapSelectionToData: function(elements, visibleColumns, columnsFilter) {\n            var that = this;\n            var elementType = elements[0][0].nodeName;\n            var isRowSelection = elementType === 'TR';\n            var dataItem;\n            var result = {};\n            var element;\n            var curr;\n            var field;\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var column;\n\n            for (var i = 0; i < elements.length; i++) {\n                element = elements[i];\n                dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                if (isRowSelection) {\n                    result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                } else {\n                    field = that._getCellField(element, hasLockedCols);\n\n                    if (!field) {\n                        continue;\n                    }\n\n                    curr = result[dataItem.uid];\n\n                    if (!curr) {\n                        curr = result[dataItem.uid] = {};\n                    }\n\n                    column = findColumnByField(visibleColumns, field);\n\n                    if (!column || (columnsFilter && !columnsFilter(column))) {\n                        continue;\n                    }\n\n                    curr[field] = dataItem[field];\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                result[id].uid = id;\n                return result[id];\n            });\n        },\n\n        _getCellField: function(cell, hasLockedCols) {\n            var grid = this;\n            var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n            var fieldAttr = kendo.attr('field');\n            var index = kendo.attr('index');\n\n            if (hasLockedCols) {\n                return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            } else {\n                return grid.thead.find(\"th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            }\n        },\n\n        _relatedRow: function(row) {\n            var lockedTable = this.lockedTable;\n            row = $(row);\n\n            if (!lockedTable) {\n                return row;\n            }\n\n            var table = row.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr\").index(row);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr\").eq(index);\n        },\n\n        _relatedCell: function(cell) {\n            var lockedTable = this.lockedTable;\n\n            cell = $(cell);\n\n            if (!lockedTable) {\n                return cell;\n            }\n\n            var table = cell.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr>td\").index(cell);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr>td\").index(index);\n        },\n\n        clearSelection: function() {\n            var that = this;\n\n            if (that.selectable && !that._checkBoxSelection) {\n                that.selectable.clear();\n            }\n\n            if (that._checkBoxSelection) {\n                that._deselectCheckRows(that.select());\n                return;\n            }\n\n            if (that.options.persistSelection) {\n                that._persistSelectedRows();\n            } else {\n                that._selectedIds = {};\n            }\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable,\n                selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                cell = selectableoptions.cell;\n\n            items = that.table.add(that.lockedTable).find(items);\n            if (items.length) {\n                if (selectable && !selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        if (cell) {\n                            return that._relatedCell(this);\n                        }\n                        else {\n                            return that._relatedRow(this);\n                        }\n                    }));\n                }\n\n                if (selectable && !that._checkBoxSelection) {\n                    selectable.value(items);\n                } else {\n                    that._checkRows(items);\n                    if (that.select().length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                    }\n                }\n\n                if (!cell) {\n                    that._persistSelectedRows();\n                }\n\n                return;\n            }\n\n            return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n        },\n\n        _toggleHeaderCheckState: function(checked) {\n            var that = this;\n            if (checked) {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                    .attr(ARIA_LABEL, \"Deselect all rows\");\n            } else {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                    .attr(ARIA_LABEL, \"Select all rows\");\n            }\n        },\n\n        _uncheckCheckBoxes: function() {\n            var that = this;\n            var tables = that.table.add(that.lockedTable);\n\n            tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n        },\n\n        _deselectCheckRows: function(items) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\");\n            items = that.table.add(that.lockedTable).find(items);\n\n            if (that._isLocked()) {\n                items = items.add(items.map(function() {\n                    return that._relatedRow(this);\n                }));\n            }\n\n            items.each(function() {\n                $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n            });\n            that._toggleHeaderCheckState(false);\n\n            that._persistSelectedRows();\n\n        },\n\n        _checkRows: function(items) {\n            items.each(function() {\n                $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                    .prop(\"checked\", true)\n                    .attr(ARIA_LABEL, \"Deselect row\")\n                    .attr(ARIA_CHECKED, true);\n            });\n        },\n\n        _persistSelectedRows: function() {\n            var that = this,\n                key,\n                dataItem,\n                allRows = that.items(),\n                dataSourceOptions = that.dataSource.options,\n                schema = dataSourceOptions.schema,\n                modelId,\n                selectedViewIds = {};\n\n            if (!schema || !schema.model || !that._data) {\n                return;\n            }\n\n            modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n            if (!modelId) {\n                return;\n            }\n\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                that._selectedIds = {};\n            }\n\n            that.select().each(function() {\n                dataItem = that.dataItem(this);\n                selectedViewIds[dataItem[modelId]] = true;\n            });\n\n            for (var i = 0; i < allRows.length; i ++) {\n                dataItem = that.dataItem(allRows[i]);\n                key = dataItem[modelId];\n                if (selectedViewIds[key]) {\n                    that._selectedIds[key] = true;\n                } else {\n                    delete that._selectedIds[key];\n                }\n            }\n        },\n\n        selectedKeyNames: function() {\n            var that = this,\n                ids = [];\n            for (var property in that._selectedIds) {\n                ids.push(property);\n            }\n            ids.sort();\n            return ids;\n        },\n\n        _updateCurrentAttr: function(current, next) {\n            var headerId = $(current).data(\"headerId\");\n            var nextId;\n            var descId;\n\n            $(current).removeClass(FOCUSED);\n            this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n            if (headerId) {\n                headerId = headerId.replace(this._cellId, \"\");\n                $(current).attr(ID, headerId);\n            } else {\n                $(current).removeAttr(ID);\n            }\n\n            nextId = next.attr(ID);\n\n            if (nextId != this._cellId) {\n                next.data(\"headerId\", nextId);\n            }\n\n            if (!!nextId) {\n                descId = nextId;\n            } else {\n                next.attr(ID, this._cellId);\n            }\n\n            next.addClass(FOCUSED);\n            this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n            this._current = next;\n        },\n\n        _scrollCurrent: function() {\n            var current = this._current;\n            var scrollable = this.options.scrollable;\n\n            if (!current || !scrollable) {\n                return;\n            }\n\n            var row = current.parent();\n            var tableContainer = row.closest(\"table\").parent();\n\n            var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n            var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n            var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n            //adjust scroll vertically\n            if (isInContent) {\n                if (this.virtualScroll) {\n                    var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                    if (this.virtualScroll.rows) {\n                        this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                        this.virtualScrollable.scrollIntoView(row);\n                    } else {\n                        this._rowVirtualIndex = rowIndex;\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                } else {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n            }\n\n            if (this.lockedContent) {\n                //sync locked and non-locked content scrollTop\n                this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n            }\n\n            //adjust scroll horizontally, if not inside locked tables\n            if (!isInLockedContainer) {\n                this._scrollTo(current[0], scrollableContainer);\n            }\n        },\n\n        current: function(next) {\n            return this._setCurrent(next, true);\n        },\n\n        _setCurrent: function(next, preventTrigger, preventScroll) {\n            var current = this._current;\n\n            next = $(next);\n\n            if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                this._filterFocusable().attr(TABINDEX, -1);\n            }\n\n            if (next.length) {\n                if (!current || current[0] !== next[0]) {\n                    var parent = next.parent();\n                    var siblings = parent.children(DATA_CELL);\n                    var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                    if (this._hasVirtualColumns()) {\n                        this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                    }\n                    this._updateCurrentAttr(current, next);\n\n                    if (!preventScroll) {\n                        this._scrollCurrent();\n                    }\n\n                    if (!preventTrigger) {\n                        this.trigger(NAVIGATE, {\n                            element: next\n                        });\n                    }\n                }\n            }\n\n            if (next && next.length) {\n                this._lastCellIndex = next.parent().children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED).index(next);\n            }\n\n            this._updateSelctCheckbox(current, next);\n\n            return this._current;\n        },\n\n        _removeCurrent: function() {\n            if (this._current) {\n                this._current.removeClass(FOCUSED);\n                this._current = null;\n            }\n        },\n\n        _updateSelctCheckbox: function(current, next) {\n            var nextCheckbox;\n\n            if (next && next.length) {\n                nextCheckbox = next.find(\".k-select-checkbox\");\n\n                if (nextCheckbox.length > 0) {\n                    nextCheckbox.focus();\n                } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                    focusTable(this.table, true);\n                }\n            }\n        },\n\n        _scrollTo: function(element, container) {\n            var elementToLowercase = element.tagName.toLowerCase();\n            var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n            var table = $(element).closest(\"table\")[0];\n            var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n            var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n            var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n            var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n            var bottomDistance = elementOffset + elementOffsetDir;\n            var result = 0;\n            var ieCorrection = 0;\n            var firefoxCorrection = 0;\n\n            if (isRtl && isHorizontal) {\n                if (browser.msie || browser.edge) {\n                    ieCorrection = table.offsetLeft;\n                } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                    firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                }\n            }\n\n            containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n            if (containerScroll > elementOffset) {\n                result = elementOffset;\n            } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                if (elementOffsetDir <= containerOffsetDir) {\n                    result = (bottomDistance - containerOffsetDir);\n                } else {\n                    result = elementOffset;\n                }\n            } else {\n                result = containerScroll;\n            }\n\n            result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n            container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n        },\n\n        _navigatable: function() {\n            var that = this;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            //data tables - locked and non-locked\n            var dataTables = that.table.add(that.lockedTable);\n            //header tables - locked and non-locked\n            var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n            //the over wich keys will be handled\n            var tables = dataTables;\n\n            if (that.options.scrollable) {\n                //add the header table when the widget is scrollable\n                tables = tables.add(headerTables);\n            }\n\n            this._navigatableTables = tables;\n            this._headertables = headerTables;\n\n            //dettach all previous events\n            tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n            headerTables\n                .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n            //prevent propagation when clicked inside detail grid\n            dataTables\n                .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n            tables\n                //handle click on tables, will attempt to focus the table\n                .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                .on(\"focus\" + NS, that._tableFocus.bind(that))\n                .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n            that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n        },\n\n        _filterFocus: function(e) {\n            var header = e.target.closest(\"th\");\n\n            this._filterFocusable().attr(TABINDEX, 0);\n            this._setCurrent(header);\n            $(header).removeClass(FOCUSED);\n        },\n\n        _tableFocus: function() {\n            var current = this.current();\n            var table = this.lockedTable ? this.lockedTable : this.table;\n\n            //if there is already current, highlighted it\n            //otherwise highlight the first possible cell\n            if (current && current.is(\":visible\")) {\n                current.addClass(FOCUSED);\n            } else {\n                if (this._virtualColScroll) {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                } else {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                }\n            }\n\n            this.table.attr(TABINDEX, 0);\n        },\n\n        _tableBlur: function() {\n            var current = this.current();\n\n            if (current) {\n                current.removeClass(FOCUSED);\n            }\n        },\n\n        _findCellIndex: function(columns, startIndex, reversed) {\n            var cellIndex;\n            var i;\n\n            if (reversed) {\n                for (i = startIndex; i >= 0; i--) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            } else {\n                for (i = startIndex; i < columns.length; i++) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            }\n\n            return cellIndex;\n        },\n\n        _scrollToColumn: function(key, e) {\n            if (this._virtualCellIndex === undefined$1) {\n                return false;\n            }\n\n            var that = this;\n            var cellIndex = that._virtualCellIndex;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var scrollWidth = 0;\n\n            if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n            } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n            } else if (key == keys.HOME) {\n                cellIndex = that._findCellIndex(leafsCols, 0);\n            } else if (key == keys.END) {\n                cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n            }\n\n            for (var i = 0; i < cellIndex; i++) {\n                scrollWidth += leafsCols[i].width;\n            }\n\n            that._virtualCellIndex = cellIndex;\n            if (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            kendo.scrollLeft(that.content, scrollWidth);\n            return true;\n        },\n\n        _tableKeyDown: function(e) {\n            var current = this.current();\n            var virtualScroll = this.virtualScroll || {};\n            var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n            var target = $(e.target);\n            var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n            if (e.altKey && e.keyCode == keys.DOWN) {\n                this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                e.stopImmediatePropagation();\n                return;\n            }\n\n            // do not handle key down if request in progress\n            // or there isn't current set\n            if (requestInProgress) {\n                // swallow key events while in progress\n                e.preventDefault();\n                return;\n            }\n\n            if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                return;\n            }\n\n            if (!current) {\n                current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n            }\n\n            if (!current.length) {\n                return;\n            }\n\n            var handled = false;\n\n            if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                handled = this._focusToolbar();\n            }\n\n            if (canHandle && e.keyCode == keys.UP) {\n                handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.DOWN) {\n                handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                handled = this._handlePageDown();\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEUP) {\n                handled = this._handlePageUp();\n            }\n\n            if (canHandle && e.keyCode == keys.HOME) {\n                handled = this._handleHome(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.END) {\n                handled = this._handleEnd(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.SPACEBAR) {\n                handled = this._handleSpaceKey(current, e.ctrlKey);\n            }\n\n            if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                handled = this._handleEnterKey(current, e.currentTarget, target);\n            }\n\n            if (e.keyCode == keys.ESC) {\n                handled = this._handleEscKey(current, e.currentTarget);\n            }\n\n            if (e.keyCode == keys.TAB) {\n                handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n            }\n\n            if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault();\n                //required in hierarchy\n                e.stopPropagation();\n            }\n        },\n\n        _focusToolbar: function() {\n            var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n            if (focusable.length > 0) {\n                focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.collapseGroup(row);\n                } else {\n                    this.collapseRow(row);\n                }\n            } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n               this._moveColumn(current, true);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._prevHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                        if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.lockedTable[0], row[0])) {\n                                next = next.prevAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).last();\n                        } else {\n                            next = this._tabNext(current, currentTable, true);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container);\n\n                        next = this._prevHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.expandGroup(row);\n                } else {\n                    this.expandRow(row);\n                }\n             } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                this._moveColumn(current, false);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._nextHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                       if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.table[0], row[0])) {\n                                next = next.nextAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).first();\n                        } else {\n                            next = this._tabNext(current, currentTable, false);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container, true);\n\n                        next = this._nextHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveUp: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n               next = current.parent();\n               next = next.prevAll(ITEMROW).first();\n               next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n               next = this._prevVerticalCell(container, current);\n               if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container, true);\n\n                  next = this._prevVerticalCell(container, current);\n\n                  if (next[0]) {\n                      focusTable(this.table, true);\n                  }\n               }\n            }\n\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n\n            return true;\n        },\n\n        _moveDown: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index + 1);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n                next = this._nextVerticalCell(container, current);\n                if (!next[0]) {\n                    this._lastCellIndex = 0;\n                    container = this._verticalContainer(container);\n\n                    next = this._nextVerticalCell(container, current);\n                    if (next[0]) {\n                        focusTable(this.table, true);\n                    }\n                }\n            }\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(this._findVisibleCell(next));\n            this._lastCellIndex = tmp;\n            return true;\n        },\n\n        _moveColumn: function(current, isLeft) {\n            var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n            var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n            var oldIndex = elements.index($(current));\n            var offset = isLeft ? - 1 : 1;\n            var column = columns[oldIndex];\n            var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n            if (newIndex >= 0) {\n                this.reorderColumn(newIndex, column, isLeft);\n                this.trigger(COLUMNREORDER, {\n                    newIndex: newIndex,\n                    oldIndex: oldIndex,\n                    column: column\n                });\n            }\n        },\n\n        _handleHome: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var prev;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.HOME);\n                return true;\n            }\n\n            if (ctrl) {\n                if (this.lockedTable) {\n                    prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                } else {\n                    prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                }\n            } else if (isInBody || isInLockedTable) {\n                if (isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                prev = row.children(DATA_CELL).first();\n            }\n\n            if (prev && prev.length) {\n                this._setCurrent(prev);\n                return true;\n            }\n        },\n\n        _handleEnd: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var next;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.END);\n                return true;\n            }\n\n            if (ctrl) {\n                next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n            } else if (isInBody || isInLockedTable) {\n                if (!isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                next = row.children(DATA_CELL).last();\n            }\n\n            if (next && next.length) {\n                this._setCurrent(next);\n                return true;\n            }\n        },\n\n        _handlePageDown: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() + 1);\n\n            return true;\n        },\n\n        _handlePageUp: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() - 1);\n\n            return true;\n        },\n\n        _handleTabKey: function(current, currentTable, shiftKey, target) {\n            var isInCell = this.options.editable && this._editMode() == \"incell\";\n            var cell, filterFocusable;\n\n            if (!isInCell ||\n                current.is(\"th\") ||\n                (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n\n                        if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                            filterFocusable.first().trigger(\"focus\");\n\n                            return true;\n                        } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                            filterFocusable.last().trigger(\"focus\");\n\n                            return true;\n                        }\n                    }\n\n                    return false;\n            }\n\n            cell = $(activeElement()).closest(\".k-edit-cell\");\n\n            if (cell[0] && cell[0] !== current[0]) {\n                current = cell;\n            }\n\n            cell = this._tabNext(current, currentTable, shiftKey);\n\n            if (cell[0] === current[0]) {\n                return false;\n            }\n\n            if (cell.length) {\n                this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleEscKey: function(current) {\n            var active = activeElement();\n            var isInCell = this._editMode() == \"incell\";\n\n            if (!isInEdit(current)) {\n                if (current.has(active).length) {\n                    // return focus back to the table\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (isInCell) {\n                this.closeCell(true);\n            } else {\n                var currentIndex = $(current).parent().index();\n                if (active) {\n                    active.blur();\n                }\n                this.cancelRow(true);\n                if (currentIndex >= 0) {\n                    this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                }\n            }\n\n            focusTable(this.table, true);\n\n            return true;\n        },\n\n        _toggleCurrent: function(current, editable, hasDetails) {\n            var row = current.parent();\n\n            if (current.is(\".k-command-cell\")) {\n                return false;\n            }\n\n            if (row.is(\".k-filter-row\")) {\n                return false;\n            }\n\n            if (row.is(DOT + GROUPING_ROW)) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            if (!editable && hasDetails) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleSpaceKey: function(current, ctrlKey) {\n            var that = this;\n\n            if (!ctrlKey || !that.groupable || !current.hasClass(\"k-header\")) {\n                return;\n            }\n\n            var descriptors = that.groupable.descriptors();\n            var field = current.attr(kendo.attr(\"field\"));\n            var aggregates = that.groupable.aggregates();\n\n            if (that.groupable._canDrag(current)) {\n                descriptors.push({\n                    field: field,\n                    dir: \"asc\",\n                    aggregates: aggregates || []\n                });\n            } else {\n                descriptors = $.grep(descriptors, function(item)\n                {\n                    return item.field !== field;\n                });\n            }\n\n            that.dataSource.group(descriptors);\n\n            return true;\n        },\n\n        _handleEnterKey: function(current, currentTable, target) {\n            var editable = this.options.editable && this.options.editable.update !== false;\n            var container = target.closest(\"td\");\n            var hasDetails = this._hasDetails();\n            var link, filterFocusable;\n\n            if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                current = container;\n            }\n\n            if (current.is(\"th\")) {\n                // sort the column, if possible\n                link = current.find(\".k-link\");\n\n                if (current.has($(activeElement())).length > 0) {\n                    return false;\n                } else if (link.length) {\n                    link.click();\n                } else if (current.parent().hasClass(\"k-filter-row\")) {\n                    filterFocusable = this._filterFocusable();\n                    filterFocusable.attr(TABINDEX, 0);\n                    current.find(\":kendoFocusable\").first().focus();\n                } else {\n                    current.find(CHECKBOXINPUT).trigger(\"focus\");\n                }\n\n                return true;\n            }\n            if (this._toggleCurrent(current, editable, hasDetails)) {\n                return true;\n            }\n\n            var focusable = current.find(\":kendoFocusable\").first();\n            if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                focusable.trigger(\"focus\");\n\n                return true;\n            }\n\n            if (editable && !target.is(\":button,.k-button,textarea\")) {\n                if (!container[0]) {\n                    container = current;\n                }\n\n                this._handleEditing(container, false, currentTable);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _nextHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.nextAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).first();\n                    }\n\n                    //get the same row index in the new table\n                    return this._findVisibleCell(rows.eq(originalIndex).children(DATA_CELL_HIDDENINCLUDED).first());\n                }\n            }\n\n            return this._findVisibleCell(current.nextAll(DATA_CELL + \",[hidden]\").eq(0));\n        },\n\n        _prevHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.prevAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        var columns = lockedColumns(this.columns);\n                        mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).last();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).last();\n                }\n            }\n\n            cells = current.prevAll(DATA_CELL + \",[hidden]\");\n            let cellToFocus = this._findVisibleCell(cells.first());\n            if (cellToFocus.is(\".k-group-cell\")) {\n                return cellToFocus.next(DATA_CELL);\n            }\n\n            return cellToFocus;\n        },\n\n        _currentDataIndex: function(table, current) {\n            var index = current.attr(\"data-index\");\n\n            if (!index) {\n                return undefined$1;\n            }\n\n            var lockedColumnsCount = lockedColumns(this.columns).length;\n            if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                return index - lockedColumnsCount;\n            }\n\n            return index;\n        },\n\n        _findVisibleCell: function($cell) {\n            var col = $cell.index();\n            var row = $cell.closest('tr').index();\n            var $newFocus;\n\n            if ($cell.is('[hidden]')) {\n                $newFocus = $cell.prevAll(':not([hidden])').first();\n                var hiddenCount = $cell.prevUntil(':not([hidden])', '[hidden]').length;\n                if (!$newFocus.attr('colspan') || ($newFocus.attr('colspan') > 1 && $newFocus.attr('colspan') <= hiddenCount + 1)) {\n                    $newFocus = $cell.prevAll('[hidden]').last();\n                    if ($newFocus.length === 0) {\n                        return $cell.closest('tr').prevAll().find(`td:nth-of-type(${col + 1}):visible`).last();\n                    }\n\n                    while (!$newFocus.attr('rowspan') && !($newFocus.attr('rowspan') > 1 && $newFocus.attr('rowspan') != row - $newFocus.closest('tr').index()) && Math.abs($newFocus.index() - col) != $newFocus.attr('colspan')) {\n                        $newFocus = $newFocus.closest('tr').prevAll().find('td, th').eq(col).first();\n                        if ($newFocus.length === 0) {\n                            $newFocus = $cell;\n                            break;\n                        }\n                    }\n                }\n            } else {\n                $newFocus = $cell;\n            }\n\n            return $newFocus;\n        },\n\n        _prevVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n\n            //current is in the header, but not at the last level of multi-level columns\n            if (index || current.hasClass(\"k-header\")) {\n                cells = parentColumnsCells(current);\n                return cells.eq(cells.length - 2);\n            }\n\n            //check this out\n            index = Math.max(row.children(DATA_CELL_HIDDENINCLUDED).index(current), this._lastCellIndex || 0);\n\n            //if current is inside filter row\n            if (row.hasClass(\"k-filter-row\")) {\n                let offset = rows.last().children(\".k-group-cell\").length;\n\n                return leafDataCells(container).filter(isCellVisible).eq(Math.max(0, index - offset));\n            }\n\n            //move up to header container\n            if (rowIndex == -1) {\n                if (this._hasVirtualColumns()) {\n                    index = this._virtualCellIndex;\n                }\n                //is there filter row in the header container\n                row = container.find(\"tr.k-filter-row:visible\");\n                if (!row[0]) {\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                        index--;\n                    }\n\n                    let offset = 0;\n                    if (current.parent().is(\".k-table-group-row\")) {\n                        offset = rows.last().children(\".k-group-cell\").length;\n                    }\n\n                    return leafDataCells(container).eq(Math.max(0, index - offset));\n                } else {\n                    if (this._hasDetails()) {\n                        index--;\n                    }\n                }\n            } else {\n                row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n            }\n\n            cells = row.children(DATA_CELL_HIDDENINCLUDED);\n            if (cells.length > index) {\n                let nextCell = cells.eq(index);\n                if (nextCell.is(\".k-group-cell\")) {\n                    nextCell = nextCell.nextAll(DATA_CELL_HIDDENINCLUDED + \":not(.k-group-cell)\").first();\n                }\n\n                return this._findVisibleCell(nextCell);\n            }\n\n            return cells.eq(0);\n        },\n\n        _nextVerticalCell: function(container, current) {\n            var cells;\n            var originalRow;\n            var row = originalRow = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n            var virtualScroll = this.virtualScroll || {};\n            var colspan;\n            //current is in the header, but not at the last level of multi-level columns\n            //and we are not changing the table\n            if (rowIndex != -1 && index === undefined$1 && current.hasClass(\"k-header\")) {\n                return childColumnsCells(current).eq(1);\n            }\n\n            index = index ? parseInt(index, 10) : row.children(DATA_CELL_HIDDENINCLUDED).index(current);\n            index = Math.max(index, this._lastCellIndex || 0);\n\n            //move down to data container\n            if (rowIndex == -1) {\n                row = rows.eq(0);\n                if (virtualScroll.columns) {\n                    colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                    index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                }\n                // in hierarchical grid we need to correct the index\n                // since the k-hierarchy cell is navigatable\n                if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                    index++;\n                }\n\n                if (row.hasClass(\"k-table-group-row\")) {\n                    index += originalRow.children(\".k-group-cell\").length;\n                }\n            } else {\n                row = rows.eq(rowIndex + current[0].rowSpan);\n            }\n\n            cells = row.children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED);\n\n            let cellToFocus = cells.eq(0);\n            if (cells.length > index) {\n                cellToFocus = cells.eq(index);\n            }\n\n            if (cellToFocus.is(\".k-group-cell\")) {\n                cellToFocus = cellToFocus.next(\":not(k-group-cell):not([hidden])\");\n            }\n\n            return cellToFocus;\n        },\n\n        _verticalContainer: function(container, up) {\n            var table = container.parent();\n            var length = this._navigatableTables.length;\n            var step = Math.floor(length / 2);\n            var index = inArray(table[0], this._navigatableTables);\n\n            if (up) {\n                step *= -1;\n            }\n            index += step;\n\n            if (index >= 0 || index < length) {\n                table = this._navigatableTables.eq(index);\n            }\n\n            return table.find(up ? \">thead\" : \">tbody\");\n        },\n\n        _filterFocusable: function() {\n            return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n        },\n\n        _horizontalContainer: function(container, right) {\n            var length = this._navigatableTables.length;\n            if (length <= 2) {\n                return container;\n            }\n\n            var table = container.parent();\n            var index = inArray(table[0], this._navigatableTables);\n\n            index += right ? 1 : -1;\n\n            if (right && (index == 2 || index == length)) {\n                return container;\n            }\n\n            if (!right && (index == 1 || index < 0)) {\n                return container;\n            }\n\n            return this._navigatableTables.eq(index).find(\"thead, tbody\");\n        },\n\n        _tabNext: function(current, currentTable, back) {\n            var switchRow = true;\n            var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n            if (!next.length) {\n                next = current.parent();\n                if (this.lockedTable) {\n                    switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                    next = this._relatedRow(next);\n                }\n\n                if (switchRow) {\n                    if (this._hasVirtualColumns()) {\n                        return current;\n                    }\n                    next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                }\n                if (back) {\n                    next = next.children(DATA_CELL).last();\n                } else {\n                    next = next.children(DATA_CELL).first();\n                }\n            }\n\n            return next;\n        },\n\n        _handleEditing: function(current, next, table) {\n            var that = this,\n                active = $(activeElement()),\n                mode = that._editMode(),\n                isIE = browser.msie,\n                editContainer = that._editContainer,\n                focusable,\n                editable = that.options.editable && that.options.editable.update !== false,\n                isEdited;\n\n            table = $(table);\n            if (mode == \"incell\") {\n                isEdited = current.hasClass(\"k-edit-cell\");\n            } else {\n                isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n            }\n\n            if (that.editable) {\n                if ($.contains(editContainer[0], active[0])) {\n                    active.trigger(\"blur\");\n                    if (isIE) {\n                        //IE10 with jQuery 1.9.x does not trigger blur handler\n                        //numeric textbox does trigger change\n                        active.trigger(\"blur\");\n                    }\n                }\n\n                if (!that.editable) {\n                    focusTable(that.table);\n                    return;\n                }\n\n                if (that.editable.end()) {\n                    if (mode == \"incell\") {\n                        that.closeCell();\n                    } else {\n                        that.saveRow();\n                        isEdited = true;\n                    }\n                } else {\n                    if (mode == \"incell\") {\n                        that._setCurrent(editContainer);\n                    } else {\n                        that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                    }\n                    focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                    if (focusable) {\n                        focusable.focus();\n                    }\n                    return;\n                }\n            }\n\n            if (next) {\n                that._setCurrent(next);\n            }\n\n            focusTable(that.table, true);\n\n            if (!editable) {\n                return;\n            }\n\n            if ((!isEdited && !next) || next) {\n                if (mode === INCELL) {\n                    if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                        that.editCell(that.current());\n                    }\n                } else {\n                    that.editRow(that.current().parent());\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                table = that.table,\n                height = that.options.height,\n                width = that.options.width,\n                wrapper = that.element;\n\n            if (!wrapper.is(DIV)) {\n               wrapper = wrapper.wrap(\"<div/>\").parent();\n            }\n\n            that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n            if (height) {\n                that.wrapper.css(HEIGHT, height);\n                table.css(HEIGHT, AUTO);\n            }\n\n            if (width) {\n                that.wrapper.css(WIDTH, width);\n            }\n\n            that._initMobile();\n        },\n\n        _initContextMenu: function() {\n            var that = this,\n                options = that.options,\n                groupsContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.groups) ? { items: options.contextMenu.groups } : { items: defaultGroupsContextMenu },\n                tbodyContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.body) ? { items: options.contextMenu.body } : { items: defaultBodyContextMenu },\n                theadContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.head) ? { items: options.contextMenu.head } : { items: defaultHeadContextMenu };\n\n            var mainOptions = isPlainObject(options.contextMenu) ? options.contextMenu : {};\n\n            tbodyContextMenu = extend({}, {\n                messages: options.messages,\n                target: that.tbody,\n                filter: \".k-table-td\",\n                action: that._action.bind(that),\n                states: that._buildStates()\n            }, mainOptions, tbodyContextMenu);\n\n            theadContextMenu = extend({}, {\n                messages: options.messages,\n                target: that.thead,\n                filter: \".k-table-th\",\n                action: that._action.bind(that),\n                states: that._buildStates()\n            }, mainOptions, theadContextMenu);\n\n            if (that.groupable) {\n                groupsContextMenu = extend({}, {\n                    showOn: \"click\",\n                    target: that.groupable.groupContainer,\n                    filter: \".k-groupable-context-menu\",\n                    messages: options.messages,\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, groupsContextMenu);\n            }\n\n\n            that.tbodyContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", tbodyContextMenu);\n            that.theadContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", theadContextMenu);\n            that.groupsContextMenu = !!that.groupable && new ui.grid.ContextMenu(\"<ul></ul>\", groupsContextMenu);\n        },\n\n        _buildStates: function() {\n            var that = this;\n\n            return {\n                isEditable: that.options.editable,\n                isSelectable: that.options.selectable,\n                isSortable: that.options.sortable,\n                isRowReorderable: isPlainObject(that.options.reorderable) ? that.options.reorderable.rows : that.options.reorderable,\n                isGroupable: that.options.groupable,\n                hasSelection: () => (this.select() ? this.select().length > 0 : false),\n                isSorted: () => !(this.dataSource.sort() ? this.dataSource.sort().length > 0 : false),\n                canMoveGroupPrev: (target) =>{\n                    var group = $(target).closest(\".k-chip\");\n\n                    return group.index() > 0;\n                },\n                canMoveGroupNext: (target) =>{\n                    var length = $(target).closest(\".k-chip-list\").children().length - 1;\n                    var group = $(target).closest(\".k-chip\");\n\n                    return group.index() < length;\n                }\n            };\n        },\n\n        _action: function(args) {\n            var commandName = args.command,\n                commandOptions = extend({ grid: this }, args.options),\n                command = new ui.grid.commands[commandName](commandOptions);\n\n            return command.exec();\n        },\n\n        _initMobile: function() {\n            var options = this.options;\n            var that = this;\n\n            this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                options.mobile === \"phone\" ||\n                                options.mobile === \"tablet\";\n\n            if (this._isMobile) {\n                var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                    '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                    'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                )\n                .parent();\n\n                this.pane = this._createPane(html);\n                this.view = this.pane.view();\n\n                if (options.height) {\n                    this.pane.element.parent().css(HEIGHT, options.height);\n                } else {\n                    this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                }\n\n                this._editAnimation = \"slide\";\n\n                // Grid transitions should not propagate to the view\n                that.wrapper.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                    e.preventDefault();\n                    return false;\n                });\n\n                this.view.bind(\"showStart\", function() {\n                    if (that._isLocked()) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                        that._syncLockedFooterHeight();\n                    }\n                });\n            }\n        },\n\n        _createPane: function(html) {\n            var pane = kendo.Pane.wrap(html, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n\n            return pane;\n        },\n\n        _tbody: function() {\n            var that = this,\n                table = that.table,\n                tbody;\n\n            tbody = table.find(\">tbody\");\n\n            if (!tbody.length) {\n                tbody = $(\"<tbody/>\").appendTo(table);\n            }\n\n            tbody.addClass('k-table-tbody');\n            that.tbody = tbody;\n        },\n\n        _scrollable: function() {\n            var that = this,\n                header,\n                table,\n                options = that.options,\n                scrollable = options.scrollable,\n                hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                headerWrap;\n\n            if (scrollable) {\n                header = that.wrapper.children(\".k-grid-header\");\n\n                if (!header[0]) {\n                    header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                }\n\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                table.width(that.table[0].style.width);\n\n                table.append(that.thead);\n                header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                that.content = that.table.parent();\n                that.virtualScroll = virtualScroll;\n\n                if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                    that.content = that.content.parent();\n                }\n\n                if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                    that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                }\n\n                if (!that.content.parent().hasClass(\"k-grid-container\")) {\n                    that.content.wrap(\"<div class='k-grid-container' />\").parent();\n                }\n\n                if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                    that._createVirtualScrollable();\n                }\n\n                if (virtualScroll && virtualScroll.columns) {\n\n                    that.table.css({\n                        width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                    });\n                }\n\n                headerWrap = header.children(\".k-grid-header-wrap\");\n\n                that.scrollables = headerWrap.add(that.content);\n\n                // the footer may exists if rendered from the server\n                var footer = that.wrapper.find(\".k-grid-footer\");\n\n                if (footer.length) {\n                    that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                }\n\n                headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                    if (that._scrollLeft !== this.scrollLeft) {\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                    }\n                });\n\n                if (virtualScroll && virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                        if (that.lockedContent) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (virtualScroll.columns && isScrollingLeft) {\n                            that.refresh();\n                        }\n                    });\n                } else {\n                    var endless = scrollable.endless;\n                    var originalPageSize = that.dataSource.options.pageSize;\n                    if (endless) {\n                        that._endlessPageSize = originalPageSize;\n                    }\n                    that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                        if (that.lockedContent && e.currentTarget == that.content[0]) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (endless) {\n                            if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                !that._endlessFetchInProgress &&\n                                that._endlessPageSize < that.dataSource.total()) {\n                                that._skipRerenderItemsCount = that._endlessPageSize;\n                                that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                that.dataSource.options.endless = true;\n                                that._endlessFetchInProgress = true;\n                                that.dataSource.pageSize(that._endlessPageSize);\n                            }\n                        }\n\n                        if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                              that._virtualColScroll = true;\n                              that._cacheEditableState();\n                              that.refresh();\n                              that._restoreEditableState();\n                              that._virtualColScroll = false;\n                        }\n\n                        if (that.rowResizer) {\n                            that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                        }\n                    });\n\n                    var touchScroller = that.content.data(\"kendoTouchScroller\");\n                    if (touchScroller) {\n                        touchScroller.destroy();\n                    }\n\n                    touchScroller = kendo.touchScroller(that.content);\n                    if (touchScroller && touchScroller.movable) {\n                        that.touchScroller = touchScroller;\n                        touchScroller.movable.bind(\"change\", function(e) {\n                            kendo.scrollLeft(that.scrollables, -e.sender.x);\n                            if (that.lockedContent) {\n                                that.lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n\n                        that.one(DATABOUND, function(e) {\n                            e.sender.wrapper.addClass(\"k-grid-backface\");\n                        });\n                    }\n                }\n            }\n        },\n\n        _createVirtualScrollable: function() {\n            var that = this;\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = new VirtualScrollable(that.content, {\n                dataSource: that.dataSource,\n                itemHeight: function() { return that._averageRowHeight(); },\n                page: function() {\n                    that._restoreEditableState();\n                },\n                scroll: function() {\n                    that._focusEditable();\n                },\n                loadStart: function() {\n                    that._progress(true);\n                },\n                loadEnd: function() {\n                    that._progress(false);\n                }\n            });\n\n            that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n        },\n\n        _onVirtualPaging: function() {\n            var that = this;\n\n            that._cacheEditableState();\n\n            if (that._isVirtualIncellEditable()) {\n                that._shouldClearEditableState = false;\n                that.closeCell();\n                that._shouldClearEditableState = true;\n            }\n        },\n\n        _isVirtualEditable: function() {\n            return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n        },\n\n        _isVirtualInlineEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INLINE;\n        },\n\n        _isVirtualIncellEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INCELL;\n        },\n\n        _isVirtualPopupEditable: function() {\n            return this.virtualScrollable && this._editMode() === \"popup\";\n        },\n\n        _hasVirtualColumns: function() {\n            return (this.virtualScroll || {}).columns ? true : false;\n        },\n\n        _scrollVirtualWrapper: function() {\n            var that = this;\n            var scrollable = that.virtualScrollable;\n\n            if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                if (scrollable._isScrolledToBottom()) {\n                    scrollable._scrollWrapperToBottom();\n                } else if (scrollable._isScrolledToTop()) {\n                    scrollable._scrollWrapperToTop();\n                }\n            }\n        },\n\n        _scrollVirtualWrapperOnColumnResize: function() {\n            var virtualScrollable = this.virtualScrollable;\n\n            if (virtualScrollable) {\n                virtualScrollable._scrollWrapperOnColumnResize();\n            }\n        },\n\n        _restoreEditableState: function() {\n            var that = this;\n            var editableState = that._editableState || {};\n            var editedModel = editableState.model;\n            var dataSource = that.dataSource;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var row;\n            var cell;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                if (that._editMode() === INLINE) {\n                    that._shouldClearEditableState = false;\n                    that.editRow(editedModel);\n                    if (!virtualColumns) {\n                        that._focusEditable();\n                    }\n                } else if (that._editMode() === INCELL) {\n                    row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                    cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                    if (cell[0]) {\n                        that._shouldClearEditableState = false;\n                        that.editCell(cell);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    }\n                }\n            }\n\n            that._shouldClearEditableState = true;\n        },\n\n        _focusEditable: function() {\n            var that = this;\n            var editedField = (that._editableState || {}).field;\n            var editContainer = that._editContainer;\n\n            if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                }\n            }\n        },\n\n        _canFocusEditable: function() {\n            var that = this;\n            var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n            (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n            return result;\n        },\n\n        _cacheEditableState: function() {\n            var that = this;\n            var editContainer = that._editContainer;\n            var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var active;\n            var widget;\n            var value;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                that._clearEditableState();\n                active = $(activeElement());\n\n                if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                    //change event is not fired if the editable container is scrolled\n                    //out of the virtual view with the mousewheel right after editing\n                    active.change();\n\n                    widget = kendo.widgetInstance(active, kendo.ui);\n\n                    if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                        value = active.val();\n\n                        if (active.is(\"[type='checkbox'\")) {\n                            value = active.is(\":checked\");\n                        }\n\n                        widget.value(value);\n                        widget.trigger(CHANGE);\n                    }\n                }\n\n                if (that._editMode() === INLINE) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                    };\n                } else if (that._editMode() === INCELL) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: editContainer.attr(kendo.attr(FIELD))\n                    };\n                }\n            }\n        },\n\n        _clearSortClasses: function() {\n            var that = this,\n                content = that.content || that.table,\n                lockedContent = that.lockedContent;\n\n            if (content) {\n                content.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n\n            if (lockedContent) {\n                lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n        },\n\n        _clearEditableState: function() {\n            var that = this;\n\n            if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                that._editableState = null;\n            }\n        },\n\n        _destroyVirtualScrollable: function() {\n            var that = this;\n\n            that._clearEditableState();\n\n            if (that.virtualScrollable && that.virtualScrollable.element) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = null;\n        },\n\n        _destroyRowResizing: function() {\n            if (this.rowResizing) {\n                this.rowResizing.destroy();\n\n                this.rowResizing = null;\n            }\n\n            if (this.rowResizer) {\n                this._detachRowResizerEvents();\n                this.rowResizer.off(DUBLECLICK + NS);\n                this.rowResizer = null;\n                this._clearCachedRowsHeight();\n            }\n        },\n\n        _renderNoRecordsContent: function() {\n            var that = this;\n\n            if (that.options.noRecords) {\n                var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                if (noRecordsElement.length) {\n                    noRecordsElement.remove();\n                }\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    noRecordsElement = $(that.noRecordsTemplate({ grid: that }));\n                    kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                    noRecordsElement.insertAfter(that.table);\n                }\n            }\n        },\n\n        _setContentWidth: function(scrollLeft) {\n            var that = this,\n                hiddenDivClass = 'k-grid-content-expander',\n                hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                resizable = that.resizable,\n                expander;\n\n            if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                expander = that.table.parent().children('.' + hiddenDivClass);\n                that._setContentWidthHandler = that._setContentWidth.bind(that);\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    if (!expander[0]) {\n                        expander = $(hiddenDiv).appendTo(that.table.parent());\n                        if (resizable) {\n                            resizable.bind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n                    if (that.thead) {\n                        expander.width(that.thead.width());\n                        if (!isNaN(parseFloat(scrollLeft, 10))) {\n                            kendo.scrollLeft(that.content, scrollLeft);\n                        }\n                    }\n                } else if (expander[0]) {\n                    expander.remove();\n                    if (resizable) {\n                        resizable.unbind(\"resize\", that._setContentWidthHandler);\n                    }\n                }\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n\n                // workaround IE does not show vertical scrollbar for elements without width\n                if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                    that.table[0].style.width = \"1px\";\n                }\n            }\n        },\n\n        _applyLockedContainersWidth: function() {\n            if (this.options.scrollable && this.lockedHeader) {\n                var headerTable = this.thead.parent(),\n                    headerWrap = headerTable.parent(),\n                    contentWidth = this.wrapper[0].clientWidth,\n                    groups = this._groups(),\n                    scrollbar = kendo.support.scrollbar(),\n                    cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    width = columnsWidth(cols),\n                    nonLockedColsWidth = columnsWidth(nonLockedCols),\n                    footerWrap;\n\n                if (groups > 0) {\n                    width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                }\n\n                if (width >= contentWidth) {\n                    width = contentWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader\n                    .add(this.lockedContent)\n                    .width(width);\n\n                headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                headerTable.add(this.table).width(nonLockedColsWidth);\n\n                //https://github.com/telerik/kendo-ui-core/issues/377\n                if (this.virtualScrollable && !isIE11) {\n                    contentWidth -= scrollbar;\n                }\n\n                this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                if (this.lockedFooter && this.lockedFooter.length) {\n                    this.lockedFooter.width(width);\n                    footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                    footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                    footerWrap.children().first().width(nonLockedColsWidth);\n                }\n            }\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height,\n                header = that.wrapper.children(\".k-grid-header\"),\n                scrollbar = kendo.support.scrollbar();\n            var scrollableHeight = (options.scrollable || {}).height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n                if (scrollableHeight && that.content[0].style.height === \"\") {\n                    // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                    that.content[0].style.height = scrollableHeight;\n                }\n\n                height = that.wrapper.innerHeight();\n\n                height -= outerHeight(header);\n\n                if (that.pager && that.pager.element.is(\":visible\")) {\n                    height -= outerHeight(that.pager.element);\n                }\n\n                if (options.groupable) {\n                    height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                }\n\n                if (options.toolbar) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                }\n\n                if (that.footerTemplate) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                }\n\n                var isGridHeightSet = function(el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(AUTO);\n                    newHeight = el.height();\n\n                    if (initialHeight != newHeight) {\n                        el.height(\"\");\n                        return true;\n                    }\n                    el.height(\"\");\n                    return false;\n                };\n\n                if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                    if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                        if (that.lockedContent) {\n                            scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                            that.lockedContent.height(height - scrollbar);\n                        }\n\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n                }\n            }\n        },\n\n        _averageRowHeight: function() {\n            var that = this,\n                itemsCount = that._items(that.tbody, true).length,\n                rowHeight = that._rowHeight;\n\n            if (itemsCount === 0) {\n                return rowHeight;\n            }\n\n            if (!that._rowHeight) {\n                that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                that._sum = rowHeight;\n                that._measures = 1;\n            }\n\n            var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n            if (rowHeight !== currentRowHeight) {\n                that._measures ++;\n                that._sum += currentRowHeight;\n                that._rowHeight = that._sum / that._measures;\n            }\n            return rowHeight;\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                pageable,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (isPlainObject(dataSource)) {\n                extend(dataSource, { table: that.table, fields: that.columns });\n\n                pageable = options.pageable;\n\n                if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                    dataSource.pageSize = pageable.pageSize;\n                }\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                .unbind(PROGRESS, that._progressHandler)\n                                .unbind(ERROR, that._errorHandler)\n                                .unbind(SORT, that._sortHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._sortHandler = that._clearSortClasses.bind(that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler)\n                                .bind(SORT, that._sortHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _modelChange: function(e) {\n            var that = this,\n                tbody = that.tbody,\n                model = e.model,\n                row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                relatedRow,\n                cell,\n                column,\n                isAlt = row.hasClass(\"k-alt\"),\n                tmp,\n                idx = that._items(tbody).index(row),\n                isLocked = that.lockedContent,\n                selectable,\n                selectableRow,\n                childCells,\n                originalCells,\n                length;\n\n            if (isLocked) {\n                relatedRow = that._relatedRow(row);\n            }\n\n            if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (column.field === e.field) {\n                        if (!cell.hasClass(\"k-edit-cell\")) {\n                            that._displayCell(cell, column, model);\n                        } else {\n                            cell.addClass(\"k-dirty-cell\");\n                        }\n                    }\n                });\n\n            } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                selectableRow = $().add(row);\n\n                if (isLocked) {\n                    tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                    selectableRow = selectableRow.add(relatedRow);\n\n                    relatedRow.replaceWith(tmp);\n                }\n\n                tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                row.replaceWith(tmp);\n\n                tmp = that._items(tbody).eq(idx);\n\n                if (isLocked) {\n                    row = row.add(relatedRow);\n\n                    relatedRow = that._relatedRow(tmp)[0];\n                    adjustRowHeight(tmp[0], relatedRow);\n\n                    tmp = tmp.add(relatedRow);\n                }\n\n                selectable = that.options.selectable;\n                if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                   that.select(tmp);\n                }\n\n                originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                    column = that.columns[idx];\n\n                    cell = childCells.eq(idx);\n                    if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                        cell.addClass(SELECTED);\n                    }\n                }\n\n                that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n            }\n        },\n\n        _pageable: function() {\n            var that = this,\n                pagerWrap,\n                pageable = that.options.pageable,\n                size = that.options.size,\n                navigatable = that.options.navigatable;\n\n            if (pageable) {\n                pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                if (!pagerWrap.length) {\n                    pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                }\n\n                if (pageable.position === \"top\") {\n                    pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                } else {\n                    pagerWrap.appendTo(that.wrapper);\n                }\n\n                if (that.pager) {\n                    that.pager.destroy();\n                }\n\n                if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                    that.pager = pageable;\n                } else {\n                    if (that.dataSource._groupPaging) {\n                        that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    } else {\n                        that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    }\n                }\n\n                that.pager.bind(\"pageChange\", function(e) {\n                    if (that.trigger(\"page\", { page: e.index })) {\n                        e.preventDefault();\n                    }\n                });\n\n                that._togglePagerVisibility();\n            }\n        },\n\n        _footer: function() {\n            var that = this,\n                aggregates = that.dataSource.aggregates(),\n                html = \"\",\n                footerTemplate = that.footerTemplate,\n                options = that.options,\n                footerWrap,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            if (footerTemplate) {\n                html = $(that._wrapFooter(footerTemplate(aggregates)));\n                kendo.applyStylesFromKendoAttributes(html, [\"display\", \"left\", \"right\"]);\n\n                if (footer.length) {\n                    var tmp = html;\n\n                    footer.replaceWith(tmp);\n                    footer = that.footer = tmp;\n                } else {\n                    if (options.scrollable) {\n                        footer = that.footer = options.pageable && options.pageable.position !== \"top\" ? html.insertBefore(that.wrapper.children(\"div.k-grid-pager\")) : html.appendTo(that.wrapper);\n                    } else {\n                        footer = that.footer = html.insertAfter(that.tbody);\n                    }\n                }\n            } else if (footer && !that.footer) {\n                that.footer = footer;\n            }\n\n            if (footer.length) {\n                if (options.scrollable) {\n                    footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                    that.scrollables = $(\n                        that.scrollables\n                            .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                            .toArray()\n                    ).add(footerWrap);\n                }\n\n                if (that._footerWidth) {\n                    footer.find(\"table\").css('width', that._footerWidth);\n                }\n\n                if (footerWrap) {\n                    var offset = kendo.scrollLeft(that.content);\n\n                    if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                        offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                    }\n                    kendo.scrollLeft(footerWrap, offset);\n                }\n            }\n\n            if (that.lockedContent) {\n                that._appendLockedColumnFooter();\n                that._applyLockedContainersWidth();\n                that._syncLockedFooterHeight();\n            }\n        },\n\n        _wrapFooter: function(footerRow) {\n            var that = this,\n                html = \"\",\n                table,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n            if (that.options.scrollable) {\n                html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                table = html.find(\"table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that._appendCols(table);\n                html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                return html;\n            }\n\n            return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n        },\n\n        _columnMenu: function() {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                column,\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                sortable,\n                filterable,\n                cells,\n                hasMultiColumnHeaders = grep(that.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0,\n                hasLockableColumns = grep(that.columns, function(item) {\n                    return item.lockable !== false;\n                }).length > 0,\n                hasStickableColumns = grep(that.columns, function(item) {\n                    return item.stickable === true;\n                }).length > 0,\n                isMobile = this._isMobile,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                stickCallback = function(e) {\n                    that.trigger(COLUMNSTICK, { column: e.column });\n                },\n                unstickCallback = function(e) {\n                    that.trigger(COLUMNUNSTICK, { column: e.column });\n                },\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    var cell = cells.eq(idx);\n\n                    if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        menu = cell.data(\"kendoColumnMenu\");\n                        if (menu) {\n                            menu.destroy();\n                        }\n\n                        sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                            compare: (column.sortable || {}).compare\n                        }) : false;\n\n                        filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                        if (column.filterable && column.filterable.dataSource) {\n                            filterable.forceUnique = false;\n                            filterable.checkSource = column.filterable.dataSource;\n                        }\n\n                        if (filterable) {\n                            filterable.format = column.format;\n                        }\n\n                        menuOptions = {\n                            dataSource: that.dataSource,\n                            values: column.values,\n                            columns: columnMenu.columns,\n                            sortable: sortable,\n                            filterable: filterable,\n                            messages: columnMenu.messages,\n                            owner: that,\n                            closeCallback: closeCallback,\n                            init: initCallback,\n                            open: openCallback,\n                            stick: stickCallback,\n                            unstick: unstickCallback,\n                            pane: that.pane,\n                            sort: sortHandler,\n                            filtering: filterHandler,\n                            filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                            autoSize: columnMenu.autoSize,\n                            hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                            hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                            encodeTitles: that.options.encodeTitles,\n                            componentType: columnMenu.componentType,\n                            appendTo: DOT + classNames.headerCellInner,\n                            reorderable: options.reorderable === true || (options.reorderable && options.reorderable.columns),\n                            groupable: that.options.groupable && that.options.groupable.enabled !== false && column.groupable !== false\n                        };\n\n                        cell.kendoColumnMenu(menuOptions);\n                    }\n                }\n            }\n        },\n\n        _headerCells: function() {\n            return $(this.thead).find(\"th\").filter(function() {\n                var th = $(this);\n                return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n            });\n        },\n\n        _hasFilterMenu: function() {\n            var filterable = this.options.filterable;\n            if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                return false;\n            }\n\n            return filterable;\n        },\n\n        _filterable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                filterMenu,\n                cells,\n                cell,\n                filterInit = function(e) {\n                    that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterOpen = function(e) {\n                    that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                },\n                filterable = that._hasFilterMenu();\n\n            if (filterable && !that.options.columnMenu) {\n                cells = leafDataCells(that.thead);//that._headerCells();\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    cell = cells.eq(idx);\n\n                    if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        filterMenu = cell.data(\"kendoFilterMenu\");\n\n                        if (filterMenu) {\n                            filterMenu.destroy();\n                        }\n\n                        filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                        if (filterMenu) {\n                           filterMenu.destroy();\n                        }\n\n                        var columnFilterable = columns[idx].filterable;\n\n                        var options = extend({},\n                            filterable,\n                            columnFilterable,\n                            {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler,\n                                appendTo: DOT + classNames.headerCellInner\n                            }\n                        );\n\n                        if (columnFilterable && columnFilterable.messages) {\n                            options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                        }\n                        if (columnFilterable && columnFilterable.dataSource) {\n                            options.forceUnique = false;\n                            options.checkSource = columnFilterable.dataSource;\n                        }\n\n                        if (columnFilterable && columnFilterable.multi) {\n                            cell.kendoFilterMultiCheck(options);\n                        } else {\n                            cell.kendoFilterMenu(options);\n                        }\n                    }\n                }\n            }\n        },\n\n        _filterRow: function() {\n            var that = this;\n            if (!that._hasFilterRow()) {\n               return;\n            }\n\n            var settings;\n            var columns = leafColumns(that.columns),\n                filterable = that.options.filterable,\n                rowheader = that.thead.find(\".k-filter-row\"),\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n\n            this._updateHeader(that._groups());\n\n            for (var i = 0; i < columns.length; i++) {\n                var suggestDataSource,\n                    col = columns[i],\n                    operators = that.options.filterable.operators,\n                    customDataSource = false,\n                    td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                    field = col.field;\n\n                if (col.hidden) {\n                    td.hide();\n                }\n                rowheader.append(td);\n                if (field && col.filterable !== false) {\n                    var cellOptions = col.filterable && col.filterable.cell || {};\n\n                    suggestDataSource = that.options.dataSource;\n                    if (suggestDataSource instanceof DataSource) {\n                        suggestDataSource = that.options.dataSource.options;\n                    }\n\n                    var messages = extend(true, {}, filterable.messages);\n                    if (col.filterable) {\n                        extend(true, messages, col.filterable.messages);\n                    }\n\n                    if (cellOptions.enabled === false) {\n                        td.html(\"&nbsp;\");\n                        continue;\n                    }\n                    if (cellOptions.dataSource) {\n                        suggestDataSource = cellOptions.dataSource;\n                        customDataSource = true;\n                    }\n                    if (col.filterable && col.filterable.operators) {\n                        operators = col.filterable.operators;\n                    }\n\n                    settings = {\n                        column: col,\n                        dataSource: that.dataSource,\n                        suggestDataSource: suggestDataSource,\n                        customDataSource: customDataSource,\n                        field: field,\n                        messages: messages,\n                        size: that.options.size,\n                        values: col.values,\n                        template: cellOptions.template,\n                        delay: cellOptions.delay,\n                        inputWidth: cellOptions.inputWidth,\n                        suggestionOperator: cellOptions.suggestionOperator,\n                        minLength: cellOptions.minLength,\n                        dataTextField: cellOptions.dataTextField,\n                        operator: cellOptions.operator,\n                        operators: operators,\n                        showOperators: cellOptions.showOperators,\n                        change: filterHandler\n                    };\n\n                    $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                        .appendTo(td)\n                        .kendoFilterCell(settings);\n                } else {\n                    td.html(\"&nbsp;\");\n                }\n                td.data(\"column\", col);\n            }\n\n            this._filterFocusable().attr(TABINDEX, -1);\n        },\n\n        _sortable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                column,\n                sorterInstance,\n                cell,\n                sortable = that.options.sortable,\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                    }\n                };\n\n\n            if (sortable) {\n                var cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.destroy();\n                        }\n\n                        cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                            .kendoColumnSorter(\n                                extend({}, sortable, column.sortable, {\n                                    dataSource: that.dataSource,\n                                    aria: true,\n                                    filter: \":not(.k-column-active)\",\n                                    change: sortHandler\n                                })\n                            );\n                    }\n                }\n                cells = null;\n            }\n        },\n\n        _columns: function(columns) {\n            var that = this,\n                table = that.table,\n                encoded,\n                cols = table.find(\"col\"),\n                lockedCols,\n                headerRows = that.element.find('thead tr'),\n                dataSource = that.options.dataSource,\n                draggableColumns;\n\n            // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n            columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                th = $(th);\n                var sortable = th.attr(kendo.attr(\"sortable\")),\n                    filterable = th.attr(kendo.attr(\"filterable\")),\n                    type = th.attr(kendo.attr(\"type\")),\n                    groupable = th.attr(kendo.attr(\"groupable\")),\n                    field = th.attr(kendo.attr(\"field\")),\n                    title = th.attr(kendo.attr(\"title\")),\n                    columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                    menu = th.attr(kendo.attr(\"menu\"));\n\n                if (!field) {\n                   field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                }\n\n                return {\n                    field: field,\n                    type: type,\n                    title: title,\n                    sortable: sortable !== \"false\",\n                    filterable: filterable !== \"false\",\n                    groupable: groupable !== \"false\",\n                    menu: menu !== \"false\",\n                    columnMenu: columnMenu !== \"false\",\n                    template: th.attr(kendo.attr(\"template\")),\n                    width: cols.eq(idx).css(WIDTH)\n                };\n            });\n\n            encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n            if (that.options.scrollable) {\n                var initialColumns = columns;\n                lockedCols = lockedColumns(columns);\n                columns = nonLockedColumns(columns);\n\n                if (lockedCols.length > 0 && columns.length === 0) {\n                    throw new Error(\"There should be at least one non locked column\");\n                }\n\n                normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                columns = lockedCols.concat(columns);\n            }\n\n            if (headerRows.length && columns.length) {\n                that._updateColumnIDs(columns, headerRows.first());\n            }\n\n            that.columns = normalizeColumns(columns, encoded);\n\n            if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                that._selectedIds = {};\n                that._checkBoxSelection = true;\n                that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n            }\n\n            draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n            if (draggableColumns.length) {\n                that._hasDragHandleColumn = true;\n\n                for (var i = 0; i < draggableColumns.length; i++) {\n                    draggableColumns[i].headerAttributes = $.extend({\n                        \"aria-label\": that.options.messages.dragHandleLabel\n                    }, draggableColumns[i].headerAttributes);\n                }\n            }\n\n            that._foreignKeyBindings(that.columns);\n        },\n\n        _foreignKeyBindings: function(columns) {\n            var that = this;\n            var length = columns.length;\n            var column;\n\n            for (var i = 0; i < length; i++) {\n                column = columns[i];\n\n                if (column.dataSource) {\n                    that._fetchForeignKeyValues(column);\n                }\n            }\n        },\n\n        _fetchForeignKeyValues: function(column) {\n            var that = this;\n            var promise = $.Deferred();\n\n            that._hasBoundForeignKey = true;\n            column.dataSource = DataSource.create(column.dataSource);\n\n            if (!that._foreignKeyPromises) {\n                that._foreignKeyPromises = [];\n            }\n\n            that._foreignKeyPromises.push(promise);\n            column.dataSource.fetch().then(function() {\n                var data = column.dataSource.data();\n                column.values = data.map(function(item) {\n                    return {\n                        value: item[column.dataValueField],\n                        text: item[column.dataTextField]\n                    };\n                });\n                promise.resolve();\n            });\n\n        },\n\n        _updateColumnIDs: function(columns, tr) {\n\n            if (!columns.length) {\n                return;\n            }\n\n            var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n            var id;\n            for (var i = 0; i < columns.length; i++) {\n                id = ths.eq(i).attr(ID);\n                if (id) {\n                    columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                }\n            }\n\n            this._updateColumnIDs(childColumns(columns), tr.next());\n        },\n\n        _headerCheckboxClick: function(e) {\n            var that = this,\n                checkBox = $(e.target),\n                checked = checkBox.prop(\"checked\");\n\n            if (!that._belongsToGrid(checkBox)) {\n                return;\n            }\n\n            if (that.trigger(CHANGING, { target: checkBox, originalEvent: e })) {\n                e.preventDefault();\n                return;\n            }\n\n            if (checked) {\n                that.select(that.items());\n            } else {\n                that.clearSelection();\n            }\n\n            that.trigger(CHANGE);\n        },\n\n        _checkboxClick: function(e) {\n            var that = this,\n                row = $(e.target).closest(TR),\n                isSelecting = !row.hasClass(SELECTED);\n\n            if (!that._belongsToGrid(row)) {\n                return;\n            }\n\n            if (that.trigger(CHANGING, { target: row, originalEvent: e })) {\n                e.preventDefault();\n                return;\n            }\n\n            if (isSelecting) {\n                that.select(row);\n            } else {\n                that._deselectCheckRows(row);\n            }\n            that.trigger(CHANGE);\n        },\n\n        _groups: function() {\n            var group = this.dataSource.group();\n\n            return group ? group.length : 0;\n        },\n\n        _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                idx,\n                length = columns.length,\n                template,\n                state = { storage: {}, count: 0 },\n                column,\n                type,\n                hasDetails = that._hasDetails(),\n                groups = that._groups();\n\n            var fieldAttr = kendo.attr(\"field\");\n            var field;\n            var classAttribute;\n            var compiledAttributes;\n            let rowTemplateFunc;\n\n            if (!rowTemplate) {\n                rowTemplateFunc = (data) => {\n                    var uid = length ? ` ${kendo.attr(\"uid\")}=\"${kendo.getter(\"uid\")(data)}\"` : '';\n                    var rowTemplateResult = `<tr class=\"${alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row '}k-master-row\"${uid}>`;\n\n                    if (groups > 0 && !skipGroupCells) {\n                        rowTemplateResult += groupCells(groups);\n                    }\n\n                    if (hasDetails) {\n                        rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($(`<a href=\"#\" ${ARIA_LABEL}=\"${EXPAND}\" tabindex=\"-1\"></a>`), { icon: `caret-alt-${isRtl ? \"left\" : \"right\"}` }) + '</td>';\n                    }\n\n                    for (idx = 0; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column.template;\n                        type = typeof template;\n                        field = column.field;\n                        compiledAttributes = {};\n\n                        if (that._editMode() === INCELL && field) {\n                            column.attributes = column.attributes || {};\n\n                            if (that.virtualScroll) {\n                                column.attributes[fieldAttr] = field;\n                            }\n\n                            let dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                            column.attributes[\"class\"] = (column.attributes[\"class\"] || \"\");\n\n                            if (column.attributes[\"class\"].indexOf(dirtyCellTemplate) < 0) {\n                                column.attributes[\"class\"] += dirtyCellTemplate;\n                            }\n                        }\n\n                        if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                            column.attributes = removeHiddenStyle(column.attributes);\n                        } else if (!column.colSpan && column.hidden) {\n                            column.attributes = addHiddenStyle(column.attributes);\n                        }\n\n                        if (column.command) {\n                            column.attributes = column.attributes || {};\n                            classAttribute = column.attributes[\"class\"];\n\n                            if (typeof classAttribute !== \"undefined\") {\n                                if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                    column.attributes[\"class\"] += \" k-command-cell\";\n                                }\n                            } else {\n                                column.attributes[\"class\"] = \"k-command-cell\";\n                            }\n                        }\n\n                        if (column.draggable) {\n                            column.attributes = column.attributes || {};\n                            if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                if (column.attributes[\"class\"].indexOf(\"k-drag-cell k-touch-action-none\") < 0) {\n                                    column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                                }\n                            } else {\n                                column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                            }\n\n                            if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                            }\n\n                            if (typeof column.attributes.style !== \"undefined\") {\n                                if (column.attributes.style.indexOf(\"cursor: move;\") < 0) {\n                                    column.attributes.style += \" cursor: move;\";\n                                }\n                            } else {\n                                column.attributes.style = \"cursor: move;\";\n                            }\n                        }\n\n                        if (column._attributesFunction) {\n                            compiledAttributes = column._attributesFunction(data);\n                        }\n\n                        let attributes = extend({}, column.attributes, compiledAttributes);\n                        let columnAttributes = stringifyAttributes(attributes);\n                        let colSpanAttributes = '';\n\n                        if (column.colSpan) {\n                            if (column.colSpan > 1) {\n                                colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                            }\n                            colSpanAttributes += ` colSpan=\"${column.colSpan}\"`;\n                        }\n                        rowTemplateResult += decorateCellWithClass(`<td${columnAttributes}${colSpanAttributes}>`);\n                        rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                        rowTemplateResult += \"</td>\";\n                    }\n\n                    rowTemplateResult += \"</tr>\";\n                    return rowTemplateResult;\n                };\n            }\n\n            rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n            if (state.count > 0) {\n                return rowTemplate.bind(state.storage);\n            }\n\n            return rowTemplate;\n        },\n\n        _dirtyCellTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? ' k-dirty-cell' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _headerCellText: function(column) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.headerTemplate,\n                type = typeof(template),\n                text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n            if (type === FUNCTION) {\n                text = kendo.template(template, settings)({});\n            } else if (type === STRING) {\n                text = template;\n            }\n            return text;\n        },\n\n        _cellTmpl: function(column, state) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.template,\n                field = column.field,\n                // html = \"\",\n                idx,\n                length,\n                format = column.format,\n                type = typeof template,\n                columnValues = column.values;\n\n            if (column.command) {\n                if (isArray(column.command)) {\n                    return (data) => {\n                        let html = \"\";\n                        for (idx = 0, length = column.command.length; idx < length; idx++) {\n                            if (column.command[idx].visible) {\n                                html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                            } else {\n                                html += that._createButton(column.command[idx]);\n                            }\n                        }\n                        return html;\n                    };\n                }\n                return () => that._createButton(column.command);\n            }\n\n            if (column.selectable) {\n                return SELECTCOLUMNTMPL;\n            }\n\n            if (column.draggable) {\n                return DRAGHANDLECOLUMNTMPL;\n            }\n\n            return (data) => {\n                let html = that._dirtyIndicatorTemplate(field)(data);\n\n                if (type === FUNCTION) {\n                    state.storage[\"tmpl\" + state.count] = template;\n                    html += template(data);\n                    state.count++;\n                } else if (type === STRING) {\n                    html += kendo.template(template, settings)(data);\n                } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                    var v = convertToObject(columnValues);\n                    var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                    html += encode(f != null ? f : '');\n                } else {\n                    let fieldValue = '';\n                    if (field) {\n                        field = kendo.getter(field)(data);\n                        fieldValue = field == null ? '' : field;\n                    }\n\n                    if (format) {\n                        fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                    }\n\n                    html += column.encoded ? encode(fieldValue) : fieldValue;\n                }\n\n                return html;\n            };\n        },\n\n        _dirtyIndicatorTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _virtualCols: function(columns) {\n            var that = this;\n            var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n            var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n            var tableWidth = outerWidth(that.content);\n            var sumOfWidths = sumWidths(columns);\n            var colsToRender = [];\n            var firstColspan = 0;\n            var lastColspan = 0;\n            var hiddenColumns = 0;\n            var idx = 0;\n            var widthOfHiddenColumns = 0;\n            var considerNext;\n\n            for (idx = 0; idx < columns.length; idx++) {\n                considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                    if (widths[idx]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[idx];\n                } else {\n                    firstColspan = 1 + hiddenColumns;\n                    break;\n                }\n            }\n\n            hiddenColumns = 0;\n            widthOfHiddenColumns = 0;\n\n            for (var i = columns.length - 1; i >= 0; i--) {\n                if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                    if (widths[i]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[i];\n                } else {\n                    lastColspan = 1 + hiddenColumns;\n                    for (var j = idx; j <= i; j++) {\n                        if (columns[j].locked) {\n                            continue;\n                        }\n                        colsToRender.push(columns[j]);\n                        if (columns[j].colSpan) {\n                            delete columns[j].colSpan;\n                        }\n                    }\n                    colsToRender[0].colSpan = firstColspan;\n                    colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                    break;\n                }\n            }\n\n            if (colsToRender[0].hidden) {\n                colsToRender[0].colSpan--;\n            }\n\n            that.virtualCols = colsToRender;\n\n            return colsToRender;\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                dataSource = that.dataSource,\n                groups = dataSource.group(),\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                aggregates = dataSource.aggregate(),\n                columnLeafs = leafColumns(that.columns),\n                columnsLocked = leafColumns(lockedColumns(that.columns)),\n                leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (options.scrollable && columnsLocked.length) {\n                if (options.rowTemplate || options.altRowTemplate) {\n                    throw new Error(\"Having both row template and locked columns is not supported\");\n                }\n\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n            } else {\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n            }\n\n            if (that._hasDetails()) {\n                that.detailTemplate = that._detailTmpl(options.detailTemplate || (() => \"\"));\n            }\n\n            if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n            }\n\n            if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                }\n            }\n\n            if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                }\n            } else {\n                that.groupHeaderColumnTemplate = null;\n                that.lockedGroupHeaderColumnTemplate = null;\n            }\n\n            if (that.options.noRecords) {\n                that.noRecordsTemplate = that._noRecordsTmpl();\n            }\n        },\n\n        _noRecordsTmpl: function() {\n            var wrapper = '<div class=\"{0}\">{1}</div>';\n            var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n            var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? ` ${kendo.attr(\"style-margin\")}=\"0 auto\" ${kendo.attr(\"style-position\")}=\"static\"` : '';\n            var state = { storage: {}, count: 0 };\n            var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var template;\n            // var html = \"\";\n            var type;\n            var tmpl;\n            let resultTemplate;\n\n            if (this.options.noRecords.template) {\n                template = this.options.noRecords.template;\n            } else {\n                template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n            }\n\n            type = typeof template;\n            if (type === \"function\") {\n                let currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                state.count++;\n                resultTemplate = (data) => kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data));\n\n            } else if (type === \"string\") {\n                resultTemplate = this.options.noRecords.template ?\n                    kendo.format(wrapper, NORECORDSCLASS, template)\n                    : () => kendo.format(wrapper, NORECORDSCLASS, template);\n            }\n\n            tmpl = kendo.template(resultTemplate, settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            return tmpl;\n        },\n\n        _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                // html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                groups = that._groups(),\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column;\n\n            let footerTemplateFunction = (data) => {\n                let html = '<tr class=\"' + rowClass + '\">';\n\n                if (groups > 0 && !skipGroupCells) {\n                    html += groupCells(groups);\n                }\n\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                }\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        html += template(data);\n                        count++;\n                    } else {\n                        html += \"&nbsp;\";\n                    }\n\n                    html += \"</td>\";\n                }\n\n                html += '</tr>';\n                return html;\n            };\n\n            let resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n            if (count > 0) {\n                return resultTemplate.bind(storage);\n            }\n\n            return resultTemplate;\n        },\n\n        _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column,\n                headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                groupHeaderColumnTemplateClass;\n\n            if (headerTemplateIndex < 0) {\n                return;\n            }\n            var groupHeaderTemplFunc = (data) => {\n                var resultHtml = '<tr class=\"' + rowClass + '\">';\n\n                if (!skipGroupCells) {\n                    for (var i = 0; i < data.groupCells; i++) {\n                        resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                    }\n                }\n\n                if (that._hasDetails()) {\n                    resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                    return resultHtml;\n                    // return kendo.template(resultHtml, settings);\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE) {\n                    headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                }\n                else {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                }\n\n                for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    if (column.sticky) {\n                        let stickyAttributes = '';\n                        groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                        if (!groupHeaderColumnTemplateClass) {\n                            groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                        }\n\n                        if (isPlainObject(column.stickyStyle)) {\n                            let stickyLeft = column.stickyStyle.left ? `${kendo.attr(\"style-left\")}=\"${column.stickyStyle.left}\"` : '';\n                            let stickyRight = column.stickyStyle.right ? `${kendo.attr(\"style-right\")}=\"${column.stickyStyle.right}\"` : '';\n                            stickyAttributes = `${stickyLeft} ${stickyRight}`;\n                        }\n\n                        resultHtml += `<td class=\"k-table-td ${STICKY_CELL_CLASS} ${groupHeaderColumnTemplateClass}\" ${stickyAttributes}>`;\n                    } else {\n                        resultHtml += \"<td class='k-table-td'>\";\n                    }\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        resultHtml += storage[\"tmpl\" + count](data);\n                        count++;\n                    } else {\n                        resultHtml += \"&nbsp;\";\n                    }\n\n                    resultHtml += \"</td>\";\n                }\n\n                resultHtml += '</tr>';\n\n                return resultHtml;\n            };\n\n            html = kendo.template(groupHeaderTemplFunc, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _detailTmpl: function(template) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                templateFunctionStorage = {},\n                templateFunctionCount = 0,\n                groups = that._groups(),\n                colspan = visibleColumns(leafColumns(that.columns)).length,\n                type = typeof template;\n\n            let detailTemplateFunction = (data) => {\n                let html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                if (groups > 0) {\n                    html += groupCells(groups);\n                }\n\n                html += `<td role=\"gridcell\" class=\"k-hierarchy-cell k-table-td\"></td><td role=\"gridcell\" class=\"k-table-td k-detail-cell\"${colspan ? ` colspan=\"${colspan}\"` : ''}>`;\n                if (type === FUNCTION) {\n                    templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                    html += template(data);\n                    templateFunctionCount++;\n                } else {\n                    html += kendo.template(template, settings)(data);\n                }\n\n                html += \"</td></tr>\";\n                return html;\n            };\n\n            let resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n            if (templateFunctionCount > 0) {\n                return resultTemplate.bind(templateFunctionStorage);\n            }\n\n            return resultTemplate;\n        },\n\n        _hasDetails: function() {\n            var that = this;\n\n            return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n        },\n        _hasFilterRow: function() {\n            var filterable = this.options.filterable;\n            var hasFiltering = filterable &&\n                    typeof filterable.mode == STRING &&\n                    filterable.mode.indexOf(ROW) != -1;\n            var columns = this.columns;\n            var columnsWithoutFiltering = $.grep(columns, function(col) {\n                return col.filterable === false;\n            });\n\n            if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                hasFiltering = false;\n            }\n\n            return hasFiltering;\n        },\n\n        _details: function() {\n            var that = this;\n\n            if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                throw new Error(\"Having both detail template and locked columns is not supported\");\n            }\n\n            that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                var button = $(this);\n\n                that._toggleDetails(button);\n                e.preventDefault();\n                return false;\n            });\n        },\n\n        _toggleDetails: function(button, omitAnimation) {\n            var that = this,\n            cell = button.closest(\"td.k-hierarchy-cell\"),\n            expanding = button.is(CARET_ALT_RIGHT),\n            masterRow = button.closest(\"tr.k-master-row\"),\n            masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n            detailRow,\n            detailTemplate = that.detailTemplate,\n            data,\n            hasDetails = that._hasDetails(),\n            ariaLabelText = expanding ? COLLAPSE : EXPAND,\n            ariaExpandText = expanding ? true : false;\n\n            if (!expanding) {\n                kendo.ui.icon(button, { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            } else {\n                kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n            }\n\n            button.attr(ARIA_LABEL, ariaLabelText);\n\n            cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n            detailRow = masterRow.next();\n\n            if (detailRow.hasClass(\"k-hidden\")) {\n                detailRow.removeClass(\"k-hidden\");\n            }\n\n            if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                data = that.dataItem(masterRow);\n\n                detailRow = $(detailTemplate(data))\n                    .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                    .insertAfter(masterRow);\n\n                if (masterRowIndex || masterRowIndex === 0) {\n                    detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                }\n\n                that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n            }\n\n            that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n            if (omitAnimation) {\n                toggleRow(detailRow, expanding);\n            } else {\n                detailRow.toggle(expanding);\n            }\n        },\n\n        dataItem: function(tr) {\n            tr = $(tr)[0];\n            if (!tr) {\n                return null;\n            }\n\n            var rows = this.tbody.children(),\n                classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                idx = tr.sectionRowIndex,\n                j, correctIdx;\n\n            correctIdx = idx;\n\n            for (j = 0; j < idx; j++) {\n                if (classesRegEx.test(rows[j].className)) {\n                    correctIdx--;\n                }\n            }\n\n            return this._data[correctIdx];\n        },\n\n        expandRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        collapseRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        _createHeaderCells: function(columns, rowSpan) {\n            var that = this,\n                idx,\n                th,\n                text,\n                html = \"\",\n                length,\n                title,\n                columnMenu = that.options.columnMenu,\n                sortable = that.options.sortable,\n                filterable = that._hasFilterMenu(),\n                messages = that.options.messages,\n                leafs = leafColumns(that.columns),\n                groups = that.dataSource.group(),\n                field;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                th = columns[idx].column || columns[idx];\n                text = that._headerCellText(th);\n                title = th.title;\n                field = \"\";\n\n                let index = inArray(th, leafs);\n                let currentTh = \"\";\n\n                if (th.selectable) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.draggable) {\n                    currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : \"\";\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.command) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += \">\" + text + \"</th>\";\n                } else {\n                    if (th.field) {\n                        field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                    }\n\n                    currentTh += \"<th scope='col' \" + field;\n                    if ((columnMenu && th.field && th.menu !== false)) {\n                        currentTh += \" aria-haspopup='menu'\";\n                    } else if (filterable && th.filterable !== false && !th.command) {\n                        currentTh += \" aria-haspopup='dialog'\";\n                    }\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (columns[idx].colSpan > 1) {\n                        currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    } else if (columns[idx].colSpan === 1) {\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    }\n\n                    if (title) {\n                        title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                        currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                    }\n\n                    if (th.groupable !== undefined$1) {\n                        currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                    }\n\n                    if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                        currentTh += \"title='\";\n                        currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                        currentTh += \"' \";\n                    }\n\n                    if (th.aggregates && th.aggregates.length) {\n                        currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += stringifyAttributes(th.headerAttributes);\n\n                    text = kendo.template(DEFAULTHEADERTEMPLATE)({ text: text });\n\n                    currentTh += \">\" + text + \"</th>\";\n                }\n                html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n            }\n            return html;\n        },\n\n        _appendLockedColumnContent: function() {\n            var columns = this.columns,\n                idx,\n                colgroup = this.table.find(\"colgroup\"),\n                cols = colgroup.find(COLGROUP),\n                length,\n                lockedCols = $(),\n                skipHiddenCount = 0,\n                container,\n                colSpan,\n                spanIdx,\n                colOffset = 0;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n\n                    if (isVisible(columns[idx])) {\n                        colSpan = 1;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    } else {\n                        skipHiddenCount ++;\n                    }\n                }\n            }\n\n            container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n            // detach is required for IE8, otherwise it switches to compatibility mode\n            colgroup.detach();\n            container.find(\"colgroup\").append(lockedCols);\n            colgroup.insertBefore(this.table.find(\"tbody\"));\n\n            this.lockedContent = container.insertBefore(this.content);\n            this.lockedTable = container.children(\"table\");\n            this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n        },\n\n        _appendLockedColumnFooter: function() {\n            var that = this;\n            var footer = that.footer;\n            var cells = footer.find(\".k-footer-template>td\");\n            var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n            var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n            var idx, length;\n            var groups = that._groups();\n            var lockedCells = $(), lockedCols = $();\n\n            html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n            lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n            for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                lockedCells = lockedCells.add(cells.eq(idx + groups));\n            }\n\n            lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n            for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                lockedCols = lockedCols.add(cols.eq(idx + groups));\n            }\n\n            lockedCells.appendTo(html.find(TR));\n            lockedCols.appendTo(html.find(\"colgroup\"));\n            that.lockedFooter = html.prependTo(footer);\n        },\n\n        _appendLockedColumnHeader: function(container) {\n            var that = this,\n                columns = this.columns,\n                idx,\n                html,\n                length,\n                colgroup,\n                tr,\n                trFilter,\n                table,\n                header,\n                filtercellCells,\n                rows = [],\n                skipHiddenCount = 0,\n                cols = $(),\n                hasFilterRow = that._hasFilterRow(),\n                filterCellOffset = 0,\n                filterCells = $(),\n                cell,\n                leafColumnsCount = 0,\n                cells = $();\n\n            colgroup = that.thead.prev().find(COLGROUP);\n            header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var colOffset = 0;\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                    cell = header.eq(idx);\n                    leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                    if (isVisible(columns[idx])) {\n                        var colSpan = null;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    }\n\n                    mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                    leafColumnsCount = leafColumnsCount || 1;\n                    for (var j = 0; j < leafColumnsCount; j++) {\n                        filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                    }\n                    filterCellOffset += leafColumnsCount;\n                }\n\n                if (columns[idx].columns) {\n                    skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                }\n\n                if (!isVisible(columns[idx])) {\n                    skipHiddenCount++;\n                }\n            }\n\n            if (rows.length) {\n                html = '<div class=\"k-grid-header-locked\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                table = $(html);\n\n                table.find('.k-grid-header-locked').css('width', '1px');\n\n                table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                colgroup = table.find(\"colgroup\");\n                colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                tr = table.find(\"thead tr:not(.k-filter-row)\");\n                for (idx = 0, length = rows.length; idx < length; idx++) {\n                    cells = toJQuery(rows[idx]);\n                    tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                }\n\n                var count = removeEmptyRows(this.thead);\n                if (rows.length < count) {\n                    removeRowSpanValue(table, count - rows.length);\n                }\n\n                trFilter = table.find(\".k-filter-row\");\n                trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                this.lockedHeader = table.prependTo(container);\n                this.thead.find(\".k-group-cell\").remove();\n\n                return true;\n            }\n            return false;\n        },\n\n        _removeLockedContainers: function() {\n            var elements = this.lockedHeader\n                .add(this.lockedContent)\n                .add(this.lockedFooter);\n\n            kendo.destroy(elements);\n            elements.off(NS).remove();\n\n            this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n            this.selectable = null;\n        },\n\n        _thead: function() {\n            var that = this,\n                columns = that.columns,\n                hasDetails = that._hasDetails() && columns.length,\n                hasFilterRow = that._hasFilterRow(),\n                idx,\n                html = \"\",\n                thead = that.table.find(\">thead\"),\n                hasTHead = that.element.find(\"thead\").first().length > 0,\n                headerContent = that.options.messages.expandCollapseColumnHeader,\n                tr;\n\n            if (!thead.length) {\n                thead = $(\"<thead/>\").insertBefore(that.tbody);\n            }\n\n            thead.addClass(\"k-table-thead\").attr(\"role\", \"rowgroup\");\n\n            if (that.lockedHeader && that.thead) {\n                tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                tr.remove();\n                tr = $();\n\n                that._removeLockedContainers();\n            } else if (hasTHead) {\n                tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n            } else {\n                tr = that.element.find(\"tr:has(th)\").first();\n            }\n\n            if (!tr.length) {\n                tr = thead.children().first();\n                if (!tr.length) {\n                   var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                   that._prepareColumns(rows, columns);\n\n                   for (idx = 0; idx < rows.length; idx++) {\n                       html += \"<tr class='k-table-row'>\";\n                       if (hasDetails) {\n                           html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                       }\n                       html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                       html += \"</tr>\";\n                   }\n\n                   tr = $(html);\n                   kendo.applyStylesFromKendoAttributes(tr, [\"display\", \"left\", \"right\"]);\n                }\n            } else {\n                for (idx = 0; idx < columns.length; idx++) {\n\t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n\t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n                    cell.addClass(\"k-table-th\");\n\t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n\t\t\t\t\t\tcell[0].style.display = NONE;\n\t\t\t\t\t}\n               }\n\n               that._updateHeadersAttr(childColumns(columns));\n\t\t\t}\n\n            if (hasFilterRow) {\n                var filterRow = $(\"<tr/>\");\n                filterRow.addClass(\"k-filter-row k-table-row\");\n                if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                    filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                }\n\n                var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                if (existingFilterRow.length) {\n                    kendo.destroy(existingFilterRow);\n                    existingFilterRow.remove();\n                }\n\n                thead.append(filterRow);\n            }\n\n            if (!tr.children().length) {\n                html = \"\";\n                if (hasDetails) {\n                    html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                }\n\n                html += that._createHeaderCells(columns);\n\n                tr.html(html);\n            } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n            }\n\n            tr.find(\"th\").addClass(\"k-header\");\n\n            if (!that.options.scrollable) {\n                thead.addClass(\"k-grid-header\");\n            }\n\n            tr.find(\"script\").remove().end().prependTo(thead);\n\n            if (that.thead) {\n                that._destroyColumnAttachments();\n            }\n\n            that.thead = thead;\n\n            that._sortable();\n\n            that._filterable();\n\n            that._filterRow();\n\n            that._scrollable();\n\n            that._columnMenu();\n\n            var syncHeight;\n            var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n            if (hasLockedColumns) {\n\n                syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                that._appendLockedColumnContent();\n\n                that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                if (kendo.support.touch) {\n                    that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                        move: function(e) {\n                            that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that._updateLockedCols();\n            }\n\n            that._updateCols();\n\n            that._updateColumnCellIndex();\n\n            that._updateFirstColumnClass();\n\n            that._resizable();\n\n            that._draggable();\n\n            that._reorderable();\n\n            that._updateHeader(that._groups());\n\n            that._updateStickyColumns();\n\n            if (hasLockedColumns) {\n                if (syncHeight) {\n                    that._syncLockedHeaderHeight();\n                }\n\n                that._applyLockedContainersWidth();\n            }\n\n            if (that.groupable) {\n                that._attachGroupable();\n            }\n        },\n\n        _retrieveFirstColumn: function(columns, rows) {\n            var result = $();\n\n            if (rows.length && columns[0]) {\n                var column = columns[0];\n\n                while (column.columns && column.columns.length) {\n                    column = column.columns[0];\n                    rows = rows.filter(\":not(:first)\");\n                }\n\n                result = result.add(rows);\n            }\n\n            return result;\n        },\n\n        _updateFirstColumnClass: function() {\n            var that = this,\n                columns = that.columns || [],\n                hasDetails = that._hasDetails() && columns.length;\n\n            if (!hasDetails && !that._groups()) {\n                var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                columns = nonLockedColumns(columns);\n\n                var rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that._isLocked()) {\n                    tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                    columns = lockedColumns(that.columns);\n\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function() {\n                    var ths = $(this).find(\"th\");\n                    ths.removeClass(\"k-first\");\n                    ths.eq(0).addClass(\"k-first\");\n                });\n            }\n        },\n\n        _prepareColumns: function(rows, columns, parentCell, parentRow) {\n            var row = parentRow || rows[rows.length - 1];\n\n            var childRow = rows[row.index + 1];\n            var totalColSpan = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                var cell = { column: columns[idx], colSpan: 0 };\n                row.cells.push(cell);\n\n                if (columns[idx].columns && columns[idx].columns.length) {\n                    if (!childRow) {\n                        childRow = { rowSpan: 0, cells: [], index: rows.length };\n                        rows.push(childRow);\n                    }\n                    cell.colSpan = columns[idx].columns.length;\n                    this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                    totalColSpan += cell.colSpan - 1;\n                    row.rowSpan = rows.length - row.index;\n                }\n            }\n            if (parentCell) {\n                parentCell.colSpan += totalColSpan;\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var content = this.content;\n\n            if (this.virtualScroll && this.virtualScroll.rows) {\n                content = this.virtualScrollable.verticalScrollbar;\n            }\n\n            var scrollTop = content.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta) {\n                if (content[0].scrollHeight > content[0].clientHeight &&\n                    (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                    content[0].scrollTop > 0 && delta > 0)) {\n                    e.preventDefault();\n                }\n\n                content.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _isLocked: function() {\n            return this.lockedHeader != null;\n        },\n\n        _updateHeaderCols: function() {\n            var table = this.thead.parent().add(this.table);\n\n            if (this._isLocked()) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n            }\n        },\n\n        _updateColumnSorters: function() {\n            var that = this;\n            var cells = leafDataCells(that.thead);\n            var columns = leafColumns(that.columns);\n            var column;\n            var cell;\n            var sorterInstance;\n\n            if (!that.options.sortable) {\n                return;\n            }\n\n            for (var idx = 0, length = cells.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (column.sortable !== false && !column.command && column.field) {\n                    cell = cells.eq(idx);\n\n                    sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                    if (sorterInstance) {\n                        sorterInstance.refresh();\n                    }\n                }\n            }\n        },\n\n        _updateHeadersAttr: function(columns) {\n            if (!columns.length) {\n                return;\n            }\n\n            var that = this;\n\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].headerAttributes) {\n                    var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                    th.attr(\"headers\", columns[i].headerAttributes.headers);\n                }\n            }\n\n            that._updateHeadersAttr(childColumns(columns));\n        },\n\n        _updateCols: function(table) {\n            table = table || this.thead.parent().add(this.table);\n\n            this._appendCols(table, this._isLocked());\n        },\n\n        _updateLockedCols: function(table) {\n            if (this._isLocked()) {\n                table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _appendCols: function(table, locked) {\n            if (locked) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _autoColumns: function(schema) {\n            if (schema && schema.toJSON) {\n                var that = this,\n                    field,\n                    encoded;\n\n                schema = schema.toJSON();\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                for (field in schema) {\n                    that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                }\n\n                that._thead();\n\n                that._templates();\n            }\n        },\n\n        _setRowCachedHeight: function(row, uid) {\n            var cachedHeights = this._cachedRowsHeight,\n                cachedHeight = cachedHeights[uid],\n                $row;\n\n            if (cachedHeight) {\n                $row = $(row);\n                $row[0].style.height = cachedHeight + \"px\";\n                row = $row.prop(\"outerHTML\");\n            }\n\n            return row;\n        },\n\n        _rowsHtml: function(data, templates) {\n            var that = this,\n                html = \"\",\n                idx,\n                rowTemplate = templates.rowTemplate,\n                altRowTemplate = templates.altRowTemplate,\n                cachedHeights = that._cachedRowsHeight,\n                length, row;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (that._skipRerenderItemsCount > 0) {\n                    that._skipRerenderItemsCount--;\n                } else {\n                    if (idx % 2) {\n                        row = altRowTemplate(data[idx]);\n                    } else {\n                        row = rowTemplate(data[idx]);\n                    }\n\n                    if (cachedHeights) {\n                        row = that._setRowCachedHeight(row, data[idx].uid);\n                    }\n\n                    html += row;\n                }\n                that._data.push(data[idx]);\n            }\n\n            return html;\n        },\n\n        _groupData: function(group, skipFooter, firstColumn) {\n            var that = this,\n                footerDefaults = that._groupAggregatesDefaultObject || {},\n                groupItems = group.items,\n                aggregates = extend({}, footerDefaults, group.aggregates),\n                headerData = extend({}, {\n                    field: group.field,\n                    value: group.value,\n                    items: groupItems,\n                    aggregates: aggregates\n                }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                footerData = {};\n\n            if (!skipFooter) {\n                for (var aggregate in aggregates) {\n                    footerData[aggregate] = extend({}, aggregates[aggregate],\n                        { group: { field: group.field, value: group.value, items: groupItems } }\n                    );\n                }\n            }\n            return extend({}, footerData, headerData);\n        },\n\n        _removeGroupIfEmpty: function(row) {\n            var that = this,\n                itemsCount,\n                subgroupsCount,\n                length = that.dataSource._group.length;\n\n            for (var i = 0; i < length; i++) {\n                row = row.prev();\n                itemsCount = +row.attr('data-group-item-count');\n                subgroupsCount = +row.attr('data-sub-group-count');\n\n                if (itemsCount == 1 || subgroupsCount == 1) {\n                    row.hide();\n                }\n\n            }\n        },\n\n        _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n            var that = this,\n                html = \"\",\n                idx,\n                length,\n                isLocked = that.lockedContent != null,\n                field = group.field,\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                firstColumn = visibleColumns(that.columns)[0],\n                firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                groupItems = group.currentItems || group.items,\n                groups = that._groups(),\n                groupFooterTemplate = templates.groupFooterTemplate,\n                groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                groupData,\n                isGroupPaged = that.dataSource._isGroupPaged(),\n                expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n            if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                expanded = true;\n            }\n\n            if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n            }\n            if (template && !skipColspan) {\n                text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n            }\n\n            if (!that._skipRerenderItemsCount) {\n                if (!group.excludeHeader) {\n                    html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                } else if (isLocked) {\n                    group.excludeHeader = isLockedTable ? false : true;\n                } else {\n                    group.excludeHeader = false;\n                }\n            } else {\n                groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            if (expanded) {\n                if (group.hasSubgroups) {\n                    for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                        html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                    }\n                } else {\n                    html += that._rowsHtml(groupItems, templates);\n                }\n            }\n\n            if (groupFooterTemplate) {\n\n                if (skipLastGroup) {\n                    if (!inArray(group.value, that._skippedGroups)) {\n                        that._skippedGroups.push(group.value);\n                    }\n                } else {\n                    if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                        that._skippedGroups.shift();\n                    }\n                    if (!that._skipRerenderItemsCount) {\n                        html += groupFooterTemplate(groupData);\n                    }\n                }\n            }\n            return html;\n        },\n\n        collapseGroup: function(group) {\n            var level,\n                that = this,\n                groupToCollapse = group,\n                groupable = this.options.groupable,\n                showFooter = groupable.showFooter,\n                footerCount = showFooter ? 0 : 1,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                tr;\n\n            group = $(group);\n            level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterCollapse;\n\n                that.dataSource._groupsState[groupUid] = false;\n                groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"collapseGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_DOWN).length) {\n                kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            }\n\n            group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n            group = group.nextAll(TR);\n\n            var toHide = [];\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    footerCount++;\n                } else if (tr.hasClass(\"k-group-footer\")) {\n                    footerCount--;\n                }\n\n                if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                    break;\n                }\n\n                if (relatedGroup.length) {\n                    toHide.push(relatedGroup[idx]);\n                }\n                toHide.push(tr[0]);\n            }\n\n            $(toHide).hide();\n\n            if (this.options.scrollable.endless && this.content) {\n                clearTimeout(that._collapseGroupsTimeOut);\n                that._collapseGroupsTimeOut = setTimeout(function() {\n                    that.content.scroll();\n                    that._groupToCollapse = groupToCollapse;\n                });\n            }\n        },\n\n        expandGroup: function(group) {\n                group = $(group);\n\n            var that = this,\n                showFooter = that.options.groupable.showFooter,\n                level,\n                tr,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                footersVisibility = [],\n                groupsCount = 1;\n\n                level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterExpand;\n\n                that.dataSource._groupsState[groupUid] = true;\n                if (groupObject.items && groupObject.items.length) {\n                    groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                }\n\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"expandGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_RIGHT).length) {\n                kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n            }\n\n            group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n            group = group.nextAll(TR);\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n                if (offset <= level) {\n                    break;\n                }\n\n                if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                    tr.show();\n                    relatedGroup.eq(idx).show();\n\n                    if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        that.expandGroup(tr);\n                    }\n\n                    if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        tr.next().show();\n                        relatedGroup.eq(idx + 1).show();\n                    }\n                }\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    if (showFooter) {\n                        footersVisibility.push(tr.is(\":visible\"));\n                    }\n                    groupsCount ++;\n                }\n\n                if (tr.hasClass(\"k-group-footer\")) {\n                    if (showFooter) {\n                        var toggleVisibility = footersVisibility.pop();\n                        tr.toggle(toggleVisibility);\n                        relatedGroup.eq(idx).toggle(toggleVisibility);\n                    }\n                    if (groupsCount == 1) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                    } else {\n                        groupsCount --;\n                    }\n                }\n            }\n\n            if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n            (!that.options.scrollable.endless && this._isLocked())) {\n                that._syncLockedContentHeight();\n            }\n        },\n\n        _updateHeader: function(groups) {\n            var that = this,\n                container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                rows = container.children(\"tr:not(:first)\").filter(function() {\n                    return !$(this).children(\":visible\").length;\n                });\n\n            if (groups > length) {\n                $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + encode(that.options.messages.expandCollapseColumnHeader) + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                if (that.element.is(\":visible\")) {\n                    rows.find(\"th.k-group-cell\").hide();\n                }\n            } else if (groups < length) {\n                container.find(TR).each(function() {\n                    $(this).find(\".k-group-cell\").eq(groups).remove();\n                    $(this).find(\".k-group-cell\").slice(groups).remove();\n                });\n            }\n            if (groups > filterCells) {\n                $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n            }\n        },\n\n        _firstDataItem: function(data, grouped) {\n            if (data && grouped) {\n                if (data.hasSubgroups) {\n                    data = this._firstDataItem(data.items[0], grouped);\n                } else {\n                    data = data.items[0];\n                }\n            }\n            return data;\n        },\n\n        _updateTablesWidth: function() {\n            var that = this,\n                tables;\n\n            if (!that._isLocked()) {\n                return;\n            }\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                .add(that.thead.parent())\n                .add(that.table);\n\n            that._footerWidth = tableWidth(tables.eq(0));\n            tables.width(that._footerWidth);\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                .add(that.lockedHeader.find(\">table\"))\n                .add(that.lockedTable);\n\n            tables.width(tableWidth(tables.eq(0)));\n        },\n\n        hideColumn: function(column) {\n            var that = this,\n                cell,\n                tables,\n                idx,\n                cols,\n                colWidth,\n                position,\n                width = 0,\n                headerCellIndex,\n                length,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                virtualScroll = that.virtualScroll || {},\n                columns = that.columns,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                columnIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnVisiblePosition(column, columns);\n\n                setColumnVisibility(column, false);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                   this.hideColumn(column.columns[idx]);\n                }\n\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n\n                return;\n            }\n\n            columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n            setColumnVisibility(column, false);\n\n            that._setParentsVisibility(column, false);\n\n            that._templates();\n\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnIndex;\n            if (that.lockedHeader && visibleLocked > columnIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= visibleLocked;\n            }\n\n            cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n            cell[0].style.display = NONE;\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNHIDE, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && visibleLocked > columnIndex) {\n                hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n            } else {\n                hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._syncLockedFooterHeight();\n            } else {\n                cols = that.thead.prev().find(\"col\");\n                for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n\n                    if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                that._footerWidth = null;\n\n                if (width) {\n                    tables.each(function() {\n                        this.style.width = width + PX;\n                    });\n\n                    that._footerWidth = width;\n                    that._setContentWidth();\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaAddHiddenColIndex();\n            that.trigger(COLUMNHIDE, { column: column });\n        },\n\n        _setParentsVisibility: function(column, visible) {\n            var that = this;\n            var columns = that.columns;\n            var idx;\n            var parents = [];\n            var parent;\n            var position;\n            var cell;\n            var colSpan;\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            var predicate = visible ?\n                function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n            if (columnParents(column, columns, parents) && parents.length) {\n                for (idx = parents.length - 1; idx >= 0; idx--) {\n                    parent = parents[idx];\n                    position = columnPosition(parent, columns);\n                    cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                    if (predicate(parent)) {\n                        setColumnVisibility(parent, visible);\n                        cell[0].style.display = visible ? \"\" : NONE;\n                    }\n\n                    if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                        colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                        cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                    }\n                }\n            }\n        },\n\n        _updateContentWidth: function() {\n            var that = this;\n            var tables = that.table.add(that.thead.parent());\n\n            tables.css({\n                width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n            });\n            that.refresh();\n        },\n\n        showColumn: function(column) {\n            var that = this,\n                idx,\n                length,\n                cell,\n                tables,\n                width,\n                headerCellIndex,\n                position,\n                colWidth,\n                cols,\n                columns = that.columns,\n                virtualScroll = that.virtualScroll || {},\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                columnIndex,\n                originalColumn,\n                columnLeafIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                columnIndex = column;\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            } else {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item.field === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            }\n\n            if (!column || isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnPosition(column, columns);\n                originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                setColumnVisibility(column, true);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                    if (!originalColumn.columns[idx].hidden) {\n                        this.showColumn(column.columns[idx]);\n                    }\n                }\n\n                that._ariaRemoveHiddenColIndex();\n                that.trigger(COLUMNSHOW, { column: column });\n\n                return;\n            }\n\n            columnLeafIndex = inArray(column, leafColumns(columns));\n\n            setColumnVisibility(column, true);\n\n            that._setParentsVisibility(column, true);\n\n            that._templates();\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnLeafIndex;\n            if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= lockedColumnsCount;\n            }\n\n            cell = leafDataCells(container).eq(headerCellIndex);\n            cell[0].style.display = \"\";\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNSHOW, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n            } else {\n                showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            } else {\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                if (!column.width) {\n                    tables.width(\"\");\n                } else {\n                    width = 0;\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth.indexOf(\"%\") > -1) {\n                            width = 0;\n                            break;\n                        }\n                        width += parseInt(colWidth, 10);\n                    }\n\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + PX;\n                        });\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaRemoveHiddenColIndex();\n            that.trigger(COLUMNSHOW, { column: column });\n        },\n\n        _columnVisibilitySetter: function(column) {\n            var col = column || {};\n\n            if (isUndefined(col.media)) {\n                return setColumnVisibility;\n            } else {\n                return setColumnMediaVisibility;\n            }\n        },\n\n\n        _buildSkeleton: function() {\n            var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n            var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n            var loaderHTML = \"\";\n            var colspan;\n            var groups = this._groups();\n            var columnsCount = visibleColumns.length + groups;\n\n            if (this._hasDetails()) {\n                columnsCount++;\n            }\n\n            if (this._hasVirtualColumns()) {\n                colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n            }\n\n            for (var i = 0; i < pageSize; i++) {\n                loaderHTML += \"<tr class='k-table-row'>\";\n                for (var j = 0; j < columnsCount; j++) {\n                    if (colspan && !j) {\n                        loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    } else {\n                        loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    }\n                }\n                loaderHTML += \"</tr>\";\n            }\n            return loaderHTML;\n        },\n\n        _progress: function(toggle) {\n            var element = this.element;\n            var endless = this.options.scrollable && this.options.scrollable.endless;\n            var loaderType = this.options.loaderType;\n            var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n            var skeleton;\n\n            if (isVirtualization) {\n                element = this.content;\n            } else if (this._editContainer && this._editMode() === \"popup\") {\n                element = this._editContainer;\n            } else if (this.lockedContent || endless) {\n                element = this.wrapper;\n            } else if (this.element.is(\"table\")) {\n                element = this.element.parent();\n            } else if (this.content && this.content.length) {\n                element = this.content;\n            }\n\n            if (loaderType == \"skeleton\") {\n                if (toggle) {\n                    skeleton = this._buildSkeleton();\n                        element.find(\"tbody\")\n                         .empty()\n                         .append(skeleton);\n                } else {\n                    element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                }\n            } else {\n                if (endless && toggle) {\n                    kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content.parent()[0].offsetTop, opacity: true });\n                } else {\n                    kendo.ui.progress(element, toggle);\n                }\n            }\n        },\n\n        _resize: function(size, force) {\n\n            this._syncLockedContentHeight();\n            this._syncLockedHeaderHeight();\n\n            if (this.content) {\n                this._setContentWidth();\n                this._setContentHeight();\n            }\n\n            if (this.lockedTable) {\n                this._syncLockedScroll();\n            }\n\n            if (this.virtualScrollable && (force || this._rowHeight)) {\n                if (force) {\n                    this._rowHeight = null;\n                }\n                this.virtualScrollable.repaintScrollbar();\n            }\n\n            if (this.pager && this.pager.element) {\n                this.pager.resize(force);\n            }\n\n            if (this._anyStickyColumns()) {\n                this._updateStickyColumns(false);\n            }\n        },\n\n        _isActiveInTable: function() {\n            var active = activeElement();\n\n            if (!active) { return false; }\n\n            return this.table[0] === active ||\n                $.contains(this.table[0], active) ||\n                (this._isLocked() &&\n                    (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                );\n        },\n\n        refresh: function(e) {\n            var that = this,\n                data = that.dataSource.view(),\n                navigatable = that.options.navigatable,\n                virtualScroll = that.virtualScroll || {},\n                currentIndex,\n                current = $(that.current()),\n                isCurrentInHeader = false,\n                groups = that._groups(),\n                colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                contentScrollLeft,\n                cachedItemsToSkip;\n\n            if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                    return;\n                }\n            }\n\n            if (that._shouldMapHights) {\n                that._mapCachedRowsHeight(\"get\", \"uid\");\n                that._shouldMapHights = false;\n            }\n\n            if (virtualScroll.columns) {\n                that._templates();\n            }\n\n            //someone remove the edited item\n            if (e && e.action === \"remove\" && that.editable &&\n                that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n            }\n\n            e = e || {};\n\n            if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (e.action === SYNC && that._isVirtualEditable()) {\n                that._destroyEditable();\n                that._clearEditableState();\n            }\n\n            if (!that._endlessFetchInProgress) {\n                if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                    isCurrentInHeader = current.is(\"th\");\n                    currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                }\n                that._destroyEditable();\n            }\n\n            if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                clearTimeout(that._progressTimeOut);\n                that._progressTimeOut = setTimeout(function() {\n                    if (!that._endlessFetchInProgress) {\n                        that._progress(false);\n                    }\n                }, 250);\n            } else {\n                 that._progress(false);\n            }\n\n            if (current.length) {\n                that._currentRowIndex = current.parent().index();\n            }\n\n            that._hideResizeHandle();\n\n            that._data = [];\n\n            if (!that.columns.length) {\n                that._autoColumns(that._firstDataItem(data[0], groups));\n                colspan = groups + that.columns.length;\n            }\n\n            that._group = groups > 0 || that._group;\n\n            if (that._group) {\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                if (!that._virtualColScroll) {\n                    that._updateHeader(groups);\n                }\n                that._group = groups > 0;\n                that._groupRows = groupRows(data);\n            }\n\n            if (that.content) {\n                contentScrollLeft = kendo.scrollLeft(that.content);\n            }\n            cachedItemsToSkip = that._skipRerenderItemsCount;\n            that._renderContent(data, colspan, groups);\n            if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                that._skipRerenderItemsCount = cachedItemsToSkip;\n            }\n            that._renderLockedContent(data, colspan, groups);\n\n            if (!that._virtualColScroll) {\n                that._footer();\n\n                that._renderNoRecordsContent();\n\n                that._togglePagerVisibility();\n\n                that._setContentHeight();\n\n                that._setContentWidth(that.content && contentScrollLeft);\n            }\n\n            if (that.lockedTable) {\n                //requires manual trigger of scroll to sync both tables\n                if (virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                } else if (that.touchScroller) {\n                    that.touchScroller.movable.trigger(\"change\");\n                } else {\n                    that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                    that.content.trigger(\"scroll\");\n                }\n            }\n\n            if (!that._endlessFetchInProgress && !that._rowDropping) {\n                that._restoreCurrent(currentIndex, isCurrentInHeader);\n            }\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            }\n\n            if (that.selectable) {\n                that.selectable.resetTouchEvents();\n            }\n\n            if (that._checkBoxSelection) {\n                that._toggleHeaderCheckState(false);\n            }\n\n            if (that.options.persistSelection &&\n                ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                (that.items().length || that.dataSource._isGroupPaged())) {\n                that._restoreSelection();\n            }\n\n            if (!that.options.persistSelection) {\n                that._selectedIds = {};\n            }\n\n            if (that._hasReorderableRows()) {\n                that._draggableRows();\n                that._reorderableRows();\n            }\n\n            that._aria();\n\n            that.trigger(DATABOUND);\n       },\n\n        _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n            if (currentIndex === undefined$1 || currentIndex < 0) {\n                return;\n            }\n\n            this._removeCurrent();\n\n            if (isCurrentInHeader) {\n                this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex));\n            } else {\n                var rowIndex = 0;\n                var virtualScroll = this.virtualScroll || {};\n\n                if (this._rowVirtualIndex) {\n                    if (virtualScroll.rows) {\n                        rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                    } else {\n                        rowIndex = this._rowVirtualIndex;\n                    }\n                } else if (this._currentRowIndex) {\n                    rowIndex = this._currentRowIndex;\n                } else {\n                    currentIndex = 0;\n                }\n\n                var row = $();\n                var colspan;\n\n                if (this.lockedTable) {\n                    row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                }\n                row = row.add(this.tbody.children().eq(rowIndex));\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                    currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                }\n\n\n                var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                    .eq(currentIndex);\n\n                if (!td.length || currentIndex < 0) {\n                    return;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    this._setCurrent(td, true, true);\n                } else {\n                    this._setCurrent(td);\n                }\n\n            }\n\n            if (this._current) {\n                focusTable(this.table, true);\n            }\n        },\n\n        _restoreSelection: function() {\n            var that = this,\n                allRows = that.items(),\n                selectedRows,\n                id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n            selectedRows = grep(allRows, function(row) {\n                 var dataItemKey = that.dataItem(row)[id];\n                 if (that._selectedIds[dataItemKey]) {\n                    return row;\n                 }\n            });\n\n            that.select(selectedRows);\n        },\n\n       _cleanupDetailItems: function() {\n           var that = this;\n\n           if (that._hasDetails()) {\n               that.tbody.find(\".k-detail-cell\").empty();\n           }\n       },\n\n       _renderContent: function(data, colspan, groups) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                isLocked = that.lockedContent != null,\n                endlessAppend = null,\n                skipLastGroup,\n                flatViewLength,\n                scrollable = that.options.scrollable,\n                templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n            if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                that._skipRerenderItemsCount = 0;\n                if (that.content) {\n                    that.content[0].scrollTop = 0;\n                }\n            }\n            endlessAppend = that._skipRerenderItemsCount > 0;\n            colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n            if (groups > 0) {\n\n                colspan = isLocked ? colspan - groups : colspan;\n\n                if (that.detailTemplate) {\n                    colspan++;\n                }\n\n                if (that.groupFooterTemplate) {\n                    that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                }\n                if (that.options.scrollable.endless) {\n                    flatViewLength = that.dataSource.flatView().length;\n                }\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (!that._skippedGroups) {\n                        that._skippedGroups = [];\n                    }\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                    html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                }\n            } else {\n                html += that._rowsHtml(data, templates);\n            }\n\n            if (endlessAppend) {\n                that.tbody.append(html);\n                kendo.applyStylesFromKendoAttributes(that.tbody, [\"display\", \"left\", \"right\"]);\n                clearTimeout(that._endlessFetchTimeOut);\n                that._endlessFetchTimeOut = setTimeout(function() {\n                    if (that._groupToCollapse) {\n                        that.collapseGroup(that._groupToCollapse);\n                        that._groupToCollapse = null;\n                    }\n                });\n                that._endlessFetchInProgress = null;\n            } else {\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.size);\n            }\n       },\n\n       _renderGroupRows: function() {\n        var that = this,\n        data = that._groupRows,\n        groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n        groups = that._groups(),\n        groupRowBuilderFunc,\n        isLocked = that.lockedContent != null,\n        columns,\n        colspan,\n        group,\n        field,\n        column,\n        template,\n        text,\n        groupHeaderData,\n        tableContainer,\n        isInLockedContainer,\n        prevElement,\n        newGroupRowElement,\n        currentRow,\n        level,\n        groupHeaderColumnTemplate,\n        firstColumnGroupData;\n\n        groupRows.each(function(index, row) {\n            currentRow = $(row);\n            tableContainer = currentRow.closest(\"table\").parent();\n            isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n            columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n            level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n            if (isLocked) {\n                groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n            }\n            else {\n                groupRowBuilderFunc = groupRowBuilder;\n                colspan = columns.length + groups - level;\n            }\n\n            group = index >= data.length ? data[index - data.length] : data[index];\n            field = group.field;\n            column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n            firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n            template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n            text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n            groups = groups;\n            groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n            groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n            if (template) {\n                text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n            }\n\n            prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n            newGroupRowElement = $(groupHeaderColumnTemplate ?\n                groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n            );\n\n            kendo.applyStylesFromKendoAttributes(newGroupRowElement, [\"display\", \"left\", \"right\"]);\n\n            if (prevElement.is(\"tbody\")) {\n                prevElement.prepend(newGroupRowElement);\n            }\n            else {\n                prevElement.after(newGroupRowElement);\n            }\n                currentRow.remove();\n           });\n       },\n\n       _renderLockedContent: function(data, colspan, groups) {\n           var html = \"\",\n               idx,\n               length,\n               skipLastGroup,\n               endlessAppend = null,\n               flatViewLength,\n               templates = {\n                   rowTemplate: this.lockedRowTemplate,\n                   altRowTemplate: this.lockedAltRowTemplate,\n                   groupFooterTemplate: this.lockedGroupFooterTemplate,\n                   groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n               };\n\n           if (this.lockedContent) {\n\n               var table = this.lockedTable;\n               endlessAppend = this._skipRerenderItemsCount > 0;\n\n               if (groups > 0) {\n                   colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                   if (this.options.scrollable.endless) {\n                     flatViewLength = this.dataSource.flatView().length;\n                   }\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                    html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                   }\n               } else {\n                   html = this._rowsHtml(data, templates);\n               }\n\n               if (endlessAppend) {\n                   table.children(\"tbody\").append(html);\n               } else {\n                   appendContent(table.children(\"tbody\"), table, html, this.options.size);\n               }\n\n               this._syncLockedContentHeight();\n           }\n       },\n\n       _togglePagerVisibility: function() {\n           if (this.options.pageable.alwaysVisible === false) {\n                this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n            }\n       },\n\n       _adjustRowsHeight: function(table1, table2) {\n           var rows = table1[0].rows,\n               length = rows.length,\n               idx,\n               rows2 = table2[0].rows,\n               containers = table1.add(table2),\n               containersLength = containers.length,\n               heights = [];\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               if (rows[idx].style.height) {\n                   rows[idx].style.height = rows2[idx].style.height = \"\";\n               }\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               var offsetHeight1 = rows[idx].offsetHeight;\n               var offsetHeight2 = rows2[idx].offsetHeight;\n               var height = 0;\n\n               if (offsetHeight1 > offsetHeight2) {\n                   height = offsetHeight1;\n               } else if (offsetHeight1 < offsetHeight2) {\n                   height = offsetHeight2;\n               }\n\n               heights.push(height);\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = NONE;\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (heights[idx]) {\n                   //add one to resolve row misalignment in IE\n                   rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n               }\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = \"\";\n           }\n       }\n   });\n\n   if (kendo.ExcelMixin) {\n       kendo.ExcelMixin.extend(Grid.prototype);\n   }\n\n   if (kendo.PDFMixin) {\n       kendo.PDFMixin.extend(Grid.prototype);\n\n       Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n           var grid = this;\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n           var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n           var cont = $(\"<div>\")\n               .css({ position: \"absolute\", left: -10000, top: -10000 });\n           var clone;\n\n           grid.toggleUnexportableColumns(grid.columns);\n           clone = grid.wrapper.clone().css({\n               height: AUTO, width: AUTO\n           }).appendTo(cont);\n           clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n           clone.find('> table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n           clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n           clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n           this._initPDFProgress(progress);\n\n           var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.one(\"change\", draw);\n                   dataSource.page(startingPage);\n               } else {\n                   grid.refresh();\n                   draw();\n               }\n           }\n\n           function draw() {\n               cont.appendTo(document.body);\n               var options = $.extend({}, grid.options.pdf, {\n                   _destructive: true,\n                   progress: function(p) {\n                       progress.notify({\n                           page: p.page,\n                           pageNumber: p.pageNum,\n                           progress: 0.5 + p.pageNum / p.totalPages / 2,\n                           totalPages: p.totalPages\n                       });\n                   }\n               });\n               kendo.drawing.drawDOM(clone, options)\n                   .always(function() {\n                       cont.remove();\n                   })\n                   .then(function(group) {\n                       result.resolve(group);\n                       grid.toggleUnexportableColumns(grid.columns, true);\n                   })\n                   .fail(function(err) {\n                       result.reject(err);\n                   });\n           }\n\n           function renderPage() {\n               var pageNum = dataSource.page();\n               var totalPages = allPages ? dataSource.totalPages() : 1;\n               body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n               if (pageNum < totalPages) {\n                   dataSource.page(pageNum + 1);\n               } else {\n                   dataSource.unbind(\"change\", renderPage);\n                   resolve();\n               }\n           }\n\n           if (allPages) {\n               dataSource.bind(\"change\", renderPage);\n               dataSource.page(1);\n           } else {\n               renderPage();\n           }\n\n           return result.promise();\n       };\n\n       Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n           var length = columns.length;\n           var column;\n           var exportable;\n           var visibleInExport;\n           var visibleInExportOnly;\n\n           for (var i = 0; i < length; i++) {\n               column = columns[i];\n               exportable = column.exportable;\n               if (!restore) {\n                   if (typeof column.exportable === \"object\") {\n                       exportable = column.exportable.pdf;\n                   }\n\n                   visibleInExport = !column.hidden && exportable !== false;\n                   visibleInExportOnly = column.hidden && exportable === true;\n                   exportable = visibleInExport || visibleInExportOnly;\n\n                   if (!exportable && !column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.hideColumn(column);\n                   } else if (exportable && column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.showColumn(column);\n                   } else if (exportable && column.columns) {\n                       this.toggleUnexportableColumns(column.columns);\n                   }\n               } else {\n                   if (column._toggledDuringExport) {\n                       column._toggledDuringExport = false;\n\n                       if (column.hidden) {\n                           this.showColumn(column);\n                       } else {\n                           this.hideColumn(column);\n                       }\n                   } else if (column.columns) {\n                       this.toggleUnexportableColumns(column.columns, restore);\n                   }\n               }\n           }\n       };\n\n       Grid.prototype._drawPDF = function(progress) {\n           var grid = this;\n\n           if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n               return grid._drawPDF_autoPageBreak(progress);\n           }\n\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n\n           this._initPDFProgress(progress);\n\n           // This group will be our document containing all pages\n           var doc = new kendo.drawing.Group();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.unbind(\"change\", exportPage);\n                   dataSource.one(\"change\", function() {\n                       result.resolve(doc);\n                   });\n\n                   dataSource.page(startingPage);\n               } else {\n                   result.resolve(doc);\n               }\n           }\n\n           function exportPage() {\n                grid.toggleUnexportableColumns(grid.columns);\n                grid._drawPDFShadow({\n                    width: grid.wrapper.width()\n                }, {\n                    avoidLinks: grid.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                    var args = {\n                        page: group,\n                        pageNumber: pageNum,\n                        progress: pageNum / totalPages,\n                        totalPages: totalPages\n                    };\n\n                    grid.toggleUnexportableColumns(grid.columns, true);\n                    progress.notify(args);\n                    doc.append(args.page);\n\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        resolve();\n                    }\n                })\n                .fail(function(err) {\n                    result.reject(err);\n                });\n            }\n\n            if (allPages) {\n                dataSource.bind(\"change\", exportPage);\n                dataSource.page(1);\n            } else {\n                exportPage();\n            }\n\n            return result.promise();\n        };\n\n        Grid.prototype._initPDFProgress = function(deferred) {\n           var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n           loading.prepend(this.wrapper.clone().css({\n               position: \"absolute\", top: 0, left: 0\n           }));\n\n           this._pdfInitialized = true;\n           this.wrapper.append(loading);\n\n           var pb = $(\"<div class='k-loading-pdf-progress'>\")\n           .appendTo(loading)\n           .kendoProgressBar({\n               type: \"chunk\",\n               chunkCount: 10,\n               min: 0,\n               max: 1,\n               value: 0\n           }).data(\"kendoProgressBar\");\n\n           deferred.progress(function(e) {\n               pb.value(e.progress);\n           })\n           .always(function() {\n               kendo.destroy(loading);\n               loading.remove();\n           });\n        };\n   }\n\n   function syncTableHeight(table1, table2) {\n       table1 = table1[0];\n       table2 = table2[0];\n\n       if (table1.rows.length !== table2.rows.length) {\n           var lockedHeigth = table1.offsetHeight;\n           var tableHeigth = table2.offsetHeight;\n\n           var row;\n           var diff;\n           if (lockedHeigth > tableHeigth) {\n               row = table2.rows[table2.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table2.rows[table2.rows.length - 2];\n               }\n\n               diff = lockedHeigth - tableHeigth;\n           } else {\n               row = table1.rows[table1.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table1.rows[table1.rows.length - 2];\n               }\n\n               diff = tableHeigth - lockedHeigth;\n           }\n           row.style.height = row.offsetHeight + diff + PX;\n       }\n   }\n\n   function adjustRowHeight(row1, row2) {\n       var height;\n       var offsetHeight1 = row1.offsetHeight;\n       var offsetHeight2 = row2.offsetHeight;\n\n       if (offsetHeight1 > offsetHeight2) {\n           height = offsetHeight1 + PX;\n       } else if (offsetHeight1 < offsetHeight2) {\n           height = offsetHeight2 + PX;\n       }\n\n       if (height) {\n           row1.style.height = row2.style.height = height;\n       }\n   }\n\n   function getCommand(commands, name) {\n       var idx, length, command;\n\n       if (typeof commands === STRING && commands === name) {\n          return commands;\n       }\n\n       if (isPlainObject(commands) && commands.name === name) {\n           return commands;\n       }\n\n       if (isArray(commands)) {\n           for (idx = 0, length = commands.length; idx < length; idx++) {\n               command = commands[idx];\n\n               if ((typeof command === STRING && command === name) || (command.name === name)) {\n                   return command;\n               }\n           }\n       }\n       return null;\n   }\n\n   function compareElements(element, toCompare) {\n       if (element.length !== toCompare.length) {\n           return false;\n       }\n\n       for (var i = 0; i < element.length; i++) {\n           if (element[i] !== toCompare[i]) {\n               return false;\n           }\n       }\n\n       return true;\n   }\n\n   function focusTable(table, direct) {\n       if (!table || table.length === 0) {\n           return;\n       }\n\n       if (direct === true) {\n           table = $(table);\n           var scrollLeft = kendo.scrollLeft(table.parent());\n\n            kendo.focusElement(table);\n            kendo.scrollLeft(table.parent(), scrollLeft);\n        } else {\n            $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n        }\n    }\n\n   function isColumnGroupable(grid, column) {\n       return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n   }\n\n   function isGroupedBy(groups, field) {\n       return !!$.grep(groups, function(item) {\n           return item.field === field;\n       }).length;\n   }\n\n   function isColumnEditable(column, model) {\n       if (!column.field || column.selectable) {\n           return false;\n       }\n       if (model.editable && !model.editable(column.field)) {\n           return false;\n       }\n       if (column.editable && !column.editable(model)) {\n           return false;\n       }\n       return true;\n   }\n\n   function isInputElement(element) {\n       return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n   }\n\n    function tableClick(e) {\n        var that = this,\n            currentTarget = $(e.currentTarget),\n            isHeader = currentTarget.is(\"th\"),\n            table = this.table.add(this.lockedTable),\n            headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n            isInput = isInputElement(e.target),\n            preventScroll = $(e.target).is('.k-checkbox'),\n            target = $(e.target),\n            currentTable = currentTarget.closest(\"table\")[0];\n\n        if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n            this._setCurrent(currentTarget);\n            return;\n        }\n\n        if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n            return;\n        }\n\n        if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n            return;\n        }\n\n        if (this.options.navigatable) {\n            this._setCurrent(currentTarget, false, preventScroll);\n        }\n\n        if (isHeader || !isInput) {\n            setTimeout(function() {\n                var activeEl = $(kendo._activeElement());\n                if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                    return;\n                }\n\n                //Only if input element is not selected yet and it is not descendant of the grid's table\n                if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                    //DOMElement.focus() only for header, because IE doesn't really focus the table\n                    focusTable(that.table[0], true);\n                }\n            });\n        }\n\n        if (isHeader && !kendo.support.touch) {\n            e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n        }\n    }\n\n   function leftMostPosition(element, rtl) {\n       if (!rtl) {\n           return 0;\n       }\n\n       var result = 0;\n\n       if (kendo.support.browser.webkit) {\n           result = element.width();\n       }\n\n       return result;\n   }\n\n   function parseVirtualSettings(options) {\n        var asLowerString;\n\n        if (typeof options === \"string\") {\n            asLowerString = options.toLowerCase();\n            if (asLowerString === \"true\") {\n                return {\n                    rows: true\n                };\n            } else {\n                return {\n                    rows: asLowerString.indexOf(\"rows\") > -1,\n                    columns: asLowerString.indexOf(\"columns\") > -1\n                };\n            }\n\n        } else if (options === true) {\n            return {\n                rows: true\n            };\n        }\n   }\n\n   function isElementVisibleInWrapper(wrapper, element) {\n       var offsetTop;\n       var halfHeight;\n\n       if (!wrapper) {\n         return false;\n       }\n\n       element = $(element);\n\n       if (element[0] && contains(wrapper[0], element[0])) {\n           offsetTop = element.offset().top - wrapper.offset().top;\n           halfHeight = element.outerHeight() / 2;\n\n           if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n               return true;\n           }\n       }\n\n       return false;\n   }\n\n   function isInEdit(cell) {\n       return cell &&\n           (cell.hasClass(\"k-edit-cell\") ||\n            cell.parent().hasClass(\"k-grid-edit-row\"));\n   }\n\n    function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n        var html;\n\n        if (groupHeaderColumnTemplate) {\n            html = groupHeaderColumnTemplate(extend({}, groupData, {\n                groupCells: level,\n                colspan: templateColspan,\n                text: text\n            }));\n        } else {\n            html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n        }\n\n        return html;\n    }\n\n   function groupCellBuilder(headerTemplateIndex) {\n    return ({ colspan, text }) => `<td class=\"k-table-td\" colspan=\"${colspan + headerTemplateIndex}\">` +\n    '<p class=\"k-reset\">' +\n        kendo.ui.icon($(`<a href=\"\\\\#\" tabindex=\"-1\" ${ARIA_LABEL}=\"${COLLAPSE}\"></a>`), { icon: \"caret-alt-down\" }) + text +\n    `</p></td>${new Array(colspan + headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\")}`;\n   }\n\n   function groupCellLockedContentBuilder(headerTemplateIndex) {\n    return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n    `<p class=\"k-reset\">&nbsp;</p></td>${new Array(headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\")}`;\n   }\n\n   function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n    return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n        '<p class=\"k-reset\">' +\n        kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : `caret-alt-${isRtl ? 'left' : 'right'}`) }) + text +\n    `</p></td>${new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")}</tr>`;\n   }\n\n   function groupRowLockedContentBuilder(colspan) {\n    return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n        `<p class=\"k-reset\">&nbsp;</p></td>${new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")}</tr>`;\n   }\n\n   function toggleRow(row, visible) {\n       row = $(row)[0];\n       if (visible) {\n           row.style.display = \"\";\n       } else {\n           row.style.display = NONE;\n       }\n   }\n\n   function htmlEncode(value, backslashEscapeQuotes) {\n       var ampRegExp = /&/g,\n           ltRegExp = /</g,\n           quoteRegExp = /\"/g,\n           aposRegExp = /'/g,\n           gtRegExp = />/g;\n\n       return (\"\" + value)\n           .replace(ampRegExp, \"&amp;\")\n           .replace(ltRegExp, \"&lt;\")\n           .replace(gtRegExp, \"&gt;\")\n           .replace(quoteRegExp, function(match) {\n               if (backslashEscapeQuotes) {\n                   return \"\\\\\" + match;\n               }\n               return \"&quot;\";\n           })\n           .replace(aposRegExp, \"&#39;\");\n   }\n\n   function getTitle(field, columns) {\n        return columns.filter(function(col) {\n            return col.field === field;\n        })[0].title || field;\n    }\n\n    function exportDataSort(a, b) {\n        return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n    }\n\n    function isExcelExportableColumn(column) {\n        return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n    }\n\n   ui.plugin(Grid);\n   ui.plugin(VirtualScrollable);\n\n   extend(kendo.ui.grid, {\n       defaultBodyContextMenu: defaultBodyContextMenu,\n       defaultHeadContextMenu: defaultHeadContextMenu,\n       defaultGroupsContextMenu: defaultGroupsContextMenu\n   });\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}